require=function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n||e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){!function(e,t){function n(t,n){var r,o,a,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,o=r.name,!(!t.href||!o||"map"!==r.nodeName.toLowerCase())&&(!!(a=e("img[usemap=#"+o+"]")[0])&&i(a))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,r=e(this[0]);r.length&&r[0]!==document;){if(("absolute"===(n=r.css("position"))||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,o){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){e(this).css(o,i(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0||(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(e("jquery"))},{jquery:"jquery"}],2:[function(e,t,n){var i=e("jquery");e("./widget"),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,r=1===t.which,o=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(r&&!o&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(i)},{"./widget":4,jquery:"jquery"}],3:[function(e,t,n){var i=e("jquery");e("./core"),e("./mouse"),e("./widget"),function(e,t){function n(e,t,n){return e>t&&e<t+n}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||i(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,o.widgetName+"-item")===o)return i=e(this),!1}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),!!i&&(!(this.options.handle&&!n&&(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,i){var r,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===r||e.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],r))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,u=this.offset.click.left,f="x"===this.options.axis||i+c>s&&i+c<l,d="y"===this.options.axis||t+u>o&&t+u<a,h=f&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&i,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return!!r&&(this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){s.push(this)}var i,r,o,a,s=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(r=(o=e(c[i])).length-1;r>=0;r--)(a=e.data(o[r],this.widgetFullName))&&a!==this&&!a.options.disabled&&l.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,a,s,l,c,u=this.items,f=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(i=(r=e(d[n])).length-1;i>=0;i--)(o=e.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(f.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=f.length-1;n>=0;n--)for(a=f[n][1],i=0,c=(s=f[n][0]).length;i<c;i++)(l=e(s[i])).data(this.widgetName+"-item",a),u.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)(i=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){n&&!i.forcePlaceholderSize||(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var r,o,a,s,l,c,u,f,d,h,p=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(p&&e.contains(this.containers[r].element[0],p.element[0]))continue;p=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(a=1e4,s=null,l=(h=p.floating||i(this.currentItem))?"left":"top",c=h?"width":"height",u=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(h&&!n(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height)||(f=this.items[o].item.offset()[l],d=!1,Math.abs(f-u)>Math.abs(f+this.items[o][c]-u)&&(d=!0,f+=this.items[o][c]),Math.abs(f-u)<a&&(a=Math.abs(f-u),s=this.items[o],this.direction=d?"up":"down")));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(i)},{"./core":1,"./mouse":2,"./widget":4,jquery:"jquery"}],4:[function(e,t,n){!function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(e){}r(t)},e.widget=function(t,n,i){var r,o,a,s,l={},c=t.split(".")[0];t=t.split(".")[1],r=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},o=e[c][t],a=e[c][t]=function(e,t){if(!this._createWidget)return new a(e,t);arguments.length&&this._createWidget(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,function(t,i){e.isFunction(i)?l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}():l[t]=i}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},l,{constructor:a,namespace:c,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(t){for(var n,r,o=i.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])r=o[a][n],o[a].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=i.call(arguments,1),l=this;return o=!a&&s.length?e.widget.extend.apply(null,[o].concat(s)):o,a?this.each(function(){var n,i=e.data(this,r);return i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(o||{})._init():e.data(this,r,new n(o,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(r=a[t]=e.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.delegate(u,c,s):n.bind(c,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?!0===r||"number"==typeof r?n:r.effect||n:t;"number"==typeof(r=r||{})&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(e("jquery"))},{jquery:"jquery"}],5:[function(e,t,n){var i=n;i.bignum=e("bn.js"),i.define=e("./asn1/api").define,i.base=e("./asn1/base"),i.constants=e("./asn1/constants"),i.decoders=e("./asn1/decoders"),i.encoders=e("./asn1/encoders")},{"./asn1/api":6,"./asn1/base":8,"./asn1/constants":12,"./asn1/decoders":14,"./asn1/encoders":17,"bn.js":20}],6:[function(e,t,n){function i(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}var r=e("../asn1"),o=e("inherits");n.define=function(e,t){return new i(e,t)},i.prototype._createNamed=function(t){var n;try{n=e("vm").runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){n=function(e){this._initNamed(e)}}return o(n,t),n.prototype._initNamed=function(e){t.call(this,e)},new n(this)},i.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r.decoders[e])),this.decoders[e]},i.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},i.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r.encoders[e])),this.encoders[e]},i.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},{"../asn1":5,inherits:117,vm:178}],7:[function(e,t,n){function i(e,t){a.call(this,t),s.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function r(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof r||(e=new r(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=s.byteLength(e);else{if(!s.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}var o=e("inherits"),a=e("../base").Reporter,s=e("buffer").Buffer;o(i,a),n.DecoderBuffer=i,i.prototype.save=function(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},i.prototype.restore=function(e){var t=new i(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,a.prototype.restore.call(this,e.reporter),t},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},i.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var n=new i(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},i.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},n.EncoderBuffer=r,r.prototype.join=function(e,t){return e||(e=new s(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):s.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},{"../base":8,buffer:52,inherits:117}],8:[function(e,t,n){var i=n;i.Reporter=e("./reporter").Reporter,i.DecoderBuffer=e("./buffer").DecoderBuffer,i.EncoderBuffer=e("./buffer").EncoderBuffer,i.Node=e("./node")},{"./buffer":7,"./node":9,"./reporter":10}],9:[function(e,t,n){function i(e,t){var n={};this._baseState=n,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var r=e("../base").Reporter,o=e("../base").EncoderBuffer,a=e("../base").DecoderBuffer,s=e("minimalistic-assert"),l=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(l);t.exports=i;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];i.prototype.clone=function(){var e=this._baseState,t={};u.forEach(function(n){t[n]=e[n]});var n=new this.constructor(t.parent);return n._baseState=t,n},i.prototype._wrap=function(){var e=this._baseState;c.forEach(function(t){this[t]=function(){var n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}},this)},i.prototype._init=function(e){var t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),s.equal(t.children.length,1,"Root node can have only one child")},i.prototype._useArgs=function(e){var t=this._baseState,n=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==n.length&&(s(null===t.children),t.children=n,n.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(n){n==(0|n)&&(n|=0);var i=e[n];t[i]=n}),t}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(e){i.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),l.forEach(function(e){i.prototype[e]=function(){var t=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(n),this}}),i.prototype.use=function(e){s(e);var t=this._baseState;return s(null===t.use),t.use=e,this},i.prototype.optional=function(){return this._baseState.optional=!0,this},i.prototype.def=function(e){var t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},i.prototype.explicit=function(e){var t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},i.prototype.implicit=function(e){var t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},i.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},i.prototype.key=function(e){var t=this._baseState;return s(null===t.key),t.key=e,this},i.prototype.any=function(){return this._baseState.any=!0,this},i.prototype.choice=function(e){var t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},i.prototype.contains=function(e){var t=this._baseState;return s(null===t.use),t.contains=e,this},i.prototype._decode=function(e,t){var n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));var i=n.default,r=!0,o=null;if(null!==n.key&&(o=e.enterKey(n.key)),n.optional){var s=null;if(null!==n.explicit?s=n.explicit:null!==n.implicit?s=n.implicit:null!==n.tag&&(s=n.tag),null!==s||n.any){if(r=this._peekTag(e,s,n.any),e.isError(r))return r}else{f=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),r=!0}catch(e){r=!1}e.restore(f)}}var l;if(n.obj&&r&&(l=e.enterObject()),r){if(null!==n.explicit){var c=this._decodeTag(e,n.explicit);if(e.isError(c))return c;e=c}var u=e.offset;if(null===n.use&&null===n.choice){if(n.any)var f=e.save();var d=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(d))return d;n.any?i=e.raw(f):e=d}if(t&&t.track&&null!==n.tag&&t.track(e.path(),u,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),i=n.any?i:null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),e.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(n){n._decode(e,t)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var h=new a(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(h,t)}}return n.obj&&r&&(i=e.leaveObject(l)),null===n.key||null===i&&!0!==r?null!==o&&e.exitKey(o):e.leaveKey(o,n.key,i),i},i.prototype._decodeGeneric=function(e,t,n){var i=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,i.args&&i.args[0],n):null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},i.prototype._getUse=function(e,t){var n=this._baseState;return n.useDecoder=this._use(e,t),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},i.prototype._decodeChoice=function(e,t){var n=this._baseState,i=null,r=!1;return Object.keys(n.choice).some(function(o){var a=e.save(),s=n.choice[o];try{var l=s._decode(e,t);if(e.isError(l))return!1;i={type:o,value:l},r=!0}catch(t){return e.restore(a),!1}return!0},this),r?i:e.error("Choice not matched")},i.prototype._createEncoderBuffer=function(e){return new o(e,this.reporter)},i.prototype._encode=function(e,t,n){var i=this._baseState;if(null===i.default||i.default!==e){var r=this._encodeValue(e,t,n);if(void 0!==r&&!this._skipDefault(r,t,n))return r}},i.prototype._encodeValue=function(e,t,n){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new r);l=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}var o=null,a=!1;if(i.any)l=this._createEncoderBuffer(e);else if(i.choice)l=this._encodeChoice(e,t);else if(i.contains)o=this._getUse(i.contains,n)._encode(e,t),a=!0;else if(i.children)o=i.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");var i=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var r=n._encode(e[n._baseState.key],t,e);return t.leaveKey(i),r},this).filter(function(e){return e}),o=this._createEncoderBuffer(o);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var s=this.clone();s._baseState.implicit=null,o=this._createEncoderBuffer(e.map(function(n){var i=this._baseState;return this._getUse(i.args[0],e)._encode(n,t)},s))}else null!==i.use?l=this._getUse(i.use,n)._encode(e,t):(o=this._encodePrimitive(i.tag,e),a=!0);var l;if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,u=null===i.implicit?"universal":"context";null===c?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(l=this._encodeComposite(c,a,u,o))}return null!==i.explicit&&(l=this._encodeComposite(i.explicit,!1,"context",l)),l},i.prototype._encodeChoice=function(e,t){var n=this._baseState,i=n.choice[e.type];return i||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)},i.prototype._encodePrimitive=function(e,t){var n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},i.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},i.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}},{"../base":8,"minimalistic-assert":123}],10:[function(e,t,n){function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function r(e,t){this.path=e,this.rethrow(t)}var o=e("inherits");n.Reporter=i,i.prototype.isError=function(e){return e instanceof r},i.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,n){var i=this._reporterState;this.exitKey(e),null!==i.obj&&(i.obj[t]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){var t=this._reporterState,n=t.obj;return t.obj=e,n},i.prototype.error=function(e){var t,n=this._reporterState,i=e instanceof r;if(t=i?e:new r(n.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t},i.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},o(r,Error),r.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},{inherits:117}],11:[function(e,t,n){var i=e("../constants");n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=i._reverse(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=i._reverse(n.tag)},{"../constants":12}],12:[function(e,t,n){var i=n;i._reverse=function(e){var t={};return Object.keys(e).forEach(function(n){(0|n)==n&&(n|=0);var i=e[n];t[i]=n}),t},i.der=e("./der")},{"./der":11}],13:[function(e,t,n){function i(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new r,this.tree._init(e.body)}function r(e){c.Node.call(this,"der",e)}function o(e,t){var n=e.readUInt8(t);if(e.isError(n))return n;var i=f.tagClass[n>>6],r=0==(32&n);if(31==(31&n)){var o=n;for(n=0;128==(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;n<<=7,n|=127&o}}else n&=31;return{cls:i,primitive:r,tag:n,tagStr:f.tag[n]}}function a(e,t,n){var i=e.readUInt8(n);if(e.isError(i))return i;if(!t&&128===i)return null;if(0==(128&i))return i;var r=127&i;if(r>4)return e.error("length octect is too long");i=0;for(var o=0;o<r;o++){i<<=8;var a=e.readUInt8(n);if(e.isError(a))return a;i|=a}return i}var s=e("inherits"),l=e("../../asn1"),c=l.base,u=l.bignum,f=l.constants.der;t.exports=i,i.prototype.decode=function(e,t){return e instanceof c.DecoderBuffer||(e=new c.DecoderBuffer(e,t)),this.tree._decode(e,t)},s(r,c.Node),r.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;var i=e.save(),r=o(e,'Failed to peek tag: "'+t+'"');return e.isError(r)?r:(e.restore(i),r.tag===t||r.tagStr===t||r.tagStr+"of"===t||n)},r.prototype._decodeTag=function(e,t,n){var i=o(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;var r=a(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(r))return r;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||null!==r)return e.skip(r,'Failed to match body of: "'+t+'"');var s=e.save(),l=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(l)?l:(r=e.offset-s.offset,e.restore(s),e.skip(r,'Failed to match body of: "'+t+'"'))},r.prototype._skipUntilEnd=function(e,t){for(;;){var n=o(e,t);if(e.isError(n))return n;var i=a(e,n.primitive,t);if(e.isError(i))return i;var r;if(r=n.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(r))return r;if("end"===n.tagStr)break}},r.prototype._decodeList=function(e,t,n,i){for(var r=[];!e.isEmpty();){var o=this._peekTag(e,"end");if(e.isError(o))return o;var a=n.decode(e,"der",i);if(e.isError(a)&&o)break;r.push(a)}return r},r.prototype._decodeStr=function(e,t){if("bitstr"===t){var n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}if("bmpstr"===t){var i=e.raw();if(i.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var r="",o=0;o<i.length/2;o++)r+=String.fromCharCode(i.readUInt16BE(2*o));return r}if("numstr"===t){var a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var s=e.raw().toString("ascii");return this._isPrintstr(s)?s:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},r.prototype._decodeObjid=function(e,t,n){for(var i,r=[],o=0;!e.isEmpty();){var a=e.readUInt8();o<<=7,o|=127&a,0==(128&a)&&(r.push(o),o=0)}128&a&&r.push(o);var s=r[0]/40|0,l=r[0]%40;if(i=n?r:[s,l].concat(r.slice(1)),t){var c=t[i.join(" ")];void 0===c&&(c=t[i.join(".")]),void 0!==c&&(i=c)}return i},r.prototype._decodeTime=function(e,t){var n=e.raw().toString();if("gentime"===t)var i=0|n.slice(0,4),r=0|n.slice(4,6),o=0|n.slice(6,8),a=0|n.slice(8,10),s=0|n.slice(10,12),l=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");var i=0|n.slice(0,2),r=0|n.slice(2,4),o=0|n.slice(4,6),a=0|n.slice(6,8),s=0|n.slice(8,10),l=0|n.slice(10,12);i=i<70?2e3+i:1900+i}return Date.UTC(i,r-1,o,a,s,l,0)},r.prototype._decodeNull=function(e){return null},r.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},r.prototype._decodeInt=function(e,t){var n=e.raw(),i=new u(n);return t&&(i=t[i.toString(10)]||i),i},r.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},{"../../asn1":5,inherits:117}],14:[function(e,t,n){var i=n;i.der=e("./der"),i.pem=e("./pem")},{"./der":13,"./pem":15}],15:[function(e,t,n){function i(e){a.call(this,e),this.enc="pem"}var r=e("inherits"),o=e("buffer").Buffer,a=e("./der");r(i,a),t.exports=i,i.prototype.decode=function(e,t){for(var n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),r=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,l=-1,c=0;c<n.length;c++){var u=n[c].match(r);if(null!==u&&u[2]===i){if(-1!==s){if("END"!==u[1])break;l=c;break}if("BEGIN"!==u[1])break;s=c}}if(-1===s||-1===l)throw new Error("PEM section not found for: "+i);var f=n.slice(s+1,l).join("");f.replace(/[^a-z0-9\+\/=]+/gi,"");var d=new o(f,"base64");return a.prototype.decode.call(this,d,t)}},{"./der":13,buffer:52,inherits:117}],16:[function(e,t,n){function i(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new r,this.tree._init(e.body)}function r(e){c.Node.call(this,"der",e)}function o(e){return e<10?"0"+e:e}var a=e("inherits"),s=e("buffer").Buffer,l=e("../../asn1"),c=l.base,u=l.constants.der;t.exports=i,i.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},a(r,c.Node),r.prototype._encodeComposite=function(e,t,n,i){var r=function(e,t,n,i){var r;if("seqof"===e?e="seq":"setof"===e&&(e="set"),u.tagByName.hasOwnProperty(e))r=u.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return i.error("Unknown tag: "+e);r=e}return r>=31?i.error("Multi-octet tag encoding unsupported"):(t||(r|=32),r|=u.tagClassByName[n||"universal"]<<6)}(e,t,n,this.reporter);if(i.length<128){return(l=new s(2))[0]=r,l[1]=i.length,this._createEncoderBuffer([l,i])}for(var o=1,a=i.length;a>=256;a>>=8)o++;var l=new s(2+o);l[0]=r,l[1]=128|o;for(var a=1+o,c=i.length;c>0;a--,c>>=8)l[a]=255&c;return this._createEncoderBuffer([l,i])},r.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var n=new s(2*e.length),i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),2*i);return this._createEncoderBuffer(n)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},r.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(r=0;r<e.length;r++)e[r]|=0}else if(Array.isArray(e)){e=e.slice();for(r=0;r<e.length;r++)e[r]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var i=0,r=0;r<e.length;r++){l=e[r];for(i++;l>=128;l>>=7)i++}for(var o=new s(i),a=o.length-1,r=e.length-1;r>=0;r--){var l=e[r];for(o[a--]=127&l;(l>>=7)>0;)o[a--]=128|127&l}return this._createEncoderBuffer(o)},r.prototype._encodeTime=function(e,t){var n,i=new Date(e);return"gentime"===t?n=[o(i.getFullYear()),o(i.getUTCMonth()+1),o(i.getUTCDate()),o(i.getUTCHours()),o(i.getUTCMinutes()),o(i.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[o(i.getFullYear()%100),o(i.getUTCMonth()+1),o(i.getUTCDate()),o(i.getUTCHours()),o(i.getUTCMinutes()),o(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},r.prototype._encodeNull=function(){return this._createEncoderBuffer("")},r.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!s.isBuffer(e)){var n=e.toArray();!e.sign&&128&n[0]&&n.unshift(0),e=new s(n)}if(s.isBuffer(e)){i=e.length;0===e.length&&i++;o=new s(i);return e.copy(o),0===e.length&&(o[0]=0),this._createEncoderBuffer(o)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);for(var i=1,r=e;r>=256;r>>=8)i++;for(var o,r=(o=new Array(i)).length-1;r>=0;r--)o[r]=255&e,e>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new s(o))},r.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},r.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},r.prototype._skipDefault=function(e,t,n){var i,r=this._baseState;if(null===r.default)return!1;var o=e.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,t,n).join()),o.length!==r.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==r.defaultBuffer[i])return!1;return!0}},{"../../asn1":5,buffer:52,inherits:117}],17:[function(e,t,n){var i=n;i.der=e("./der"),i.pem=e("./pem")},{"./der":16,"./pem":18}],18:[function(e,t,n){function i(e){o.call(this,e),this.enc="pem"}var r=e("inherits"),o=e("./der");r(i,o),t.exports=i,i.prototype.encode=function(e,t){for(var n=o.prototype.encode.call(this,e).toString("base64"),i=["-----BEGIN "+t.label+"-----"],r=0;r<n.length;r+=64)i.push(n.slice(r,r+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}},{"./der":16,inherits:117}],19:[function(e,t,n){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}function o(e,t,n){for(var i,o=[],a=t;a<n;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(r(i));return o.join("")}n.byteLength=function(e){return 3*e.length/4-i(e)},n.toByteArray=function(e){var t,n,r,o,a,c=e.length;o=i(e),a=new l(3*c/4-o),n=o>0?c-4:c;var u=0;for(t=0;t<n;t+=4)r=s[e.charCodeAt(t)]<<18|s[e.charCodeAt(t+1)]<<12|s[e.charCodeAt(t+2)]<<6|s[e.charCodeAt(t+3)],a[u++]=r>>16&255,a[u++]=r>>8&255,a[u++]=255&r;return 2===o?(r=s[e.charCodeAt(t)]<<2|s[e.charCodeAt(t+1)]>>4,a[u++]=255&r):1===o&&(r=s[e.charCodeAt(t)]<<10|s[e.charCodeAt(t+1)]<<4|s[e.charCodeAt(t+2)]>>2,a[u++]=r>>8&255,a[u++]=255&r),a},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r="",s=[],l=0,c=n-i;l<c;l+=16383)s.push(o(e,l,l+16383>c?c:l+16383));return 1===i?(t=e[n-1],r+=a[t>>2],r+=a[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=a[t>>10],r+=a[t>>4&63],r+=a[t<<2&63],r+="="),s.push(r),s.join("")};for(var a=[],s=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,f=c.length;u<f;++u)a[u]=c[u],s[c.charCodeAt(u)]=u;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],20:[function(e,t,n){!function(t,n){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}function a(e,t,n){for(var i=0,r=Math.min(e.length,n),o=t;o<r;o++){var a=e.charCodeAt(o)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function s(e,t,n,i){for(var r=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;r*=i,r+=s>=49?s-49+10:s>=17?s-17+10:s}return r}function l(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],o=0|t.words[0],a=r*o,s=67108863&a,l=a/67108864|0;n.words[0]=s;for(var c=1;c<i;c++){for(var u=l>>>26,f=67108863&l,d=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=d;h++){var p=c-h|0;u+=(a=(r=0|e.words[p])*(o=0|t.words[h])+f)/67108864|0,f=67108863&a}n.words[c]=0|f,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}function c(e,t,n){return(new u).mulp(e,t,n)}function u(e,t){this.x=e,this.y=t}function f(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function d(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function h(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function p(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function m(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function g(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function v(e){g.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof t?t.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var b;try{b=e("buffer").Buffer}catch(e){}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&r++,16===t?this._parseHex(e,r):this._parseBase(e,t,r),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,a,s=0;if("be"===n)for(r=e.length-1,o=0;r>=0;r-=3)a=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(r=0,o=0;r<e.length;r+=3)a=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,r,o=0;for(n=e.length-6,i=0;n>=t;n-=6)r=a(e,n,n+6),this.words[i]|=r<<o&67108863,this.words[i+1]|=r>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);n+6!==t&&(r=a(e,t,n+6),this.words[i]|=r<<o&67108863,this.words[i+1]|=r>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=t)i++;i--,r=r/t|0;for(var o=e.length-n,a=o%i,l=Math.min(o,o-a)+n,c=0,u=n;u<l;u+=i)c=s(e,u,u+i,t),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var f=1;for(c=s(e,u,e.length,t),u=0;u<a;u++)f*=t;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){e=e||10,t=0|t||1;var n;if(16===e||"hex"===e){n="";for(var r=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=(16777215&(s<<r|o)).toString(16);n=0!==(o=s>>>24-r&16777215)||a!==this.length-1?y[6-l.length]+l+n:l+n,(r+=2)>=26&&(r-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=w[e],u=_[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var d=f.modn(u).toString(e);n=(f=f.idivn(u)).isZero()?d+n:y[c-d.length]+d+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return i(void 0!==b),this.toArrayLike(b,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var r=this.byteLength(),o=n||Math.max(1,r);i(r<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,l="le"===t,c=new e(o),u=this.clone();if(l){for(s=0;!u.isZero();s++)a=u.andln(255),u.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-r;s++)c[s]=0;for(s=0;!u.isZero();s++)a=u.andln(255),u.iushrn(8),c[o-s-1]=a}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,r=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<r:this.words[n]&~(1<<r),this.strip()},o.prototype.iadd=function(e){var t;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();var n,i;this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,o=0;o<i.length;o++)t=(0|n.words[o])+(0|i.words[o])+r,this.words[o]=67108863&t,r=t>>>26;for(;0!==r&&o<n.length;o++)t=(0|n.words[o])+r,this.words[o]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;var i,r;n>0?(i=this,r=e):(i=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|i.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<i.length;a++)o=(t=(0|i.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<i.length&&i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this.length=Math.max(this.length,a),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var k=function(e,t,n){var i,r,o,a=e.words,s=t.words,l=n.words,c=0,u=0|a[0],f=8191&u,d=u>>>13,h=0|a[1],p=8191&h,m=h>>>13,g=0|a[2],v=8191&g,b=g>>>13,y=0|a[3],w=8191&y,_=y>>>13,k=0|a[4],x=8191&k,C=k>>>13,S=0|a[5],M=8191&S,E=S>>>13,T=0|a[6],A=8191&T,D=T>>>13,L=0|a[7],I=8191&L,P=L>>>13,O=0|a[8],j=8191&O,q=O>>>13,N=0|a[9],B=8191&N,R=N>>>13,z=0|s[0],F=8191&z,U=z>>>13,H=0|s[1],W=8191&H,K=H>>>13,V=0|s[2],$=8191&V,G=V>>>13,Y=0|s[3],X=8191&Y,Z=Y>>>13,J=0|s[4],Q=8191&J,ee=J>>>13,te=0|s[5],ne=8191&te,ie=te>>>13,re=0|s[6],oe=8191&re,ae=re>>>13,se=0|s[7],le=8191&se,ce=se>>>13,ue=0|s[8],fe=8191&ue,de=ue>>>13,he=0|s[9],pe=8191&he,me=he>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(i=Math.imul(f,F))|0)+((8191&(r=(r=Math.imul(f,U))+Math.imul(d,F)|0))<<13)|0;c=((o=Math.imul(d,U))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,F),r=(r=Math.imul(p,U))+Math.imul(m,F)|0,o=Math.imul(m,U);var ve=(c+(i=i+Math.imul(f,W)|0)|0)+((8191&(r=(r=r+Math.imul(f,K)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,K)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(v,F),r=(r=Math.imul(v,U))+Math.imul(b,F)|0,o=Math.imul(b,U),i=i+Math.imul(p,W)|0,r=(r=r+Math.imul(p,K)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,K)|0;var be=(c+(i=i+Math.imul(f,$)|0)|0)+((8191&(r=(r=r+Math.imul(f,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(w,F),r=(r=Math.imul(w,U))+Math.imul(_,F)|0,o=Math.imul(_,U),i=i+Math.imul(v,W)|0,r=(r=r+Math.imul(v,K)|0)+Math.imul(b,W)|0,o=o+Math.imul(b,K)|0,i=i+Math.imul(p,$)|0,r=(r=r+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var ye=(c+(i=i+Math.imul(f,X)|0)|0)+((8191&(r=(r=r+Math.imul(f,Z)|0)+Math.imul(d,X)|0))<<13)|0;c=((o=o+Math.imul(d,Z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(x,F),r=(r=Math.imul(x,U))+Math.imul(C,F)|0,o=Math.imul(C,U),i=i+Math.imul(w,W)|0,r=(r=r+Math.imul(w,K)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,K)|0,i=i+Math.imul(v,$)|0,r=(r=r+Math.imul(v,G)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(p,X)|0,r=(r=r+Math.imul(p,Z)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Z)|0;var we=(c+(i=i+Math.imul(f,Q)|0)|0)+((8191&(r=(r=r+Math.imul(f,ee)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(M,F),r=(r=Math.imul(M,U))+Math.imul(E,F)|0,o=Math.imul(E,U),i=i+Math.imul(x,W)|0,r=(r=r+Math.imul(x,K)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,K)|0,i=i+Math.imul(w,$)|0,r=(r=r+Math.imul(w,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,i=i+Math.imul(v,X)|0,r=(r=r+Math.imul(v,Z)|0)+Math.imul(b,X)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,Q)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var _e=(c+(i=i+Math.imul(f,ne)|0)|0)+((8191&(r=(r=r+Math.imul(f,ie)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,ie)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(A,F),r=(r=Math.imul(A,U))+Math.imul(D,F)|0,o=Math.imul(D,U),i=i+Math.imul(M,W)|0,r=(r=r+Math.imul(M,K)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(x,$)|0,r=(r=r+Math.imul(x,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,i=i+Math.imul(w,X)|0,r=(r=r+Math.imul(w,Z)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(v,Q)|0,r=(r=r+Math.imul(v,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,i=i+Math.imul(p,ne)|0,r=(r=r+Math.imul(p,ie)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,ie)|0;var ke=(c+(i=i+Math.imul(f,oe)|0)|0)+((8191&(r=(r=r+Math.imul(f,ae)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,ae)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(I,F),r=(r=Math.imul(I,U))+Math.imul(P,F)|0,o=Math.imul(P,U),i=i+Math.imul(A,W)|0,r=(r=r+Math.imul(A,K)|0)+Math.imul(D,W)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(M,$)|0,r=(r=r+Math.imul(M,G)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(x,X)|0,r=(r=r+Math.imul(x,Z)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,Z)|0,i=i+Math.imul(w,Q)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(v,ne)|0,r=(r=r+Math.imul(v,ie)|0)+Math.imul(b,ne)|0,o=o+Math.imul(b,ie)|0,i=i+Math.imul(p,oe)|0,r=(r=r+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var xe=(c+(i=i+Math.imul(f,le)|0)|0)+((8191&(r=(r=r+Math.imul(f,ce)|0)+Math.imul(d,le)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(j,F),r=(r=Math.imul(j,U))+Math.imul(q,F)|0,o=Math.imul(q,U),i=i+Math.imul(I,W)|0,r=(r=r+Math.imul(I,K)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,K)|0,i=i+Math.imul(A,$)|0,r=(r=r+Math.imul(A,G)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(M,X)|0,r=(r=r+Math.imul(M,Z)|0)+Math.imul(E,X)|0,o=o+Math.imul(E,Z)|0,i=i+Math.imul(x,Q)|0,r=(r=r+Math.imul(x,ee)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,ee)|0,i=i+Math.imul(w,ne)|0,r=(r=r+Math.imul(w,ie)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(v,oe)|0,r=(r=r+Math.imul(v,ae)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,i=i+Math.imul(p,le)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,le)|0,o=o+Math.imul(m,ce)|0;var Ce=(c+(i=i+Math.imul(f,fe)|0)|0)+((8191&(r=(r=r+Math.imul(f,de)|0)+Math.imul(d,fe)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(B,F),r=(r=Math.imul(B,U))+Math.imul(R,F)|0,o=Math.imul(R,U),i=i+Math.imul(j,W)|0,r=(r=r+Math.imul(j,K)|0)+Math.imul(q,W)|0,o=o+Math.imul(q,K)|0,i=i+Math.imul(I,$)|0,r=(r=r+Math.imul(I,G)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(A,X)|0,r=(r=r+Math.imul(A,Z)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,Z)|0,i=i+Math.imul(M,Q)|0,r=(r=r+Math.imul(M,ee)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,ee)|0,i=i+Math.imul(x,ne)|0,r=(r=r+Math.imul(x,ie)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,ie)|0,i=i+Math.imul(w,oe)|0,r=(r=r+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,i=i+Math.imul(v,le)|0,r=(r=r+Math.imul(v,ce)|0)+Math.imul(b,le)|0,o=o+Math.imul(b,ce)|0,i=i+Math.imul(p,fe)|0,r=(r=r+Math.imul(p,de)|0)+Math.imul(m,fe)|0,o=o+Math.imul(m,de)|0;var Se=(c+(i=i+Math.imul(f,pe)|0)|0)+((8191&(r=(r=r+Math.imul(f,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,me)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(B,W),r=(r=Math.imul(B,K))+Math.imul(R,W)|0,o=Math.imul(R,K),i=i+Math.imul(j,$)|0,r=(r=r+Math.imul(j,G)|0)+Math.imul(q,$)|0,o=o+Math.imul(q,G)|0,i=i+Math.imul(I,X)|0,r=(r=r+Math.imul(I,Z)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(A,Q)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,ee)|0,i=i+Math.imul(M,ne)|0,r=(r=r+Math.imul(M,ie)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,ie)|0,i=i+Math.imul(x,oe)|0,r=(r=r+Math.imul(x,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,i=i+Math.imul(w,le)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(_,le)|0,o=o+Math.imul(_,ce)|0,i=i+Math.imul(v,fe)|0,r=(r=r+Math.imul(v,de)|0)+Math.imul(b,fe)|0,o=o+Math.imul(b,de)|0;var Me=(c+(i=i+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(B,$),r=(r=Math.imul(B,G))+Math.imul(R,$)|0,o=Math.imul(R,G),i=i+Math.imul(j,X)|0,r=(r=r+Math.imul(j,Z)|0)+Math.imul(q,X)|0,o=o+Math.imul(q,Z)|0,i=i+Math.imul(I,Q)|0,r=(r=r+Math.imul(I,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(A,ne)|0,r=(r=r+Math.imul(A,ie)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,ie)|0,i=i+Math.imul(M,oe)|0,r=(r=r+Math.imul(M,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,i=i+Math.imul(x,le)|0,r=(r=r+Math.imul(x,ce)|0)+Math.imul(C,le)|0,o=o+Math.imul(C,ce)|0,i=i+Math.imul(w,fe)|0,r=(r=r+Math.imul(w,de)|0)+Math.imul(_,fe)|0,o=o+Math.imul(_,de)|0;var Ee=(c+(i=i+Math.imul(v,pe)|0)|0)+((8191&(r=(r=r+Math.imul(v,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((o=o+Math.imul(b,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(B,X),r=(r=Math.imul(B,Z))+Math.imul(R,X)|0,o=Math.imul(R,Z),i=i+Math.imul(j,Q)|0,r=(r=r+Math.imul(j,ee)|0)+Math.imul(q,Q)|0,o=o+Math.imul(q,ee)|0,i=i+Math.imul(I,ne)|0,r=(r=r+Math.imul(I,ie)|0)+Math.imul(P,ne)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(A,oe)|0,r=(r=r+Math.imul(A,ae)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,ae)|0,i=i+Math.imul(M,le)|0,r=(r=r+Math.imul(M,ce)|0)+Math.imul(E,le)|0,o=o+Math.imul(E,ce)|0,i=i+Math.imul(x,fe)|0,r=(r=r+Math.imul(x,de)|0)+Math.imul(C,fe)|0,o=o+Math.imul(C,de)|0;var Te=(c+(i=i+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(B,Q),r=(r=Math.imul(B,ee))+Math.imul(R,Q)|0,o=Math.imul(R,ee),i=i+Math.imul(j,ne)|0,r=(r=r+Math.imul(j,ie)|0)+Math.imul(q,ne)|0,o=o+Math.imul(q,ie)|0,i=i+Math.imul(I,oe)|0,r=(r=r+Math.imul(I,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,i=i+Math.imul(A,le)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(D,le)|0,o=o+Math.imul(D,ce)|0,i=i+Math.imul(M,fe)|0,r=(r=r+Math.imul(M,de)|0)+Math.imul(E,fe)|0,o=o+Math.imul(E,de)|0;var Ae=(c+(i=i+Math.imul(x,pe)|0)|0)+((8191&(r=(r=r+Math.imul(x,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(B,ne),r=(r=Math.imul(B,ie))+Math.imul(R,ne)|0,o=Math.imul(R,ie),i=i+Math.imul(j,oe)|0,r=(r=r+Math.imul(j,ae)|0)+Math.imul(q,oe)|0,o=o+Math.imul(q,ae)|0,i=i+Math.imul(I,le)|0,r=(r=r+Math.imul(I,ce)|0)+Math.imul(P,le)|0,o=o+Math.imul(P,ce)|0,i=i+Math.imul(A,fe)|0,r=(r=r+Math.imul(A,de)|0)+Math.imul(D,fe)|0,o=o+Math.imul(D,de)|0;var De=(c+(i=i+Math.imul(M,pe)|0)|0)+((8191&(r=(r=r+Math.imul(M,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(r>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(B,oe),r=(r=Math.imul(B,ae))+Math.imul(R,oe)|0,o=Math.imul(R,ae),i=i+Math.imul(j,le)|0,r=(r=r+Math.imul(j,ce)|0)+Math.imul(q,le)|0,o=o+Math.imul(q,ce)|0,i=i+Math.imul(I,fe)|0,r=(r=r+Math.imul(I,de)|0)+Math.imul(P,fe)|0,o=o+Math.imul(P,de)|0;var Le=(c+(i=i+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,me)|0)+(r>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(B,le),r=(r=Math.imul(B,ce))+Math.imul(R,le)|0,o=Math.imul(R,ce),i=i+Math.imul(j,fe)|0,r=(r=r+Math.imul(j,de)|0)+Math.imul(q,fe)|0,o=o+Math.imul(q,de)|0;var Ie=(c+(i=i+Math.imul(I,pe)|0)|0)+((8191&(r=(r=r+Math.imul(I,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((o=o+Math.imul(P,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(B,fe),r=(r=Math.imul(B,de))+Math.imul(R,fe)|0,o=Math.imul(R,de);var Pe=(c+(i=i+Math.imul(j,pe)|0)|0)+((8191&(r=(r=r+Math.imul(j,me)|0)+Math.imul(q,pe)|0))<<13)|0;c=((o=o+Math.imul(q,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Oe=(c+(i=Math.imul(B,pe))|0)+((8191&(r=(r=Math.imul(B,me))+Math.imul(R,pe)|0))<<13)|0;return c=((o=Math.imul(R,me))+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,l[0]=ge,l[1]=ve,l[2]=be,l[3]=ye,l[4]=we,l[5]=_e,l[6]=ke,l[7]=xe,l[8]=Ce,l[9]=Se,l[10]=Me,l[11]=Ee,l[12]=Te,l[13]=Ae,l[14]=De,l[15]=Le,l[16]=Ie,l[17]=Pe,l[18]=Oe,0!==c&&(l[19]=c,n.length++),n};Math.imul||(k=l),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?k(this,e,t):n<63?l(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,o=0;o<n.length-1;o++){var a=r;r=0;for(var s=67108863&i,l=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=l;c++){var u=o-c,f=(0|e.words[u])*(0|t.words[c]),d=67108863&f;s=67108863&(d=d+s|0),r+=(a=(a=a+(f/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}n.words[o]=s,i=a,a=r}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,e,t):c(this,e,t)},u.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},u.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,r=0;r<t;r++)i|=(1&e)<<t-r-1,e>>=1;return i},u.prototype.permute=function(e,t,n,i,r,o){for(var a=0;a<o;a++)i[a]=t[e[a]],r[a]=n[e[a]]},u.prototype.transform=function(e,t,n,i,r,o){this.permute(o,e,t,n,i,r);for(var a=1;a<r;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<r;u+=s)for(var f=l,d=c,h=0;h<a;h++){var p=n[u+h],m=i[u+h],g=n[u+h+a],v=i[u+h+a],b=f*g-d*v;v=f*v+d*g,g=b,n[u+h]=p+g,i[u+h]=m+v,n[u+h+a]=p-g,i[u+h+a]=m-v,h!==s&&(b=l*f-c*d,d=l*d+c*f,f=b)}},u.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},u.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=e[i];e[i]=e[n-i-1],e[n-i-1]=r,r=t[i],t[i]=-t[n-i-1],t[n-i-1]=-r}},u.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var r=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&r,n=r<67108864?0:r/67108864|0}return e},u.prototype.convert13b=function(e,t,n,r){for(var o=0,a=0;a<t;a++)o+=0|e[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<r;++a)n[a]=0;i(0===o),i(0==(-8192&o))},u.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},u.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),l=new Array(i),c=new Array(i),u=new Array(i),f=new Array(i),d=n.words;d.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,c,i),this.transform(a,o,s,l,i,r),this.transform(c,o,u,f,i,r);for(var h=0;h<i;h++){var p=s[h]*u[h]-l[h]*f[h];l[h]=s[h]*f[h]+l[h]*u[h],s[h]=p}return this.conjugate(s,l,i),this.transform(s,l,d,o,i,r),this.conjugate(d,o,i),this.normalize13b(d,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),c(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){i("number"==typeof e),i(e<67108864);for(var t=0,n=0;n<this.length;n++){var r=(0|this.words[n])*e,o=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=(e.words[i]&1<<r)>>>r}return t}(e);if(0===t.length)return new o(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var r=n.sqr();i<t.length;i++,r=r.sqr())0!==t[i]&&(n=n.mul(r));return n},o.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,r=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,l=(0|this.words[t])-s<<n;this.words[t]=l|a,a=s>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},o.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){i("number"==typeof e&&e>=0);var r;r=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,l=n;if(r-=a,r=Math.max(0,r),l){for(var c=0;c<a;c++)l.words[c]=this.words[c];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=r);c--){var f=0|this.words[c];this.words[c]=u<<26-o|f>>>o,u=f&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return!1;return!!(this.words[n]&r)},o.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var r,o=e.length+n;this._expand(o);var a,s=0;for(r=0;r<e.length;r++){a=(0|this.words[r+n])+s;var l=(0|e.words[r])*t;s=((a-=67108863&l)>>26)-(l/67108864|0),this.words[r+n]=67108863&a}for(;r<this.length-n;r++)s=(a=(0|this.words[r+n])+s)>>26,this.words[r+n]=67108863&a;if(0===s)return this.strip();for(i(-1===s),s=0,r=0;r<this.length;r++)s=(a=-(0|this.words[r])+s)>>26,this.words[r]=67108863&a;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=this.length-e.length,i=this.clone(),r=e,a=0|r.words[r.length-1];0!==(n=26-this._countBits(a))&&(r=r.ushln(n),i.iushln(n),a=0|r.words[r.length-1]);var s,l=i.length-r.length;if("mod"!==t){(s=new o(null)).length=l+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=i.clone()._ishlnsubmul(r,1,l);0===u.negative&&(i=u,s&&(s.words[l]=1));for(var f=l-1;f>=0;f--){var d=67108864*(0|i.words[r.length+f])+(0|i.words[r.length+f-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(r,d,f);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(r,1,f),i.isZero()||(i.negative^=1);s&&(s.words[f]=d)}return s&&s.strip(),i.strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},o.prototype.divmod=function(e,t,n){if(i(!e.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var r,a,s;return 0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(r=s.div.neg()),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:r,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(r=s.div.neg()),{div:r,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t)},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),o=n.cmp(i);return o<0||1===r&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){i(e<=67108863);for(var t=(1<<26)%e,n=0,r=this.length-1;r>=0;r--)n=(t*n+(0|this.words[r]))%e;return n},o.prototype.idivn=function(e){i(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var r=(0|this.words[n])+67108864*t;this.words[n]=r/e|0,t=r%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new o(1),a=new o(0),s=new o(0),l=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),f=t.clone();!t.isZero();){for(var d=0,h=1;0==(t.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(r.isOdd()||a.isOdd())&&(r.iadd(u),a.isub(f)),r.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(f)),s.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(s),a.isub(l)):(n.isub(t),s.isub(r),l.isub(a))}return{a:s,b:l,gcd:n.iushln(c)}},o.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new o(1),a=new o(0),s=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,c=1;0==(t.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(t.iushrn(l);l-- >0;)r.isOdd()&&r.iadd(s),r.iushrn(1);for(var u=0,f=1;0==(n.words[0]&f)&&u<26;++u,f<<=1);if(u>0)for(n.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(a)):(n.isub(t),a.isub(r))}var d;return(d=0===t.cmpn(1)?r:a).cmpn(0)<0&&d.iadd(e),d},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=t.cmp(n);if(r<0){var o=t;t=n,n=o}else if(0===r||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t=e<0;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;this.strip();var n;if(this.length>1)n=1;else{t&&(e=-e),i(e<=67108863,"Number is too big");var r=0|this.words[0];n=r===e?0:r<e?-1:1}return 0!==this.negative?0|-n:n},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){i<r?t=-1:i>r&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new g(e)},o.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var x={k256:null,p224:null,p192:null,p25519:null};f.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},f.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):n.strip(),n},f.prototype.split=function(e,t){e.iushrn(this.n,0,t)},f.prototype.imulK=function(e){return e.imul(this.k)},r(d,f),d.prototype.split=function(e,t){for(var n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var r=e.words[9];for(t.words[t.length++]=4194303&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(4194303&o)<<4|r>>>22,r=o}r>>>=22,e.words[i-10]=r,0===r&&e.length>10?e.length-=10:e.length-=9},d.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(h,f),r(p,f),r(m,f),m.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(x[e])return x[e];var t;if("k256"===e)t=new d;else if("p224"===e)t=new h;else if("p192"===e)t=new p;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new m}return x[e]=t,t},g.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},g.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},g.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},g.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},g.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},g.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},g.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},g.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},g.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},g.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},g.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},g.prototype.isqr=function(e){return this.imul(e,e.clone())},g.prototype.sqr=function(e){return this.mul(e,e)},g.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var r=this.m.subn(1),a=0;!r.isZero()&&0===r.andln(1);)a++,r.iushrn(1);i(!r.isZero());var s=new o(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new o(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var f=this.pow(u,r),d=this.pow(e,r.addn(1).iushrn(1)),h=this.pow(e,r),p=a;0!==h.cmp(s);){for(var m=h,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<p);var v=this.pow(f,new o(1).iushln(p-g-1));d=d.redMul(v),f=v.redSqr(),h=h.redMul(f),p=g}return d},g.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},g.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var r=n[0],a=0,s=0,l=t.bitLength()%26;for(0===l&&(l=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],u=l-1;u>=0;u--){var f=c>>u&1;r!==n[0]&&(r=this.sqr(r)),0!==f||0!==a?(a<<=1,a|=f,(4===++s||0===i&&0===u)&&(r=this.mul(r,n[a]),s=0,a=0)):s=0}l=26}return r},g.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},g.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new v(e)},r(v,g),v.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},v.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},v.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},v.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},v.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{buffer:23}],21:[function(e,t,n){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof n?e("jquery"):jQuery)}(function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function r(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function o(n,i){return function(){return i!==t&&e.fn.datepicker.deprecated(i),this[n].apply(this,arguments)}}var a=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,i=this.length;n<i;n++)if(0<=this[n].valueOf()-t&&this[n].valueOf()-t<864e5)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new a;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),s=function(t,n){e.data(t,"datepicker",this),this._process_options(n),this.dates=new a,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=e(p.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return Number(t)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};s.prototype={constructor:s,_resolveViewName:function(t){return e.each(p.viewModes,function(n,i){if(t===n||-1!==e.inArray(t,i.names))return t=n,!1}),t},_resolveDaysOfWeek:function(t){return e.isArray(t)||(t=t.split(/[,\s]*/)),e.map(t,Number)},_check_template:function(n){try{if(n===t||""===n)return!1;if((n.match(/[<>]/g)||[]).length<=0)return!0;return e(n).length>0}catch(e){return!1}},_process_options:function(t){this._o=e.extend({},this._o,t);var r=this.o=e.extend({},this._o),o=r.language;h[o]||(o=o.split("-")[0],h[o]||(o=f.language)),r.language=o,r.startView=this._resolveViewName(r.startView),r.minViewMode=this._resolveViewName(r.minViewMode),r.maxViewMode=this._resolveViewName(r.maxViewMode),r.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,r.startView)),!0!==r.multidate&&(r.multidate=Number(r.multidate)||!1,!1!==r.multidate&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var a=p.parseFormat(r.format);r.startDate!==-1/0&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=p.parseDate(r.startDate,a,r.language,r.assumeNearbyYear):r.startDate=-1/0),r.endDate!==1/0&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=p.parseDate(r.endDate,a,r.language,r.assumeNearbyYear):r.endDate=1/0),r.daysOfWeekDisabled=this._resolveDaysOfWeek(r.daysOfWeekDisabled||[]),r.daysOfWeekHighlighted=this._resolveDaysOfWeek(r.daysOfWeekHighlighted||[]),r.datesDisabled=r.datesDisabled||[],e.isArray(r.datesDisabled)||(r.datesDisabled=r.datesDisabled.split(",")),r.datesDisabled=e.map(r.datesDisabled,function(e){return p.parseDate(e,a,r.language,r.assumeNearbyYear)});var s=String(r.orientation).toLowerCase().split(/\s+/g),l=r.orientation.toLowerCase();if(s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),r.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":r.orientation.y=s[0];break;case"left":case"right":r.orientation.x=s[0]}else l=e.grep(s,function(e){return/^left|right$/.test(e)}),r.orientation.x=l[0]||"auto",l=e.grep(s,function(e){return/^top|bottom$/.test(e)}),r.orientation.y=l[0]||"auto";else;if(r.defaultViewDate instanceof Date||"string"==typeof r.defaultViewDate)r.defaultViewDate=p.parseDate(r.defaultViewDate,a,r.language,r.assumeNearbyYear);else if(r.defaultViewDate){var c=r.defaultViewDate.year||(new Date).getFullYear(),u=r.defaultViewDate.month||0,d=r.defaultViewDate.day||1;r.defaultViewDate=n(c,u,d)}else r.defaultViewDate=i()},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n,i,r,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(i=t,r=e[o][1]):3===e[o].length&&(i=e[o][1],r=e[o][2]),n.on(r,i)},_unapplyEvents:function(e){for(var n,i,r,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(r=t,i=e[o][1]):3===e[o].length&&(r=e[o][1],i=e[o][2]),n.off(i,r)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this),paste:e.proxy(this.paste,this)};!0===this.o.showOnFocus&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.inputField.length?this._events=[[this.inputField,t],[this.component,{click:e.proxy(this.show,this)}]]:this._events=[[this.element,{click:e.proxy(this.show,this),keydown:e.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":e.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[this.picker,".prev, .next",{click:e.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:e.proxy(this.dayCellClick,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:t,date:r,viewMode:this.viewMode,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return p.formatDate(n,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var n;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==e.inArray("text/plain",t.originalEvent.clipboardData.types))n=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),t.preventDefault()},_utc_to_local:function(e){if(!e)return e;var t=new Date(e.getTime()+6e4*e.getTimezoneOffset());return t.getTimezoneOffset()!==e.getTimezoneOffset()&&(t=new Date(e.getTime()+6e4*t.getTimezoneOffset())),t},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&n(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return e!==t?new Date(e):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,e.map(t,this._utc_to_local)),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(n){n===t&&(n=this.o.format);var i=this.o.language;return e.map(this.dates,function(e){return p.formatDate(e,n,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){return this._process_options({datesDisabled:e}),this.update(),this},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),n=this.picker.outerHeight(),i=e(this.o.container),r=i.width(),o="body"===this.o.container?e(document).scrollTop():i.scrollTop(),a=i.offset(),s=[0];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==Number(t)&&s.push(Number(t))});var l=Math.max.apply(Math,s)+this.o.zIndexOffset,c=this.component?this.component.parent().offset():this.element.offset(),u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),f=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=c.left-a.left,h=c.top-a.top;"body"!==this.o.container&&(h+=o),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=t-f)):c.left<0?(this.picker.addClass("datepicker-orient-left"),d-=c.left-10):d+t>r?(this.picker.addClass("datepicker-orient-right"),d+=f-t):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var p=this.o.orientation.y;if("auto"===p&&(p=-o+h-n<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+p),"top"===p?h-=n+parseInt(this.picker.css("padding-top")):h+=u,this.o.rtl){var m=r-(d+f);this.picker.css({top:h,right:m,zIndex:l})}else this.picker.css({top:h,left:d,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),n=[],i=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),i=!0):(n=(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return p.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=e.grep(n,e.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(n),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),i?(this.setValue(),this.element.change()):this.dates.length&&String(t)!==String(this.dates)&&i&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&t.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var t=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(n+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)n+='<th class="dow',-1!==e.inArray(t,this.o.daysOfWeekDisabled)&&(n+=" disabled"),n+='">'+h[this.o.language].daysMin[t++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)}},fillMonths:function(){for(var e=this._utc_to_local(this.viewDate),t="",n=0;n<12;n++)t+='<span class="month'+(e&&e.getMonth()===n?" focused":"")+'">'+h[this.o.language].monthsShort[n]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],o=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),s=i();return t.getUTCFullYear()<o||t.getUTCFullYear()===o&&t.getUTCMonth()<a?n.push("old"):(t.getUTCFullYear()>o||t.getUTCFullYear()===o&&t.getUTCMonth()>a)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&r(t,s)&&n.push("today"),-1!==this.dates.contains(t)&&n.push("active"),this.dateWithinRange(t)||n.push("disabled"),this.dateIsDisabled(t)&&n.push("disabled","disabled-date"),-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&n.push("selected"),t.valueOf()===this.range[0]&&n.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,i,r,o,a,s,l){for(var c,u,f,d="",h=r/10,p=this.picker.find(n),m=Math.floor(o/r)*r,g=m+9*h,v=Math.floor(this.viewDate.getFullYear()/h)*h,b=e.map(this.dates,function(e){return Math.floor(e.getUTCFullYear()/h)*h}),y=m-h;y<=g+h;y+=h)c=[i],u=null,y===m-h?c.push("old"):y===g+h&&c.push("new"),-1!==e.inArray(y,b)&&c.push("active"),(y<a||y>s)&&c.push("disabled"),y===v&&c.push("focused"),l!==e.noop&&((f=l(new Date(y,0,1)))===t?f={}:"boolean"==typeof f?f={enabled:f}:"string"==typeof f&&(f={classes:f}),!1===f.enabled&&c.push("disabled"),f.classes&&(c=c.concat(f.classes.split(/\s+/))),f.tooltip&&(u=f.tooltip)),d+='<span class="'+c.join(" ")+'"'+(u?' title="'+u+'"':"")+">"+y+"</span>";p.find(".datepicker-switch").text(m+"-"+g),p.find("td").html(d)},fill:function(){var i,r,o=new Date(this.viewDate),a=o.getUTCFullYear(),s=o.getUTCMonth(),l=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,c=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,f=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=h[this.o.language].today||h.en.today||"",m=h[this.o.language].clear||h.en.clear||"",g=h[this.o.language].titleFormat||h.en.titleFormat;if(!isNaN(a)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(p.formatDate(o,g,this.o.language)),this.picker.find("tfoot .today").text(d).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(m).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var v=n(a,s,0),b=v.getUTCDate();v.setUTCDate(b-(v.getUTCDay()-this.o.weekStart+7)%7);var y=new Date(v);v.getUTCFullYear()<100&&y.setUTCFullYear(v.getUTCFullYear()),y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var w,_,k=[];v.valueOf()<y;){if((w=v.getUTCDay())===this.o.weekStart&&(k.push("<tr>"),this.o.calendarWeeks)){var x=new Date(+v+(this.o.weekStart-w-7)%7*864e5),C=new Date(Number(x)+(11-x.getUTCDay())%7*864e5),S=new Date(Number(S=n(C.getUTCFullYear(),0,1))+(11-S.getUTCDay())%7*864e5),M=(C-S)/864e5/7+1;k.push('<td class="cw">'+M+"</td>")}(_=this.getClassNames(v)).push("day");var E=v.getUTCDate();this.o.beforeShowDay!==e.noop&&((r=this.o.beforeShowDay(this._utc_to_local(v)))===t?r={}:"boolean"==typeof r?r={enabled:r}:"string"==typeof r&&(r={classes:r}),!1===r.enabled&&_.push("disabled"),r.classes&&(_=_.concat(r.classes.split(/\s+/))),r.tooltip&&(i=r.tooltip),r.content&&(E=r.content)),_=e.isFunction(e.uniqueSort)?e.uniqueSort(_):e.unique(_),k.push('<td class="'+_.join(" ")+'"'+(i?' title="'+i+'"':"")+' data-date="'+v.getTime().toString()+'">'+E+"</td>"),i=null,w===this.o.weekEnd&&k.push("</tr>"),v.setUTCDate(v.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(k.join(""));var T=h[this.o.language].monthsTitle||h.en.monthsTitle||"Months",A=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?T:a).end().find("tbody span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===a&&A.eq(t.getUTCMonth()).addClass("active")}),(a<l||a>u)&&A.addClass("disabled"),a===l&&A.slice(0,c).addClass("disabled"),a===u&&A.slice(f+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var D=this;e.each(A,function(n,i){var r=new Date(a,n,1),o=D.o.beforeShowMonth(r);o===t?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),!1!==o.enabled||e(i).hasClass("disabled")||e(i).addClass("disabled"),o.classes&&e(i).addClass(o.classes),o.tooltip&&e(i).prop("title",o.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,a,l,u,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,a,l,u,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,a,l,u,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e,t,n=new Date(this.viewDate),i=n.getUTCFullYear(),r=n.getUTCMonth(),o=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,s=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,c=1;switch(this.viewMode){case 0:e=i<=o&&r<=a,t=i>=s&&r>=l;break;case 4:c*=10;case 3:c*=10;case 2:c*=10;case 1:e=Math.floor(i/c)*c<=o,t=Math.floor(i/c)*c+c>=s}this.picker.find(".prev").toggleClass("disabled",e),this.picker.find(".next").toggleClass("disabled",t)}},click:function(t){t.preventDefault(),t.stopPropagation();var r,o,a,s;(r=e(t.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(i(),"linked"===this.o.todayBtn?null:"view")),r.hasClass("clear")&&this.clearDates(),r.hasClass("disabled")||(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),o=1,1===this.viewMode?(s=r.parent().find("span").index(r),a=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s)):(s=0,a=Number(r.text()),this.viewDate.setUTCFullYear(a)),this._trigger(p.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(a,s,o)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(t){var n=e(t.currentTarget).data("date"),i=new Date(n);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(i)},navArrowsClick:function(t){var n=e(t.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(n*=12*p.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,n),this._trigger(p.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):!1===this.o.multidate?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),(!t&&this.o.updateViewDate||"view"===t)&&(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var n=new Date(e);return n.setUTCDate(e.getUTCDate()+t),n},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!function(e){return e&&!isNaN(e.getTime())}(e))return this.o.defaultViewDate;if(!t)return e;var n,i,r=new Date(e.valueOf()),o=r.getUTCDate(),a=r.getUTCMonth(),s=Math.abs(t);if(t=t>0?1:-1,1===s)i=-1===t?function(){return r.getUTCMonth()===a}:function(){return r.getUTCMonth()!==n},n=a+t,r.setUTCMonth(n),n=(n+12)%12;else{for(var l=0;l<s;l++)r=this.moveMonth(r,t);n=r.getUTCMonth(),r.setUTCDate(o),i=function(){return n!==r.getUTCMonth()}}for(;i();)r.setUTCDate(--o),r.setUTCMonth(n);return r},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,n){do{if(e=this[n](e,t),!this.dateWithinRange(e))return!1;n="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(t){return-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||e.grep(this.o.datesDisabled,function(e){return r(t,e)}).length>0},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":visible")){var t,n,i=!1,r=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(n=this.moveAvailableDate(r,t,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(n=this.moveAvailableDate(r,t,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?n=this.moveAvailableDate(r,t,"moveDay"):this.weekOfDateIsDisabled(r)||(n=this.moveAvailableDate(r,t,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(t*=4),n=this.moveAvailableDate(r,t,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(t*=4),n=this.moveAvailableDate(r,t,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}i&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation())},setViewMode:function(e){this.viewMode=e,this.picker.children("div").hide().filter(".datepicker-"+p.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var l=function(t,n){e.data(t,"datepicker",this),this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,this.keepEmptyValues=n.keepEmptyValues,delete n.keepEmptyValues,u.call(e(this.inputs),n).on("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e.data(t,"datepicker")}),this.updateDates()};l.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(n){if(!this.updating){this.updating=!0;var i=e.data(n.target,"datepicker");if(i!==t){var r=i.getUTCDate(),o=this.keepEmptyValues,a=e.inArray(n.target,this.inputs),s=a-1,l=a+1,c=this.inputs.length;if(-1!==a){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t!==i&&o||t.setUTCDate(r)}),r<this.dates[s])for(;s>=0&&r<this.dates[s];)this.pickers[s--].setUTCDate(r);else if(r>this.dates[l])for(;l<c&&r>this.dates[l];)this.pickers[l++].setUTCDate(r);this.updateDates(),delete this.updating}}}},destroy:function(){e.map(this.pickers,function(e){e.destroy()}),e(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var c=e.fn.datepicker,u=function(n){var i=Array.apply(null,arguments);i.shift();var r;if(this.each(function(){var t=e(this),o=t.data("datepicker"),a="object"==typeof n&&n;if(!o){var c=function(t,n){function i(e,t){return t.toLowerCase()}var r=e(t).data(),o={},a=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var s in r)n.test(s)&&(o[s.replace(a,i)]=r[s]);return o}(this,"date"),u=function(t){var n={};if(h[t]||(t=t.split("-")[0],h[t])){var i=h[t];return e.each(d,function(e,t){t in i&&(n[t]=i[t])}),n}}(e.extend({},f,c,a).language),p=e.extend({},f,u,c,a);t.hasClass("input-daterange")||p.inputs?(e.extend(p,{inputs:p.inputs||t.find("input").toArray()}),o=new l(this,p)):o=new s(this,p),t.data("datepicker",o)}"string"==typeof n&&"function"==typeof o[n]&&(r=o[n].apply(o,i))}),r===t||r instanceof s||r instanceof l)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return r};e.fn.datepicker=u;var f=e.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,beforeShowYear:e.noop,beforeShowDecade:e.noop,beforeShowCentury:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},d=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=s;var h=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},p={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(n,r,o,a){function l(){var e=this.slice(0,c[d].length),t=c[d].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!n)return t;if(n instanceof Date)return n;if("string"==typeof r&&(r=p.parseFormat(r)),r.toValue)return r.toValue(n,r,o);var c,u,f,d,m,g={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},v={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(n in v&&(n=v[n]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(n)){for(c=n.match(/([\-+]\d+)([dmwy])/gi),n=new Date,d=0;d<c.length;d++)u=c[d].match(/([\-+]\d+)([dmwy])/i),f=Number(u[1]),m=g[u[2].toLowerCase()],n=s.prototype[m](n,f);return s.prototype._zero_utc_time(n)}c=n&&n.match(this.nonpunctuation)||[];var b,y,w={},_=["yyyy","yy","M","MM","m","mm","d","dd"],k={yyyy:function(e,t){return e.setUTCFullYear(a?function(e,t){return!0===t&&(t=10),e<100&&(e+=2e3)>(new Date).getFullYear()+t&&(e-=100),e}(t,a):t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};k.yy=k.yyyy,k.M=k.MM=k.mm=k.m,k.dd=k.d,n=i();var x=r.parts.slice();if(c.length!==x.length&&(x=e(x).filter(function(t,n){return-1!==e.inArray(n,_)}).toArray()),c.length===x.length){var C;for(d=0,C=x.length;d<C;d++){if(b=parseInt(c[d],10),u=x[d],isNaN(b))switch(u){case"MM":y=e(h[o].months).filter(l),b=e.inArray(y[0],h[o].months)+1;break;case"M":y=e(h[o].monthsShort).filter(l),b=e.inArray(y[0],h[o].monthsShort)+1}w[u]=b}var S,M;for(d=0;d<_.length;d++)(M=_[d])in w&&!isNaN(w[M])&&(S=new Date(n),k[M](S,w[M]),isNaN(S)||(n=S))}return n},formatDate:function(t,n,i){if(!t)return"";if("string"==typeof n&&(n=p.parseFormat(n)),n.toDisplay)return n.toDisplay(t,n,i);var r={d:t.getUTCDate(),D:h[i].daysShort[t.getUTCDay()],DD:h[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:h[i].monthsShort[t.getUTCMonth()],MM:h[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,t=[];for(var o=e.extend([],n.separators),a=0,s=n.parts.length;a<=s;a++)o.length&&t.push(o.shift()),t.push(r[n.parts[a]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+f.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+f.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=p,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=c,this},e.fn.datepicker.version="1.7.1",e.fn.datepicker.deprecated=function(e){var t=window.console;t&&t.warn&&t.warn("DEPRECATED: "+e)},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),u.call(n,"show"))}),e(function(){u.call(e('[data-provide="datepicker-inline"]'))})})},{jquery:"jquery"}],22:[function(e,t,n){function i(e){this.rand=e}var r;if(t.exports=function(e){return r||(r=new i(null)),r.generate(e)},t.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=e("crypto");if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return o.randomBytes(e)}}catch(e){}},{crypto:23}],23:[function(e,t,n){},{}],24:[function(e,t,n){function i(e){s.isBuffer(e)||(e=s.from(e));for(var t=e.length/4|0,n=new Array(t),i=0;i<t;i++)n[i]=e.readUInt32BE(4*i);return n}function r(e){for(;0<e.length;e++)e[0]=0}function o(e,t,n,i,r){for(var o,a,s,l,c=n[0],u=n[1],f=n[2],d=n[3],h=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],v=4,b=1;b<r;b++)o=c[h>>>24]^u[p>>>16&255]^f[m>>>8&255]^d[255&g]^t[v++],a=c[p>>>24]^u[m>>>16&255]^f[g>>>8&255]^d[255&h]^t[v++],s=c[m>>>24]^u[g>>>16&255]^f[h>>>8&255]^d[255&p]^t[v++],l=c[g>>>24]^u[h>>>16&255]^f[p>>>8&255]^d[255&m]^t[v++],h=o,p=a,m=s,g=l;return o=(i[h>>>24]<<24|i[p>>>16&255]<<16|i[m>>>8&255]<<8|i[255&g])^t[v++],a=(i[p>>>24]<<24|i[m>>>16&255]<<16|i[g>>>8&255]<<8|i[255&h])^t[v++],s=(i[m>>>24]<<24|i[g>>>16&255]<<16|i[h>>>8&255]<<8|i[255&p])^t[v++],l=(i[g>>>24]<<24|i[h>>>16&255]<<16|i[p>>>8&255]<<8|i[255&m])^t[v++],o>>>=0,a>>>=0,s>>>=0,l>>>=0,[o,a,s,l]}function a(e){this._key=i(e),this._reset()}var s=e("safe-buffer").Buffer,l=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],i=[],r=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,l=0;l<256;++l){var c=s^s<<1^s<<2^s<<3^s<<4;c=c>>>8^255&c^99,n[a]=c,i[c]=a;var u=e[a],f=e[u],d=e[f],h=257*e[c]^16843008*c;r[0][a]=h<<24|h>>>8,r[1][a]=h<<16|h>>>16,r[2][a]=h<<8|h>>>24,r[3][a]=h,h=16843009*d^65537*f^257*u^16843008*a,o[0][c]=h<<24|h>>>8,o[1][c]=h<<16|h>>>16,o[2][c]=h<<8|h>>>24,o[3][c]=h,0===a?a=s=1:(a=u^e[e[e[d^u]]],s^=e[e[s]])}return{SBOX:n,INV_SBOX:i,SUB_MIX:r,INV_SUB_MIX:o}}();a.blockSize=16,a.keySize=32,a.prototype.blockSize=a.blockSize,a.prototype.keySize=a.keySize,a.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,i=4*(n+1),r=[],o=0;o<t;o++)r[o]=e[o];for(o=t;o<i;o++){var a=r[o-1];o%t==0?(a=a<<8|a>>>24,a=c.SBOX[a>>>24]<<24|c.SBOX[a>>>16&255]<<16|c.SBOX[a>>>8&255]<<8|c.SBOX[255&a],a^=l[o/t|0]<<24):t>6&&o%t==4&&(a=c.SBOX[a>>>24]<<24|c.SBOX[a>>>16&255]<<16|c.SBOX[a>>>8&255]<<8|c.SBOX[255&a]),r[o]=r[o-t]^a}for(var s=[],u=0;u<i;u++){var f=i-u,d=r[f-(u%4?0:4)];s[u]=u<4||f<=4?d:c.INV_SUB_MIX[0][c.SBOX[d>>>24]]^c.INV_SUB_MIX[1][c.SBOX[d>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[d>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&d]]}this._nRounds=n,this._keySchedule=r,this._invKeySchedule=s},a.prototype.encryptBlockRaw=function(e){return e=i(e),o(e,this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},a.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=s.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},a.prototype.decryptBlock=function(e){var t=(e=i(e))[1];e[1]=e[3],e[3]=t;var n=o(e,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),r=s.allocUnsafe(16);return r.writeUInt32BE(n[0],0),r.writeUInt32BE(n[3],4),r.writeUInt32BE(n[2],8),r.writeUInt32BE(n[1],12),r},a.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},t.exports.AES=a},{"safe-buffer":160}],25:[function(e,t,n){function i(e,t,n,i){a.call(this);var s=o.alloc(4,0);this._cipher=new r.AES(t);var c=this._cipher.encryptBlock(s);this._ghash=new l(c),n=function(e,t,n){if(12===t.length)return e._finID=o.concat([t,o.from([0,0,0,1])]),o.concat([t,o.from([0,0,0,2])]);var i=new l(n),r=t.length,a=r%16;i.update(t),a&&(a=16-a,i.update(o.alloc(a,0))),i.update(o.alloc(8,0));var s=8*r,c=o.alloc(8);c.writeUIntBE(s,0,8),i.update(c),e._finID=i.state;var f=o.from(e._finID);return u(f),f}(this,n,c),this._prev=o.from(n),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=i,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}var r=e("./aes"),o=e("safe-buffer").Buffer,a=e("cipher-base"),s=e("inherits"),l=e("./ghash"),c=e("buffer-xor"),u=e("./incr32");s(i,a),i.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=o.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},i.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var i=Math.min(e.length,t.length),r=0;r<i;++r)n+=e[r]^t[r];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},i.prototype.getAuthTag=function(){if(this._decrypt||!o.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},i.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},i.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},t.exports=i},{"./aes":24,"./ghash":29,"./incr32":30,"buffer-xor":51,"cipher-base":53,inherits:117,"safe-buffer":160}],26:[function(e,t,n){var i=e("./encrypter"),r=e("./decrypter"),o=e("./modes/list.json");n.createCipher=n.Cipher=i.createCipher,n.createCipheriv=n.Cipheriv=i.createCipheriv,n.createDecipher=n.Decipher=r.createDecipher,n.createDecipheriv=n.Decipheriv=r.createDecipheriv,n.listCiphers=n.getCiphers=function(){return Object.keys(o)}},{"./decrypter":27,"./encrypter":28,"./modes/list.json":38}],27:[function(e,t,n){function i(e,t,n){u.call(this),this._cache=new r,this._last=void 0,this._cipher=new f.AES(t),this._prev=s.from(n),this._mode=e,this._autopadding=!0}function r(){this.cache=s.allocUnsafe(0)}function o(e,t,n){var r=l[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=s.from(n)),"GCM"!==r.mode&&n.length!==r.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=s.from(t)),t.length!==r.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===r.type?new c(r.module,t,n,!0):"auth"===r.type?new a(r.module,t,n,!0):new i(r.module,t,n)}var a=e("./authCipher"),s=e("safe-buffer").Buffer,l=e("./modes"),c=e("./streamCipher"),u=e("cipher-base"),f=e("./aes"),d=e("evp_bytestokey");e("inherits")(i,u),i.prototype._update=function(e){this._cache.add(e);for(var t,n,i=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),i.push(n);return s.concat(i)},i.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){for(var t=e[15],n=-1;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},i.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},r.prototype.add=function(e){this.cache=s.concat([this.cache,e])},r.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},r.prototype.flush=function(){if(this.cache.length)return this.cache},n.createDecipher=function(e,t){var n=l[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=d(t,!1,n.key,n.iv);return o(e,i.key,i.iv)},n.createDecipheriv=o},{"./aes":24,"./authCipher":25,"./modes":37,"./streamCipher":40,"cipher-base":53,evp_bytestokey:100,inherits:117,"safe-buffer":160}],28:[function(e,t,n){function i(e,t,n){u.call(this),this._cache=new r,this._cipher=new f.AES(t),this._prev=l.from(n),this._mode=e,this._autopadding=!0}function r(){this.cache=l.allocUnsafe(0)}function o(e,t,n){var r=a[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=l.from(t)),t.length!==r.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=l.from(n)),"GCM"!==r.mode&&n.length!==r.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===r.type?new c(r.module,t,n):"auth"===r.type?new s(r.module,t,n):new i(r.module,t,n)}var a=e("./modes"),s=e("./authCipher"),l=e("safe-buffer").Buffer,c=e("./streamCipher"),u=e("cipher-base"),f=e("./aes"),d=e("evp_bytestokey");e("inherits")(i,u),i.prototype._update=function(e){this._cache.add(e);for(var t,n,i=[];t=this._cache.get();)n=this._mode.encrypt(this,t),i.push(n);return l.concat(i)};var h=l.alloc(16,16);i.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},i.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},r.prototype.add=function(e){this.cache=l.concat([this.cache,e])},r.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},r.prototype.flush=function(){for(var e=16-this.cache.length,t=l.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return l.concat([this.cache,t])},n.createCipheriv=o,n.createCipher=function(e,t){var n=a[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=d(t,!1,n.key,n.iv);return o(e,i.key,i.iv)}},{"./aes":24,"./authCipher":25,"./modes":37,"./streamCipher":40,"cipher-base":53,evp_bytestokey:100,inherits:117,"safe-buffer":160}],29:[function(e,t,n){function i(e){var t=o.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function r(e){this.h=e,this.state=o.alloc(16,0),this.cache=o.allocUnsafe(0)}var o=e("safe-buffer").Buffer,a=o.alloc(16,0);r.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},r.prototype._multiply=function(){for(var e,t,n=function(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}(this.h),r=[0,0,0,0],o=-1;++o<128;){for(0!=(this.state[~~(o/8)]&1<<7-o%8)&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),t=0!=(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,t&&(n[0]=n[0]^225<<24)}this.state=i(r)},r.prototype.update=function(e){this.cache=o.concat([this.cache,e]);for(var t;this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},r.prototype.final=function(e,t){return this.cache.length&&this.ghash(o.concat([this.cache,a],16)),this.ghash(i([0,e,0,t])),this.state},t.exports=r},{"safe-buffer":160}],30:[function(e,t,n){t.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},{}],31:[function(e,t,n){var i=e("buffer-xor");n.encrypt=function(e,t){var n=i(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},n.decrypt=function(e,t){var n=e._prev;e._prev=t;var r=e._cipher.decryptBlock(t);return i(r,n)}},{"buffer-xor":51}],32:[function(e,t,n){function i(e,t,n){var i=t.length,a=o(t,e._cache);return e._cache=e._cache.slice(i),e._prev=r.concat([e._prev,n?t:a]),a}var r=e("safe-buffer").Buffer,o=e("buffer-xor");n.encrypt=function(e,t,n){for(var o,a=r.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=r.allocUnsafe(0)),!(e._cache.length<=t.length)){a=r.concat([a,i(e,t,n)]);break}o=e._cache.length,a=r.concat([a,i(e,t.slice(0,o),n)]),t=t.slice(o)}return a}},{"buffer-xor":51,"safe-buffer":160}],33:[function(e,t,n){function i(e,t,n){for(var i,o,a,s=-1,l=0;++s<8;)i=e._cipher.encryptBlock(e._prev),o=t&1<<7-s?128:0,l+=(128&(a=i[0]^o))>>s%8,e._prev=function(e,t){var n=e.length,i=-1,o=r.allocUnsafe(e.length);e=r.concat([e,r.from([t])]);for(;++i<n;)o[i]=e[i]<<1|e[i+1]>>7;return o}(e._prev,n?o:a);return l}var r=e("safe-buffer").Buffer;n.encrypt=function(e,t,n){for(var o=t.length,a=r.allocUnsafe(o),s=-1;++s<o;)a[s]=i(e,t[s],n);return a}},{"safe-buffer":160}],34:[function(e,t,n){function i(e,t,n){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=r.concat([e._prev.slice(1),r.from([n?t:i])]),i}var r=e("safe-buffer").Buffer;n.encrypt=function(e,t,n){for(var o=t.length,a=r.allocUnsafe(o),s=-1;++s<o;)a[s]=i(e,t[s],n);return a}},{"safe-buffer":160}],35:[function(e,t,n){function i(e){var t=e._cipher.encryptBlockRaw(e._prev);return a(e._prev),t}var r=e("buffer-xor"),o=e("safe-buffer").Buffer,a=e("../incr32");n.encrypt=function(e,t){var n=Math.ceil(t.length/16),a=e._cache.length;e._cache=o.concat([e._cache,o.allocUnsafe(16*n)]);for(var s=0;s<n;s++){var l=i(e),c=a+16*s;e._cache.writeUInt32BE(l[0],c+0),e._cache.writeUInt32BE(l[1],c+4),e._cache.writeUInt32BE(l[2],c+8),e._cache.writeUInt32BE(l[3],c+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,u)}},{"../incr32":30,"buffer-xor":51,"safe-buffer":160}],36:[function(e,t,n){n.encrypt=function(e,t){return e._cipher.encryptBlock(t)},n.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},{}],37:[function(e,t,n){var i={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},r=e("./list.json");for(var o in r)r[o].module=i[r[o].mode];t.exports=r},{"./cbc":31,"./cfb":32,"./cfb1":33,"./cfb8":34,"./ctr":35,"./ecb":36,"./list.json":38,"./ofb":39}],38:[function(e,t,n){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],39:[function(e,t,n){(function(t){function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var r=e("buffer-xor");n.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),r(n,o)}}).call(this,e("buffer").Buffer)},{buffer:52,"buffer-xor":51}],40:[function(e,t,n){function i(e,t,n,i){a.call(this),this._cipher=new r.AES(t),this._prev=o.from(n),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=i,this._mode=e}var r=e("./aes"),o=e("safe-buffer").Buffer,a=e("cipher-base");e("inherits")(i,a),i.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},i.prototype._final=function(){this._cipher.scrub()},t.exports=i},{"./aes":24,"cipher-base":53,inherits:117,"safe-buffer":160}],41:[function(e,t,n){function i(e,t,n){if(e=e.toLowerCase(),c[e])return a.createCipheriv(e,t,n);if(l[e])return new s({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function r(e,t,n){if(e=e.toLowerCase(),c[e])return a.createDecipheriv(e,t,n);if(l[e])return new s({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}var o=e("evp_bytestokey"),a=e("browserify-aes/browser"),s=e("browserify-des"),l=e("browserify-des/modes"),c=e("browserify-aes/modes");n.createCipher=n.Cipher=function(e,t){var n,r;if(e=e.toLowerCase(),c[e])n=c[e].key,r=c[e].iv;else{if(!l[e])throw new TypeError("invalid suite type");n=8*l[e].key,r=l[e].iv}var a=o(t,!1,n,r);return i(e,a.key,a.iv)},n.createCipheriv=n.Cipheriv=i,n.createDecipher=n.Decipher=function(e,t){var n,i;if(e=e.toLowerCase(),c[e])n=c[e].key,i=c[e].iv;else{if(!l[e])throw new TypeError("invalid suite type");n=8*l[e].key,i=l[e].iv}var a=o(t,!1,n,i);return r(e,a.key,a.iv)},n.createDecipheriv=n.Decipheriv=r,n.listCiphers=n.getCiphers=function(){return Object.keys(l).concat(a.getCiphers())}},{"browserify-aes/browser":26,"browserify-aes/modes":37,"browserify-des":42,"browserify-des/modes":43,evp_bytestokey:100}],42:[function(e,t,n){(function(n){function i(e){r.call(this);var t,i=e.mode.toLowerCase(),o=s[i];t=e.decrypt?"decrypt":"encrypt";var a=e.key;"des-ede"!==i&&"des-ede-cbc"!==i||(a=n.concat([a,a.slice(0,8)]));var l=e.iv;this._des=o.create({key:a,iv:l,type:t})}var r=e("cipher-base"),o=e("des.js"),a=e("inherits"),s={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=i,a(i,r),i.prototype._update=function(e){return new n(this._des.update(e))},i.prototype._final=function(){return new n(this._des.final())}}).call(this,e("buffer").Buffer)},{buffer:52,"cipher-base":53,"des.js":73,inherits:117}],43:[function(e,t,n){n["des-ecb"]={key:8,iv:0},n["des-cbc"]=n.des={key:8,iv:8},n["des-ede3-cbc"]=n.des3={key:24,iv:8},n["des-ede3"]={key:24,iv:0},n["des-ede-cbc"]={key:16,iv:8},n["des-ede"]={key:16,iv:0}},{}],44:[function(e,t,n){(function(n){function i(e,t){var i=function(e){var t=r(e);return{blinder:t.toRed(o.mont(e.modulus)).redPow(new o(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(t),a=t.modulus.byteLength(),s=(o.mont(t.modulus),new o(e).mul(i.blinder).umod(t.modulus)),l=s.toRed(o.mont(t.prime1)),c=s.toRed(o.mont(t.prime2)),u=t.coefficient,f=t.prime1,d=t.prime2,h=l.redPow(t.exponent1),p=c.redPow(t.exponent2);h=h.fromRed(),p=p.fromRed();var m=h.isub(p).imul(u).umod(f);return m.imul(d),p.iadd(m),new n(p.imul(i.unblinder).umod(t.modulus).toArray(!1,a))}function r(e){for(var t=e.modulus.byteLength(),n=new o(a(t));n.cmp(e.modulus)>=0||!n.umod(e.prime1)||!n.umod(e.prime2);)n=new o(a(t));return n}var o=e("bn.js"),a=e("randombytes");t.exports=i,i.getr=r}).call(this,e("buffer").Buffer)},{"bn.js":20,buffer:52,randombytes:144}],45:[function(e,t,n){t.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":46}],46:[function(e,t,n){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],47:[function(e,t,n){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],48:[function(e,t,n){(function(n){function i(e){l.Writable.call(this);var t=d[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function r(e){l.Writable.call(this);var t=d[e];if(!t)throw new Error("Unknown message digest");this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function o(e){return new i(e)}function a(e){return new r(e)}var s=e("create-hash"),l=e("stream"),c=e("inherits"),u=e("./sign"),f=e("./verify"),d=e("./algorithms.json");Object.keys(d).forEach(function(e){d[e].id=new n(d[e].id,"hex"),d[e.toLowerCase()]=d[e]}),c(i,l.Writable),i.prototype._write=function(e,t,n){this._hash.update(e),n()},i.prototype.update=function(e,t){return"string"==typeof e&&(e=new n(e,t)),this._hash.update(e),this},i.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),i=u(n,e,this._hashType,this._signType,this._tag);return t?i.toString(t):i},c(r,l.Writable),r.prototype._write=function(e,t,n){this._hash.update(e),n()},r.prototype.update=function(e,t){return"string"==typeof e&&(e=new n(e,t)),this._hash.update(e),this},r.prototype.verify=function(e,t,i){"string"==typeof t&&(t=new n(t,i)),this.end();var r=this._hash.digest();return f(t,r,e,this._signType,this._tag)},t.exports={Sign:o,Verify:a,createSign:o,createVerify:a}}).call(this,e("buffer").Buffer)},{"./algorithms.json":46,"./sign":49,"./verify":50,buffer:52,"create-hash":67,inherits:117,stream:169}],49:[function(e,t,n){(function(n){function i(e,t,i,o){if((e=new n(e.toArray())).length<t.byteLength()){var s=new n(t.byteLength()-e.length);s.fill(0),e=n.concat([s,e])}var l=i.length,c=function(e,t){e=(e=r(e,t)).mod(t);var i=new n(e.toArray());if(i.length<t.byteLength()){var o=new n(t.byteLength()-i.length);o.fill(0),i=n.concat([o,i])}return i}(i,t),u=new n(l);u.fill(1);var f=new n(l);return f.fill(0),f=a(o,f).update(u).update(new n([0])).update(e).update(c).digest(),u=a(o,f).update(u).digest(),f=a(o,f).update(u).update(new n([1])).update(e).update(c).digest(),u=a(o,f).update(u).digest(),{k:f,v:u}}function r(e,t){var n=new c(e),i=(e.length<<3)-t.bitLength();return i>0&&n.ishrn(i),n}function o(e,t,i){var o,s;do{for(o=new n(0);8*o.length<e.bitLength();)t.v=a(i,t.k).update(t.v).digest(),o=n.concat([o,t.v]);s=r(o,e),t.k=a(i,t.k).update(t.v).update(new n([0])).digest(),t.v=a(i,t.k).update(t.v).digest()}while(-1!==s.cmp(e));return s}var a=e("create-hmac"),s=e("browserify-rsa"),l=e("elliptic").ec,c=e("bn.js"),u=e("parse-asn1"),f=e("./curves.json");t.exports=function(e,t,a,d,h){var p=u(t);if(p.curve){if("ecdsa"!==d&&"ecdsa/rsa"!==d)throw new Error("wrong private key type");return function(e,t){var i=f[t.curve.join(".")];if(!i)throw new Error("unknown curve "+t.curve.join("."));var r=new l(i).keyFromPrivate(t.privateKey).sign(e);return new n(r.toDER())}(e,p)}if("dsa"===p.type){if("dsa"!==d)throw new Error("wrong private key type");return function(e,t,a){for(var s,l=t.params.priv_key,u=t.params.p,f=t.params.q,d=t.params.g,h=new c(0),p=r(e,f).mod(f),m=!1,g=i(l,f,e,a);!1===m;)s=o(f,g,a),h=function(e,t,n,i){return d.toRed(c.mont(n)).redPow(t).fromRed().mod(i)}(0,s,u,f),0===(m=s.invm(f).imul(p.add(l.mul(h))).mod(f)).cmpn(0)&&(m=!1,h=new c(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var i=[48,e.length+t.length+4,2,e.length];return i=i.concat(e,[2,t.length],t),new n(i)}(h,m)}(e,p,a)}if("rsa"!==d&&"ecdsa/rsa"!==d)throw new Error("wrong private key type");e=n.concat([h,e]);for(var m=p.modulus.byteLength(),g=[0,1];e.length+g.length+1<m;)g.push(255);g.push(0);for(var v=-1;++v<e.length;)g.push(e[v]);return s(g,p)},t.exports.getKey=i,t.exports.makeKey=o}).call(this,e("buffer").Buffer)},{"./curves.json":47,"bn.js":20,"browserify-rsa":44,buffer:52,"create-hmac":70,elliptic:83,"parse-asn1":129}],50:[function(e,t,n){(function(n){function i(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}var r=e("bn.js"),o=e("elliptic").ec,a=e("parse-asn1"),s=e("./curves.json");t.exports=function(e,t,l,c,u){var f=a(l);if("ec"===f.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var i=s[n.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var r=new o(i),a=n.data.subjectPrivateKey.data;return r.verify(t,e,a)}(e,t,f)}if("dsa"===f.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var o=n.data.p,s=n.data.q,l=n.data.g,c=n.data.pub_key,u=a.signature.decode(e,"der"),f=u.s,d=u.r;i(f,s),i(d,s);var h=r.mont(o),p=f.invm(s);return 0===l.toRed(h).redPow(new r(t).mul(p).mod(s)).fromRed().mul(c.toRed(h).redPow(d.mul(p).mod(s)).fromRed()).mod(o).mod(s).cmp(d)}(e,t,f)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");t=n.concat([u,t]);for(var d=f.modulus.byteLength(),h=[1],p=0;t.length+h.length+2<d;)h.push(255),p++;h.push(0);for(var m=-1;++m<t.length;)h.push(t[m]);h=new n(h);var g=r.mont(f.modulus);e=(e=new r(e).toRed(g)).redPow(new r(f.publicExponent)),e=new n(e.fromRed().toArray());var v=p<8?1:0;for(d=Math.min(e.length,h.length),e.length!==h.length&&(v=1),m=-1;++m<d;)v|=e[m]^h[m];return 0===v}}).call(this,e("buffer").Buffer)},{"./curves.json":47,"bn.js":20,buffer:52,elliptic:83,"parse-asn1":129}],51:[function(e,t,n){(function(e){t.exports=function(t,n){for(var i=Math.min(t.length,n.length),r=new e(i),o=0;o<i;++o)r[o]=t[o]^n[o];return r}}).call(this,e("buffer").Buffer)},{buffer:52}],52:[function(e,t,n){"use strict";function i(e){if(e>j)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return s(e)}return o(e,t,n)}function o(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return D(e)?function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var i;i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return i.__proto__=r.prototype,i}(e,t,n):"string"==typeof e?function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!r.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=0|u(e,t),o=i(n),a=o.write(e,t);a!==n&&(o=o.slice(0,a));return o}(e,t):function(e){if(r.isBuffer(e)){var t=0|c(e.length),n=i(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if(L(e)||"length"in e)return"number"!=typeof e.length||I(e.length)?i(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e){return a(e),i(e<0?0:0|c(e))}function l(e){for(var t=e.length<0?0:0|c(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function c(e){if(e>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return 0|e}function u(e,t){if(r.isBuffer(e))return e.length;if(L(e)||D(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return E(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return T(e).length;default:if(i)return E(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var i=e.length;(!t||t<0)&&(t=0);(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return r}(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return function(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}(this,t,n);case"latin1":case"binary":return function(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}(this,t,n);case"base64":return function(e,t,n){return 0===t&&n===e.length?P.fromByteArray(e):P.fromByteArray(e.slice(t,n))}(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function d(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function h(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,I(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=r.from(t,i)),r.isBuffer(t))return 0===t.length?-1:p(e,t,n,i,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):p(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function p(e,t,n,i,r){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var c;if(r){var u=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===l)return u*a}else-1!==u&&(c-=c-u),u=-1}else for(n+l>s&&(n=s-l),c=n;c>=0;c--){for(var f=!0,d=0;d<l;d++)if(o(e,c+d)!==o(t,d)){f=!1;break}if(f)return c}return-1}function m(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(I(s))return a;e[n+a]=s}return a}function g(e,t,n,i){return A(E(t,e.length-n),e,n,i)}function v(e,t,n,i){return A(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function b(e,t,n,i){return v(e,t,n,i)}function y(e,t,n,i){return A(T(t),e,n,i)}function w(e,t,n,i){return A(function(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function _(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o=e[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=n){var l,c,u,f;switch(s){case 1:o<128&&(a=o);break;case 2:128==(192&(l=e[r+1]))&&(f=(31&o)<<6|63&l)>127&&(a=f);break;case 3:l=e[r+1],c=e[r+2],128==(192&l)&&128==(192&c)&&(f=(15&o)<<12|(63&l)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:l=e[r+1],c=e[r+2],u=e[r+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(f=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return function(e){var t=e.length;if(t<=q)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=q));return n}(i)}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,n,i,o,a){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function C(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function S(e,t,n,i,r){return t=+t,n>>>=0,r||C(e,0,n,4),O.write(e,t,n,i,23,4),n+4}function M(e,t,n,i,r){return t=+t,n>>>=0,r||C(e,0,n,8),O.write(e,t,n,i,52,8),n+8}function E(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],a=0;a<i;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function T(e){return P.toByteArray(function(e){if((e=e.trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function D(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function L(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function I(e){return e!=e}var P=e("base64-js"),O=e("ieee754");n.Buffer=r,n.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},n.INSPECT_MAX_BYTES=50;var j=2147483647;n.kMaxLength=j,(r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,n){return o(e,t,n)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,t,n){return function(e,t,n){return a(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},r.allocUnsafe=function(e){return s(e)},r.allocUnsafeSlow=function(e){return s(e)},r.isBuffer=function(e){return null!=e&&!0===e._isBuffer},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=r.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!r.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},r.byteLength=u,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},r.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):f.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,i,o){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var a=o-i,s=n-t,l=Math.min(a,s),c=this.slice(i,o),u=e.slice(t,n),f=0;f<l;++f)if(c[f]!==u[f]){a=c[f],s=u[f];break}return a<s?-1:s<a?1:0},r.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},r.prototype.indexOf=function(e,t,n){return h(this,e,t,n,!0)},r.prototype.lastIndexOf=function(e,t,n){return h(this,e,t,n,!1)},r.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return g(this,e,t,n);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return y(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;r.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=r.prototype,i},r.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},r.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},r.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},r.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},r.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),O.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),O.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),O.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),O.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){x(this,e,t,n,Math.pow(2,8*n)-1,0)}var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){x(this,e,t,n,Math.pow(2,8*n)-1,0)}var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);x(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},r.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);x(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,n){return S(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return S(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&n<t&&t<i)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},r.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=r.isBuffer(e)?e:new r(e,i),l=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%l]}return this};var N=/[^+/0-9A-Za-z-_]/g},{"base64-js":19,ieee754:115}],53:[function(e,t,n){function i(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}var r=e("safe-buffer").Buffer,o=e("stream").Transform,a=e("string_decoder").StringDecoder;e("inherits")(i,o),i.prototype.update=function(e,t,n){"string"==typeof e&&(e=r.from(e,t));var i=this._update(e);return this.hashMode?this:(n&&(i=this._toString(i,n)),i)},i.prototype.setAutoPadding=function(){},i.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},i.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},i.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},i.prototype._transform=function(e,t,n){var i;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){i=e}finally{n(i)}},i.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},i.prototype._finalOrDigest=function(e){var t=this.__final()||r.alloc(0);return e&&(t=this._toString(t,e,!0)),t},i.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var i=this._decoder.write(e);return n&&(i+=this._decoder.end()),i},t.exports=i},{inherits:117,"safe-buffer":160,stream:169,string_decoder:170}],54:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){function t(e,t,n){var i;return i=e.getWrapperElement().appendChild(document.createElement("div")),i.className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?i.innerHTML=t:i.appendChild(t),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(i,r,o){function a(e){if("string"==typeof e)f.value=e;else{if(c)return;c=!0,l.parentNode.removeChild(l),u.focus(),o.onClose&&o.onClose(l)}}o||(o={}),n(this,null);var s,l=t(this,i,o.bottom),c=!1,u=this,f=l.getElementsByTagName("input")[0];return f?(f.focus(),o.value&&(f.value=o.value,!1!==o.selectValueOnOpen&&f.select()),o.onInput&&e.on(f,"input",function(e){o.onInput(e,f.value,a)}),o.onKeyUp&&e.on(f,"keyup",function(e){o.onKeyUp(e,f.value,a)}),e.on(f,"keydown",function(t){o&&o.onKeyDown&&o.onKeyDown(t,f.value,a)||((27==t.keyCode||!1!==o.closeOnEnter&&13==t.keyCode)&&(f.blur(),e.e_stop(t),a()),13==t.keyCode&&r(f.value,t))}),!1!==o.closeOnBlur&&e.on(f,"blur",a)):(s=l.getElementsByTagName("button")[0])&&(e.on(s,"click",function(){a(),u.focus()}),!1!==o.closeOnBlur&&e.on(s,"blur",a),s.focus()),a}),e.defineExtension("openConfirm",function(i,r,o){function a(){c||(c=!0,s.parentNode.removeChild(s),u.focus())}n(this,null);var s=t(this,i,o&&o.bottom),l=s.getElementsByTagName("button"),c=!1,u=this,f=1;l[0].focus();for(var d=0;d<l.length;++d){var h=l[d];!function(t){e.on(h,"click",function(n){e.e_preventDefault(n),a(),t&&t(u)})}(r[d]),e.on(h,"blur",function(){--f,setTimeout(function(){f<=0&&a()},200)}),e.on(h,"focus",function(){++f})}}),e.defineExtension("openNotification",function(i,r){function o(){l||(l=!0,clearTimeout(a),s.parentNode.removeChild(s))}n(this,o);var a,s=t(this,i,r&&r.bottom),l=!1,c=r&&void 0!==r.duration?r.duration:5e3;return e.on(s,"click",function(t){e.e_preventDefault(t),o()}),c&&(a=setTimeout(o,c)),o})})},{"../../lib/codemirror":60}],55:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){function t(e,t,i){var r=e.getLineHandle(t.line),o=t.ch-1,l=i&&i.afterCursor;null==l&&(l=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var c=!l&&o>=0&&s[r.text.charAt(o)]||s[r.text.charAt(++o)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(i&&i.strict&&u>0!=(o==t.ch))return null;var f=e.getTokenTypeAt(a(t.line,o+1)),d=n(e,a(t.line,o+(u>0?1:0)),u,f||null,i);return null==d?null:{from:a(t.line,o),to:d&&d.pos,match:d&&d.ch==c.charAt(0),forward:u>0}}function n(e,t,n,i,r){for(var o=r&&r.maxScanLineLength||1e4,l=r&&r.maxScanLines||1e3,c=[],u=r&&r.bracketRegex?r.bracketRegex:/[(){}[\]]/,f=n>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),d=t.line;d!=f;d+=n){var h=e.getLine(d);if(h){var p=n>0?0:h.length-1,m=n>0?h.length:-1;if(!(h.length>o))for(d==t.line&&(p=t.ch-(n<0?1:0));p!=m;p+=n){var g=h.charAt(p);if(u.test(g)&&(void 0===i||e.getTokenTypeAt(a(d,p+1))==i)){if(">"==s[g].charAt(1)==n>0)c.push(g);else{if(!c.length)return{pos:a(d,p),ch:g};c.pop()}}}}}return d-n!=(n>0?e.lastLine():e.firstLine())&&null}function i(e,n,i){for(var r=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&t(e,l[c].head,i);if(u&&e.getLine(u.from.line).length<=r){var f=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(u.from,a(u.from.line,u.from.ch+1),{className:f})),u.to&&e.getLine(u.to.line).length<=r&&s.push(e.markText(u.to,a(u.to.line,u.to.ch+1),{className:f}))}}if(s.length){o&&e.state.focused&&e.focus();var d=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!n)return d;setTimeout(d,800)}}function r(e){e.operation(function(){l&&(l(),l=null),l=i(e,!1,e.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),a=e.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,n,i){i&&i!=e.Init&&(t.off("cursorActivity",r),l&&(l(),l=null)),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",r))}),e.defineExtension("matchBrackets",function(){i(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,i){return(i||"boolean"==typeof n)&&(i?(i.strict=n,n=i):n=n?{strict:!0}:null),t(this,e,n)}),e.defineExtension("scanForBracket",function(e,t,i,r){return n(this,e,t,i,r)})})},{"../../lib/codemirror":60}],56:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp((!1===t?"":"^")+"(?:"+e+")",n)}function i(t,i){return function(o,a){if(a.pending){var s=a.pending.shift();return 0==a.pending.length&&(a.pending=null),o.pos+=s.text.length,s.token}if(a.local){if(a.local.end&&o.match(a.local.end)){c=a.local.endToken||null;return a.local=a.localState=null,c}var l,c=a.local.mode.token(o,a.localState);return a.local.endScan&&(l=a.local.endScan.exec(o.current()))&&(o.pos=o.start+l.index),c}for(var u=t[a.state],f=0;f<u.length;f++){var d=u[f],h=(!d.data.sol||o.sol())&&o.match(d.regex);if(h){d.data.next?a.state=d.data.next:d.data.push?((a.stack||(a.stack=[])).push(a.state),a.state=d.data.push):d.data.pop&&a.stack&&a.stack.length&&(a.state=a.stack.pop()),d.data.mode&&function(t,i,o,a){var s;if(o.persistent)for(var l=i.persistentStates;l&&!s;l=l.next)(o.spec?r(o.spec,l.spec):o.mode==l.mode)&&(s=l);var c=s?s.mode:o.mode||e.getMode(t,o.spec),u=s?s.state:e.startState(c);o.persistent&&!s&&(i.persistentStates={mode:c,spec:o.spec,state:u,next:i.persistentStates});i.localState=u,i.local={mode:c,end:o.end&&n(o.end),endScan:o.end&&!1!==o.forceEnd&&n(o.end,!1),endToken:a&&a.join?a[a.length-1]:a}}(i,a,d.data.mode,d.token),d.data.indent&&a.indent.push(o.indentation()+i.indentUnit),d.data.dedent&&a.indent.pop();var p=d.token;if(p&&p.apply&&(p=p(h)),h.length>2&&d.token&&"string"!=typeof d.token){a.pending=[];for(var m=2;m<h.length;m++)h[m]&&a.pending.push({text:h[m],token:d.token[m-1]});return o.backUp(h[0].length-(h[1]?h[1].length:0)),p[0]}return p&&p.join?p[0]:p}}return o.next(),null}}function r(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=0;for(var i in e)if(e.hasOwnProperty(i)){if(!t.hasOwnProperty(i)||!r(e[i],t[i]))return!1;n++}for(var i in t)t.hasOwnProperty(i)&&n--;return 0==n}e.defineSimpleMode=function(t,n){e.defineMode(t,function(t){return e.simpleMode(t,n)})},e.simpleMode=function(r,o){t(o,"start");var a={},s=o.meta||{},l=!1;for(var c in o)if(c!=s&&o.hasOwnProperty(c))for(var u=a[c]=[],f=o[c],d=0;d<f.length;d++){var h=f[d];u.push(new function(e,i){(e.next||e.push)&&t(i,e.next||e.push),this.regex=n(e.regex),this.token=function(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}(e.token),this.data=e}(h,o)),(h.indent||h.dedent)&&(l=!0)}var p={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:l?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var i=t.persistentStates;i;i=i.next)n.persistentStates={mode:i.mode,spec:i.spec,state:i.state==t.localState?n.localState:e.copyState(i.mode,i.state),next:n.persistentStates};return n},token:i(a,r),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:function(t,n){return function(i,r,o){if(i.local&&i.local.mode.indent)return i.local.mode.indent(i.localState,r,o);if(null==i.indent||i.local||n.dontIndentStates&&function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}(i.state,n.dontIndentStates)>-1)return e.Pass;var a=i.indent.length-1,s=t[i.state];e:for(;;){for(var l=0;l<s.length;l++){var c=s[l];if(c.data.dedent&&!1!==c.data.dedentIfLineStart){var u=c.regex.exec(r);if(u&&u[0]){a--,(c.next||c.push)&&(s=t[c.next||c.push]),r=r.slice(u[0].length);continue e}}}break}return a<0?0:i.indent[a]}}(a,s)};if(s)for(var m in s)s.hasOwnProperty(m)&&(p[m]=s[m]);return p}})},{"../../lib/codemirror":60}],57:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e){return e.global?e:new RegExp(e.source,function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e)+"g")}function n(e,n,i){n=t(n);for(var r=i.line,o=i.ch,a=e.lastLine();r<=a;r++,o=0){n.lastIndex=o;var s=e.getLine(r),c=n.exec(s);if(c)return{from:l(r,c.index),to:l(r,c.index+c[0].length),match:c}}}function i(e,t){for(var n,i=0;;){t.lastIndex=i;var r=t.exec(e);if(!r)return n;if(n=r,(i=n.index+(n[0].length||1))==e.length)return n}}function r(e,t,n,i){if(e.length==t.length)return n;for(var r=0,o=n+Math.max(0,e.length-t.length);;){if(r==o)return r;var a=r+o>>1,s=i(e.slice(0,a)).length;if(s==n)return a;s>n?o=a:r=a+1}}function o(e,o,c,u){this.atOccurrence=!1,this.doc=e,c=c?e.clipPos(c):l(0,0),this.pos={from:c,to:c};var f;"object"==typeof u?f=u.caseFold:(f=u,u=null),"string"==typeof o?(null==f&&(f=!1),this.matches=function(t,n){return(t?function(e,t,n,i){if(!t.length)return null;var o=i?a:s,c=o(t).split(/\r|\n\r?/);e:for(var u=n.line,f=n.ch,d=e.firstLine()-1+c.length;u>=d;u--,f=-1){var h=e.getLine(u);f>-1&&(h=h.slice(0,f));var p=o(h);if(1==c.length){var m=p.lastIndexOf(c[0]);if(-1==m)continue e;return{from:l(u,r(h,p,m,o)),to:l(u,r(h,p,m+c[0].length,o))}}var g=c[c.length-1];if(p.slice(0,g.length)==g){for(var v=1,n=u-c.length+1;v<c.length-1;v++)if(o(e.getLine(n+v))!=c[v])continue e;var b=e.getLine(u+1-c.length),y=o(b);if(y.slice(y.length-c[0].length)==c[0])return{from:l(u+1-c.length,r(b,y,b.length-c[0].length,o)),to:l(u,r(h,p,g.length,o))}}}}:function(e,t,n,i){if(!t.length)return null;var o=i?a:s,c=o(t).split(/\r|\n\r?/);e:for(var u=n.line,f=n.ch,d=e.lastLine()+1-c.length;u<=d;u++,f=0){var h=e.getLine(u).slice(f),p=o(h);if(1==c.length){var m=p.indexOf(c[0]);if(-1==m)continue e;return n=r(h,p,m,o)+f,{from:l(u,r(h,p,m,o)+f),to:l(u,r(h,p,m+c[0].length,o)+f)}}var g=p.length-c[0].length;if(p.slice(g)==c[0]){for(var v=1;v<c.length-1;v++)if(o(e.getLine(u+v))!=c[v])continue e;var b=e.getLine(u+c.length-1),y=o(b),w=c[c.length-1];if(y.slice(0,w.length)==w)return{from:l(u,r(h,p,g,o)+f),to:l(u+c.length-1,r(b,y,w.length,o))}}}})(e,o,n,f)}):(o=t(o),u&&!1===u.multiline?this.matches=function(r,a){return(r?function(e,n,r){n=t(n);for(var o=r.line,a=r.ch,s=e.firstLine();o>=s;o--,a=-1){var c=e.getLine(o);a>-1&&(c=c.slice(0,a));var u=i(c,n);if(u)return{from:l(o,u.index),to:l(o,u.index+u[0].length),match:u}}}:n)(e,o,a)}:this.matches=function(r,a){return(r?function(e,n,r){n=t(n);for(var o,a=1,s=r.line,c=e.firstLine();s>=c;){for(var u=0;u<a;u++){var f=e.getLine(s--);o=null==o?f.slice(0,r.ch):f+"\n"+o}a*=2;var d=i(o,n);if(d){var h=o.slice(0,d.index).split("\n"),p=d[0].split("\n"),m=s+h.length,g=h[h.length-1].length;return{from:l(m,g),to:l(m+p.length-1,1==p.length?g+p[0].length:p[p.length-1].length),match:d}}}}:function(e,i,r){if(!/\\s|\\n|\n|\\W|\\D|\[\^/.test(i.source))return n(e,i,r);i=t(i);for(var o,a=1,s=r.line,c=e.lastLine();s<=c;){for(var u=0;u<a;u++){var f=e.getLine(s++);o=null==o?f:o+"\n"+f}a*=2,i.lastIndex=r.ch;var d=i.exec(o);if(d){var h=o.slice(0,d.index).split("\n"),p=d[0].split("\n"),m=r.line+h.length-1,g=h[h.length-1].length;return{from:l(m,g),to:l(m+p.length-1,1==p.length?g+p[0].length:p[p.length-1].length),match:d}}}})(e,o,a)})}var a,s,l=e.Pos;String.prototype.normalize?(a=function(e){return e.normalize("NFD").toLowerCase()},s=function(e){return e.normalize("NFD")}):(a=function(e){return e.toLowerCase()},s=function(e){return e}),o.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=l(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(l(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=l(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,l(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var i=l(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to,n),this.pos.to=l(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,n){return new o(this.doc,e,t,n)}),e.defineDocExtension("getSearchCursor",function(e,t,n){return new o(this,e,t,n)}),e.defineExtension("selectMatches",function(t,n){for(var i=[],r=this.getSearchCursor(t,this.getCursor("from"),n);r.findNext()&&!(e.cmpPos(r.to(),this.getCursor("to"))>0);)i.push({anchor:r.from(),head:r.to()});i.length&&this.setSelections(i,0)})})},{"../../lib/codemirror":60}],58:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line==t.line&&e.ch==t.ch}function n(e){T.push(e),T.length>50&&T.shift()}function i(e){return T[T.length-(e?Math.min(e,1):1)]||""}function r(e,i,r,o,a){null==a&&(a=e.getRange(i,r)),"grow"==o&&A&&A.cm==e&&t(i,A.pos)&&e.isClean(A.gen)?function(e){if(!T.length)return n(e);T[T.length-1]+=e}(a):!1!==o&&n(a),e.replaceRange("",i,r,"+delete"),A="grow"==o?{cm:e,pos:i,gen:e.changeGeneration()}:null}function o(e,t,n){return e.findPosH(t,n,"char",!0)}function a(e,t,n){return e.findPosH(t,n,"word",!0)}function s(e,t,n){return e.findPosV(t,n,"line",e.doc.sel.goalColumn)}function l(e,t,n){return e.findPosV(t,n,"page",e.doc.sel.goalColumn)}function c(e,t,n){for(var i=t.line,r=e.getLine(i),o=/\S/.test(n<0?r.slice(0,t.ch):r.slice(t.ch)),a=e.firstLine(),s=e.lastLine();;){if((i+=n)<a||i>s)return e.clipPos(E(i-n,n<0?0:null));r=e.getLine(i);if(/\S/.test(r))o=!0;else if(o)return E(i,0)}}function u(e,t,n){for(var i=t.line,r=t.ch,o=e.getLine(t.line),a=!1;;){var s=o.charAt(r+(n<0?-1:0));if(s){if(a&&/[!?.]/.test(s))return E(i,r+(n>0?1:0));a||(a=/\w/.test(s)),r+=n}else{if(i==(n<0?e.firstLine():e.lastLine()))return E(i,r);if(o=e.getLine(i+n),!/\S/.test(o))return E(i,r);i+=n,r=n<0?o.length:0}}}function f(e,n,i){var r;if(e.findMatchingBracket&&(r=e.findMatchingBracket(n,{strict:!0}))&&r.match&&(r.forward?1:-1)==i)return i>0?E(r.to.line,r.to.ch+1):r.to;for(var o=!0;;o=!1){var a=e.getTokenAt(n),s=E(n.line,i<0?a.start:a.end);if(!(o&&i>0&&a.end==n.ch)&&/\w/.test(a.string))return s;var l=e.findPosH(s,i,"char");if(t(s,l))return n;n=l}}function d(e,t){var n=e.state.emacsPrefix;return n?(w(e),"-"==n?-1:Number(n)):t?null:1}function h(e){var t="string"==typeof e?function(t){t.execCommand(e)}:e;return function(e){var n=d(e);t(e);for(var i=1;i<n;++i)t(e)}}function p(e,n,i,r){var o=d(e);o<0&&(r=-r,o=-o);for(var a=0;a<o;++a){var s=i(e,n,r);if(t(s,n))break;n=s}return n}function m(e,t){var n=function(n){n.extendSelection(p(n,n.getCursor(),e,t))};return n.motion=!0,n}function g(e,t,n,i){for(var o,a=e.listSelections(),s=a.length;s--;)r(e,o=a[s].head,p(e,o,t,n),i)}function v(e,t){if(e.somethingSelected()){for(var n,i=e.listSelections(),o=i.length;o--;)r(e,(n=i[o]).anchor,n.head,t);return!0}}function b(e,t){e.state.emacsPrefix?"-"!=t&&(e.state.emacsPrefix+=t):(e.state.emacsPrefix=t,e.on("keyHandled",y),e.on("inputRead",_))}function y(e,t){e.state.emacsPrefixMap||D.hasOwnProperty(t)||w(e)}function w(e){e.state.emacsPrefix=null,e.off("keyHandled",y),e.off("inputRead",_)}function _(e,t){var n=d(e);if(n>1&&"+input"==t.origin){for(var i=t.text.join("\n"),r="",o=1;o<n;++o)r+=i;e.replaceSelection(r)}}function k(e,t){("string"!=typeof t||!/^\d$/.test(t)&&"Ctrl-U"!=t)&&(e.removeKeyMap(I),e.state.emacsPrefixMap=!1,e.off("keyHandled",k),e.off("inputRead",k))}function x(e){e.setCursor(e.getCursor()),e.setExtending(!e.getExtending()),e.on("change",function(){e.setExtending(!1)})}function C(e){e.setExtending(!1),e.setCursor(e.getCursor())}function S(e,t){var n=e.getCursor(),i=e.findPosH(n,1,"word");e.replaceRange(t(e.getRange(n,i)),n,i),e.setCursor(i)}function M(e){I[e]=function(t){b(t,e)},L["Ctrl-"+e]=function(t){b(t,e)},D["Ctrl-"+e]=!0}var E=e.Pos,T=[],A=null,D={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};e.emacs={kill:r,killRegion:v,repeated:h};for(var L=e.keyMap.emacs=e.normalizeKeyMap({"Ctrl-W":function(e){r(e,e.getCursor("start"),e.getCursor("end"),!0)},"Ctrl-K":h(function(e){var t=e.getCursor(),n=e.clipPos(E(t.line)),i=e.getRange(t,n);/\S/.test(i)||(i+="\n",n=E(t.line+1,0)),r(e,t,n,"grow",i)}),"Alt-W":function(e){n(e.getSelection()),C(e)},"Ctrl-Y":function(e){var t=e.getCursor();e.replaceRange(i(d(e)),t,t,"paste"),e.setSelection(t,e.getCursor())},"Alt-Y":function(e){e.replaceSelection((T.length>1&&T.pop(),i()),"around","paste")},"Ctrl-Space":x,"Ctrl-Shift-2":x,"Ctrl-F":m(o,1),"Ctrl-B":m(o,-1),Right:m(o,1),Left:m(o,-1),"Ctrl-D":function(e){g(e,o,1,!1)},Delete:function(e){v(e,!1)||g(e,o,1,!1)},"Ctrl-H":function(e){g(e,o,-1,!1)},Backspace:function(e){v(e,!1)||g(e,o,-1,!1)},"Alt-F":m(a,1),"Alt-B":m(a,-1),"Alt-D":function(e){g(e,a,1,"grow")},"Alt-Backspace":function(e){g(e,a,-1,"grow")},"Ctrl-N":m(s,1),"Ctrl-P":m(s,-1),Down:m(s,1),Up:m(s,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":m(l,-1),"Ctrl-V":m(l,1),PageUp:m(l,-1),PageDown:m(l,1),"Ctrl-Up":m(c,-1),"Ctrl-Down":m(c,1),"Alt-A":m(u,-1),"Alt-E":m(u,1),"Alt-K":function(e){g(e,u,1,"grow")},"Ctrl-Alt-K":function(e){g(e,f,1,"grow")},"Ctrl-Alt-Backspace":function(e){g(e,f,-1,"grow")},"Ctrl-Alt-F":m(f,1),"Ctrl-Alt-B":m(f,-1),"Shift-Ctrl-Alt-2":function(e){var t=e.getCursor();e.setSelection(p(e,t,f,1),t)},"Ctrl-Alt-T":function(e){var t=f(e,e.getCursor(),-1),n=f(e,t,1),i=f(e,n,1),r=f(e,i,-1);e.replaceRange(e.getRange(r,i)+e.getRange(n,r)+e.getRange(t,n),t,i)},"Ctrl-Alt-U":h(function(e){for(var t=e.getCursor(),n=t.line,i=t.ch,r=[];n>=e.firstLine();){for(var o=e.getLine(n),a=null==i?o.length:i;a>0;)if(")"==(i=o.charAt(--a)))r.push("(");else if("]"==i)r.push("[");else if("}"==i)r.push("{");else if(/[\(\{\[]/.test(i)&&(!r.length||r.pop()!=i))return e.extendSelection(E(n,a));--n,i=null}}),"Alt-Space":function(e){for(var t=e.getCursor(),n=t.ch,i=t.ch,r=e.getLine(t.line);n&&/\s/.test(r.charAt(n-1));)--n;for(;i<r.length&&/\s/.test(r.charAt(i));)++i;e.replaceRange(" ",E(t.line,n),E(t.line,i))},"Ctrl-O":h(function(e){e.replaceSelection("\n","start")}),"Ctrl-T":h(function(e){e.execCommand("transposeChars")}),"Alt-C":h(function(e){S(e,function(e){var t=e.search(/\w/);return-1==t?e:e.slice(0,t)+e.charAt(t).toUpperCase()+e.slice(t+1).toLowerCase()})}),"Alt-U":h(function(e){S(e,function(e){return e.toUpperCase()})}),"Alt-L":h(function(e){S(e,function(e){return e.toLowerCase()})}),"Alt-;":"toggleComment","Ctrl-/":h("undo"),"Shift-Ctrl--":h("undo"),"Ctrl-Z":h("undo"),"Cmd-Z":h("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":function(e){e.execCommand("clearSearch"),C(e)},"Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":h(function(e){e.replaceSelection("\n","end")}),Tab:"indentAuto","Alt-G G":function(e){var t=d(e,!0);if(null!=t&&t>0)return e.setCursor(t-1);!function(e,t,n){e.openDialog?e.openDialog(t+': <input type="text" style="width: 10em"/>',n,{bottom:!0}):n(prompt(t,""))}(e,"Goto line",function(t){var n;t&&!isNaN(n=Number(t))&&n==(0|n)&&n>0&&e.setCursor(n-1)})},"Ctrl-X Tab":function(e){e.indentSelection(d(e,!0)||e.getOption("indentUnit"))},"Ctrl-X Ctrl-X":function(e){e.setSelection(e.getCursor("head"),e.getCursor("anchor"))},"Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X U":h("undo"),"Ctrl-X K":"close","Ctrl-X Delete":function(e){r(e,e.getCursor(),u(e,e.getCursor(),1),"grow")},"Ctrl-X H":"selectAll","Ctrl-Q Tab":h("insertTab"),"Ctrl-U":function(e){e.state.emacsPrefixMap=!0,e.addKeyMap(I),e.on("keyHandled",k),e.on("inputRead",k)}}),I={"Ctrl-G":w},P=0;P<10;++P)M(String(P));M("-")})},{"../lib/codemirror":60}],59:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../lib/codemirror"),e("../addon/search/searchcursor"),e("../addon/dialog/dialog"),e("../addon/edit/matchbrackets.js")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/dialog/dialog","../addon/edit/matchbrackets"],i):i(CodeMirror)}(function(e){"use strict";var t=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0}},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],n=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],i=e.Pos;e.Vim=function(){function r(t,n){this==e.keyMap.vim&&(e.rmClass(t.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==t.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(e){var t=e.state.fatCursorMarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();e.state.fatCursorMarks=null,e.off("cursorActivity",s)}(t),t.getInputField().style.caretColor="")),n&&n.attach==o||function(t){t.setOption("disableInput",!1),t.off("cursorActivity",be),e.off(t.getInputField(),"paste",c(t)),t.state.vim=null}(t)}function o(t,n){this==e.keyMap.vim&&(e.addClass(t.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==t.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(e){e.state.fatCursorMarks=a(e),e.on("cursorActivity",s)}(t),t.getInputField().style.caretColor="transparent")),n&&n.attach==o||function(t){t.setOption("disableInput",!0),t.setOption("showCursorWhenSelecting",!1),e.signal(t,"vim-mode-change",{mode:"normal"}),t.on("cursorActivity",be),k(t),e.on(t.getInputField(),"paste",c(t))}(t)}function a(e){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var o=t[r];if(o.empty())if(o.anchor.ch<e.getLine(o.anchor.line).length)n.push(e.markText(o.anchor,i(o.anchor.line,o.anchor.ch+1),{className:"cm-fat-cursor-mark"}));else{var a=document.createElement("span");a.textContent="",a.className="cm-fat-cursor-mark",n.push(e.setBookmark(o.anchor,{widget:a}))}}return n}function s(e){var t=e.state.fatCursorMarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();e.state.fatCursorMarks=a(e)}function l(t,n){if(n){if(this[t])return this[t];var i=function(e){if("'"==e.charAt(0))return e.charAt(1);var t=e.split(/-(?!$)/),n=t[t.length-1];if(1==t.length&&1==t[0].length)return!1;if(2==t.length&&"Shift"==t[0]&&1==n.length)return!1;for(var i=!1,r=0;r<t.length;r++){var o=t[r];o in Ce?t[r]=Ce[o]:i=!0,o in Se&&(t[r]=Se[o])}return!!i&&(m(n)&&(t[t.length-1]=n.toLowerCase()),"<"+t.join("-")+">")}(t);if(!i)return!1;var r=e.Vim.findKey(n,i);return"function"==typeof r&&e.signal(n,"vim-keypress",i),r}}function c(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(I(e.getCursor(),0,1)),He.enterInsertMode(e,{},t))}),t.onPasteFn}function u(e,t){for(var n=[],i=e;i<e+t;i++)n.push(String.fromCharCode(i));return n}function f(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function d(e){return/^[a-z]$/.test(e)}function h(e){return-1!="()[]{}".indexOf(e)}function p(e){return Me.test(e)}function m(e){return/^[A-Z]$/.test(e)}function g(e){return/^\s*$/.test(e)}function v(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function b(e,t,n,i,r){if(void 0===t&&!r)throw Error("defaultValue is required unless callback is provided");if(n||(n="string"),Oe[e]={type:n,defaultValue:t,callback:r},i)for(var o=0;o<i.length;o++)Oe[i[o]]=Oe[e];t&&y(e,t)}function y(e,t,n,i){var r=Oe[e],o=(i=i||{}).scope;if(!r)return new Error("Unknown option: "+e);if("boolean"==r.type){if(t&&!0!==t)return new Error("Invalid argument: "+e+"="+t);!1!==t&&(t=!0)}r.callback?("local"!==o&&r.callback(t,void 0),"global"!==o&&n&&r.callback(t,n)):("local"!==o&&(r.value="boolean"==r.type?!!t:t),"global"!==o&&n&&(n.state.vim.options[e]={value:t}))}function w(e,t,n){var i=Oe[e],r=(n=n||{}).scope;if(!i)return new Error("Unknown option: "+e);if(!i.callback)return((o="global"!==r&&t&&t.state.vim.options[e])||"local"!==r&&i||{}).value;var o=t&&i.callback(void 0,t);return"global"!==r&&void 0!==o?o:"local"!==r?i.callback():void 0}function _(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=qe()}function k(e){return e.state.vim||(e.state.vim={inputState:new C,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),e.state.vim}function x(){Ne={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:je(),macroModeState:new _,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new E({}),searchHistoryController:new T,exCommandHistoryController:new T};for(var e in Oe){var t=Oe[e];t.value=t.defaultValue}}function C(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function S(t,n){t.state.vim.inputState=new C,e.signal(t,"vim-command-done",n)}function M(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}function E(e){this.registers=e,this.unnamedRegister=e['"']=new M,e["."]=new M,e[":"]=new M,e["/"]=new M}function T(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}function A(e,t){for(var n=[],i=0;i<t;i++)n.push(e);return n}function D(e,t,n){var r=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),o=z(e,r)-1;o=n?o+1:o;var a=Math.min(Math.max(0,t.ch),o);return i(r,a)}function L(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function I(e,t,n){return"object"==typeof t&&(n=t.ch,t=t.line),i(e.line+t,e.ch+n)}function P(e,t,n){return function(){for(var i=0;i<n;i++)t(e)}}function O(e){return i(e.line,e.ch)}function j(e,t){return e.ch==t.ch&&e.line==t.line}function q(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function N(e,t){return arguments.length>2&&(t=N.apply(void 0,Array.prototype.slice.call(arguments,1))),q(e,t)?e:t}function B(e,t){return arguments.length>2&&(t=B.apply(void 0,Array.prototype.slice.call(arguments,1))),q(e,t)?t:e}function R(e,t,n){var i=q(e,t),r=q(t,n);return i&&r}function z(e,t){return e.getLine(t).length}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function U(e,t){var n=[],r=e.listSelections(),o=O(e.clipPos(t)),a=!j(t,o),s=function(e,t,n){for(var i=0;i<e.length;i++){var r="head"!=n&&j(e[i].anchor,t),o="anchor"!=n&&j(e[i].head,t);if(r||o)return i}return-1}(r,e.getCursor("head")),l=j(r[s].head,r[s].anchor),c=r.length-1,u=c-s>s?c:0,f=r[u].anchor,d=Math.min(f.line,o.line),h=Math.max(f.line,o.line),p=f.ch,m=o.ch,g=r[u].head.ch-p,v=m-p;g>0&&v<=0?(p++,a||m--):g<0&&v>=0?(p--,l||m++):g<0&&-1==v&&(p--,m++);for(var b=d;b<=h;b++){var y={anchor:new i(b,p),head:new i(b,m)};n.push(y)}return e.setSelections(n),t.ch=m,f.ch=p,f}function H(e,t,n){for(var i=[],r=0;r<n;r++){var o=I(t,r,0);i.push({anchor:o,head:o})}e.setSelections(i,0)}function W(e,t){var n=t.sel.anchor,i=t.sel.head;t.lastPastedText&&(i=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(n),headMark:e.setBookmark(i),anchor:O(n),head:O(i),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function K(e,t,n){var i=e.state.vim,r=V(e,t=t||i.sel,n=n||i.visualLine?"line":i.visualBlock?"block":"char");e.setSelections(r.ranges,r.primary),ye(e)}function V(e,t,n,r){var o=O(t.head),a=O(t.anchor);if("char"==n){var s=r||q(t.head,t.anchor)?0:1,l=q(t.head,t.anchor)?1:0;return o=I(t.head,0,s),a=I(t.anchor,0,l),{ranges:[{anchor:a,head:o}],primary:0}}if("line"==n){if(q(t.head,t.anchor))o.ch=0,a.ch=z(e,a.line);else{a.ch=0;var c=e.lastLine();o.line>c&&(o.line=c),o.ch=z(e,o.line)}return{ranges:[{anchor:a,head:o}],primary:0}}if("block"==n){for(var u=Math.min(a.line,o.line),f=Math.min(a.ch,o.ch),d=Math.max(a.line,o.line),h=Math.max(a.ch,o.ch)+1,p=d-u+1,m=o.line==u?0:p-1,g=[],v=0;v<p;v++)g.push({anchor:i(u+v,f),head:i(u+v,h)});return{ranges:g,primary:m}}}function $(t,n){var i=t.state.vim;!1!==n&&t.setCursor(D(t,i.sel.head)),W(t,i),i.visualMode=!1,i.visualLine=!1,i.visualBlock=!1,e.signal(t,"vim-mode-change",{mode:"normal"}),i.fakeCursor&&i.fakeCursor.clear()}function G(e){if(!e)return 0;var t=e.search(/\S/);return-1==t?e.length:t}function Y(e,t,n,r,o){for(var a=function(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=N(t,e.getCursor("anchor"))),t}(e),s=e.getLine(a.line),l=a.ch,c=o?Ee[0]:Te[0];!c(s.charAt(l));)if(++l>=s.length)return null;r?c=Te[0]:(c=Ee[0])(s.charAt(l))||(c=Ee[1]);for(var u=l,f=l;c(s.charAt(u))&&u<s.length;)u++;for(;c(s.charAt(f))&&f>=0;)f--;if(f++,t){for(var d=u;/\s/.test(s.charAt(u))&&u<s.length;)u++;if(d==u){for(var h=f;/\s/.test(s.charAt(f-1))&&f>0;)f--;f||(f=h)}}return{start:i(a.line,f),end:i(a.line,u)}}function X(e,t,n){j(t,n)||Ne.jumpList.add(e,t,n)}function Z(e,t){Ne.lastCharacterSearch.increment=e,Ne.lastCharacterSearch.forward=t.forward,Ne.lastCharacterSearch.selectedCharacter=t.selectedCharacter}function J(e,t,n,i,r){var o=t.line,a=t.ch,s=e.getLine(o),l=n?1:-1,c=i?Te:Ee;if(r&&""==s){if(o+=l,s=e.getLine(o),!f(e,o))return null;a=n?0:s.length}for(;;){if(r&&""==s)return{from:0,to:0,line:o};for(var u=l>0?s.length:-1,d=u,h=u;a!=u;){for(var p=!1,m=0;m<c.length&&!p;++m)if(c[m](s.charAt(a))){for(d=a;a!=u&&c[m](s.charAt(a));)a+=l;if(h=a,p=d!=h,d==t.ch&&o==t.line&&h==d+l)continue;return{from:Math.min(d,h+1),to:Math.max(d,h),line:o}}p||(a+=l)}if(o+=l,!f(e,o))return null;s=e.getLine(o),a=l>0?0:s.length}}function Q(e,t,n,r){for(var o,a=e.getCursor(),s=a.ch,l=0;l<t;l++){if(-1==(o=function(e,t,i,r,o){var a;return n?-1==(a=t.indexOf(i,e+1))||o||(a-=1):-1==(a=t.lastIndexOf(i,e-1))||o||(a+=1),a}(s,e.getLine(a.line),r,0,!0)))return null;s=o}return i(e.getCursor().line,o)}function ee(e,t,n,i){v(n,Ie)&&(t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(i))}function te(e,t,n,r,o){function a(t){return!e.getLine(t)}function s(e,t,n){return n?a(e)!=a(e+t):!a(e)&&a(e+t)}var l,c,u=t.line,f=e.firstLine(),d=e.lastLine(),h=u;if(r){for(;f<=h&&h<=d&&n>0;)s(h,r)&&n--,h+=r;return new i(h,0)}var p=e.state.vim;if(p.visualLine&&s(u,1,!0)){var m=p.sel.anchor;s(m.line,-1,!0)&&(o&&m.line==u||(u+=1))}var g=a(u);for(h=u;h<=d&&n;h++)s(h,1,!0)&&(o&&a(h)==g||n--);for(c=new i(h,0),h>d&&!g?g=!0:o=!1,h=u;h>f&&(o&&a(h)!=g&&h!=u||!s(h,-1,!0));h--);return l=new i(h,0),{start:l,end:c}}function ne(){}function ie(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new ne)}function re(e){var t=oe(e)||[];if(!t.length)return[];var n=[];if(0===t[0]){for(var i=0;i<t.length;i++)"number"==typeof t[i]&&n.push(e.substring(t[i]+1,t[i+1]));return n}}function oe(e){for(var t=!1,n=[],i=0;i<e.length;i++){var r=e.charAt(i);t||"/"!=r||n.push(i),t=!t&&"\\"==r}return n}function ae(e,t){e.openNotification?e.openNotification('<span style="color: red">'+t+"</span>",{bottom:!0,duration:5e3}):alert(t)}function se(e,t){var n=(t.prefix||"")+" "+(t.desc||"");!function(e,t,n,i,r){e.openDialog?e.openDialog(t,i,{bottom:!0,value:r.value,onKeyDown:r.onKeyDown,onKeyUp:r.onKeyUp,selectValueOnOpen:!1}):i(prompt(n,""))}(e,function(e,t){var n='<span style="font-family: monospace; white-space: pre">'+(e||"")+'<input type="text"></span>';return t&&(n+=' <span style="color: #888">'+t+"</span>"),n}(t.prefix,t.desc),n,t.onClose,t)}function le(e,t,n,i){if(t){var r=ie(e),o=function(e,t,n){if(Ne.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var i,r,o=oe(e);return o.length?(i=e.substring(0,o[0]),r=-1!=e.substring(o[0]).indexOf("i")):i=e,i?(w("pcre")||(i=function(e){for(var t=!1,n=[],i=-1;i<e.length;i++){var r=e.charAt(i)||"",o=e.charAt(i+1)||"",a=o&&-1!="|(){".indexOf(o);t?("\\"===r&&a||n.push(r),t=!1):"\\"===r?(t=!0,o&&-1!="}".indexOf(o)&&(a=!0),a&&"\\"!==o||n.push(r)):(n.push(r),a&&"\\"!==o&&n.push("\\"))}return n.join("")}(i)),n&&(t=/^[^A-Z]*$/.test(i)),new RegExp(i,t||r?"i":void 0)):null}(t,!!n,!!i);if(o)return ce(e,o),function(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var n=["global","multiline","ignoreCase","source"],i=0;i<n.length;i++){var r=n[i];if(e[r]!==t[r])return!1}return!0}return!1}(o,r.getQuery())?o:(r.setQuery(o),o)}}function ce(e,t){var n=ie(e),i=n.getOverlay();i&&t==i.query||(i&&e.removeOverlay(i),i=function(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(n){if(!t||n.sol()){var i=n.match(e,!1);if(i)return 0==i[0].length?(n.next(),"searching"):n.sol()||(n.backUp(1),e.exec(n.next()+i[0]))?(n.match(e),"searching"):(n.next(),null);for(;!n.eol()&&(n.next(),!n.match(e,!1)););}else n.skipToEnd()},query:e}}(t),e.addOverlay(i),e.showMatchesOnScrollbar&&(n.getScrollbarAnnotate()&&n.getScrollbarAnnotate().clear(),n.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),n.setOverlay(i))}function ue(e,t,n,r){return void 0===r&&(r=1),e.operation(function(){for(var o=e.getCursor(),a=e.getSearchCursor(n,o),s=0;s<r;s++){var l=a.find(t);if(0==s&&l&&j(a.from(),o)&&(l=a.find(t)),!l&&!(a=e.getSearchCursor(n,t?i(e.lastLine()):i(e.firstLine(),0))).find(t))return}return a.from()})}function fe(e){var t=ie(e);e.removeOverlay(ie(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function de(e,t,n){return"number"!=typeof e&&(e=e.line),t instanceof Array?v(e,t):n?e>=t&&e<=n:e==t}function he(e){var t=e.getScrollInfo(),n=e.coordsChar({left:0,top:6+t.top},"local"),i=t.clientHeight-10+t.top,r=e.coordsChar({left:0,top:i},"local");return{top:n.line,bottom:r.line}}function pe(e,t,n){if("'"==n){var i=e.doc.history.done,r=i[i.length-2];return r&&r.ranges&&r.ranges[0].head}if("."==n){if(0==e.doc.history.lastModTime)return;var o=e.doc.history.done.filter(function(e){if(void 0!==e.changes)return e});return o.reverse(),o[0].changes[0].to}var a=t.marks[n];return a&&a.find()}function me(t){var n=t.state.vim,i=Ne.macroModeState,r=Ne.registerController.getRegister("."),o=i.isPlaying,a=i.lastInsertModeChanges,s=[];if(!o){for(var l=a.inVisualBlock&&n.lastSelection?n.lastSelection.visualBlock.height:1,c=a.changes,s=[],u=0;u<c.length;)s.push(c[u]),c[u]instanceof we?u++:u+=l;a.changes=s,t.off("change",ve),e.off(t.getInputField(),"keydown",_e)}!o&&n.insertModeRepeat>1&&(ke(t,n,n.insertModeRepeat-1,!0),n.lastEditInputState.repeatOverride=n.insertModeRepeat),delete n.insertModeRepeat,n.insertMode=!1,t.setCursor(t.getCursor().line,t.getCursor().ch-1),t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.toggleOverwrite(!1),r.setText(a.changes.join("")),e.signal(t,"vim-mode-change",{mode:"normal"}),i.isRecording&&function(e){if(!e.isPlaying){var t=e.latestRegister,n=Ne.registerController.getRegister(t);n&&n.pushInsertModeChanges&&n.pushInsertModeChanges(e.lastInsertModeChanges)}}(i)}function ge(e){t.unshift(e)}function ve(e,t){var n=Ne.macroModeState,i=n.lastInsertModeChanges;if(!n.isPlaying)for(;t;){if(i.expectCursorActivityForChange=!0,"+input"==t.origin||"paste"==t.origin||void 0===t.origin){var r=t.text.join("\n");i.maybeReset&&(i.changes=[],i.maybeReset=!1),e.state.overwrite&&!/\n/.test(r)?i.changes.push([r]):i.changes.push(r)}t=t.next}}function be(t){var n=t.state.vim;if(n.insertMode){var i=Ne.macroModeState;if(i.isPlaying)return;var r=i.lastInsertModeChanges;r.expectCursorActivityForChange?r.expectCursorActivityForChange=!1:r.maybeReset=!0}else t.curOp.isVimOp||function(t,n){var i=t.getCursor("anchor"),r=t.getCursor("head");if(n.visualMode&&!t.somethingSelected()?$(t,!1):n.visualMode||n.insertMode||!t.somethingSelected()||(n.visualMode=!0,n.visualLine=!1,e.signal(t,"vim-mode-change",{mode:"visual"})),n.visualMode){var o=q(r,i)?0:-1,a=q(r,i)?-1:0;r=I(r,0,o),i=I(i,0,a),n.sel={anchor:i,head:r},ee(t,n,"<",N(r,i)),ee(t,n,">",B(r,i))}else n.insertMode||(n.lastHPos=t.getCursor().ch)}(t,n);n.visualMode&&ye(t)}function ye(e){var t=e.state.vim,n=D(e,O(t.sel.head)),i=I(n,0,1);t.fakeCursor&&t.fakeCursor.clear(),t.fakeCursor=e.markText(n,i,{className:"cm-animate-fat-cursor"})}function we(e){this.keyName=e}function _e(t){var n=Ne.macroModeState.lastInsertModeChanges,i=e.keyName(t);i&&(-1==i.indexOf("Delete")&&-1==i.indexOf("Backspace")||e.lookupKey(i,"vim-insert",function(){return n.maybeReset&&(n.changes=[],n.maybeReset=!1),n.changes.push(new we(i)),!0}))}function ke(e,t,n,i){function r(){s?ze.processAction(e,t,t.lastEditActionCommand):ze.evalInput(e,t)}function o(n){if(a.lastInsertModeChanges.changes.length>0){n=t.lastEditActionCommand?n:1;var i=a.lastInsertModeChanges;xe(e,i.changes,n)}}var a=Ne.macroModeState;a.isPlaying=!0;var s=!!t.lastEditActionCommand,l=t.inputState;if(t.inputState=t.lastEditInputState,s&&t.lastEditActionCommand.interlaceInsertRepeat)for(var c=0;c<n;c++)r(),o(1);else i||r(),o(n);t.inputState=l,t.insertMode&&!i&&me(e),a.isPlaying=!1}function xe(t,n,i){function r(n){return"string"==typeof n?e.commands[n](t):n(t),!0}var o=t.getCursor("head"),a=Ne.macroModeState.lastInsertModeChanges.inVisualBlock;if(a){var s=t.state.vim.lastSelection,l=function(e,t){return{line:t.line-e.line,ch:t.line-e.line}}(s.anchor,s.head);H(t,o,l.line+1),i=t.listSelections().length,t.setCursor(o)}for(var c=0;c<i;c++){a&&t.setCursor(I(o,c,0));for(var u=0;u<n.length;u++){var f=n[u];if(f instanceof we)e.lookupKey(f.keyName,"vim-insert",r);else if("string"==typeof f){var d=t.getCursor();t.replaceRange(f,d,d)}else{var h=t.getCursor(),p=I(h,0,f[0].length);t.replaceRange(f[0],h,p)}}}a&&t.setCursor(I(o,0,1))}e.defineOption("vimMode",!1,function(t,n,i){n&&"vim"!=t.getOption("keyMap")?t.setOption("keyMap","vim"):!n&&i!=e.Init&&/^vim/.test(t.getOption("keyMap"))&&t.setOption("keyMap","default")});var Ce={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},Se={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"},Me=/[\d]/,Ee=[e.isWordChar,function(t){return t&&!e.isWordChar(t)&&!/\s/.test(t)}],Te=[function(e){return/\S/.test(e)}],Ae=u(65,26),De=u(97,26),Le=u(48,10),Ie=[].concat(Ae,De,Le,["<",">"]),Pe=[].concat(Ae,De,Le,["-",'"',".",":","/"]),Oe={};b("filetype",void 0,"string",["ft"],function(e,t){if(void 0!==t){if(void 0===e)return"null"==(n=t.getOption("mode"))?"":n;var n=""==e?"null":e;t.setOption("mode",n)}});var je=function(){var e=100,t=-1,n=0,i=0,r=new Array(e);return{cachedCursor:void 0,add:function(o,a,s){function l(n){var i=++t%e,a=r[i];a&&a.clear(),r[i]=o.setBookmark(n)}var c=r[t%e];if(c){var u=c.find();u&&!j(u,a)&&l(a)}else l(a);l(s),n=t,(i=t-e+1)<0&&(i=0)},move:function(o,a){(t+=a)>n?t=n:t<i&&(t=i);var s=r[(e+t)%e];if(s&&!s.find()){var l,c=a>0?1:-1,u=o.getCursor();do{if(t+=c,(s=r[(e+t)%e])&&(l=s.find())&&!j(u,l))break}while(t<n&&t>i)}return s}}},qe=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};_.prototype={exitMacroRecordMode:function(){var e=Ne.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1},enterMacroRecordMode:function(e,t){var n=Ne.registerController.getRegister(t);n&&(n.clear(),this.latestRegister=t,e.openDialog&&(this.onRecordingDone=e.openDialog("(recording)["+t+"]",null,{bottom:!0})),this.isRecording=!0)}};var Ne,Be,Re={buildKeyMap:function(){},getRegisterController:function(){return Ne.registerController},resetVimGlobalState_:x,getVimGlobalState_:function(){return Ne},maybeInitVimState_:k,suppressErrorLogging:!1,InsertModeKey:we,map:function(e,t,n){Ze.map(e,t,n)},unmap:function(e,t){Ze.unmap(e,t)},setOption:y,getOption:w,defineOption:b,defineEx:function(e,t,n){if(t){if(0!==e.indexOf(t))throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered')}else t=e;Xe[e]=n,Ze.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,n){var i=this.findKey(e,t,n);if("function"==typeof i)return i()},findKey:function(n,i,r){function o(){var e=Ne.macroModeState;if(e.isRecording){if("q"==i)return e.exitMacroRecordMode(),S(n),!0;"mapping"!=r&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,i=Ne.registerController.getRegister(n);i&&i.pushText(t)}}(e,i)}}function a(){if("<Esc>"==i)return S(n),l.visualMode?$(n):l.insertMode&&me(n),!0}var s,l=k(n);return!1===(s=l.insertMode?function(){if(a())return!0;for(var e=l.inputState.keyBuffer=l.inputState.keyBuffer+i,r=1==i.length,o=ze.matchCommand(e,t,l.inputState,"insert");e.length>1&&"full"!=o.type;){var e=l.inputState.keyBuffer=e.slice(1),s=ze.matchCommand(e,t,l.inputState,"insert");"none"!=s.type&&(o=s)}if("none"==o.type)return S(n),!1;if("partial"==o.type)return Be&&window.clearTimeout(Be),Be=window.setTimeout(function(){l.insertMode&&l.inputState.keyBuffer&&S(n)},w("insertModeEscKeysTimeout")),!r;if(Be&&window.clearTimeout(Be),r){for(var c=n.listSelections(),u=0;u<c.length;u++){var f=c[u].head;n.replaceRange("",I(f,0,-(e.length-1)),f,"+input")}Ne.macroModeState.lastInsertModeChanges.changes.pop()}return S(n),o.command}():function(){if(o()||a())return!0;var e=l.inputState.keyBuffer=l.inputState.keyBuffer+i;if(/^[1-9]\d*$/.test(e))return!0;if(!(c=/^(\d*)(.*)$/.exec(e)))return S(n),!1;var r=l.visualMode?"visual":"normal",s=ze.matchCommand(c[2]||c[1],t,l.inputState,r);if("none"==s.type)return S(n),!1;if("partial"==s.type)return!0;l.inputState.keyBuffer="";var c;return(c=/^(\d*)(.*)$/.exec(e))[1]&&"0"!=c[1]&&l.inputState.pushRepeatDigit(c[1]),s.command}())?void 0:!0===s?function(){return!0}:function(){return n.operation(function(){n.curOp.isVimOp=!0;try{"keyToKey"==s.type?function(t){for(var r;t;)r=/<\w+-.+?>|<\w+>|./.exec(t),i=r[0],t=t.substring(r.index+i.length),e.Vim.handleKey(n,i,"mapping")}(s.toKeys):ze.processCommand(n,l,s)}catch(t){throw n.state.vim=void 0,k(n),e.Vim.suppressErrorLogging||console.log(t),t}return!0})}},handleEx:function(e,t){Ze.processCommand(e,t)},defineMotion:function(e,t){Fe[e]=t},defineAction:function(e,t){He[e]=t},defineOperator:function(e,t){Ue[e]=t},mapCommand:function(e,t,n,i,r){var o={keys:e,type:t};o[t]=n,o[t+"Args"]=i;for(var a in r)o[a]=r[a];ge(o)},_mapCommand:ge,defineRegister:function(e,t){var n=Ne.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");if(n[e])throw Error("Register already defined "+e);n[e]=t,Pe.push(e)},exitVisualMode:$,exitInsertMode:me};C.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},C.prototype.getRepeat=function(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e},M.prototype={setText:function(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(qe(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},E.prototype={pushText:function(e,t,n,i,r){i&&"\n"!==n.charAt(n.length-1)&&(n+="\n");var o=this.isValidRegister(e)?this.getRegister(e):null;if(o)m(e)?o.pushText(n,i):o.setText(n,i,r),this.unnamedRegister.setText(o.toString(),i);else{switch(t){case"yank":this.registers[0]=new M(n,i,r);break;case"delete":case"change":-1==n.indexOf("\n")?this.registers["-"]=new M(n,i):(this.shiftNumericRegisters_(),this.registers[1]=new M(n,i))}this.unnamedRegister.setText(n,i,r)}},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new M),this.registers[e]):this.unnamedRegister},isValidRegister:function(e){return e&&v(e,Pe)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},T.prototype={nextMatch:function(e,t){var n=this.historyBuffer,i=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var r=this.iterator+i;t?r>=0:r<n.length;r+=i)for(var o=n[r],a=0;a<=o.length;a++)if(this.initialPrefix==o.substring(0,a))return this.iterator=r,o;return r>=n.length?(this.iterator=n.length,this.initialPrefix):r<0?e:void 0},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var ze={matchCommand:function(e,t,n,i){var r=function(e,t,n,i){for(var r,o=[],a=[],s=0;s<t.length;s++){var l=t[s];"insert"==n&&"insert"!=l.context||l.context&&l.context!=n||i.operator&&"action"==l.type||!(r=function(e,t){if("<character>"==t.slice(-11)){var n=t.length-11,i=e.slice(0,n),r=t.slice(0,n);return i==r&&e.length>n?"full":0==r.indexOf(i)&&"partial"}return e==t?"full":0==t.indexOf(e)&&"partial"}(e,l.keys))||("partial"==r&&o.push(l),"full"==r&&a.push(l))}return{partial:o.length&&o,full:a.length&&a}}(e,t,i,n);if(!r.full&&!r.partial)return{type:"none"};if(!r.full&&r.partial)return{type:"partial"};for(var o,a=0;a<r.full.length;a++){var s=r.full[a];o||(o=s)}if("<character>"==o.keys.slice(-11)){var l=function(e){var t=/^.*(<[^>]+>)$/.exec(e),n=t?t[1]:e.slice(-1);if(n.length>1)switch(n){case"<CR>":n="\n";break;case"<Space>":n=" ";break;default:n=""}return n}(e);if(!l)return{type:"none"};n.selectedCharacter=l}return{type:"full",command:o}},processCommand:function(e,t,n){switch(t.inputState.repeatOverride=n.repeatOverride,n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n)}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=L(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var i=t.inputState;if(i.operator){if(i.operator==n.operator)return i.motion="expandToLine",i.motionArgs={linewise:!0},void this.evalInput(e,t);S(e)}i.operator=n.operator,i.operatorArgs=L(n.operatorArgs),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var i=t.visualMode,r=L(n.operatorMotionArgs);r&&i&&r.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),i||this.processMotion(e,t,n)},processAction:function(e,t,n){var i=t.inputState,r=i.getRepeat(),o=!!r,a=L(n.actionArgs)||{};i.selectedCharacter&&(a.selectedCharacter=i.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),a.repeat=r||1,a.repeatIsExplicit=o,a.registerName=i.registerName,S(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,i,n),He[n.action](e,a,t)},processSearch:function(t,n,i){function r(e,r,o){Ne.searchHistoryController.pushInput(e),Ne.searchHistoryController.reset();try{le(t,e,r,o)}catch(n){return ae(t,"Invalid regex: "+e),void S(t)}ze.processMotion(t,n,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:i.searchArgs.toJumplist}})}if(t.getSearchCursor){var o=i.searchArgs.forward,a=i.searchArgs.wholeWordOnly;ie(t).setReversed(!o);var s=o?"/":"?",l=ie(t).getQuery(),c=t.getScrollInfo();switch(i.searchArgs.querySrc){case"prompt":var u=Ne.macroModeState;u.isPlaying?r(h=u.replaySearchQueries.shift(),!0,!1):se(t,{onClose:function(e){t.scrollTo(c.left,c.top),r(e,!0,!0);var n=Ne.macroModeState;n.isRecording&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,i=Ne.registerController.getRegister(n);i&&i.pushSearchQuery&&i.pushSearchQuery(t)}}(n,e)},prefix:s,desc:Ge,onKeyUp:function(n,i,r){var a,s,l=e.keyName(n);"Up"==l||"Down"==l?(a="Up"==l,s=n.target?n.target.selectionEnd:0,r(i=Ne.searchHistoryController.nextMatch(i,a)||""),s&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(s,n.target.value.length))):"Left"!=l&&"Right"!=l&&"Ctrl"!=l&&"Alt"!=l&&"Shift"!=l&&Ne.searchHistoryController.reset();var u;try{u=le(t,i,!0,!0)}catch(n){}u?t.scrollIntoView(ue(t,!o,u),30):(fe(t),t.scrollTo(c.left,c.top))},onKeyDown:function(n,i,r){var o=e.keyName(n);"Esc"==o||"Ctrl-C"==o||"Ctrl-["==o||"Backspace"==o&&""==i?(Ne.searchHistoryController.pushInput(i),Ne.searchHistoryController.reset(),le(t,l),fe(t),t.scrollTo(c.left,c.top),e.e_stop(n),S(t),r(),t.focus()):"Up"==o||"Down"==o?e.e_stop(n):"Ctrl-U"==o&&(e.e_stop(n),r(""))}});break;case"wordUnderCursor":var f=Y(t,!1,0,!1,!0),d=!0;if(f||(f=Y(t,!1,0,!1,!1),d=!1),!f)return;var h=t.getLine(f.start.line).substring(f.start.ch,f.end.ch);h=d&&a?"\\b"+h+"\\b":h.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1"),Ne.jumpList.cachedCursor=t.getCursor(),t.setCursor(f.start),r(h,!0,!1)}}},processEx:function(t,n,i){function r(e){Ne.exCommandHistoryController.pushInput(e),Ne.exCommandHistoryController.reset(),Ze.processCommand(t,e)}function o(n,i,r){var o,a,s=e.keyName(n);("Esc"==s||"Ctrl-C"==s||"Ctrl-["==s||"Backspace"==s&&""==i)&&(Ne.exCommandHistoryController.pushInput(i),Ne.exCommandHistoryController.reset(),e.e_stop(n),S(t),r(),t.focus()),"Up"==s||"Down"==s?(e.e_stop(n),o="Up"==s,a=n.target?n.target.selectionEnd:0,r(i=Ne.exCommandHistoryController.nextMatch(i,o)||""),a&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(a,n.target.value.length))):"Ctrl-U"==s?(e.e_stop(n),r("")):"Left"!=s&&"Right"!=s&&"Ctrl"!=s&&"Alt"!=s&&"Shift"!=s&&Ne.exCommandHistoryController.reset()}"keyToEx"==i.type?Ze.processCommand(t,i.exArgs.input):n.visualMode?se(t,{onClose:r,prefix:":",value:"'<,'>",onKeyDown:o}):se(t,{onClose:r,prefix:":",onKeyDown:o})},evalInput:function(e,t){var n,r,o,a=t.inputState,s=a.motion,l=a.motionArgs||{},c=a.operator,u=a.operatorArgs||{},f=a.registerName,d=t.sel,h=O(t.visualMode?D(e,d.head):e.getCursor("head")),p=O(t.visualMode?D(e,d.anchor):e.getCursor("anchor")),m=O(h),v=O(p);if(c&&this.recordLastEdit(t,a),(o=void 0!==a.repeatOverride?a.repeatOverride:a.getRepeat())>0&&l.explicitRepeat?l.repeatIsExplicit=!0:(l.noRepeat||!l.explicitRepeat&&0===o)&&(o=1,l.repeatIsExplicit=!1),a.selectedCharacter&&(l.selectedCharacter=u.selectedCharacter=a.selectedCharacter),l.repeat=o,S(e),s){var b=Fe[s](e,h,l,t);if(t.lastMotion=Fe[s],!b)return;if(l.toJumplist){var y=Ne.jumpList,w=y.cachedCursor;w?(X(e,w,b),delete y.cachedCursor):X(e,h,b)}b instanceof Array?(r=b[0],n=b[1]):n=b,n||(n=O(h)),t.visualMode?(t.visualBlock&&n.ch===1/0||(n=D(e,n,t.visualBlock)),r&&(r=D(e,r,!0)),r=r||v,d.anchor=r,d.head=n,K(e),ee(e,t,"<",q(r,n)?r:n),ee(e,t,">",q(r,n)?n:r)):c||(n=D(e,n),e.setCursor(n.line,n.ch))}if(c){if(u.lastSel){r=v;var _=u.lastSel,k=Math.abs(_.head.line-_.anchor.line),x=Math.abs(_.head.ch-_.anchor.ch);n=_.visualLine?i(v.line+k,v.ch):_.visualBlock?i(v.line+k,v.ch+x):_.head.line==_.anchor.line?i(v.line,v.ch+x):i(v.line+k,v.ch),t.visualMode=!0,t.visualLine=_.visualLine,t.visualBlock=_.visualBlock,d=t.sel={anchor:r,head:n},K(e)}else t.visualMode&&(u.lastSel={anchor:O(d.anchor),head:O(d.head),visualBlock:t.visualBlock,visualLine:t.visualLine});var C,M,E,T,A;if(t.visualMode){if(C=N(d.head,d.anchor),M=B(d.head,d.anchor),E=t.visualLine||u.linewise,T=t.visualBlock?"block":E?"line":"char",A=V(e,{anchor:C,head:M},T),E){var L=A.ranges;if("block"==T)for(var I=0;I<L.length;I++)L[I].head.ch=z(e,L[I].head.line);else"line"==T&&(L[0].head=i(L[0].head.line+1,0))}}else{if(C=O(r||v),M=O(n||m),q(M,C)){var P=C;C=M,M=P}(E=l.linewise||u.linewise)?function(e,t,n){C.ch=0,n.ch=0,n.line++}(0,0,M):l.forward&&function(e,t,n){var i=e.getRange(t,n);if(/\n\s*$/.test(i)){var r=i.split("\n");r.pop();for(var o=r.pop();r.length>0&&o&&g(o);o=r.pop())n.line--,n.ch=0;o?(n.line--,n.ch=z(e,n.line)):n.ch=0}}(e,C,M),A=V(e,{anchor:C,head:M},T="char",!l.inclusive||E)}e.setSelections(A.ranges,A.primary),t.lastMotion=null,u.repeat=o,u.registerName=f,u.linewise=E;var j=Ue[c](e,u,A.ranges,v,n);t.visualMode&&$(e,null!=j),j&&e.setCursor(j)}},recordLastEdit:function(e,t,n){var i=Ne.macroModeState;i.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=n,i.lastInsertModeChanges.changes=[],i.lastInsertModeChanges.expectCursorActivityForChange=!1)}},Fe={moveToTopLine:function(e,t,n){var r=he(e).top+n.repeat-1;return i(r,G(e.getLine(r)))},moveToMiddleLine:function(e){var t=he(e),n=Math.floor(.5*(t.top+t.bottom));return i(n,G(e.getLine(n)))},moveToBottomLine:function(e,t,n){var r=he(e).bottom-n.repeat+1;return i(r,G(e.getLine(r)))},expandToLine:function(e,t,n){return i(t.line+n.repeat-1,1/0)},findNext:function(e,t,n){var i=ie(e),r=i.getQuery();if(r){var o=!n.forward;return o=i.isReversed()?!o:o,ce(e,r),ue(e,o,r,n.repeat)}},goToMark:function(e,t,n,i){var r=pe(e,i,n.selectedCharacter);return r?n.linewise?{line:r.line,ch:G(e.getLine(r.line))}:r:null},moveToOtherHighlightedEnd:function(e,t,n,r){if(r.visualBlock&&n.sameLine){var o=r.sel;return[D(e,i(o.anchor.line,o.head.ch)),D(e,i(o.head.line,o.anchor.ch))]}return[r.sel.head,r.sel.anchor]},jumpToMark:function(e,t,n,r){for(var o=t,a=0;a<n.repeat;a++){var s=o;for(var l in r.marks)if(d(l)){var c=r.marks[l].find();if(!((n.forward?q(c,s):q(s,c))||n.linewise&&c.line==s.line)){var u=j(s,o),f=n.forward?R(s,c,o):R(o,c,s);(u||f)&&(o=c)}}}return n.linewise&&(o=i(o.line,G(e.getLine(o.line)))),o},moveByCharacters:function(e,t,n){var r=t,o=n.repeat,a=n.forward?r.ch+o:r.ch-o;return i(r.line,a)},moveByLines:function(e,t,n,r){var o=t,a=o.ch;switch(r.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:a=r.lastHPos;break;default:r.lastHPos=a}var s=n.repeat+(n.repeatOffset||0),l=n.forward?o.line+s:o.line-s,c=e.firstLine(),u=e.lastLine();return l<c&&o.line==c?this.moveToStartOfLine(e,t,n,r):l>u&&o.line==u?this.moveToEol(e,t,n,r):(n.toFirstChar&&(a=G(e.getLine(l)),r.lastHPos=a),r.lastHSPos=e.charCoords(i(l,a),"div").left,i(l,a))},moveByDisplayLines:function(e,t,n,r){var o=t;switch(r.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:r.lastHSPos=e.charCoords(o,"div").left}var a=n.repeat;if((l=e.findPosV(o,n.forward?a:-a,"line",r.lastHSPos)).hitSide)if(n.forward)var s={top:e.charCoords(l,"div").top+8,left:r.lastHSPos},l=e.coordsChar(s,"div");else{var c=e.charCoords(i(e.firstLine(),0),"div");c.left=r.lastHSPos,l=e.coordsChar(c,"div")}return r.lastHPos=l.ch,l},moveByPage:function(e,t,n){var i=t,r=n.repeat;return e.findPosV(i,n.forward?r:-r,"page")},moveByParagraph:function(e,t,n){var i=n.forward?1:-1;return te(e,t,n.repeat,i)},moveByScroll:function(e,t,n,i){var r=e.getScrollInfo(),o=null,a=n.repeat;a||(a=r.clientHeight/(2*e.defaultTextHeight()));var s=e.charCoords(t,"local");if(n.repeat=a,!(o=Fe.moveByDisplayLines(e,t,n,i)))return null;var l=e.charCoords(o,"local");return e.scrollTo(null,r.top+l.top-s.top),o},moveByWords:function(e,t,n){return function(e,t,n,r,o,a){var s=O(t),l=[];(r&&!o||!r&&o)&&n++;for(var c=!(r&&o),u=0;u<n;u++){var f=J(e,t,r,a,c);if(!f){var d=z(e,e.lastLine());l.push(r?{line:e.lastLine(),from:d,to:d}:{line:0,from:0,to:0});break}l.push(f),t=i(f.line,r?f.to-1:f.from)}var h=l.length!=n,p=l[0],m=l.pop();return r&&!o?(h||p.from==s.ch&&p.line==s.line||(m=l.pop()),i(m.line,m.from)):r&&o?i(m.line,m.to-1):!r&&o?(h||p.to==s.ch&&p.line==s.line||(m=l.pop()),i(m.line,m.to)):i(m.line,m.from)}(e,t,n.repeat,!!n.forward,!!n.wordEnd,!!n.bigWord)},moveTillCharacter:function(e,t,n){var i=Q(e,n.repeat,n.forward,n.selectedCharacter),r=n.forward?-1:1;return Z(r,n),i?(i.ch+=r,i):null},moveToCharacter:function(e,t,n){var i=n.repeat;return Z(0,n),Q(e,i,n.forward,n.selectedCharacter)||t},moveToSymbol:function(e,t,n){return function(e,t,n,r){var o=O(e.getCursor()),a=n?1:-1,s=n?e.lineCount():-1,l=o.ch,c=o.line,u=e.getLine(c),f={lineText:u,nextCh:u.charAt(l),lastCh:null,index:l,symb:r,reverseSymb:(n?{")":"(","}":"{"}:{"(":")","{":"}"})[r],forward:n,depth:0,curMoveThrough:!1},d=We[r];if(!d)return o;var h=Ke[d].init,p=Ke[d].isComplete;for(h&&h(f);c!==s&&t;){if(f.index+=a,f.nextCh=f.lineText.charAt(f.index),!f.nextCh){if(c+=a,f.lineText=e.getLine(c)||"",a>0)f.index=0;else{var m=f.lineText.length;f.index=m>0?m-1:0}f.nextCh=f.lineText.charAt(f.index)}p(f)&&(o.line=c,o.ch=f.index,t--)}return f.nextCh||f.curMoveThrough?i(c,f.index):o}(e,n.repeat,n.forward,n.selectedCharacter)||t},moveToColumn:function(e,t,n,r){var o=n.repeat;return r.lastHPos=o-1,r.lastHSPos=e.charCoords(t,"div").left,function(e,t){var n=e.getCursor().line;return D(e,i(n,t-1))}(e,o)},moveToEol:function(e,t,n,r){var o=t;r.lastHPos=1/0;var a=i(o.line+n.repeat-1,1/0),s=e.clipPos(a);return s.ch--,r.lastHSPos=e.charCoords(s,"div").left,a},moveToFirstNonWhiteSpaceCharacter:function(e,t){var n=t;return i(n.line,G(e.getLine(n.line)))},moveToMatchedSymbol:function(e,t){for(var n,r=t,o=r.line,a=r.ch,s=e.getLine(o);a<s.length;a++)if((n=s.charAt(a))&&h(n)){var l=e.getTokenTypeAt(i(o,a+1));if("string"!==l&&"comment"!==l)break}return a<s.length?e.findMatchingBracket(i(o,a)).to:r},moveToStartOfLine:function(e,t){return i(t.line,0)},moveToLineOrEdgeOfDocument:function(e,t,n){var r=n.forward?e.lastLine():e.firstLine();return n.repeatIsExplicit&&(r=n.repeat-e.getOption("firstLineNumber")),i(r,G(e.getLine(r)))},textObjectManipulation:function(e,t,n,r){var o=n.selectedCharacter;"b"==o?o="(":"B"==o&&(o="{");var a,s=!n.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"["}[o])a=function(e,n,r,a){var s,l,c=t,u={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/}[o],f={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{"}[o],d=e.getLine(c.line).charAt(c.ch)===f?1:0;if(s=e.scanForBracket(i(c.line,c.ch+d),-1,null,{bracketRegex:u}),l=e.scanForBracket(i(c.line,c.ch+d),1,null,{bracketRegex:u}),!s||!l)return{start:c,end:c};if(s=s.pos,l=l.pos,s.line==l.line&&s.ch>l.ch||s.line>l.line){var h=s;s=l,l=h}return a?l.ch+=1:s.ch+=1,{start:s,end:l}}(e,0,0,s);else if({"'":!0,'"':!0}[o])a=function(e,n,r,o){var a,s,l,c,u=O(t),f=e.getLine(u.line).split(""),d=f.indexOf(r);if(u.ch<d?u.ch=d:d<u.ch&&f[u.ch]==r&&(s=u.ch,--u.ch),f[u.ch]!=r||s)for(l=u.ch;l>-1&&!a;l--)f[l]==r&&(a=l+1);else a=u.ch+1;if(a&&!s)for(l=a,c=f.length;l<c&&!s;l++)f[l]==r&&(s=l);return a&&s?(o&&(--a,++s),{start:i(u.line,a),end:i(u.line,s)}):{start:u,end:u}}(e,0,o,s);else if("W"===o)a=Y(e,s,0,!0);else if("w"===o)a=Y(e,s,0,!1);else{if("p"!==o)return null;if(a=te(e,t,n.repeat,0,s),n.linewise=!0,r.visualMode)r.visualLine||(r.visualLine=!0);else{var l=r.inputState.operatorArgs;l&&(l.linewise=!0),a.end.line--}}return e.state.vim.visualMode?function(e,t,n){var r,o=e.state.vim.sel,a=o.head,s=o.anchor;return q(n,t)&&(r=n,n=t,t=r),q(a,s)?(a=N(t,a),s=B(s,n)):(s=N(t,s),-1==(a=I(a=B(a,n),0,-1)).ch&&a.line!=e.firstLine()&&(a=i(a.line-1,z(e,a.line-1)))),[s,a]}(e,a.start,a.end):[a.start,a.end]},repeatLastCharacterSearch:function(e,t,n){var i=Ne.lastCharacterSearch,r=n.repeat,o=n.forward===i.forward,a=(i.increment?1:0)*(o?-1:1);e.moveH(-a,"char"),n.inclusive=!!o;var s=Q(e,r,o,i.selectedCharacter);return s?(s.ch+=a,s):(e.moveH(a,"char"),t)}},Ue={change:function(t,n,r){var o,a,s=t.state.vim;if(Ne.macroModeState.lastInsertModeChanges.inVisualBlock=s.visualBlock,s.visualMode){a=t.getSelection();var l=A("",r.length);t.replaceSelections(l),o=N(r[0].head,r[0].anchor)}else{var c=r[0].anchor,u=r[0].head;a=t.getRange(c,u);var f=s.lastEditInputState||{};if("moveByWords"==f.motion&&!g(a)){var d=/\s+$/.exec(a);d&&f.motionArgs&&f.motionArgs.forward&&(u=I(u,0,-d[0].length),a=a.slice(0,-d[0].length))}var h=new i(c.line-1,Number.MAX_VALUE),p=t.firstLine()==t.lastLine();u.line>t.lastLine()&&n.linewise&&!p?t.replaceRange("",h,u):t.replaceRange("",c,u),n.linewise&&(p||(t.setCursor(h),e.commands.newlineAndIndent(t)),c.ch=Number.MAX_VALUE),o=c}Ne.registerController.pushText(n.registerName,"change",a,n.linewise,r.length>1),He.enterInsertMode(t,{head:o},t.state.vim)},delete:function(e,t,n){var r,o,a=e.state.vim;if(a.visualBlock){o=e.getSelection();var s=A("",n.length);e.replaceSelections(s),r=n[0].anchor}else{var l=n[0].anchor,c=n[0].head;t.linewise&&c.line!=e.firstLine()&&l.line==e.lastLine()&&l.line==c.line-1&&(l.line==e.firstLine()?l.ch=0:l=i(l.line-1,z(e,l.line-1))),o=e.getRange(l,c),e.replaceRange("",l,c),r=l,t.linewise&&(r=Fe.moveToFirstNonWhiteSpaceCharacter(e,l))}return Ne.registerController.pushText(t.registerName,"delete",o,t.linewise,a.visualBlock),D(e,r,a.insertMode)},indent:function(e,t,n){var i=e.state.vim,r=n[0].anchor.line,o=i.visualBlock?n[n.length-1].anchor.line:n[0].head.line,a=i.visualMode?t.repeat:1;t.linewise&&o--;for(var s=r;s<=o;s++)for(var l=0;l<a;l++)e.indentLine(s,t.indentRight);return Fe.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},changeCase:function(e,t,n,i,r){for(var o=e.getSelections(),a=[],s=t.toLower,l=0;l<o.length;l++){var c=o[l],u="";if(!0===s)u=c.toLowerCase();else if(!1===s)u=c.toUpperCase();else for(var f=0;f<c.length;f++){var d=c.charAt(f);u+=m(d)?d.toLowerCase():d.toUpperCase()}a.push(u)}return e.replaceSelections(a),t.shouldMoveCursor?r:!e.state.vim.visualMode&&t.linewise&&n[0].anchor.line+1==n[0].head.line?Fe.moveToFirstNonWhiteSpaceCharacter(e,i):t.linewise?i:N(n[0].anchor,n[0].head)},yank:function(e,t,n,i){var r=e.state.vim,o=e.getSelection(),a=r.visualMode?N(r.sel.anchor,r.sel.head,n[0].head,n[0].anchor):i;return Ne.registerController.pushText(t.registerName,"yank",o,t.linewise,r.visualBlock),a}},He={jumpListWalk:function(e,t,n){if(!n.visualMode){var i=t.repeat,r=t.forward,o=Ne.jumpList.move(e,r?i:-i),a=o?o.find():void 0;a=a||e.getCursor(),e.setCursor(a)}},scroll:function(e,t,n){if(!n.visualMode){var i=t.repeat||1,r=e.defaultTextHeight(),o=e.getScrollInfo().top,a=r*i,s=t.forward?o+a:o-a,l=O(e.getCursor()),c=e.charCoords(l,"local");if(t.forward)s>c.top?(l.line+=(s-c.top)/r,l.line=Math.ceil(l.line),e.setCursor(l),c=e.charCoords(l,"local"),e.scrollTo(null,c.top)):e.scrollTo(null,s);else{var u=s+e.getScrollInfo().clientHeight;u<c.bottom?(l.line-=(c.bottom-u)/r,l.line=Math.floor(l.line),e.setCursor(l),c=e.charCoords(l,"local"),e.scrollTo(null,c.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,s)}}},scrollToCursor:function(e,t){var n=e.getCursor().line,r=e.charCoords(i(n,0),"local"),o=e.getScrollInfo().clientHeight,a=r.top,s=r.bottom-a;switch(t.position){case"center":a=a-o/2+s;break;case"bottom":a=a-o+s}e.scrollTo(null,a)},replayMacro:function(t,n,i){var r=n.selectedCharacter,o=n.repeat,a=Ne.macroModeState;for("@"==r&&(r=a.latestRegister);o--;)!function(t,n,i,r){var o=Ne.registerController.getRegister(r);if(":"==r)return o.keyBuffer[0]&&Ze.processCommand(t,o.keyBuffer[0]),void(i.isPlaying=!1);var a=o.keyBuffer,s=0;i.isPlaying=!0,i.replaySearchQueries=o.searchQueries.slice(0);for(var l=0;l<a.length;l++)for(var c,u,f=a[l];f;)if(c=/<\w+-.+?>|<\w+>|./.exec(f),u=c[0],f=f.substring(c.index+u.length),e.Vim.handleKey(t,u,"macro"),n.insertMode){var d=o.insertModeChanges[s++].changes;Ne.macroModeState.lastInsertModeChanges.changes=d,xe(t,d,1),me(t)}i.isPlaying=!1}(t,i,a,r)},enterMacroRecordMode:function(e,t){var n=Ne.macroModeState,i=t.selectedCharacter;Ne.registerController.isValidRegister(i)&&n.enterMacroRecordMode(e,i)},toggleOverwrite:function(t){t.state.overwrite?(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})):(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(t,n,r){if(!t.getOption("readOnly")){r.insertMode=!0,r.insertModeRepeat=n&&n.repeat||1;var o=n?n.insertAt:null,a=r.sel,s=n.head||t.getCursor("head"),l=t.listSelections().length;if("eol"==o)s=i(s.line,z(t,s.line));else if("charAfter"==o)s=I(s,0,1);else if("firstNonBlank"==o)s=Fe.moveToFirstNonWhiteSpaceCharacter(t,s);else if("startOfSelectedArea"==o)r.visualBlock?(s=i(Math.min(a.head.line,a.anchor.line),Math.min(a.head.ch,a.anchor.ch)),l=Math.abs(a.head.line-a.anchor.line)+1):s=a.head.line<a.anchor.line?a.head:i(a.anchor.line,0);else if("endOfSelectedArea"==o)r.visualBlock?(s=i(Math.min(a.head.line,a.anchor.line),Math.max(a.head.ch+1,a.anchor.ch)),l=Math.abs(a.head.line-a.anchor.line)+1):s=a.head.line>=a.anchor.line?I(a.head,0,1):i(a.anchor.line,0);else if("inplace"==o&&r.visualMode)return;t.setOption("disableInput",!1),n&&n.replace?(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"})):(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})),Ne.macroModeState.isPlaying||(t.on("change",ve),e.on(t.getInputField(),"keydown",_e)),r.visualMode&&$(t),H(t,s,l)}},toggleVisualMode:function(t,n,r){var o,a=n.repeat,s=t.getCursor();r.visualMode?r.visualLine^n.linewise||r.visualBlock^n.blockwise?(r.visualLine=!!n.linewise,r.visualBlock=!!n.blockwise,e.signal(t,"vim-mode-change",{mode:"visual",subMode:r.visualLine?"linewise":r.visualBlock?"blockwise":""}),K(t)):$(t):(r.visualMode=!0,r.visualLine=!!n.linewise,r.visualBlock=!!n.blockwise,o=D(t,i(s.line,s.ch+a-1),!0),r.sel={anchor:s,head:o},e.signal(t,"vim-mode-change",{mode:"visual",subMode:r.visualLine?"linewise":r.visualBlock?"blockwise":""}),K(t),ee(t,r,"<",N(s,o)),ee(t,r,">",B(s,o)))},reselectLastSelection:function(t,n,i){var r=i.lastSelection;if(i.visualMode&&W(t,i),r){var o=r.anchorMark.find(),a=r.headMark.find();if(!o||!a)return;i.sel={anchor:o,head:a},i.visualMode=!0,i.visualLine=r.visualLine,i.visualBlock=r.visualBlock,K(t),ee(t,i,"<",N(o,a)),ee(t,i,">",B(o,a)),e.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""})}},joinLines:function(e,t,n){var r,o;if(n.visualMode)r=e.getCursor("anchor"),q(o=e.getCursor("head"),r)&&(c=o,o=r,r=c),o.ch=z(e,o.line)-1;else{var a=Math.max(t.repeat,2);r=e.getCursor(),o=D(e,i(r.line+a-1,1/0))}for(var s=0,l=r.line;l<o.line;l++){s=z(e,r.line);var c=i(r.line+1,z(e,r.line+1)),u=e.getRange(r,c);u=u.replace(/\n\s*/g," "),e.replaceRange(u,r,c)}var f=i(r.line,s);n.visualMode&&$(e,!1),e.setCursor(f)},newLineAndEnterInsertMode:function(t,n,r){r.insertMode=!0;var o=O(t.getCursor());o.line!==t.firstLine()||n.after?(o.line=n.after?o.line:o.line-1,o.ch=z(t,o.line),t.setCursor(o),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t)):(t.replaceRange("\n",i(t.firstLine(),0)),t.setCursor(t.firstLine(),0)),this.enterInsertMode(t,{repeat:n.repeat},r)},paste:function(e,t,n){var r=O(e.getCursor()),o=Ne.registerController.getRegister(t.registerName);if(h=o.toString()){if(t.matchIndent){var a=e.getOption("tabSize"),s=function(e){var t=e.split("\t").length-1,n=e.split(" ").length-1;return t*a+1*n},l=e.getLine(e.getCursor().line),c=s(l.match(/^\s*/)[0]),u=h.replace(/\n$/,""),f=h!==u,d=s(h.match(/^\s*/)[0]),h=u.replace(/^\s*/gm,function(t){var n=c+(s(t)-d);if(n<0)return"";if(e.getOption("indentWithTabs")){var i=Math.floor(n/a);return Array(i+1).join("\t")}return Array(n+1).join(" ")});h+=f?"\n":""}t.repeat>1&&(h=Array(t.repeat+1).join(h));var p=o.linewise,m=o.blockwise;if(p)n.visualMode?h=n.visualLine?h.slice(0,-1):"\n"+h.slice(0,h.length-1)+"\n":t.after?(h="\n"+h.slice(0,h.length-1),r.ch=z(e,r.line)):r.ch=0;else{if(m)for(h=h.split("\n"),S=0;S<h.length;S++)h[S]=""==h[S]?" ":h[S];r.ch+=t.after?1:0}var g,v;if(n.visualMode){n.lastPastedText=h;var b,y=function(e,t){var n=t.lastSelection;return t.visualMode?function(){var t=e.listSelections(),n=t[0],i=t[t.length-1];return[q(n.anchor,n.head)?n.anchor:n.head,q(i.anchor,i.head)?i.head:i.anchor]}():function(){var t=e.getCursor(),r=e.getCursor(),o=n.visualBlock;if(o){var a=o.width,s=o.height;r=i(t.line+s,t.ch+a);for(var l=[],c=t.line;c<r.line;c++){var u={anchor:i(c,t.ch),head:i(c,r.ch)};l.push(u)}e.setSelections(l)}else{var f=n.anchorMark.find(),d=n.headMark.find(),h=d.line-f.line,p=d.ch-f.ch;r={line:r.line+h,ch:h?r.ch:p+r.ch},n.visualLine&&(t=i(t.line,0),r=i(r.line,z(e,r.line))),e.setSelection(t,r)}return[t,r]}()}(e,n),w=y[0],_=y[1],k=e.getSelection(),x=e.listSelections(),C=new Array(x.length).join("1").split("1");n.lastSelection&&(b=n.lastSelection.headMark.find()),Ne.registerController.unnamedRegister.setText(k),m?(e.replaceSelections(C),_=i(w.line+h.length-1,w.ch),e.setCursor(w),U(e,_),e.replaceSelections(h),g=w):n.visualBlock?(e.replaceSelections(C),e.setCursor(w),e.replaceRange(h,w,w),g=w):(e.replaceRange(h,w,_),g=e.posFromIndex(e.indexFromPos(w)+h.length-1)),b&&(n.lastSelection.headMark=e.setBookmark(b)),p&&(g.ch=0)}else if(m){e.setCursor(r);for(var S=0;S<h.length;S++){var M=r.line+S;M>e.lastLine()&&e.replaceRange("\n",i(M,0)),z(e,M)<r.ch&&function(e,t,n){var r=z(e,t),o=new Array(n-r+1).join(" ");e.setCursor(i(t,r)),e.replaceRange(o,e.getCursor())}(e,M,r.ch)}e.setCursor(r),U(e,i(r.line+h.length-1,r.ch)),e.replaceSelections(h),g=r}else e.replaceRange(h,r),p&&t.after?g=i(r.line+1,G(e.getLine(r.line+1))):p&&!t.after?g=i(r.line,G(e.getLine(r.line))):!p&&t.after?(v=e.indexFromPos(r),g=e.posFromIndex(v+h.length-1)):(v=e.indexFromPos(r),g=e.posFromIndex(v+h.length));n.visualMode&&$(e,!1),e.setCursor(g)}},undo:function(t,n){t.operation(function(){P(t,e.commands.undo,n.repeat)(),t.setCursor(t.getCursor("anchor"))})},redo:function(t,n){P(t,e.commands.redo,n.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){ee(e,n,t.selectedCharacter,e.getCursor())},replace:function(t,n,r){var o,a,s=n.selectedCharacter,l=t.getCursor(),c=t.listSelections();if(r.visualMode)l=t.getCursor("start"),a=t.getCursor("end");else{var u=t.getLine(l.line);(o=l.ch+n.repeat)>u.length&&(o=u.length),a=i(l.line,o)}if("\n"==s)r.visualMode||t.replaceRange("",l,a),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t);else{var f=t.getRange(l,a);if(f=f.replace(/[^\n]/g,s),r.visualBlock){var d=new Array(t.getOption("tabSize")+1).join(" ");f=(f=t.getSelection()).replace(/\t/g,d).replace(/[^\n]/g,s).split("\n"),t.replaceSelections(f)}else t.replaceRange(f,l,a);r.visualMode?(l=q(c[0].anchor,c[0].head)?c[0].anchor:c[0].head,t.setCursor(l),$(t,!1)):t.setCursor(I(a,0,-1))}},incrementNumberToken:function(e,t){for(var n,r,o,a,s,l=e.getCursor(),c=e.getLine(l.line),u=/-?\d+/g;null!==(n=u.exec(c))&&(s=n[0],r=n.index,o=r+s.length,!(l.ch<o)););if((t.backtrack||!(o<=l.ch))&&s){var f=t.increase?1:-1,d=parseInt(s)+f*t.repeat,h=i(l.line,r),p=i(l.line,o);a=d.toString(),e.replaceRange(a,h,p),e.setCursor(i(l.line,r+a.length-1))}},repeatLastEdit:function(e,t,n){if(n.lastEditInputState){var i=t.repeat;i&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=i:i=n.lastEditInputState.repeatOverride||i,ke(e,n,i,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:me},We={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},Ke={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/#(\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};b("pcre",!0,"boolean"),ne.prototype={getQuery:function(){return Ne.query},setQuery:function(e){Ne.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return Ne.isReversed},setReversed:function(e){Ne.isReversed=e},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(e){this.annotate=e}};var Ve={"\\n":"\n","\\r":"\r","\\t":"\t"},$e={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t"},Ge="(Javascript regexp)",Ye=function(){this.buildCommandMap_()};Ye.prototype={processCommand:function(e,t,n){var i=this;e.operation(function(){e.curOp.isVimOp=!0,i._processCommand(e,t,n)})},_processCommand:function(t,n,i){var r=t.state.vim,o=Ne.registerController.getRegister(":"),a=o.toString();r.visualMode&&$(t);var s=new e.StringStream(n);o.setText(n);var l=i||{};l.input=n;try{this.parseInput_(t,s,l)}catch(e){throw ae(t,e),e}var c,u;if(l.commandName){if(c=this.matchCommand_(l.commandName)){if(u=c.name,c.excludeFromCommandHistory&&o.setText(a),this.parseCommandArgs_(s,l,c),"exToKey"==c.type){for(var f=0;f<c.toKeys.length;f++)e.Vim.handleKey(t,c.toKeys[f],"mapping");return}if("exToEx"==c.type)return void this.processCommand(t,c.toInput)}}else void 0!==l.line&&(u="move");if(u)try{Xe[u](t,l),c&&c.possiblyAsync||!l.callback||l.callback()}catch(e){throw ae(t,e),e}else ae(t,'Not an editor command ":'+n+'"')},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),void 0!==n.line&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var i=t.match(/^(\w+)/);return n.commandName=i?i[1]:t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"'":var i=t.next(),r=pe(e,e.state.vim,i);if(!r)throw new Error("Mark not set");return this.parseLineSpecOffset_(t,r.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:return void t.backUp(1)}},parseLineSpecOffset_:function(e,t){var n=e.match(/^([+-])?(\d+)/);if(n){var i=parseInt(n[2],10);"-"==n[1]?t-=i:t+=i}return t},parseCommandArgs_:function(e,t,n){if(!e.eol()){t.argString=e.match(/.*/)[0];var i=n.argDelimiter||/\s+/,r=F(t.argString).split(i);r.length&&r[0]&&(t.args=r)}},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var i=this.commandMap_[n];if(0===i.name.indexOf(e))return i}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<n.length;e++){var t=n[e],i=t.shortName||t.name;this.commandMap_[i]=t}},map:function(e,n,i){if(":"!=e&&":"==e.charAt(0)){if(i)throw Error("Mode not supported for ex mappings");var r=e.substring(1);":"!=n&&":"==n.charAt(0)?this.commandMap_[r]={name:r,type:"exToEx",toInput:n.substring(1),user:!0}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:n,user:!0}}else if(":"!=n&&":"==n.charAt(0))o={keys:e,type:"keyToEx",exArgs:{input:n.substring(1)}},i&&(o.context=i),t.unshift(o);else{var o={keys:e,type:"keyToKey",toKeys:n};i&&(o.context=i),t.unshift(o)}},unmap:function(e,n){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var i=e.substring(1);if(this.commandMap_[i]&&this.commandMap_[i].user)return void delete this.commandMap_[i]}else for(var r=e,o=0;o<t.length;o++)if(r==t[o].keys&&t[o].context===n)return void t.splice(o,1);throw Error("No such mapping.")}};var Xe={colorscheme:function(e,t){!t.args||t.args.length<1?ae(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,n){var i=t.args;!i||i.length<2?e&&ae(e,"Invalid mapping: "+t.input):Ze.map(i[0],i[1],n)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},unmap:function(e,t,n){var i=t.args;!i||i.length<1?e&&ae(e,"No such mapping: "+t.input):Ze.unmap(i[0],n)},move:function(e,t){ze.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args,i=t.setCfg||{};if(!n||n.length<1)e&&ae(e,"Invalid mapping: "+t.input);else{var r=n[0].split("="),o=r[0],a=r[1],s=!1;if("?"==o.charAt(o.length-1)){if(a)throw Error("Trailing characters: "+t.argString);o=o.substring(0,o.length-1),s=!0}void 0===a&&"no"==o.substring(0,2)&&(o=o.substring(2),a=!1);var l=Oe[o]&&"boolean"==Oe[o].type;if(l&&void 0==a&&(a=!0),!l&&void 0===a||s){var c=w(o,e,i);c instanceof Error?ae(e,c.message):!0===c||!1===c?ae(e," "+(c?"":"no")+o):ae(e,"  "+o+"="+c)}else{var u=y(o,a,e,i);u instanceof Error&&ae(e,u.message)}}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var n=t.args,i=Ne.registerController.registers,r="----------Registers----------<br><br>";if(n){n=n.join("");for(var o=0;o<n.length;o++)a=n.charAt(o),Ne.registerController.isValidRegister(a)&&(r+='"'+a+"    "+(i[a]||new M).toString()+"<br>")}else for(var a in i){var s=i[a].toString();s.length&&(r+='"'+a+"    "+s+"<br>")}ae(e,r)},sort:function(t,n){function r(e,t){if(o){var n;n=e,e=t,t=n}a&&(e=e.toLowerCase(),t=t.toLowerCase());var i=l&&g.exec(e),r=l&&g.exec(t);return i?(i=parseInt((i[1]+i[2]).toLowerCase(),v),r=parseInt((r[1]+r[2]).toLowerCase(),v),i-r):e<t?-1:1}var o,a,s,l,c,u=function(){if(n.argString){var t=new e.StringStream(n.argString);if(t.eat("!")&&(o=!0),t.eol())return;if(!t.eatSpace())return"Invalid arguments";var i=t.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!i&&!t.eol())return"Invalid arguments";if(i[1]){a=-1!=i[1].indexOf("i"),s=-1!=i[1].indexOf("u");var r=-1!=i[1].indexOf("d")||-1!=i[1].indexOf("n")&&1,u=-1!=i[1].indexOf("x")&&1,f=-1!=i[1].indexOf("o")&&1;if(r+u+f>1)return"Invalid arguments";l=r&&"decimal"||u&&"hex"||f&&"octal"}i[2]&&(c=new RegExp(i[2].substr(1,i[2].length-2),a?"i":""))}}();if(u)ae(t,u+": "+n.argString);else{var f=n.line||t.firstLine(),d=n.lineEnd||n.line||t.lastLine();if(f!=d){var h=i(f,0),p=i(d,z(t,d)),m=t.getRange(h,p).split("\n"),g=c||("decimal"==l?/(-?)([\d]+)/:"hex"==l?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==l?/([0-7]+)/:null),v="decimal"==l?10:"hex"==l?16:"octal"==l?8:null,b=[],y=[];if(l||c)for(x=0;x<m.length;x++){var w=c?m[x].match(c):null;w&&""!=w[0]?b.push(w):!c&&g.exec(m[x])?b.push(m[x]):y.push(m[x])}else y=m;if(b.sort(c?function(e,t){if(o){var n;n=e,e=t,t=n}return a&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}:r),c)for(x=0;x<b.length;x++)b[x]=b[x].input;else l||y.sort(r);if(m=o?b.concat(y):y.concat(b),s){var _,k=m;m=[];for(var x=0;x<k.length;x++)k[x]!=_&&m.push(k[x]),_=k[x]}t.replaceRange(m.join("\n"),h,p)}}},global:function(e,t){var n=t.argString;if(n){var i,r=void 0!==t.line?t.line:e.firstLine(),o=t.lineEnd||t.line||e.lastLine(),a=re(n),s=n;if(a.length&&(s=a[0],i=a.slice(1,a.length).join("/")),s)try{le(e,s,!0,!0)}catch(t){return void ae(e,"Invalid regex: "+s)}for(var l=ie(e).getQuery(),c=[],u="",f=r;f<=o;f++)l.test(e.getLine(f))&&(c.push(f+1),u+=e.getLine(f)+"<br>");if(i){var d=0,h=function(){if(d<c.length){var t=c[d]+i;Ze.processCommand(e,t,{callback:h})}d++};h()}else ae(e,u)}else ae(e,"Regular Expression missing from global")},substitute:function(t,n){if(!t.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var r,o,a,s,l=n.argString,c=l?re(l):[],u="",f=!1,d=!1;if(c.length)r=c[0],u=c[1],r&&"$"===r[r.length-1]&&(r=r.slice(0,r.length-1)+"\\n",u=u?u+"\n":"\n"),void 0!==u&&(u=w("pcre")?function(t){for(var n=new e.StringStream(t),i=[];!n.eol();){for(;n.peek()&&"\\"!=n.peek();)i.push(n.next());var r=!1;for(var o in $e)if(n.match(o,!0)){r=!0,i.push($e[o]);break}r||i.push(n.next())}return i.join("")}(u):function(e){for(var t=!1,n=[],i=-1;i<e.length;i++){var r=e.charAt(i)||"",o=e.charAt(i+1)||"";Ve[r+o]?(n.push(Ve[r+o]),i++):t?(n.push(r),t=!1):"\\"===r?(t=!0,p(o)||"$"===o?n.push("$"):"/"!==o&&"\\"!==o&&n.push("\\")):("$"===r&&n.push("$"),n.push(r),"/"===o&&n.push("\\"))}return n.join("")}(u),Ne.lastSubstituteReplacePart=u),o=c[2]?c[2].split(" "):[];else if(l&&l.length)return void ae(t,"Substitutions should be of the form :s/pattern/replace/");if(o&&(a=o[0],s=parseInt(o[1]),a&&(-1!=a.indexOf("c")&&(f=!0,a.replace("c","")),-1!=a.indexOf("g")&&(d=!0,a.replace("g","")),r=r+"/"+a)),r)try{le(t,r,!0,!0)}catch(e){return void ae(t,"Invalid regex: "+r)}if(void 0!==(u=u||Ne.lastSubstituteReplacePart)){var h=ie(t).getQuery(),m=void 0!==n.line?n.line:t.getCursor().line,g=n.lineEnd||m;m==t.firstLine()&&g==t.lastLine()&&(g=1/0),s&&(g=(m=g)+s-1);var v=D(t,i(m,0)),b=t.getSearchCursor(h,v);!function(t,n,i,r,o,a,s,l,c){function u(){t.operation(function(){for(;!p;)f(),d();h()})}function f(){var e=t.getRange(a.from(),a.to()).replace(s,l);a.replace(e)}function d(){for(;a.findNext()&&de(a.from(),r,o);)if(i||!m||a.from().line!=m.line)return t.scrollIntoView(a.from(),30),t.setSelection(a.from(),a.to()),m=a.from(),void(p=!1);p=!0}function h(e){if(e&&e(),t.focus(),m){t.setCursor(m);var n=t.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=m.ch}c&&c()}t.state.vim.exMode=!0;var p=!1,m=a.from();if(d(),!p)return n?void se(t,{prefix:"replace with <strong>"+l+"</strong> (y/n/a/q/l)",onKeyDown:function(n,i,r){switch(e.e_stop(n),e.keyName(n)){case"Y":f(),d();break;case"N":d();break;case"A":var o=c;c=void 0,t.operation(u),c=o;break;case"L":f();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":h(r)}return p&&h(r),!0}}):(u(),void(c&&c()));ae(t,"No matches for "+s.source)}(t,f,d,m,g,b,h,u,n.callback)}else ae(t,"No previous substitute regular expression")},redo:e.commands.redo,undo:e.commands.undo,write:function(t){e.commands.save?e.commands.save(t):t.save&&t.save()},nohlsearch:function(e){fe(e)},yank:function(e){var t=O(e.getCursor()).line,n=e.getLine(t);Ne.registerController.pushText("0","yank",n,!0,!0)},delmarks:function(t,n){if(n.argString&&F(n.argString))for(var i=t.state.vim,r=new e.StringStream(F(n.argString));!r.eol();){r.eatSpace();var o=r.pos;if(!r.match(/[a-zA-Z]/,!1))return void ae(t,"Invalid argument: "+n.argString.substring(o));var a=r.next();if(r.match("-",!0)){if(!r.match(/[a-zA-Z]/,!1))return void ae(t,"Invalid argument: "+n.argString.substring(o));var s=a,l=r.next();if(!(d(s)&&d(l)||m(s)&&m(l)))return void ae(t,"Invalid argument: "+s+"-");var c=s.charCodeAt(0),u=l.charCodeAt(0);if(c>=u)return void ae(t,"Invalid argument: "+n.argString.substring(o));for(var f=0;f<=u-c;f++){var h=String.fromCharCode(c+f);delete i.marks[h]}}else delete i.marks[a]}else ae(t,"Argument required")}},Ze=new Ye;return e.keyMap.vim={attach:o,detach:r,call:l},b("insertModeEscKeysTimeout",200,"number"),e.keyMap["vim-insert"]={fallthrough:["default"],attach:o,detach:r,call:l},e.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:o,detach:r,call:l},x(),Re}()})},{"../addon/dialog/dialog":54,"../addon/edit/matchbrackets.js":55,"../addon/search/searchcursor":57,"../lib/codemirror":60}],60:[function(e,t,n){!function(e,i){"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):e.CodeMirror=i()}(this,function(){"use strict";function e(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function t(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function n(e,n){return t(e).appendChild(n)}function i(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function r(e,t,n,r){var o=i(e,t,n,r);return o.setAttribute("role","presentation"),o}function o(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function a(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function s(t,n){var i=t.className;e(n).test(i)||(t.className+=(i?" ":"")+n)}function l(t,n){for(var i=t.split(" "),r=0;r<i.length;r++)i[r]&&!e(i[r]).test(n)&&(n+=" "+i[r]);return n}function c(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function u(e,t,n){t||(t={});for(var i in e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function f(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,a=r||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}function d(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function h(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var a=o-i;if(o==e.length||r+a>=t)return i+Math.min(a,t-r);if(r+=o-i,r+=n-r%n,i=o+1,r>=t)return i}}function p(e){for(;wo.length<=e;)wo.push(m(wo)+" ");return wo[e]}function m(e){return e[e.length-1]}function g(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function v(){}function b(e,t){var n;return Object.create?n=Object.create(e):(v.prototype=e,n=new v),t&&u(t,n),n}function y(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||_o.test(e))}function w(e,t){return t?!!(t.source.indexOf("\\w")>-1&&y(e))||t.test(e):y(e)}function _(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function k(e){return e.charCodeAt(0)>=768&&ko.test(e)}function x(e,t,n){for(;(n<0?t>0:t<e.length)&&k(e.charAt(t));)t+=n;return t}function C(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}function S(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function M(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r}),i}function E(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function T(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function A(e){if(null==e.parent)return null;for(var t=e.parent,n=d(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function D(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a].height;if(t<s)break;t-=s}return n+a}function L(e,t){return t>=e.first&&t<e.first+e.size}function I(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function P(e,t,n){if(void 0===n&&(n=null),!(this instanceof P))return new P(e,t,n);this.line=e,this.ch=t,this.sticky=n}function O(e,t){return e.line-t.line||e.ch-t.ch}function j(e,t){return e.sticky==t.sticky&&0==O(e,t)}function q(e){return P(e.line,e.ch)}function N(e,t){return O(e,t)<0?t:e}function B(e,t){return O(e,t)<0?e:t}function R(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function z(e,t){if(t.line<e.first)return P(e.first,0);var n=e.first+e.size-1;return t.line>n?P(n,S(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?P(e.line,t):n<0?P(e.line,0):e}(t,S(e,t.line).text.length)}function F(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=z(e,t[i]);return n}function U(e,t,n){this.marker=e,this.from=t,this.to=n}function H(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function W(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function K(e,t){if(t.full)return null;var n=L(e,t.from.line)&&S(e,t.from.line).markedSpans,i=L(e,t.to.line)&&S(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,a=0==O(t.from,t.to),s=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new U(a,o.from,s?null:o.to))}}return i}(n,r,a),l=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new U(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return i}(i,o,a),c=1==t.text.length,u=m(t.text).length+(c?r:0);if(s)for(var f=0;f<s.length;++f){var d=s[f];if(null==d.to){var h=H(l,d.marker);h?c&&(d.to=null==h.to?null:h.to+u):d.to=r}}if(l)for(var p=0;p<l.length;++p){var g=l[p];if(null!=g.to&&(g.to+=u),null==g.from){H(s,g.marker)||(g.from=u,c&&(s||(s=[])).push(g))}else g.from+=u,c&&(s||(s=[])).push(g)}s&&(s=V(s)),l&&l!=s&&(l=V(l));var v=[s];if(!c){var b,y=t.text.length-2;if(y>0&&s)for(var w=0;w<s.length;++w)null==s[w].to&&(b||(b=[])).push(new U(s[w].marker,null,null));for(var _=0;_<y;++_)v.push(b);v.push(l)}return v}function V(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function $(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function G(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Y(e){return e.inclusiveLeft?-1:0}function X(e){return e.inclusiveRight?1:0}function Z(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=O(i.from,r.from)||Y(e)-Y(t);if(o)return-o;var a=O(i.to,r.to)||X(e)-X(t);return a||t.id-e.id}function J(e,t){var n,i=Co&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Z(n,r.marker)<0)&&(n=r.marker);return n}function Q(e){return J(e,!0)}function ee(e){return J(e,!1)}function te(e,t,n,i,r){var o=S(e,t),a=Co&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=O(c.from,n)||Y(l.marker)-Y(r),f=O(c.to,i)||X(l.marker)-X(r);if(!(u>=0&&f<=0||u<=0&&f>=0)&&(u<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?O(c.to,n)>=0:O(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?O(c.from,i)<=0:O(c.from,i)<0)))return!0}}}function ne(e){for(var t;t=Q(e);)e=t.find(-1,!0).line;return e}function ie(e,t){var n=S(e,t),i=ne(n);return n==i?t:A(i)}function re(e,t){if(t>e.lastLine())return t;var n,i=S(e,t);if(!oe(e,i))return t;for(;n=ee(i);)i=n.find(1,!0).line;return A(i)+1}function oe(e,t){var n=Co&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&ae(e,t,i))return!0}}function ae(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return ae(e,i.line,H(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&ae(e,t,r))return!0}function se(e){for(var t=0,n=(e=ne(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;n=o,o=n.parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function le(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Q(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=ee(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function ce(e){var t=e.display,n=e.doc;t.maxLine=S(n,n.first),t.maxLineLength=le(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=le(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function ue(e,t,n){var i;So=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:So=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:So=r)}return null!=i?i:So}function fe(e,t){var n=e.order;return null==n&&(n=e.order=Mo(e.text,t)),n}function de(e,t){return e._handlers&&e._handlers[t]||Eo}function he(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=d(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function pe(e,t){var n=de(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function me(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),pe(e,n||t.type,e,t),_e(t)||t.codemirrorIgnore}function ge(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==d(n,t[i])&&n.push(t[i])}function ve(e,t){return de(e,t).length>0}function be(e){e.prototype.on=function(e,t){To(this,e,t)},e.prototype.off=function(e,t){he(this,e,t)}}function ye(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function we(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function _e(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ke(e){ye(e),we(e)}function xe(e){return e.target||e.srcElement}function Ce(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),no&&e.ctrlKey&&1==t&&(t=3),t}function Se(e){if(null==ho){var t=i("span","");n(e,i("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(ho=t.offsetWidth<=1&&t.offsetHeight>2&&!(Wr&&Kr<8))}var r=ho?i("span",""):i("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Me(e){if(null!=po)return po;var i=n(e,document.createTextNode("AA")),r=ao(i,0,1).getBoundingClientRect(),o=ao(i,1,2).getBoundingClientRect();return t(e),!(!r||r.left==r.right)&&(po=o.right-r.right<3)}function Ee(e){if("string"==typeof e&&jo.hasOwnProperty(e))e=jo[e];else if(e&&"string"==typeof e.name&&jo.hasOwnProperty(e.name)){var t=jo[e.name];"string"==typeof t&&(t={name:t}),(e=b(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ee("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ee("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Te(e,t){t=Ee(t);var n=Oo[t.name];if(!n)return Te(e,"text/plain");var i=n(e,t);if(qo.hasOwnProperty(t.name)){var r=qo[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)i[a]=t.modeProps[a];return i}function Ae(e,t){u(t,qo.hasOwnProperty(e)?qo[e]:qo[e]={})}function De(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Le(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ie(e,t,n){return!e.startState||e.startState(t,n)}function Pe(e,t,n,i){var r=[e.state.modeGen],o={};Fe(e,t.text,e.doc.mode,n,function(e,t){return r.push(e,t)},o,i);for(var a=n.state,s=function(i){n.baseTokens=r;var s=e.state.overlays[i],l=1,c=0;n.state=!0,Fe(e,t.text,s.mode,n,function(e,t){for(var n=l;c<e;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(s.opaque)r.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}},o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function Oe(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=je(e,A(t)),r=t.text.length>e.options.maxHighlightLength&&De(e.doc.mode,i.state),o=Pe(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function je(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new Ro(i,!0,t);var o=function(e,t,n){for(var i,r,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=S(o,s-1),c=l.stateAfter;if(c&&(!n||s+(c instanceof Bo?c.lookAhead:0)<=o.modeFrontier))return s;var u=f(l.text,null,e.options.tabSize);(null==r||i>u)&&(r=s-1,i=u)}return r}(e,t,n),a=o>i.first&&S(i,o-1).stateAfter,s=a?Ro.fromSaved(i,a,o):new Ro(i,Ie(i.mode),o);return i.iter(o,t,function(n){qe(e,n.text,s);var i=s.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?s.save():null,s.nextLine()}),n&&(i.modeFrontier=s.line),s}function qe(e,t,n,i){var r=e.doc.mode,o=new No(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&Ne(r,n.state);!o.eol();)Be(r,o,n.state),o.start=o.pos}function Ne(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Le(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Be(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Le(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function Re(e,t,n,i){var r,o,a=e.doc,s=a.mode,l=S(a,(t=z(a,t)).line),c=je(e,t.line,n),u=new No(l.text,e.options.tabSize,c);for(i&&(o=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,r=Be(s,u,c.state),i&&o.push(new zo(u,r,De(a.mode,c.state)));return i?o:new zo(u,r,c.state)}function ze(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Fe(e,t,n,i,r,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,u=null,f=new No(t,e.options.tabSize,i),d=e.options.addModeClass&&[null];for(""==t&&ze(Ne(n,i.state),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(s=!1,a&&qe(e,t,i,f.pos),f.pos=t.length,l=null):l=ze(Be(n,f,i.state,d),o),d){var h=d[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||u!=l){for(;c<f.start;)r(c=Math.min(f.start,c+5e3),u);u=l}f.start=f.pos}for(;c<f.pos;){var p=Math.min(f.pos,c+5e3);r(p,u),c=p}}function Ue(e){e.parent=null,$(e)}function He(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Wo:Ho;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function We(e,t){var n=r("span",null,null,Vr?"padding-right: .1px":null),i={pre:r("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(Wr||Vr)&&e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var a=o?t.rest[o-1]:t.line,s=void 0;i.pos=0,i.addToken=Ve,Me(e.display.measure)&&(s=fe(a,e.doc.direction))&&(i.addToken=function(e,t){return function(n,i,r,o,a,s,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var f=void 0,d=0;d<t.length&&!((f=t[d]).to>c&&f.from<=c);d++);if(f.to>=u)return e(n,i,r,o,a,s,l);e(n,i.slice(0,f.to-c),r,o,null,s,l),o=null,i=i.slice(f.to-c),c=f.to}}}(i.addToken,s)),i.map=[];!function(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(!i){for(var a=1;a<n.length;a+=2)t.addToken(t,r.slice(o,o=n[a]),He(n[a+1],t.cm.options));return}for(var s,l,c,u,f,d,h,p=r.length,m=0,g=1,v="",b=0;;){if(b==m){c=u=f=d=l="",h=null,b=1/0;for(var y=[],w=void 0,_=0;_<i.length;++_){var k=i[_],x=k.marker;"bookmark"==x.type&&k.from==m&&x.widgetNode?y.push(x):k.from<=m&&(null==k.to||k.to>m||x.collapsed&&k.to==m&&k.from==m)?(null!=k.to&&k.to!=m&&b>k.to&&(b=k.to,u=""),x.className&&(c+=" "+x.className),x.css&&(l=(l?l+";":"")+x.css),x.startStyle&&k.from==m&&(f+=" "+x.startStyle),x.endStyle&&k.to==b&&(w||(w=[])).push(x.endStyle,k.to),x.title&&!d&&(d=x.title),x.collapsed&&(!h||Z(h.marker,x)<0)&&(h=k)):k.from>m&&b>k.from&&(b=k.from)}if(w)for(var C=0;C<w.length;C+=2)w[C+1]==b&&(u+=" "+w[C]);if(!h||h.from==m)for(var S=0;S<y.length;++S)$e(t,0,y[S]);if(h&&(h.from||0)==m){if($e(t,(null==h.to?p+1:h.to)-m,h.marker,null==h.from),null==h.to)return;h.to==m&&(h=!1)}}if(m>=p)break;for(var M=Math.min(p,b);;){if(v){var E=m+v.length;if(!h){var T=E>M?v.slice(0,M-m):v;t.addToken(t,T,s?s+c:c,f,m+T.length==b?u:"",d,l)}if(E>=M){v=v.slice(M-m),m=M;break}m=E,f=""}v=r.slice(o,o=n[g++]),s=He(n[g++],t.cm.options)}}}(a,i,Oe(e,a,t!=e.display.externalMeasured&&A(a))),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=l(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=l(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Se(e.display.measure))),0==o?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(Vr){var c=i.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return pe(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=l(i.pre.className,i.textClass||"")),i}function Ke(e){var t=i("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Ve(e,t,n,r,o,a,s){if(t){var l,c=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o=""),i+=o,n=" "==o}return i}(t,e.trailingSpace):t,u=e.cm.state.specialChars,f=!1;if(u.test(t)){l=document.createDocumentFragment();for(var d=0;;){u.lastIndex=d;var h=u.exec(t),m=h?h.index-d:t.length-d;if(m){var g=document.createTextNode(c.slice(d,d+m));Wr&&Kr<9?l.appendChild(i("span",[g])):l.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!h)break;d+=m+1;var v=void 0;if("\t"==h[0]){var b=e.cm.options.tabSize,y=b-e.col%b;(v=l.appendChild(i("span",p(y),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=y}else"\r"==h[0]||"\n"==h[0]?((v=l.appendChild(i("span","\r"==h[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",h[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),Wr&&Kr<9?l.appendChild(i("span",[v])):l.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,l=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,l),Wr&&Kr<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),n||r||o||f||s){var w=n||"";r&&(w+=r),o&&(w+=o);var _=i("span",[l],w,s);return a&&(_.title=a),e.content.appendChild(_)}e.content.appendChild(l)}}function $e(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function Ge(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=ee(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?A(m(this.rest))-n+1:1,this.node=this.text=null,this.hidden=oe(e,t)}function Ye(e,t,n){for(var i,r=[],o=t;o<n;o=i){var a=new Ge(e.doc,S(e.doc,o),o);i=o+a.size,r.push(a)}return r}function Xe(e,t){var n=de(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);Ko?i=Ko.delayedCallbacks:Vo?i=Vo:(i=Vo=[],setTimeout(Ze,0));for(var o=function(e){i.push(function(){return n[e].apply(null,r)})},a=0;a<n.length;++a)o(a)}}function Ze(){var e=Vo;Vo=null;for(var t=0;t<e.length;++t)e[t]()}function Je(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?function(e,t){var n=t.text.className,i=et(e,t);t.text==t.node&&(t.node=i.pre);t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,tt(e,t)):n&&(t.text.className=n)}(e,t):"gutter"==o?nt(e,t,n,i):"class"==o?tt(e,t):"widget"==o&&function(e,t,n){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild,r=void 0;i;i=r)r=i.nextSibling,"CodeMirror-linewidget"==i.className&&t.node.removeChild(i);rt(e,t,n)}(e,t,i)}t.changes=null}function Qe(e){return e.node==e.text&&(e.node=i("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Wr&&Kr<8&&(e.node.style.zIndex=2)),e.node}function et(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):We(e,t)}function tt(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=Qe(t);t.background=r.insertBefore(i("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?Qe(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function nt(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=Qe(t);t.gutterBackground=i("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var s=Qe(t),l=t.gutter=i("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),s.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(i("div",I(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var c=0;c<e.options.gutters.length;++c){var u=e.options.gutters[c],f=a.hasOwnProperty(u)&&a[u];f&&l.appendChild(i("div",[f],"CodeMirror-gutter-elt","left: "+r.gutterLeft[u]+"px; width: "+r.gutterWidth[u]+"px"))}}}function it(e,t,n,i){var r=et(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),tt(e,t),nt(e,t,n,i),rt(e,t,i),t.node}function rt(e,t,n){if(ot(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)ot(e,t.rest[i],t,n,!1)}function ot(e,t,n,r,o){if(t.widgets)for(var a=Qe(n),s=0,l=t.widgets;s<l.length;++s){var c=l[s],u=i("div",[c.node],"CodeMirror-linewidget");c.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),function(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}(c,u,n,r),e.display.input.setUneditable(u),o&&c.above?a.insertBefore(u,n.gutter||n.text):a.appendChild(u),Xe(c,"redraw")}}function at(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!o(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),n(t.display.measure,i("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function st(e,t){for(var n=xe(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function lt(e){return e.lineSpace.offsetTop}function ct(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ut(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=n(e.measure,i("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,o={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(o.left)||isNaN(o.right)||(e.cachedPaddingH=o),o}function ft(e){return mo-e.display.nativeBarWidth}function dt(e){return e.display.scroller.clientWidth-ft(e)-e.display.barWidth}function ht(e){return e.display.scroller.clientHeight-ft(e)-e.display.barHeight}function pt(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(A(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function mt(e,t,n,i){return bt(e,vt(e,t),n,i)}function gt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Wt(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function vt(e,t){var i=A(t),r=gt(e,i);r&&!r.text?r=null:r&&r.changes&&(Je(e,r,i,Rt(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var i=A(t=ne(t)),r=e.display.externalMeasured=new Ge(e.doc,t,i);r.lineN=i;var o=r.built=We(e,r);return r.text=o.pre,n(e.display.lineMeasure,o.pre),r}(e,t));var o=pt(r,t,i);return{line:t,view:r,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function bt(e,t,r,o,a){t.before&&(r=-1);var s,l=r+(o||"");return t.cache.hasOwnProperty(l)?s=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,n){var i=e.options.lineWrapping,r=i&&dt(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(s=function(e,t,r,o){var a,s=yt(t.map,r,o),l=s.node,c=s.start,u=s.end,f=s.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;c&&k(t.line.text.charAt(s.coverStart+c));)--c;for(;s.coverStart+u<s.coverEnd&&k(t.line.text.charAt(s.coverStart+u));)++u;if((a=Wr&&Kr<9&&0==c&&u==s.coverEnd-s.coverStart?l.parentNode.getBoundingClientRect():wt(ao(l,c,u).getClientRects(),o)).left||a.right||0==c)break;u=c,c-=1,f="right"}Wr&&Kr<11&&(a=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Po)return Po;var t=n(e,i("span","x")),r=t.getBoundingClientRect(),o=ao(t,0,1).getBoundingClientRect();return Po=Math.abs(r.left-o.left)>1}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*o,bottom:t.bottom*o}}(e.display.measure,a))}else{c>0&&(f=o="right");var h;a=e.options.lineWrapping&&(h=l.getClientRects()).length>1?h["right"==o?h.length-1:0]:l.getBoundingClientRect()}if(Wr&&Kr<9&&!c&&(!a||!a.left&&!a.right)){var p=l.parentNode.getClientRects()[0];a=p?{left:p.left,right:p.left+Bt(e.display),top:p.top,bottom:p.bottom}:$o}for(var m=a.top-t.rect.top,g=a.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,y=0;y<b.length-1&&!(v<b[y]);y++);var w=y?b[y-1]:0,_=b[y],x={left:("right"==f?a.right:a.left)-t.rect.left,right:("left"==f?a.left:a.right)-t.rect.left,top:w,bottom:_};a.left||a.right||(x.bogus=!0);e.options.singleCursorHeightPerLine||(x.rtop=m,x.rbottom=g);return x}(e,t,r,o)).bogus||(t.cache[l]=s)),{left:s.left,right:s.right,top:a?s.rtop:s.top,bottom:a?s.rbottom:s.bottom}}function yt(e,t,n){for(var i,r,o,a,s,l,c=0;c<e.length;c+=3)if(s=e[c],l=e[c+1],t<s?(r=0,o=1,a="left"):t<l?o=(r=t-s)+1:(c==e.length-3||t==l&&e[c+3]>t)&&(r=(o=l-s)-1,t>=l&&(a="right")),null!=r){if(i=e[c+2],s==l&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==r)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)i=e[2+(c-=3)],a="left";if("right"==n&&r==l-s)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)i=e[(c+=3)+2],a="right";break}return{node:i,start:r,end:o,collapse:a,coverStart:s,coverEnd:l}}function wt(e,t){var n=$o;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function _t(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function kt(e){e.display.externalMeasure=null,t(e.display.lineMeasure);for(var n=0;n<e.display.view.length;n++)_t(e.display.view[n])}function xt(e){kt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Ct(){return Gr&&eo?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function St(){return Gr&&eo?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Mt(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=at(e.widgets[n]));return t}function Et(e,t,n,i,r){if(!r){var o=Mt(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var a=se(t);if("local"==i?a+=lt(e.display):a-=e.display.viewOffset,"page"==i||"window"==i){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==i?0:St());var l=s.left+("window"==i?0:Ct());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Tt(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=Ct(),r-=St();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function At(e,t,n,i,r){return i||(i=S(e.doc,t.line)),Et(e,i,mt(e,i,t.ch,r),n)}function Dt(e,t,n,i,r,o){function a(t,a){var s=bt(e,r,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Et(e,i,s,n)}function s(e,t,n){var i=1==l[t].level;return a(n?e-1:e,i!=n)}i=i||S(e.doc,t.line),r||(r=vt(e,i));var l=fe(i,e.doc.direction),c=t.ch,u=t.sticky;if(c>=i.text.length?(c=i.text.length,u="before"):c<=0&&(c=0,u="after"),!l)return a("before"==u?c-1:c,"before"==u);var f=ue(l,c,u),d=So,h=s(c,f,"before"==u);return null!=d&&(h.other=s(c,d,"before"!=u)),h}function Lt(e,t){var n=0;t=z(e.doc,t),e.options.lineWrapping||(n=Bt(e.display)*t.ch);var i=S(e.doc,t.line),r=se(i)+lt(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function It(e,t,n,i,r){var o=P(e,t,n);return o.xRel=r,i&&(o.outside=!0),o}function Pt(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return It(i.first,0,null,!0,-1);var r=D(i,n),o=i.first+i.size-1;if(r>o)return It(i.first+i.size-1,S(i,o).text.length,null,!0,1);t<0&&(t=0);for(var a=S(i,r);;){var s=function(e,t,n,i,r){r-=se(t);var o=vt(e,t),a=Mt(t),s=0,l=t.text.length,c=!0,u=fe(t,e.doc.direction);if(u){var f=(e.options.lineWrapping?function(e,t,n,i,r,o,a){var s=Ot(e,t,i,a),l=s.begin,c=s.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,f=null,d=0;d<r.length;d++){var h=r[d];if(!(h.from>=c||h.to<=l)){var p=1!=h.level,m=bt(e,i,p?Math.min(c,h.to)-1:Math.max(l,h.from)).right,g=m<o?o-m+1e9:m-o;(!u||f>g)&&(u=h,f=g)}}u||(u=r[r.length-1]);u.from<l&&(u={from:l,to:u.to,level:u.level});u.to>c&&(u={from:u.from,to:c,level:u.level});return u}:function(e,t,n,i,r,o,a){var s=C(function(s){var l=r[s],c=1!=l.level;return qt(Dt(e,P(n,c?l.to:l.from,c?"before":"after"),"line",t,i),o,a,!0)},0,r.length-1),l=r[s];if(s>0){var c=1!=l.level,u=Dt(e,P(n,c?l.from:l.to,c?"after":"before"),"line",t,i);qt(u,o,a,!0)&&u.top>a&&(l=r[s-1])}return l})(e,t,n,o,u,i,r);c=1!=f.level,s=c?f.from:f.to-1,l=c?f.to:f.from-1}var d,h,p=null,m=null,g=C(function(t){var n=bt(e,o,t);return n.top+=a,n.bottom+=a,!!qt(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=t,m=n),!0)},s,l),v=!1;if(m){var b=i-m.left<m.right-i,y=b==c;g=p+(y?0:1),h=y?"after":"before",d=b?m.left:m.right}else{c||g!=l&&g!=s||g++,h=0==g?"after":g==t.text.length?"before":bt(e,o,g-(c?1:0)).bottom+a<=r==c?"after":"before";var w=Dt(e,P(n,g,h),"line",t,o);d=w.left,v=r<w.top||r>=w.bottom}return g=x(t.text,g,1),It(n,g,h,v,i-d)}(e,a,r,t,n),l=ee(a),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;r=A(a=c.to.line)}}function Ot(e,t,n,i){i-=Mt(t);var r=t.text.length,o=C(function(t){return bt(e,n,t-1).bottom<=i},r,0);return r=C(function(t){return bt(e,n,t).top>i},o,r),{begin:o,end:r}}function jt(e,t,n,i){n||(n=vt(e,t));return Ot(e,t,n,Et(e,t,bt(e,n,i),"line").top)}function qt(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function Nt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Uo){Uo=i("pre");for(var r=0;r<49;++r)Uo.appendChild(document.createTextNode("x")),Uo.appendChild(i("br"));Uo.appendChild(document.createTextNode("x"))}n(e.measure,Uo);var o=Uo.offsetHeight/50;return o>3&&(e.cachedTextHeight=o),t(e.measure),o||1}function Bt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=i("span","xxxxxxxxxx"),r=i("pre",[t]);n(e.measure,r);var o=t.getBoundingClientRect(),a=(o.right-o.left)/10;return a>2&&(e.cachedCharWidth=a),a||10}function Rt(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+r,i[e.options.gutters[a]]=o.clientWidth;return{fixedPos:zt(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function zt(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ft(e){var t=Nt(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Bt(e.display)-3);return function(r){if(oe(e.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function Ut(e){var t=e.doc,n=Ft(e);t.iter(function(e){var t=n(e);t!=e.height&&T(e,t)})}function Ht(e,t,n,i){var r=e.display;if(!n&&"true"==xe(t).getAttribute("cm-not-content"))return null;var o,a,s=r.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,c=Pt(e,o,a);if(i&&1==c.xRel&&(l=S(e.doc,c.line).text).length==c.ch){var u=f(l,l.length,e.options.tabSize)-l.length;c=P(c.line,Math.max(0,Math.round((o-ut(e.display).left)/Bt(e.display))-u))}return c}function Wt(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function Kt(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Vt(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},o=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var l=n.sel.ranges[s];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var c=l.empty();(c||e.options.showCursorWhenSelecting)&&$t(e,l.head,o),c||function(e,t,n){function r(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),l.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?f-e:n)+"px;\n                             height: "+(r-t)+"px"))}function o(t,n,i){function o(n,i){return At(e,P(t,n),"div",h,i)}function a(t,n,i){var r=jt(e,h,null,t),a="ltr"==n==("after"==i)?"left":"right";return o("after"==i?r.begin:r.end-(/\s/.test(h.text.charAt(r.end-1))?2:1),a)[a]}var l,c,h=S(s,t),p=h.text.length,m=fe(h,s.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(i(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}(m,n||0,null==i?p:i,function(e,t,s,h){var g="ltr"==s,v=o(e,g?"left":"right"),b=o(t-1,g?"right":"left"),y=null==n&&0==e,w=null==i&&t==p,_=0==h,k=!m||h==m.length-1;if(b.top-v.top<=3){var x=(d?w:y)&&k,C=(d?y:w)&&_?u:(g?v:b).left,S=x?f:(g?b:v).right;r(C,v.top,S-C,v.bottom)}else{var M,E,T,A;g?(M=d&&y&&_?u:v.left,E=d?f:a(e,s,"before"),T=d?u:a(t,s,"after"),A=d&&w&&k?f:b.right):(M=d?a(e,s,"before"):u,E=!d&&y&&_?f:v.right,T=!d&&w&&k?u:b.left,A=d?a(t,s,"after"):f),r(M,v.top,E-M,v.bottom),v.bottom<b.top&&r(u,v.bottom,null,b.top),r(T,b.top,A-T,b.bottom)}(!l||Gt(v,l)<0)&&(l=v),Gt(b,l)<0&&(l=b),(!c||Gt(v,c)<0)&&(c=v),Gt(b,c)<0&&(c=b)}),{start:l,end:c}}var a=e.display,s=e.doc,l=document.createDocumentFragment(),c=ut(e.display),u=c.left,f=Math.max(a.sizerWidth,dt(e)-a.sizer.offsetLeft)-c.right,d="ltr"==s.direction;var h=t.from(),p=t.to();if(h.line==p.line)o(h.line,h.ch,p.ch);else{var m=S(s,h.line),g=S(s,p.line),v=ne(m)==ne(g),b=o(h.line,h.ch,v?m.text.length+1:null).end,y=o(p.line,v?0:null,p.ch).start;v&&(b.top<y.top-2?(r(b.right,b.top,null,b.bottom),r(u,y.top,y.left,y.bottom)):r(b.right,b.top,y.left-b.right,b.bottom)),b.bottom<y.top&&r(u,b.bottom,null,y.top)}n.appendChild(l)}(e,l,a)}}return r}function $t(e,t,n){var r=Dt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=n.appendChild(i("div","","CodeMirror-cursor"));if(o.style.left=r.left+"px",o.style.top=r.top+"px",o.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var a=n.appendChild(i("div","","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=r.other.left+"px",a.style.top=r.other.top+"px",a.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Gt(e,t){return e.top-t.top||e.left-t.left}function Yt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Xt(e){e.state.focused||(e.display.input.focus(),Jt(e))}function Zt(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Qt(e))},100)}function Jt(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(pe(e,"focus",e,t),e.state.focused=!0,s(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),Vr&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Yt(e))}function Qt(e,t){e.state.delayingBlurEvent||(e.state.focused&&(pe(e,"blur",e,t),e.state.focused=!1,co(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function en(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=void 0;if(!r.hidden){if(Wr&&Kr<8){var a=r.node.offsetTop+r.node.offsetHeight;o=a-n,n=a}else{var s=r.node.getBoundingClientRect();o=s.bottom-s.top}var l=r.line.height-o;if(o<2&&(o=Nt(t)),(l>.005||l<-.005)&&(T(r.line,o),tn(r.line),r.rest))for(var c=0;c<r.rest.length;c++)tn(r.rest[c])}}}function tn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function nn(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-lt(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=D(t,i),a=D(t,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=D(t,se(S(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=D(t,se(S(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function rn(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=zt(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function on(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=I(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var o=r.measure.appendChild(i("div",[i("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=o.firstChild.offsetWidth,s=o.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",jn(e),!0}return!1}function an(e,t){var n=e.display,i=Nt(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=ht(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+ct(n),l=t.top<i,c=t.bottom>s-i;if(t.top<r)a.scrollTop=l?0:t.top;else if(t.bottom>r+o){var u=Math.min(t.top,(c?s:t.bottom)-o);u!=r&&(a.scrollTop=u)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,d=dt(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),h=t.right-t.left>d;return h&&(t.right=t.left+d),t.left<10?a.scrollLeft=0:t.left<f?a.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>d+f-3&&(a.scrollLeft=t.right+(h?0:10)-d),a}function sn(e,t){null!=t&&(un(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function ln(e){un(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function cn(e,t,n){null==t&&null==n||un(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function un(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;fn(e,Lt(e,t.from),Lt(e,t.to),t.margin)}}function fn(e,t,n,i){var r=an(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});cn(e,r.scrollLeft,r.scrollTop)}function dn(e,t){Math.abs(e.doc.scrollTop-t)<2||(zr||On(e,{top:t}),hn(e,t,!0),zr&&On(e),Dn(e,100))}function hn(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function pn(e,t,n,i){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,rn(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function mn(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+ct(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+ft(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function gn(e,t){t||(t=mn(e));var n=e.display.barWidth,i=e.display.barHeight;vn(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&en(e),vn(e,mn(e)),n=e.display.barWidth,i=e.display.barHeight}function vn(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function bn(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&co(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Xo[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),To(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?pn(e,t):dn(e,t)},e),e.display.scrollbars.addClass&&s(e.display.wrapper,e.display.scrollbars.addClass)}function yn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Zo},function(e){Ko?Ko.ops.push(e):e.ownsGroup=Ko={ops:[e],delayedCallbacks:[]}}(e.curOp)}function wn(e){!function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}(n)}finally{Ko=null,t(n)}}(e.curOp,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)!function(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=ft(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=ft(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&ce(t);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Jo(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}(t[n]);for(var r=0;r<t.length;r++)!function(e){e.updatedDisplay=e.mustUpdate&&In(e.cm,e.update)}(t[r]);for(var o=0;o<t.length;o++)!function(e){var t=e.cm,n=t.display;e.updatedDisplay&&en(t);e.barMeasure=mn(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=mt(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+ft(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-dt(t)));(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}(t[o]);for(var s=0;s<t.length;s++)!function(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&pn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==a();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n);(e.updatedDisplay||e.startHeight!=t.doc.height)&&gn(t,e.barMeasure);e.updatedDisplay&&qn(t,e.barMeasure);e.selectionChanged&&Yt(t);t.state.focused&&e.updateInput&&t.display.input.reset(e.typing);n&&Xt(e.cm)}(t[s]);for(var l=0;l<t.length;l++)!function(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&Pn(t,e.update);null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null);null!=e.scrollTop&&hn(t,e.scrollTop,e.forceScroll);null!=e.scrollLeft&&pn(t,e.scrollLeft,!0,!0);if(e.scrollToPos){var o=function(e,t,n,i){null==i&&(i=0);var r;e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?P(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?P(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,s=Dt(e,t),l=n&&n!=t?Dt(e,n):s,c=an(e,r={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-i,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+i}),u=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=c.scrollTop&&(dn(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(a=!0)),null!=c.scrollLeft&&(pn(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(a=!0)),!a)break}return r}(t,z(r,e.scrollToPos.from),z(r,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!me(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),o=null;if(t.top+r.top<0?o=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Jr){var a=i("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-lt(e.display))+"px;\n                         height: "+(t.bottom-t.top+ft(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(o),e.display.lineSpace.removeChild(a)}}}(t,o)}var a=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(a)for(var l=0;l<a.length;++l)a[l].lines.length||pe(a[l],"hide");if(s)for(var c=0;c<s.length;++c)s[c].lines.length&&pe(s[c],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop);e.changeObjs&&pe(t,"changes",t,e.changeObjs);e.update&&e.update.finish()}(t[l])}(e)})}function _n(e,t){if(e.curOp)return t();yn(e);try{return t()}finally{wn(e)}}function kn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);yn(e);try{return t.apply(e,arguments)}finally{wn(e)}}}function xn(e){return function(){if(this.curOp)return e.apply(this,arguments);yn(this);try{return e.apply(this,arguments)}finally{wn(this)}}}function Cn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);yn(t);try{return e.apply(this,arguments)}finally{wn(t)}}}function Sn(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Co&&ie(e.doc,t)<r.viewTo&&En(e);else if(n<=r.viewFrom)Co&&re(e.doc,n+i)>r.viewFrom?En(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)En(e);else if(t<=r.viewFrom){var o=Tn(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):En(e)}else if(n>=r.viewTo){var a=Tn(e,t,t,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):En(e)}else{var s=Tn(e,t,t,-1),l=Tn(e,n,n+i,1);s&&l?(r.view=r.view.slice(0,s.index).concat(Ye(e,s.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):En(e)}var c=r.externalMeasured;c&&(n<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(r.externalMeasured=null))}function Mn(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[Wt(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==d(a,n)&&a.push(n)}}}function En(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Tn(e,t,n,i){var r,o=Wt(e,t),a=e.display.view;if(!Co||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=t){if(i>0){if(o==a.length-1)return null;r=s+a[o].size-t,o++}else r=s-t;t+=r,n+=r}for(;ie(e.doc,n)!=n;){if(o==(i<0?0:a.length-1))return null;n+=i*a[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function An(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function Dn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,c(Ln,e))}function Ln(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=je(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(i.line>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength?De(t.mode,i.state):null,l=Pe(e,o,i,!0);s&&(i.state=s),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!f&&d<a.length;++d)f=a[d]!=o.styles[d];f&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&qe(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Dn(e,e.options.workDelay),!0}),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&_n(e,function(){for(var t=0;t<r.length;t++)Mn(e,r[t],"text")})}}function In(e,n){var i=e.display,r=e.doc;if(n.editorIsHidden)return En(e),!1;if(!n.force&&n.visible.from>=i.viewFrom&&n.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==An(e))return!1;on(e)&&(En(e),n.dims=Rt(e));var s=r.first+r.size,l=Math.max(n.visible.from-e.options.viewportMargin,r.first),c=Math.min(s,n.visible.to+e.options.viewportMargin);i.viewFrom<l&&l-i.viewFrom<20&&(l=Math.max(r.first,i.viewFrom)),i.viewTo>c&&i.viewTo-c<20&&(c=Math.min(s,i.viewTo)),Co&&(l=ie(e.doc,l),c=re(e.doc,c));var u=l!=i.viewFrom||c!=i.viewTo||i.lastWrapHeight!=n.wrapperHeight||i.lastWrapWidth!=n.wrapperWidth;!function(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Ye(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Ye(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Wt(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Ye(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Wt(e,n)))),i.viewTo=n}(e,l,c),i.viewOffset=se(S(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var f=An(e);if(!u&&0==f&&!n.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var h=function(e){if(e.hasFocus())return null;var t=a();if(!t||!o(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&o(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return f>4&&(i.lineDiv.style.display="none"),function(e,n,i){function r(t){var n=t.nextSibling;return Vr&&no&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}var o=e.display,a=e.options.lineNumbers,s=o.lineDiv,l=s.firstChild;for(var c=o.view,u=o.viewFrom,f=0;f<c.length;f++){var h=c[f];if(h.hidden);else if(h.node&&h.node.parentNode==s){for(;l!=h.node;)l=r(l);var p=a&&null!=n&&n<=u&&h.lineNumber;h.changes&&(d(h.changes,"gutter")>-1&&(p=!1),Je(e,h,u,i)),p&&(t(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(I(e.options,u)))),l=h.node.nextSibling}else{var m=it(e,h,u,i);s.insertBefore(m,l)}u+=h.size}for(;l;)l=r(l)}(e,i.updateLineNumbers,n.dims),f>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(e){if(e&&e.activeElt&&e.activeElt!=a()&&(e.activeElt.focus(),e.anchorNode&&o(document.body,e.anchorNode)&&o(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(h),t(i.cursorDiv),t(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,u&&(i.lastWrapHeight=n.wrapperHeight,i.lastWrapWidth=n.wrapperWidth,Dn(e,400)),i.updateLineNumbers=null,!0}function Pn(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=dt(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+ct(e.display)-ht(e),n.top)}),t.visible=nn(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&In(e,t);i=!1){en(e);var r=mn(e);Kt(e),gn(e,r),qn(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function On(e,t){var n=new Jo(e,t);if(In(e,n)){en(e),Pn(e,n);var i=mn(e);Kt(e),gn(e,i),qn(e,i),n.finish()}}function jn(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function qn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+ft(e)+"px"}function Nn(e){var n=e.display.gutters,r=e.options.gutters;t(n);for(var o=0;o<r.length;++o){var a=r[o],s=n.appendChild(i("div",null,"CodeMirror-gutter "+a));"CodeMirror-linenumbers"==a&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}n.style.display=o?"":"none",jn(e)}function Bn(e){var t=d(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function Rn(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function zn(e){var t=Rn(e);return t.x*=ea,t.y*=ea,t}function Fn(e,t){var n=Rn(t),i=n.x,r=n.y,o=e.display,a=o.scroller,s=a.scrollWidth>a.clientWidth,l=a.scrollHeight>a.clientHeight;if(i&&s||r&&l){if(r&&no&&Vr)e:for(var c=t.target,u=o.view;c!=a;c=c.parentNode)for(var f=0;f<u.length;f++)if(u[f].node==c){e.display.currentWheelTarget=c;break e}if(i&&!zr&&!Yr&&null!=ea)return r&&l&&dn(e,Math.max(0,a.scrollTop+r*ea)),pn(e,Math.max(0,a.scrollLeft+i*ea)),(!r||r&&l)&&ye(t),void(o.wheelStartX=null);if(r&&null!=ea){var d=r*ea,h=e.doc.scrollTop,p=h+o.wrapper.clientHeight;d<0?h=Math.max(0,h+d-50):p=Math.min(e.doc.height,p+d+50),On(e,{top:h,bottom:p})}Qo<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=i,o.wheelDY=r,setTimeout(function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(ea=(ea*Qo+n)/(Qo+1),++Qo)}},200)):(o.wheelDX+=i,o.wheelDY+=r))}}function Un(e,t){var n=e[t];e.sort(function(e,t){return O(e.from(),t.from())}),t=d(e,n);for(var i=1;i<e.length;i++){var r=e[i],o=e[i-1];if(O(o.to(),r.from())>=0){var a=B(o.from(),r.from()),s=N(o.to(),r.to()),l=o.empty()?r.from()==r.head:o.from()==o.head;i<=t&&--t,e.splice(--i,2,new na(l?s:a,l?a:s))}}return new ta(e,t)}function Hn(e,t){return new ta([new na(e,t||e)],0)}function Wn(e){return e.text?P(e.from.line+e.text.length-1,m(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Kn(e,t){if(O(e,t.from)<0)return e;if(O(e,t.to)<=0)return Wn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Wn(t).ch-t.to.ch),P(n,i)}function Vn(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new na(Kn(r.anchor,t),Kn(r.head,t)))}return Un(n,e.sel.primIndex)}function $n(e,t,n){return e.line==t.line?P(n.line,e.ch-t.ch+n.ch):P(n.line+(e.line-t.line),e.ch)}function Gn(e){e.doc.mode=Te(e.options,e.doc.modeOption),Yn(e)}function Yn(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Dn(e,100),e.state.modeGen++,e.curOp&&Sn(e)}function Xn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==m(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Zn(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){!function(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),$(e),G(e,n);var r=i?i(e):1;r!=e.height&&T(e,r)}(e,n,r,i),Xe(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new Fo(c[o],r(o),i));return n}var s=t.from,l=t.to,c=t.text,u=S(e,s.line),f=S(e,l.line),d=m(c),h=r(c.length-1),p=l.line-s.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Xn(e,t)){var g=a(0,c.length-1);o(f,f.text,h),p&&e.remove(s.line,p),g.length&&e.insert(s.line,g)}else if(u==f)if(1==c.length)o(u,u.text.slice(0,s.ch)+d+u.text.slice(l.ch),h);else{var v=a(1,c.length-1);v.push(new Fo(d+u.text.slice(l.ch),h,i)),o(u,u.text.slice(0,s.ch)+c[0],r(0)),e.insert(s.line+1,v)}else if(1==c.length)o(u,u.text.slice(0,s.ch)+c[0]+f.text.slice(l.ch),r(0)),e.remove(s.line+1,p);else{o(u,u.text.slice(0,s.ch)+c[0],r(0)),o(f,d+f.text.slice(l.ch),h);var b=a(1,c.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,b)}Xe(e,"change",e,t)}function Jn(e,t,n){function i(e,r,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=r){var l=o&&s.sharedHist;n&&!l||(t(s.doc,l),i(s.doc,e,l))}}}i(e,null,!0)}function Qn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Ut(e),Gn(e),ei(e),e.options.lineWrapping||ce(e),e.options.mode=t.modeOption,Sn(e)}function ei(e){("rtl"==e.doc.direction?s:co)(e.display.lineDiv,"CodeMirror-rtl")}function ti(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ni(e,t){var n={from:q(t.from),to:Wn(t),text:M(e,t.from,t.to)};return si(e,n,t.from.line,t.to.line+1),Jn(e,function(e){return si(e,n,t.from.line,t.to.line+1)},!0),n}function ii(e){for(;e.length;){if(!m(e).ranges)break;e.pop()}}function ri(e,t,n,i){var r=e.history;r.undone.length=0;var o,a,s=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(ii(e.done),m(e.done)):e.done.length&&!m(e.done).ranges?m(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),m(e.done)):void 0}(r,r.lastOp==i)))a=m(o.changes),0==O(t.from,t.to)&&0==O(t.from,a.to)?a.to=Wn(t):o.changes.push(ni(e,t));else{var l=m(r.done);for(l&&l.ranges||ai(e.sel,r.done),o={changes:[ni(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,a||pe(e,"historyAdded")}function oi(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,m(r.done),t))?r.done[r.done.length-1]=t:ai(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&ii(r.undone)}function ai(e,t){var n=m(t);n&&n.ranges&&n.equals(e)||t.push(e)}function si(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function li(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function ci(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(li(n[r]));return i}(e,t),i=K(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else a&&(n[r]=a)}return n}function ui(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?ta.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var c=a[l],u=void 0;if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var f in c)(u=f.match(/^spans_(\d+)$/))&&d(t,Number(u[1]))>-1&&(m(s)[f]=c[f],delete c[f])}}}return i}function fi(e,t,n,i){if(i){var r=e.anchor;if(n){var o=O(t,r)<0;o!=O(n,r)<0?(r=t,t=n):o!=O(t,n)<0&&(t=n)}return new na(r,t)}return new na(n||t,t)}function di(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),vi(e,new ta([fi(e.sel.primary(),t,n,r)],0),i)}function hi(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=fi(e.sel.ranges[o],t[o],null,r);vi(e,Un(i,e.sel.primIndex),n)}function pi(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,vi(e,Un(r,e.sel.primIndex),i)}function mi(e,t,n,i){vi(e,Hn(t,n),i)}function gi(e,t,n){var i=e.history.done,r=m(i);r&&r.ranges?(i[i.length-1]=t,bi(e,t,n)):vi(e,t,n)}function vi(e,t,n){bi(e,t,n),oi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function bi(e,t,n){(ve(e,"beforeSelectionChange")||e.cm&&ve(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new na(z(e,t[n].anchor),z(e,t[n].head))},origin:n&&n.origin};return pe(e,"beforeSelectionChange",e,i),e.cm&&pe(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?Un(i.ranges,i.ranges.length-1):t}(e,t,n));yi(e,_i(e,t,n&&n.bias||(O(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||ln(e.cm)}function yi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ge(e.cm)),Xe(e,"cursorActivity",e))}function wi(e){yi(e,_i(e,e.sel,null,!1))}function _i(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=xi(e,a.anchor,s&&s.anchor,n,i),c=xi(e,a.head,s&&s.head,n,i);(r||l!=a.anchor||c!=a.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new na(l,c))}return r?Un(r,t.primIndex):t}function ki(e,t,n,i,r){var o=S(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(r&&(pe(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var c=l.find(i<0?1:-1),u=void 0;if((i<0?l.inclusiveRight:l.inclusiveLeft)&&(c=Ci(e,c,-i,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=O(c,n))&&(i<0?u<0:u>0))return ki(e,c,t,i,r)}var f=l.find(i<0?-1:1);return(i<0?l.inclusiveLeft:l.inclusiveRight)&&(f=Ci(e,f,i,f.line==t.line?o:null)),f?ki(e,f,t,i,r):null}}return t}function xi(e,t,n,i,r){var o=i||1,a=ki(e,t,n,o,r)||!r&&ki(e,t,n,o,!0)||ki(e,t,n,-o,r)||!r&&ki(e,t,n,-o,!0);return a||(e.cantEdit=!0,P(e.first,0))}function Ci(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?z(e,P(t.line-1)):null:n>0&&t.ch==(i||S(e,t.line)).text.length?t.line<e.first+e.size-1?P(t.line+1,0):null:new P(t.line,t.ch+n)}function Si(e){e.setSelection(P(e.firstLine(),0),P(e.lastLine()),vo)}function Mi(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=z(e,t)),n&&(i.to=z(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),pe(e,"beforeChange",e,i),e.cm&&pe(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Ei(e,t,n){if(e.cm){if(!e.cm.curOp)return kn(e.cm,Ei)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"))||(t=Mi(e,t,!0))){var i=xo&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=d(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var a=i[o],s=a.find(0),l=0;l<r.length;++l){var c=r[l];if(!(O(c.to,s.from)<0||O(c.from,s.to)>0)){var u=[l,1],f=O(c.from,s.from),h=O(c.to,s.to);(f<0||!a.inclusiveLeft&&!f)&&u.push({from:c.from,to:s.from}),(h>0||!a.inclusiveRight&&!h)&&u.push({from:s.to,to:c.to}),r.splice.apply(r,u),l+=u.length-3}}return r}(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)Ti(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else Ti(e,t)}}function Ti(e,t){if(1!=t.text.length||""!=t.text[0]||0!=O(t.from,t.to)){var n=Vn(e,t);ri(e,t,n,e.cm?e.cm.curOp.id:NaN),Li(e,t,n,K(e,t));var i=[];Jn(e,function(e,n){n||-1!=d(i,e.history)||(ji(e.history,t),i.push(e.history)),Li(e,t,null,K(e,t))})}}function Ai(e,t,n){if(!e.cm||!e.cm.state.suppressEdits||n){for(var i,r=e.history,o=e.sel,a="undo"==t?r.done:r.undone,s="undo"==t?r.undone:r.done,l=0;l<a.length&&(i=a[l],n?!i.ranges||i.equals(e.sel):i.ranges);l++);if(l!=a.length){for(r.lastOrigin=r.lastSelOrigin=null;(i=a.pop()).ranges;){if(ai(i,s),n&&!i.equals(e.sel))return void vi(e,i,{clearRedo:!1});o=i}var c=[];ai(o,s),s.push({changes:c,generation:r.generation}),r.generation=i.generation||++r.maxGeneration;for(var u=ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"),f=function(n){var r=i.changes[n];if(r.origin=t,u&&!Mi(e,r,!1))return a.length=0,{};c.push(ni(e,r));var o=n?Vn(e,r):m(a);Li(e,r,o,ci(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Wn(r)});var s=[];Jn(e,function(e,t){t||-1!=d(s,e.history)||(ji(e.history,r),s.push(e.history)),Li(e,r,null,ci(e,r))})},h=i.changes.length-1;h>=0;--h){var p=f(h);if(p)return p.v}}}}function Di(e,t){if(0!=t&&(e.first+=t,e.sel=new ta(g(e.sel.ranges,function(e){return new na(P(e.anchor.line+t,e.anchor.ch),P(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Sn(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Mn(e.cm,i,"gutter")}}function Li(e,t,n,i){if(e.cm&&!e.cm.curOp)return kn(e.cm,Li)(e,t,n,i);if(t.to.line<e.first)Di(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);Di(e,r),t={from:P(e.first,0),to:P(t.to.line+r,t.to.ch),text:[m(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:P(o,S(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=M(e,t.from,t.to),n||(n=Vn(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,o=t.from,a=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=A(ne(S(i,o.line))),i.iter(l,a.line+1,function(e){if(e==r.maxLine)return s=!0,!0}));i.sel.contains(t.from,t.to)>-1&&ge(e);Zn(i,t,n,Ft(e)),e.options.lineWrapping||(i.iter(l,o.line+t.text.length,function(e){var t=le(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=S(e,i).stateAfter;if(r&&(!(r instanceof Bo)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}})(i,o.line),Dn(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?Sn(e):o.line!=a.line||1!=t.text.length||Xn(e.doc,t)?Sn(e,o.line,a.line+1,c):Mn(e,o.line,"text");var u=ve(e,"changes"),f=ve(e,"change");if(f||u){var d={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};f&&Xe(e,"change",e,d),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,i):Zn(e,t,i),bi(e,n,vo)}}function Ii(e,t,n,i,r){if(i||(i=n),O(i,n)<0){var o;n=(o=[i,n])[0],i=o[1]}"string"==typeof t&&(t=e.splitLines(t)),Ei(e,{from:n,to:i,text:t,origin:r})}function Pi(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Oi(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],a=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)Pi(o.ranges[s].anchor,t,n,i),Pi(o.ranges[s].head,t,n,i)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=P(c.from.line+i,c.from.ch),c.to=P(c.to.line+i,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,r+1),r=0)}}}function ji(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;Oi(e.done,n,i,r),Oi(e.undone,n,i,r)}function qi(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=S(e,R(e,t)):r=A(t),null==r?null:(i(o,r)&&e.cm&&Mn(e.cm,r,n),o)}function Ni(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Bi(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}function Ri(e,t,n){se(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&sn(e,n)}function zi(e,t,n,i,o){if(i&&i.shared)return function(e,t,n,i,r){(i=u(i)).shared=!1;var o=[zi(e,t,n,i,r)],a=o[0],s=i.widgetNode;return Jn(e,function(e){s&&(i.widgetNode=s.cloneNode(!0)),o.push(zi(e,z(e,t),z(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=m(o)}),new aa(o,a)}(e,t,n,i,o);if(e.cm&&!e.cm.curOp)return kn(e.cm,zi)(e,t,n,i,o);var a=new oa(e,o),s=O(t,n);if(i&&u(i,a,!1),s>0||0==s&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=r("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(te(e,t.line,t,n,a)||t.line!=n.line&&te(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Co=!0}a.addToHistory&&ri(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var l,c=t.line,f=e.cm;if(e.iter(c,n.line+1,function(e){f&&a.collapsed&&!f.options.lineWrapping&&ne(e)==f.display.maxLine&&(l=!0),a.collapsed&&c!=t.line&&T(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new U(a,c==t.line?t.ch:null,c==n.line?n.ch:null)),++c}),a.collapsed&&e.iter(t.line,n.line+1,function(t){oe(e,t)&&T(t,0)}),a.clearOnEnter&&To(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(xo=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++ra,a.atomic=!0),f){if(l&&(f.curOp.updateMaxLine=!0),a.collapsed)Sn(f,t.line,n.line+1);else if(a.className||a.title||a.startStyle||a.endStyle||a.css)for(var d=t.line;d<=n.line;d++)Mn(f,d,"text");a.atomic&&wi(f.doc),Xe(f,"markerAdded",f,a)}return a}function Fi(e){return e.findMarks(P(e.first,0),e.clipPos(P(e.lastLine())),function(e){return e.parent})}function Ui(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];Jn(n.primary.doc,function(e){return i.push(e)});for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==d(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}function Hi(e){var t=this;if(Wi(t),!me(t,e)&&!st(t.display,e)){ye(e),Wr&&(ca=+new Date);var n=Ht(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,s=function(e,i){if(!t.options.allowDropFileTypes||-1!=d(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=kn(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[i]=e,++a==r){var l={from:n=z(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Ei(t.doc,l),gi(t.doc,Hn(n,Wn(l)))}}),s.readAsText(e)}},l=0;l<r;++l)s(i[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var c=e.dataTransfer.getData("Text");if(c){var u;if(t.state.draggingText&&!t.state.draggingText.copy&&(u=t.listSelections()),bi(t.doc,Hn(n,n)),u)for(var f=0;f<u.length;++f)Ii(t.doc,"",u[f].anchor,u[f].head,"drag");t.replaceSelection(c,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Wi(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ki(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&e(i)}}function Vi(){ua||(!function(){var e;To(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ki($i)},100))}),To(window,"blur",function(){return Ki(Qt)})}(),ua=!0)}function $i(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Gi(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,i,r,o,a=0;a<t.length-1;a++){var s=t[a];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))i=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return n&&(e="Alt-"+e),i&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Yi(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=g(n.split(" "),Gi),o=0;o<r.length;o++){var a=void 0,s=void 0;o==r.length-1?(s=r.join(" "),a=i):(s=r.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Xi(e,t,n,i){var r=(t=er(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Xi(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var a=Xi(e,t.fallthrough[o],n,i);if(a)return a}}}function Zi(e){var t="string"==typeof e?e:fa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ji(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(so?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(so?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Qi(e,t){if(Yr&&34==e.keyCode&&e.char)return!1;var n=fa[e.keyCode];return null!=n&&!e.altGraphKey&&Ji(n,e,t)}function er(e){return"string"==typeof e?ma[e]:e}function tr(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&O(o.from,m(i).to)<=0;){var a=i.pop();if(O(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}_n(e,function(){for(var t=i.length-1;t>=0;t--)Ii(e.doc,"",i[t].from,i[t].to,"+delete");ln(e)})}function nr(e,t,n){var i=x(e.text,t+n,n);return i<0||i>e.text.length?null:i}function ir(e,t,n){var i=nr(e,t.ch,n);return null==i?null:new P(t.line,i,n<0?"after":"before")}function rr(e,t,n,i,r){if(e){var o=fe(n,t.doc.direction);if(o){var a,s=r<0?m(o):o[0],l=r<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var c=vt(t,n);a=r<0?n.text.length-1:0;var u=bt(t,c,a).top;a=C(function(e){return bt(t,c,e).top==u},r<0==(1==s.level)?s.from:s.to-1,a),"before"==l&&(a=nr(n,a,1))}else a=r<0?s.to:s.from;return new P(i,a,l)}}return new P(i,r<0?n.text.length:0,r<0?"before":"after")}function or(e,t){var n=S(e.doc,t),i=ne(n);return i!=n&&(t=A(i)),rr(!0,e,i,t,1)}function ar(e,t){var n=S(e.doc,t),i=function(e){for(var t;t=ee(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=A(i)),rr(!0,e,n,t,-1)}function sr(e,t){var n=or(e,t.line),i=S(e.doc,n.line),r=fe(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return P(n.line,a?0:o,n.sticky)}return n}function lr(e,t,n){if("string"==typeof t&&!(t=ga[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=go}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function cr(e,t,n,i){var r=e.state.keySeq;if(r){if(Zi(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:va.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),ur(e,r+" "+t,n,i))return!0}return ur(e,t,n,i)}function ur(e,t,n,i){var r=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=Xi(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&Xi(t,e.options.extraKeys,n,e)||Xi(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&Xe(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(ye(n),Yt(e)),!!r}function fr(e,t){var n=Qi(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?cr(e,"Shift-"+n,t,function(t){return lr(e,t,!0)})||cr(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return lr(e,t)}):cr(e,n,t,function(t){return lr(e,t)}))}function dr(e){if(this.curOp.focus=a(),!me(this,e)){Wr&&Kr<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var n=fr(this,e);Yr&&(ba=n?t:null,!n&&88==t&&!Io&&(no?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){function t(e){18!=e.keyCode&&e.altKey||(co(n,"CodeMirror-crosshair"),he(document,"keyup",t),he(document,"mouseover",t))}var n=e.display.lineDiv;s(n,"CodeMirror-crosshair");To(document,"keyup",t),To(document,"mouseover",t)}(this)}}function hr(e){16==e.keyCode&&(this.doc.sel.shift=!1),me(this,e)}function pr(e){if(!(st(this.display,e)||me(this,e)||e.ctrlKey&&!e.altKey||no&&e.metaKey)){var t=e.keyCode,n=e.charCode;if(Yr&&t==ba)return ba=null,void ye(e);if(!Yr||e.which&&!(e.which<10)||!fr(this,e)){var i=String.fromCharCode(null==n?t:n);"\b"!=i&&(function(e,t,n){return cr(e,"'"+n+"'",t,function(t){return lr(e,t,!0)})}(this,e,i)||this.display.input.onKeyPress(e))}}}function mr(e){var t=this.display;if(!(me(this,e)||t.activeTouch&&t.input.supportsTouch()))if(t.input.ensurePolled(),t.shift=e.shiftKey,st(t,e))Vr||(t.scroller.draggable=!1,setTimeout(function(){return t.scroller.draggable=!0},100));else if(!br(this,e)){var n=Ht(this,e),i=Ce(e),r=n?function(e,t){var n=+new Date;return _a&&_a.compare(n,e,t)?(wa=_a=null,"triple"):wa&&wa.compare(n,e,t)?(_a=new ya(n,e,t),wa=null,"double"):(wa=new ya(n,e,t),_a=null,"single")}(n,i):"single";window.focus(),1==i&&this.state.selectingText&&this.state.selectingText(e),n&&function(e,t,n,i,r){var o="Click";"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o);return o=(1==t?"Left":2==t?"Middle":"Right")+o,cr(e,Ji(o,r),r,function(t){if("string"==typeof t&&(t=ga[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=go}finally{e.state.suppressEdits=!1}return i})}(this,i,n,r,e)||(1==i?n?function(e,t,n,i){Wr?setTimeout(c(Xt,e),0):e.curOp.focus=a();var r,o=function(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=io?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey);null==r.addNew&&(r.addNew=no?n.metaKey:n.ctrlKey);null==r.moveOnDrag&&(r.moveOnDrag=!(no?n.altKey:n.ctrlKey));return r}(e,n,i),s=e.doc.sel;e.options.dragDrop&&Ao&&!e.isReadOnly()&&"single"==n&&(r=s.contains(t))>-1&&(O((r=s.ranges[r]).from(),t)<0||t.xRel>0)&&(O(r.to(),t)>0||t.xRel<0)?function(e,t,n,i){var r=e.display,o=!1,a=kn(e,function(t){Vr&&(r.scroller.draggable=!1),e.state.draggingText=!1,he(document,"mouseup",a),he(document,"mousemove",s),he(r.scroller,"dragstart",l),he(r.scroller,"drop",a),o||(ye(t),i.addNew||di(e.doc,n,null,null,i.extend),Vr||Wr&&9==Kr?setTimeout(function(){document.body.focus(),r.input.focus()},20):r.input.focus())}),s=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},l=function(){return o=!0};Vr&&(r.scroller.draggable=!0);e.state.draggingText=a,a.copy=!i.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop();To(document,"mouseup",a),To(document,"mousemove",s),To(r.scroller,"dragstart",l),To(r.scroller,"drop",a),Zt(e),setTimeout(function(){return r.input.focus()},20)}(e,i,t,o):function(e,t,n,i){function r(t){if(0!=O(v,t))if(v=t,"rectangle"==i.unit){for(var r=[],o=e.options.tabSize,a=f(S(c,n.line).text,n.ch,o),s=f(S(c,t.line).text,t.ch,o),l=Math.min(a,s),m=Math.max(a,s),g=Math.min(n.line,t.line),b=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=b;g++){var y=S(c,g).text,w=h(y,l,o);l==m?r.push(new na(P(g,w),P(g,w))):y.length>w&&r.push(new na(P(g,w),P(g,h(y,m,o))))}r.length||r.push(new na(n,n)),vi(c,Un(p.ranges.slice(0,d).concat(r),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var _,k=u,x=gr(e,t,i.unit),C=k.anchor;O(x.anchor,C)>0?(_=x.head,C=B(k.from(),x.anchor)):(_=x.anchor,C=N(k.to(),x.head));var M=p.ranges.slice(0);M[d]=function(e,t){var n=t.anchor,i=t.head,r=S(e.doc,n.line);if(0==O(n,i)&&n.sticky==i.sticky)return t;var o=fe(r);if(!o)return t;var a=ue(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var l=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==l||l==o.length)return t;var c;if(i.line!=n.line)c=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=ue(o,i.ch,i.sticky),f=u-a||(i.ch-n.ch)*(1==s.level?-1:1);c=u==l-1||u==l?f<0:f>0}var d=o[l+(c?-1:0)],h=c==(1==d.level),p=h?d.from:d.to,m=h?"after":"before";return n.ch==p&&n.sticky==m?t:new na(new P(n.line,p,m),i)}(e,new na(z(c,C),_)),vi(c,Un(M,d),bo)}}function o(t){var n=++y,s=Ht(e,t,!0,"rectangle"==i.unit);if(s)if(0!=O(s,v)){e.curOp.focus=a(),r(s);var u=nn(l,c);(s.line>=u.to||s.line<u.from)&&setTimeout(kn(e,function(){y==n&&o(t)}),150)}else{var f=t.clientY<b.top?-20:t.clientY>b.bottom?20:0;f&&setTimeout(kn(e,function(){y==n&&(l.scroller.scrollTop+=f,o(t))}),50)}}function s(t){e.state.selectingText=!1,y=1/0,ye(t),l.input.focus(),he(document,"mousemove",w),he(document,"mouseup",_),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;ye(t);var u,d,p=c.sel,m=p.ranges;i.addNew&&!i.extend?(d=c.sel.contains(n),u=d>-1?m[d]:new na(n,n)):(u=c.sel.primary(),d=c.sel.primIndex);if("rectangle"==i.unit)i.addNew||(u=new na(n,n)),n=Ht(e,t,!0,!0),d=-1;else{var g=gr(e,n,i.unit);u=i.extend?fi(u,g.anchor,g.head,i.extend):g}i.addNew?-1==d?(d=m.length,vi(c,Un(m.concat([u]),d),{scroll:!1,origin:"*mouse"})):m.length>1&&m[d].empty()&&"char"==i.unit&&!i.extend?(vi(c,Un(m.slice(0,d).concat(m.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),p=c.sel):pi(c,d,u,bo):(d=0,vi(c,new ta([u],0),bo),p=c.sel);var v=n;var b=l.wrapper.getBoundingClientRect(),y=0;var w=kn(e,function(e){Ce(e)?o(e):s(e)}),_=kn(e,s);e.state.selectingText=_,To(document,"mousemove",w),To(document,"mouseup",_)}(e,i,t,o)}(this,n,r,e):xe(e)==t.scroller&&ye(e):2==i?(n&&di(this.doc,n),setTimeout(function(){return t.input.focus()},20)):3==i&&(lo?yr(this,e):Zt(this)))}}function gr(e,t,n){if("char"==n)return new na(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new na(P(t.line,0),z(e.doc,P(t.line+1,0)));var i=n(e,t);return new na(i.from,i.to)}function vr(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&ye(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!ve(e,n))return _e(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=a.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r){return pe(e,n,e,D(e.doc,o),e.options.gutters[l],t),_e(t)}}}function br(e,t){return vr(e,t,"gutterClick",!0)}function yr(e,t){st(e.display,t)||function(e,t){if(!ve(e,"gutterContextMenu"))return!1;return vr(e,t,"gutterContextMenu",!1)}(e,t)||me(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function wr(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),xt(e)}function _r(e){Nn(e),Sn(e),rn(e)}function kr(e,t,n){if(!t!=!(n&&n!=ka)){var i=e.display.dragFunctions,r=t?To:he;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function xr(e){e.options.lineWrapping?(s(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(co(e.display.wrapper,"CodeMirror-wrap"),ce(e)),Ut(e),Sn(e),xt(e),setTimeout(function(){return gn(e)},100)}function Cr(e,t){var o=this;if(!(this instanceof Cr))return new Cr(e,t);this.options=t=t?u(t):{},u(xa,t,!1),Bn(t);var a=t.value;"string"==typeof a&&(a=new la(a,t.mode,null,t.lineSeparator,t.direction)),this.doc=a;var s=new Cr.inputStyles[t.inputStyle](this),l=this.display=new function(e,t,n){this.input=n,this.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=i("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=r("div",null,"CodeMirror-code"),this.selectionDiv=i("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=i("div",null,"CodeMirror-cursors"),this.measure=i("div",null,"CodeMirror-measure"),this.lineMeasure=i("div",null,"CodeMirror-measure"),this.lineSpace=r("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var o=r("div",[this.lineSpace],"CodeMirror-lines");this.mover=i("div",[o],null,"position: relative"),this.sizer=i("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=i("div",null,null,"position: absolute; height: "+mo+"px; width: 1px;"),this.gutters=i("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=i("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=i("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),Wr&&Kr<8&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),Vr||zr&&to||(this.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(this.wrapper):e(this.wrapper)),this.viewFrom=this.viewTo=t.first,this.reportedViewFrom=this.reportedViewTo=t.first,this.view=[],this.renderedView=null,this.externalMeasured=null,this.viewOffset=0,this.lastWrapHeight=this.lastWrapWidth=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLine=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.selForContextMenu=null,this.activeTouch=null,n.init(this)}(e,a,s);l.wrapper.CodeMirror=this,Nn(this),wr(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),bn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new fo,keySeq:null,specialChars:null},t.autofocus&&!to&&l.input.focus(),Wr&&Kr<11&&setTimeout(function(){return o.display.input.reset(!0)},20),function(e){function t(){o.activeTouch&&(a=setTimeout(function(){return o.activeTouch=null},1e3),(s=o.activeTouch).end=+new Date)}function r(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}var o=e.display;To(o.scroller,"mousedown",kn(e,mr)),Wr&&Kr<11?To(o.scroller,"dblclick",kn(e,function(t){if(!me(e,t)){var n=Ht(e,t);if(n&&!br(e,t)&&!st(e.display,t)){ye(t);var i=e.findWordAt(n);di(e.doc,i.anchor,i.head)}}})):To(o.scroller,"dblclick",function(t){return me(e,t)||ye(t)});lo||To(o.scroller,"contextmenu",function(t){return yr(e,t)});var a,s={end:0};To(o.scroller,"touchstart",function(t){if(!me(e,t)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(t)&&!br(e,t)){o.input.ensurePolled(),clearTimeout(a);var n=+new Date;o.activeTouch={start:n,moved:!1,prev:n-s.end<=300?s:null},1==t.touches.length&&(o.activeTouch.left=t.touches[0].pageX,o.activeTouch.top=t.touches[0].pageY)}}),To(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),To(o.scroller,"touchend",function(n){var i=o.activeTouch;if(i&&!st(o,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var a,s=e.coordsChar(o.activeTouch,"page");a=!i.prev||r(i,i.prev)?new na(s,s):!i.prev.prev||r(i,i.prev.prev)?e.findWordAt(s):new na(P(s.line,0),z(e.doc,P(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),ye(n)}t()}),To(o.scroller,"touchcancel",t),To(o.scroller,"scroll",function(){o.scroller.clientHeight&&(dn(e,o.scroller.scrollTop),pn(e,o.scroller.scrollLeft,!0),pe(e,"scroll",e))}),To(o.scroller,"mousewheel",function(t){return Fn(e,t)}),To(o.scroller,"DOMMouseScroll",function(t){return Fn(e,t)}),To(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(t){me(e,t)||ke(t)},over:function(t){me(e,t)||(!function(e,t){var r=Ht(e,t);if(r){var o=document.createDocumentFragment();$t(e,r,o),e.display.dragCursor||(e.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),n(e.display.dragCursor,o)}}(e,t),ke(t))},start:function(t){return function(e,t){if(Wr&&(!e.state.draggingText||+new Date-ca<100))ke(t);else if(!me(e,t)&&!st(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Xr)){var n=i("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Yr&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Yr&&n.parentNode.removeChild(n)}}(e,t)},drop:kn(e,Hi),leave:function(t){me(e,t)||Wi(e)}};var l=o.input.getField();To(l,"keyup",function(t){return hr.call(e,t)}),To(l,"keydown",kn(e,dr)),To(l,"keypress",kn(e,pr)),To(l,"focus",function(t){return Jt(e,t)}),To(l,"blur",function(t){return Qt(e,t)})}(this),Vi(),yn(this),this.curOp.forceUpdate=!0,Qn(this,a),t.autofocus&&!to||this.hasFocus()?setTimeout(c(Jt,this),20):Qt(this);for(var f in Ca)Ca.hasOwnProperty(f)&&Ca[f](o,t[f],ka);on(this),t.finishInit&&t.finishInit(this);for(var d=0;d<Sa.length;++d)Sa[d](o);wn(this),Vr&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(l.lineDiv).textRendering&&(l.lineDiv.style.textRendering="auto")}function Sr(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=je(e,t).state:n="prev");var a=e.options.tabSize,s=S(o,t),l=f(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&((c=o.mode.indent(r,s.text.slice(u.length),s.text))==go||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?f(S(o,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var m=Math.floor(c/a);m;--m)h+=a,d+="\t";if(h<c&&(d+=p(c-h)),d!=u)return Ii(o,d,P(t,0),P(t,u.length),"+input"),s.stateAfter=null,!0;for(var g=0;g<o.sel.ranges.length;g++){var v=o.sel.ranges[g];if(v.head.line==t&&v.head.ch<u.length){var b=P(t,u.length);pi(o,g,new na(b,b));break}}}function Mr(e){Ma=e}function Er(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var a=e.state.pasteIncoming||"paste"==r,s=Do(t),l=null;if(a&&i.ranges.length>1)if(Ma&&Ma.text.join("\n")==t){if(i.ranges.length%Ma.text.length==0){l=[];for(var c=0;c<Ma.text.length;c++)l.push(o.splitLines(Ma.text[c]))}}else s.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(l=g(s,function(e){return[e]}));for(var u,f=i.ranges.length-1;f>=0;f--){var d=i.ranges[f],h=d.from(),p=d.to();d.empty()&&(n&&n>0?h=P(h.line,h.ch-n):e.state.overwrite&&!a?p=P(p.line,Math.min(S(o,p.line).text.length,p.ch+m(s).length)):Ma&&Ma.lineWise&&Ma.text.join("\n")==t&&(h=p=P(h.line,0))),u=e.curOp.updateInput;var v={from:h,to:p,text:l?l[f%l.length]:s,origin:r||(a?"paste":e.state.cutIncoming?"cut":"+input")};Ei(e.doc,v),Xe(e,"inputRead",e,v)}t&&!a&&Ar(e,t),ln(e),e.curOp.updateInput=u,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Tr(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||_n(t,function(){return Er(t,n,0,null,"paste")}),!0}function Ar(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Sr(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(S(e.doc,r.head.line).text.slice(0,r.head.ch))&&(a=Sr(e,r.head.line,"smart"));a&&Xe(e,"electricInput",e,r.head.line)}}}function Dr(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:P(r,0),head:P(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Lr(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Ir(){var e=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=i("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Vr?e.style.width="1000px":e.setAttribute("wrap","off"),Qr&&(e.style.border="1px solid black"),Lr(e),t}function Pr(e,t,n,i,r){function o(i){var o;if(null==(o=r?function(e,t,n,i){var r=fe(t,e.doc.direction);if(!r)return ir(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ue(r,n.ch,n.sticky),a=r[o];if("ltr"==e.doc.direction&&a.level%2==0&&(i>0?a.to>n.ch:a.from<n.ch))return ir(t,n,i);var s,l=function(e,n){return nr(t,e instanceof P?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(s=s||vt(e,t),jt(e,t,s,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var f=1==a.level==i<0,d=l(n,f?1:-1);if(null!=d&&(f?d<=a.to&&d<=u.end:d>=a.from&&d>=u.begin)){var h=f?"before":"after";return new P(n.line,d,h)}}var p=function(e,t,i){for(var o=function(e,t){return t?new P(n.line,l(e,1),"before"):new P(n.line,e,"after")};e>=0&&e<r.length;e+=t){var a=r[e],s=t>0==(1!=a.level),c=s?i.begin:l(i.end,-1);if(a.from<=c&&c<a.to)return o(c,s);if(c=s?a.from:l(a.to,-1),i.begin<=c&&c<i.end)return o(c,s)}},m=p(o+i,i,u);if(m)return m;var g=i>0?u.end:l(u.begin,-1);return null==g||i>0&&g==t.text.length||!(m=p(i>0?0:r.length-1,i,c(g)))?null:m}(e.cm,l,t,n):ir(l,t,n))){if(i||!function(){var i=t.line+n;return!(i<e.first||i>=e.first+e.size)&&(t=new P(i,t.ch,t.sticky),l=S(e,i))}())return!1;t=rr(r,e.cm,l,t.line,n)}else t=o;return!0}var a=t,s=n,l=S(e,t.line);if("char"==i)o();else if("column"==i)o(!0);else if("word"==i||"group"==i)for(var c=null,u="group"==i,f=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(n<0)||o(!d);d=!1){var h=l.text.charAt(t.ch)||"\n",p=w(h,f)?"w":u&&"\n"==h?"n":!u||/\s/.test(h)?null:"p";if(!u||d||p||(p="s"),c&&c!=p){n<0&&(n=1,o(),t.sticky="after");break}if(p&&(c=p),n>0&&!o(!d))break}var m=xi(e,t,a,s,!0);return j(a,m)&&(m.hitSide=!0),m}function Or(e,t,n,i){var r,o=e.doc,a=t.left;if("page"==i){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(s-.5*Nt(e.display),3);r=(n>0?t.bottom:t.top)+n*l}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(var c;(c=Pt(e,a,r)).outside;){if(n<0?r<=0:r>=o.height){c.hitSide=!0;break}r+=5*n}return c}function jr(e,t){var n=gt(e,t.line);if(!n||n.hidden)return null;var i=S(e.doc,t.line),r=pt(n,i,t.line),o=fe(i,e.doc.direction),a="left";if(o){a=ue(o,t.ch)%2?"right":"left"}var s=yt(r.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function qr(e,t){return t&&(e.bad=!0),e}function Nr(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return qr(e.clipPos(P(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var a=e.display.view[r];if(a.node==i)return function(e,t,n){function i(t,n,i){for(var r=-1;r<(f?f.length:0);r++)for(var o=r<0?u.map:f[r],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var l=A(r<0?e.line:e.rest[r]),c=o[a]+i;return(i<0||s!=t)&&(c=o[a+(i?1:0)]),P(l,c)}}}var r=e.text.firstChild,a=!1;if(!t||!o(r,t))return qr(P(A(e.line),0),!0);if(t==r&&(a=!0,t=r.childNodes[n],n=0,!t)){var s=e.rest?m(e.rest):e.line;return qr(P(A(s),s.text.length),a)}var l=3==t.nodeType?t:null,c=t;l||1!=t.childNodes.length||3!=t.firstChild.nodeType||(l=t.firstChild,n&&(n=l.nodeValue.length));for(;c.parentNode!=r;)c=c.parentNode;var u=e.measure,f=u.maps;var d=i(l,c,n);if(d)return qr(d,a);for(var h=c.nextSibling,p=l?l.nodeValue.length-n:0;h;h=h.nextSibling){if(d=i(h,h.firstChild,0))return qr(P(d.line,d.ch-p),a);p+=h.textContent.length}for(var g=c.previousSibling,v=n;g;g=g.previousSibling){if(d=i(g,g.firstChild,-1))return qr(P(d.line,d.ch+v),a);v+=g.textContent.length}}(a,t,n)}}var Br=navigator.userAgent,Rr=navigator.platform,zr=/gecko\/\d/i.test(Br),Fr=/MSIE \d/.test(Br),Ur=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Br),Hr=/Edge\/(\d+)/.exec(Br),Wr=Fr||Ur||Hr,Kr=Wr&&(Fr?document.documentMode||6:+(Hr||Ur)[1]),Vr=!Hr&&/WebKit\//.test(Br),$r=Vr&&/Qt\/\d+\.\d+/.test(Br),Gr=!Hr&&/Chrome\//.test(Br),Yr=/Opera\//.test(Br),Xr=/Apple Computer/.test(navigator.vendor),Zr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Br),Jr=/PhantomJS/.test(Br),Qr=!Hr&&/AppleWebKit/.test(Br)&&/Mobile\/\w+/.test(Br),eo=/Android/.test(Br),to=Qr||eo||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Br),no=Qr||/Mac/.test(Rr),io=/\bCrOS\b/.test(Br),ro=/win/i.test(Rr),oo=Yr&&Br.match(/Version\/(\d*\.\d*)/);oo&&(oo=Number(oo[1])),oo&&oo>=15&&(Yr=!1,Vr=!0);var ao,so=no&&($r||Yr&&(null==oo||oo<12.11)),lo=zr||Wr&&Kr>=9,co=function(t,n){var i=t.className,r=e(n).exec(i);if(r){var o=i.slice(r.index+r[0].length);t.className=i.slice(0,r.index)+(o?r[1]+o:"")}};ao=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var uo=function(e){e.select()};Qr?uo=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Wr&&(uo=function(e){try{e.select()}catch(e){}});var fo=function(){this.id=null};fo.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var ho,po,mo=30,go={toString:function(){return"CodeMirror.Pass"}},vo={scroll:!1},bo={origin:"*mouse"},yo={origin:"+move"},wo=[""],_o=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ko=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,xo=!1,Co=!1,So=null,Mo=function(){function e(e){return e<=247?n.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?i.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/;return function(n,i){var c="ltr"==i?"L":"R";if(0==n.length||"ltr"==i&&!r.test(n))return!1;for(var u=n.length,f=[],d=0;d<u;++d)f.push(e(n.charCodeAt(d)));for(var h=0,p=c;h<u;++h){var g=f[h];"m"==g?f[h]=p:p=g}for(var v=0,b=c;v<u;++v){var y=f[v];"1"==y&&"r"==b?f[v]="n":a.test(y)&&(b=y,"r"==y&&(f[v]="R"))}for(var w=1,_=f[0];w<u-1;++w){var k=f[w];"+"==k&&"1"==_&&"1"==f[w+1]?f[w]="1":","!=k||_!=f[w+1]||"1"!=_&&"n"!=_||(f[w]=_),_=k}for(var x=0;x<u;++x){var C=f[x];if(","==C)f[x]="N";else if("%"==C){var S=void 0;for(S=x+1;S<u&&"%"==f[S];++S);for(var M=x&&"!"==f[x-1]||S<u&&"1"==f[S]?"1":"N",E=x;E<S;++E)f[E]=M;x=S-1}}for(var T=0,A=c;T<u;++T){var D=f[T];"L"==A&&"1"==D?f[T]="L":a.test(D)&&(A=D)}for(var L=0;L<u;++L)if(o.test(f[L])){var I=void 0;for(I=L+1;I<u&&o.test(f[I]);++I);for(var P="L"==(L?f[L-1]:c),O=P==("L"==(I<u?f[I]:c))?P?"L":"R":c,j=L;j<I;++j)f[j]=O;L=I-1}for(var q,N=[],B=0;B<u;)if(s.test(f[B])){var R=B;for(++B;B<u&&s.test(f[B]);++B);N.push(new t(0,R,B))}else{var z=B,F=N.length;for(++B;B<u&&"L"!=f[B];++B);for(var U=z;U<B;)if(l.test(f[U])){z<U&&N.splice(F,0,new t(1,z,U));var H=U;for(++U;U<B&&l.test(f[U]);++U);N.splice(F,0,new t(2,H,U)),z=U}else++U;z<B&&N.splice(F,0,new t(1,z,B))}return"ltr"==i&&(1==N[0].level&&(q=n.match(/^\s+/))&&(N[0].from=q[0].length,N.unshift(new t(0,0,q[0].length))),1==m(N).level&&(q=n.match(/\s+$/))&&(m(N).to-=q[0].length,N.push(new t(0,u-q[0].length,u)))),"rtl"==i?N.reverse():N}}(),Eo=[],To=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||Eo).concat(n)}},Ao=function(){if(Wr&&Kr<9)return!1;var e=i("div");return"draggable"in e||"dragDrop"in e}(),Do=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Lo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Io=function(){var e=i("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Po=null,Oo={},jo={},qo={},No=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};No.prototype.eol=function(){return this.pos>=this.string.length},No.prototype.sol=function(){return this.pos==this.lineStart},No.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},No.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},No.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},No.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},No.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},No.prototype.skipToEnd=function(){this.pos=this.string.length},No.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},No.prototype.backUp=function(e){this.pos-=e},No.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=f(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)},No.prototype.indentation=function(){return f(this.string,null,this.tabSize)-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)},No.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},No.prototype.current=function(){return this.string.slice(this.start,this.pos)},No.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},No.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},No.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Bo=function(e,t){this.state=e,this.lookAhead=t},Ro=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};Ro.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Ro.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Ro.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ro.fromSaved=function(e,t,n){return t instanceof Bo?new Ro(e,De(e.mode,t.state),n,t.lookAhead):new Ro(e,De(e.mode,t),n)},Ro.prototype.save=function(e){var t=!1!==e?De(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Bo(t,this.maxLookAhead):t};var zo=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n},Fo=function(e,t,n){this.text=e,G(this,t),this.height=n?n(this):1};Fo.prototype.lineNo=function(){return A(this)},be(Fo);var Uo,Ho={},Wo={},Ko=null,Vo=null,$o={left:0,right:0,top:0,bottom:0},Go=function(e,t,n){this.cm=n;var r=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(r),e(o),To(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),To(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,Wr&&Kr<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Go.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Go.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Go.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Go.prototype.zeroWidthHack=function(){var e=no&&!Zr?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new fo,this.disableVert=new fo},Go.prototype.enableZeroWidthBar=function(e,t,n){function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}e.style.pointerEvents="auto",t.set(1e3,i)},Go.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Yo=function(){};Yo.prototype.update=function(){return{bottom:0,right:0}},Yo.prototype.setScrollLeft=function(){},Yo.prototype.setScrollTop=function(){},Yo.prototype.clear=function(){};var Xo={native:Go,null:Yo},Zo=0,Jo=function(e,t,n){var i=e.display;this.viewport=t,this.visible=nn(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=dt(e),this.force=n,this.dims=Rt(e),this.events=[]};Jo.prototype.signal=function(e,t){ve(e,t)&&this.events.push(arguments)},Jo.prototype.finish=function(){for(var e=0;e<this.events.length;e++)pe.apply(null,this.events[e])};var Qo=0,ea=null;Wr?ea=-.53:zr?ea=15:Gr?ea=-.7:Xr&&(ea=-1/3);var ta=function(e,t){this.ranges=e,this.primIndex=t};ta.prototype.primary=function(){return this.ranges[this.primIndex]},ta.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!j(n.anchor,i.anchor)||!j(n.head,i.head))return!1}return!0},ta.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new na(q(this.ranges[t].anchor),q(this.ranges[t].head));return new ta(e,this.primIndex)},ta.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},ta.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(O(t,i.from())>=0&&O(e,i.to())<=0)return n}return-1};var na=function(e,t){this.anchor=e,this.head=t};na.prototype.from=function(){return B(this.anchor,this.head)},na.prototype.to=function(){return N(this.anchor,this.head)},na.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ni.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,Ue(r),Xe(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},Bi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),a=i.height;if(i.removeInner(e,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ni))){var s=[];this.collapse(s),this.children=[new Ni(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,s=a;s<r.lines.length;){var l=new Ni(r.lines.slice(s,s+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Bi(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=d(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new Bi(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e);if(r.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var ia=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};ia.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=A(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=at(this);T(n,Math.max(0,n.height-o)),e&&(_n(e,function(){Ri(e,n,-o),Mn(e,i,"widget")}),Xe(e,"lineWidgetCleared",e,this,i))}},ia.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=at(this)-t;r&&(T(i,i.height+r),n&&_n(n,function(){n.curOp.forceUpdate=!0,Ri(n,i,r),Xe(n,"lineWidgetChanged",n,e,A(i))}))},be(ia);var ra=0,oa=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ra};oa.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&yn(e),ve(this,"clear")){var n=this.find();n&&Xe(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=H(a.markedSpans,this);e&&!this.collapsed?Mn(e,A(a),"text"):e&&(null!=s.to&&(r=A(a)),null!=s.from&&(i=A(a))),a.markedSpans=W(a.markedSpans,s),null==s.from&&this.collapsed&&!oe(this.doc,a)&&e&&T(a,Nt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=ne(this.lines[l]),u=le(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&Sn(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&wi(e.doc)),e&&Xe(e,"markerCleared",e,this,i,r),t&&wn(e),this.parent&&this.parent.clear()}},oa.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,r=0;r<this.lines.length;++r){var o=this.lines[r],a=H(o.markedSpans,this);if(null!=a.from&&(n=P(t?o:A(o),a.from),-1==e))return n;if(null!=a.to&&(i=P(t?o:A(o),a.to),1==e))return i}return n&&{from:n,to:i}},oa.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&_n(i,function(){var r=t.line,o=A(t.line),a=gt(i,o);if(a&&(_t(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!oe(n.doc,r)&&null!=n.height){var s=n.height;n.height=null;var l=at(n)-s;l&&T(r,r.height+l)}Xe(i,"markerChanged",i,e)})},oa.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=d(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},oa.prototype.detachLine=function(e){if(this.lines.splice(d(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},be(oa);var aa=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};aa.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Xe(this,"clear")}},aa.prototype.find=function(e,t){return this.primary.find(e,t)},be(aa);var sa=0,la=function(e,t,n,i,r){if(!(this instanceof la))return new la(e,t,n,i,r);null==n&&(n=0),Bi.call(this,[new Ni([new Fo("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=P(n,0);this.sel=Hn(o),this.history=new ti(null),this.id=++sa,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Zn(this,{from:o,to:o,text:e}),vi(this,Hn(o),vo)};la.prototype=b(Bi.prototype,{constructor:la,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=E(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Cn(function(e){var t=P(this.first,0),n=this.first+this.size-1;Ei(this,{from:t,to:P(n,S(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&cn(this.cm,0,0),vi(this,Hn(t),vo)}),replaceRange:function(e,t,n,i){Ii(this,e,t=z(this,t),n=n?z(this,n):t,i)},getRange:function(e,t,n){var i=M(this,z(this,e),z(this,t));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(L(this,e))return S(this,e)},getLineNumber:function(e){return A(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=S(this,e)),ne(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return z(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Cn(function(e,t,n){mi(this,z(this,"number"==typeof e?P(e,t||0):e),null,n)}),setSelection:Cn(function(e,t,n){mi(this,z(this,e),z(this,t||e),n)}),extendSelection:Cn(function(e,t,n){di(this,z(this,e),t&&z(this,t),n)}),extendSelections:Cn(function(e,t){hi(this,F(this,e),t)}),extendSelectionsBy:Cn(function(e,t){hi(this,F(this,g(this.sel.ranges,e)),t)}),setSelections:Cn(function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new na(z(this,e[r].anchor),z(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),vi(this,Un(i,t),n)}}),addSelection:Cn(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new na(z(this,e),z(this,t||e))),vi(this,Un(i,i.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=M(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=M(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Cn(function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var i=[],r=P(e.first,0),o=r,a=0;a<t.length;a++){var s=t[a],l=$n(s.from,r,o),c=$n(Wn(s),r,o);if(r=s.to,o=c,"around"==n){var u=e.sel.ranges[a],f=O(u.head,u.anchor)<0;i[a]=new na(f?c:l,f?l:c)}else i[a]=new na(l,l)}return new ta(i,e.sel.primIndex)}(this,i,t),l=i.length-1;l>=0;l--)Ei(this,i[l]);s?gi(this,s):this.cm&&ln(this.cm)}),undo:Cn(function(){Ai(this,"undo")}),redo:Cn(function(){Ai(this,"redo")}),undoSelection:Cn(function(){Ai(this,"undo",!0)}),redoSelection:Cn(function(){Ai(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new ti(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:ui(this.history.done),undone:ui(this.history.undone)}},setHistory:function(e){var t=this.history=new ti(this.history.maxGeneration);t.done=ui(e.done.slice(0),null,!0),t.undone=ui(e.undone.slice(0),null,!0)},setGutterMarker:Cn(function(e,t,n){return qi(this,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&_(i)&&(e.gutterMarkers=null),!0})}),clearGutter:Cn(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&qi(t,n,"gutter",function(){return n.gutterMarkers[e]=null,_(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!L(this,e))return null;if(t=e,!(e=S(this,e)))return null}else if(null==(t=A(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Cn(function(t,n,i){return qi(this,t,"gutter"==n?"gutter":"class",function(t){var r="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(t[r]){if(e(i).test(t[r]))return!1;t[r]+=" "+i}else t[r]=i;return!0})}),removeLineClass:Cn(function(t,n,i){return qi(this,t,"gutter"==n?"gutter":"class",function(t){var r="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",o=t[r];if(!o)return!1;if(null==i)t[r]=null;else{var a=o.match(e(i));if(!a)return!1;var s=a.index+a[0].length;t[r]=o.slice(0,a.index)+(a.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0})}),addLineWidget:Cn(function(e,t,n){return function(e,t,n,i){var r=new ia(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),qi(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!oe(e,t)){var i=se(t)<e.scrollTop;T(t,t.height+at(r)),i&&sn(o,r.height),o.curOp.forceUpdate=!0}return!0}),Xe(o,"lineWidgetAdded",o,r,"number"==typeof t?t:A(t)),r}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return zi(this,z(this,e),z(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=z(this,e),zi(this,e,e,n,"bookmark")},findMarksAt:function(e){var t=[],n=S(this,(e=z(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=z(this,e),t=z(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter(function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n}),z(this,P(n,t))},indexFromPos:function(e){var t=(e=z(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new la(E(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new la(E(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),a=e.clipPos(r.to);if(O(o,a)){var s=zi(e,o,a,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}(i,Fi(this)),i},unlinkDoc:function(e){if(e instanceof Cr&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ui(Fi(this));break}}if(e.history==this.history){var n=[e.id];Jn(e,function(e){return n.push(e.id)},!0),e.history=new ti(null),e.history.done=ui(this.history.done,n),e.history.undone=ui(this.history.undone,n)}},iterLinkedDocs:function(e){Jn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Do(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Cn(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&function(e){_n(e,function(){ei(e),Sn(e)})}(this.cm))})}),la.prototype.eachLine=la.prototype.iter;for(var ca=0,ua=!1,fa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},da=0;da<10;da++)fa[da+48]=fa[da+96]=String(da);for(var ha=65;ha<=90;ha++)fa[ha]=String.fromCharCode(ha);for(var pa=1;pa<=12;pa++)fa[pa+111]=fa[pa+63235]="F"+pa;var ma={};ma.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ma.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ma.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ma.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ma.default=no?ma.macDefault:ma.pcDefault;var ga={selectAll:Si,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),vo)},killLine:function(e){return tr(e,function(t){if(t.empty()){var n=S(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:P(t.head.line+1,0)}:{from:t.head,to:P(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return tr(e,function(t){return{from:P(t.from().line,0),to:z(e.doc,P(t.to().line+1,0))}})},delLineLeft:function(e){return tr(e,function(e){return{from:P(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return tr(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return tr(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(P(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(P(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return or(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return sr(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return ar(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},yo)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},yo)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?sr(e,t.head):i},yo)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=f(e.getLine(o.line),o.ch,i);t.push(p(i-a%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return _n(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=S(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new P(r.line,r.ch-1)),r.ch>0)r=new P(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),P(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var a=S(e.doc,r.line-1).text;a&&(r=new P(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),P(r.line-1,a.length-1),r,"+transpose"))}n.push(new na(r,r))}e.setSelections(n)})},newlineAndIndent:function(e){return _n(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);ln(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},va=new fo,ba=null,ya=function(e,t,n){this.time=e,this.pos=t,this.button=n};ya.prototype.compare=function(e,t,n){return this.time+400>e&&0==O(t,this.pos)&&n==this.button};var wa,_a,ka={toString:function(){return"CodeMirror.Init"}},xa={},Ca={};Cr.defaults=xa,Cr.optionHandlers=Ca;var Sa=[];Cr.defineInitHook=function(e){return Sa.push(e)};var Ma=null,Ea=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new fo,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ea.prototype.init=function(e){function t(e){if(!me(r,e)){if(r.somethingSelected())Mr({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Dr(r);Mr({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,vo),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var n=Ma.text.join("\n");if(e.clipboardData.setData("Text",n),e.clipboardData.getData("Text")==n)return void e.preventDefault()}var a=Ir(),s=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),s.value=Ma.text.join("\n");var l=document.activeElement;uo(s),setTimeout(function(){r.display.lineSpace.removeChild(a),l.focus(),l==o&&i.showPrimarySelection()},50)}}var n=this,i=this,r=i.cm,o=i.div=e.lineDiv;Lr(o,r.options.spellcheck),To(o,"paste",function(e){me(r,e)||Tr(e,r)||Kr<=11&&setTimeout(kn(r,function(){return n.updateFromDOM()}),20)}),To(o,"compositionstart",function(e){n.composing={data:e.data,done:!1}}),To(o,"compositionupdate",function(e){n.composing||(n.composing={data:e.data,done:!1})}),To(o,"compositionend",function(e){n.composing&&(e.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),To(o,"touchstart",function(){return i.forceCompositionEnd()}),To(o,"input",function(){n.composing||n.readFromDOMSoon()}),To(o,"copy",t),To(o,"cut",t)},Ea.prototype.prepareSelection=function(){var e=Vt(this.cm,!1);return e.focus=this.cm.state.focused,e},Ea.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ea.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),r=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||r.line<t.display.viewFrom)e.removeAllRanges();else{var o=Nr(t,e.anchorNode,e.anchorOffset),a=Nr(t,e.focusNode,e.focusOffset);if(!o||o.bad||!a||a.bad||0!=O(B(o,a),i)||0!=O(N(o,a),r)){var s=t.display.view,l=i.line>=t.display.viewFrom&&jr(t,i)||{node:s[0].measure.map[2],offset:0},c=r.line<t.display.viewTo&&jr(t,r);if(!c){var u=s[s.length-1].measure,f=u.maps?u.maps[u.maps.length-1]:u.map;c={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(l&&c){var d,h=e.rangeCount&&e.getRangeAt(0);try{d=ao(l.node,l.offset,c.offset,c.node)}catch(e){}d&&(!zr&&t.state.focused?(e.collapse(l.node,l.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),h&&null==e.anchorNode?e.addRange(h):zr&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Ea.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ea.prototype.showMultipleSelections=function(e){n(this.cm.display.cursorDiv,e.cursors),n(this.cm.display.selectionDiv,e.selection)},Ea.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ea.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return o(this.div,t)},Ea.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ea.prototype.blur=function(){this.div.blur()},Ea.prototype.getField=function(){return this.div},Ea.prototype.supportsTouch=function(){return!0},Ea.prototype.receivedFocus=function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():_n(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},Ea.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ea.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;if(eo&&Gr&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Nr(t,e.anchorNode,e.anchorOffset),i=Nr(t,e.focusNode,e.focusOffset);n&&i&&_n(t,function(){vi(t.doc,Hn(n,i),vo),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},Ea.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),r=n.to();if(0==i.ch&&i.line>e.firstLine()&&(i=P(i.line-1,S(e.doc,i.line-1).length)),r.ch==S(e.doc,r.line).text.length&&r.line<e.lastLine()&&(r=P(r.line+1,0)),i.line<t.viewFrom||r.line>t.viewTo-1)return!1;var o,a,s;i.line==t.viewFrom||0==(o=Wt(e,i.line))?(a=A(t.view[0].line),s=t.view[0].node):(a=A(t.view[o].line),s=t.view[o-1].node.nextSibling);var l,c,u=Wt(e,r.line);if(u==t.view.length-1?(l=t.viewTo-1,c=t.lineDiv.lastChild):(l=A(t.view[u+1].line)-1,c=t.view[u+1].node.previousSibling),!s)return!1;for(var f=e.doc.splitLines(function(e,t,n,i,r){function o(){c&&(l+=u,c=!1)}function a(e){e&&(o(),l+=e)}function s(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return void a(n||t.textContent.replace(/\u200b/g,""));var l,f=t.getAttribute("cm-marker");if(f){var d=e.findMarks(P(i,0),P(r+1,0),function(e){return function(t){return t.id==e}}(+f));return void(d.length&&(l=d[0].find(0))&&a(M(e.doc,l.from,l.to).join(u)))}if("false"==t.getAttribute("contenteditable"))return;var h=/^(pre|div|p)$/i.test(t.nodeName);h&&o();for(var p=0;p<t.childNodes.length;p++)s(t.childNodes[p]);h&&(c=!0)}else 3==t.nodeType&&a(t.nodeValue)}for(var l="",c=!1,u=e.doc.lineSeparator();s(t),t!=n;)t=t.nextSibling;return l}(e,s,c,a,l)),d=M(e.doc,P(a,0),P(l,S(e.doc,l).text.length));f.length>1&&d.length>1;)if(m(f)==m(d))f.pop(),d.pop(),l--;else{if(f[0]!=d[0])break;f.shift(),d.shift(),a++}for(var h=0,p=0,g=f[0],v=d[0],b=Math.min(g.length,v.length);h<b&&g.charCodeAt(h)==v.charCodeAt(h);)++h;for(var y=m(f),w=m(d),_=Math.min(y.length-(1==f.length?h:0),w.length-(1==d.length?h:0));p<_&&y.charCodeAt(y.length-p-1)==w.charCodeAt(w.length-p-1);)++p;if(1==f.length&&1==d.length&&a==i.line)for(;h&&h>i.ch&&y.charCodeAt(y.length-p-1)==w.charCodeAt(w.length-p-1);)h--,p++;f[f.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(h).replace(/\u200b+$/,"");var k=P(a,h),x=P(l,d.length?m(d).length-p:0);return f.length>1||f[0]||O(k,x)?(Ii(e.doc,f,k,x,"+input"),!0):void 0},Ea.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ea.prototype.reset=function(){this.forceCompositionEnd()},Ea.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ea.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Ea.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||_n(this.cm,function(){return Sn(e.cm)})},Ea.prototype.setUneditable=function(e){e.contentEditable="false"},Ea.prototype.onKeyPress=function(e){0!=e.charCode&&(e.preventDefault(),this.cm.isReadOnly()||kn(this.cm,Er)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Ea.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ea.prototype.onContextMenu=function(){},Ea.prototype.resetPosition=function(){},Ea.prototype.needsContentAttribute=!0;var Ta=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new fo,this.hasSelection=!1,this.composing=null};Ta.prototype.init=function(e){function t(e){if(!me(r,e)){if(r.somethingSelected())Mr({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Dr(r);Mr({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,vo):(i.prevInput="",a.value=t.text.join("\n"),uo(a))}"cut"==e.type&&(r.state.cutIncoming=!0)}}var n=this,i=this,r=this.cm,o=this.wrapper=Ir(),a=this.textarea=o.firstChild;e.wrapper.insertBefore(o,e.wrapper.firstChild),Qr&&(a.style.width="0px"),To(a,"input",function(){Wr&&Kr>=9&&n.hasSelection&&(n.hasSelection=null),i.poll()}),To(a,"paste",function(e){me(r,e)||Tr(e,r)||(r.state.pasteIncoming=!0,i.fastPoll())}),To(a,"cut",t),To(a,"copy",t),To(e.scroller,"paste",function(t){st(e,t)||me(r,t)||(r.state.pasteIncoming=!0,i.focus())}),To(e.lineSpace,"selectstart",function(t){st(e,t)||ye(t)}),To(a,"compositionstart",function(){var e=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),To(a,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Ta.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=Vt(e);if(e.options.moveInputWithCursor){var r=Dt(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},Ta.prototype.showSelection=function(e){var t=this.cm.display;n(t.cursorDiv,e.cursors),n(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ta.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&uo(this.textarea),Wr&&Kr>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",Wr&&Kr>=9&&(this.hasSelection=null))}},Ta.prototype.getField=function(){return this.textarea},Ta.prototype.supportsTouch=function(){return!1},Ta.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!to||a()!=this.textarea))try{this.textarea.focus()}catch(e){}},Ta.prototype.blur=function(){this.textarea.blur()},Ta.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ta.prototype.receivedFocus=function(){this.slowPoll()},Ta.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ta.prototype.fastPoll=function(){function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},Ta.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Lo(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(Wr&&Kr>=9&&this.hasSelection===r||no&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,s=Math.min(i.length,r.length);a<s&&i.charCodeAt(a)==r.charCodeAt(a);)++a;return _n(t,function(){Er(t,r.slice(a),i.length-a,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ta.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ta.prototype.onKeyPress=function(){Wr&&Kr>=9&&(this.hasSelection=null),this.fastPoll()},Ta.prototype.onContextMenu=function(e){function t(){if(null!=a.selectionStart){var e=r.somethingSelected(),t=""+(e?a.value:"");a.value="",a.value=t,i.prevInput=e?"":"",a.selectionStart=1,a.selectionEnd=t.length,o.selForContextMenu=r.doc.sel}}function n(){if(i.contextMenuPending=!1,i.wrapper.style.cssText=u,a.style.cssText=c,Wr&&Kr<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=a.selectionStart){(!Wr||Wr&&Kr<9)&&t();var e=0,n=function(){o.selForContextMenu==r.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&""==i.prevInput?kn(r,Si)(r):e++<10?o.detectingSelectAll=setTimeout(n,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(n,200)}}var i=this,r=i.cm,o=r.display,a=i.textarea,s=Ht(r,e),l=o.scroller.scrollTop;if(s&&!Yr){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(s)&&kn(r,vi)(r.doc,Hn(s),vo);var c=a.style.cssText,u=i.wrapper.style.cssText;i.wrapper.style.cssText="position: absolute";var f=i.wrapper.getBoundingClientRect();a.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(Wr?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var d;if(Vr&&(d=window.scrollY),o.input.focus(),Vr&&window.scrollTo(null,d),o.input.reset(),r.somethingSelected()||(a.value=i.prevInput=" "),i.contextMenuPending=!0,o.selForContextMenu=r.doc.sel,clearTimeout(o.detectingSelectAll),Wr&&Kr>=9&&t(),lo){ke(e);var h=function(){he(window,"mouseup",h),setTimeout(n,20)};To(window,"mouseup",h)}else setTimeout(n,50)}},Ta.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Ta.prototype.setUneditable=function(){},Ta.prototype.needsContentAttribute=!1,function(e){function t(t,i,r,o){e.defaults[t]=i,r&&(n[t]=o?function(e,t,n){n!=ka&&r(e,t,n)}:r)}var n=e.optionHandlers;e.defineOption=t,e.Init=ka,t("value","",function(e,t){return e.setValue(t)},!0),t("mode",null,function(e,t){e.doc.modeOption=t,Gn(e)},!0),t("indentUnit",2,Gn,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(e){Yn(e),xt(e),Sn(e)},!0),t("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter(function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(P(i,o))}i++});for(var r=n.length-1;r>=0;r--)Ii(e.doc,t,n[r],P(n[r].line,n[r].ch+t.length))}}),t("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ka&&e.refresh()}),t("specialCharPlaceholder",Ke,function(e){return e.refresh()},!0),t("electricChars",!0),t("inputStyle",to?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),t("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),t("rtlMoveVisually",!ro),t("wholeLineUpdateBefore",!0),t("theme","default",function(e){wr(e),_r(e)},!0),t("keyMap","default",function(e,t,n){var i=er(t),r=n!=ka&&er(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)}),t("extraKeys",null),t("configureMouse",null),t("lineWrapping",!1,xr,!0),t("gutters",[],function(e){Bn(e.options),_r(e)},!0),t("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?zt(e.display)+"px":"0",e.refresh()},!0),t("coverGutterNextToScrollbar",!1,function(e){return gn(e)},!0),t("scrollbarStyle","native",function(e){bn(e),gn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),t("lineNumbers",!1,function(e){Bn(e.options),_r(e)},!0),t("firstLineNumber",1,_r,!0),t("lineNumberFormatter",function(e){return e},_r,!0),t("showCursorWhenSelecting",!1,Kt,!0),t("resetSelectionOnContextMenu",!0),t("lineWiseCopyCut",!0),t("pasteLinesPerSelection",!0),t("readOnly",!1,function(e,t){"nocursor"==t&&(Qt(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),t("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),t("dragDrop",!0,kr),t("allowDropFileTypes",null),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1,Kt,!0),t("singleCursorHeightPerLine",!0,Kt,!0),t("workTime",100),t("workDelay",100),t("flattenSpans",!0,Yn,!0),t("addModeClass",!1,Yn,!0),t("pollInterval",100),t("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),t("historyEventDelay",1250),t("viewportMargin",10,function(e){return e.refresh()},!0),t("maxHighlightLength",1e4,Yn,!0),t("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),t("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),t("autofocus",null),t("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0)}(Cr),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&kn(this,t[e])(this,n,r),pe(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](er(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:xn(function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Sn(this)}),removeOverlay:xn(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void Sn(this)}}),indentLine:xn(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),L(this.doc,e)&&Sr(this,e,t,n)}),indentSelection:xn(function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Sr(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&ln(this));else{var o=r.from(),a=r.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)Sr(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[i].from().ch>0&&pi(this.doc,i,new na(o,c[i].to()),vo)}}}),getTokenAt:function(e,t){return Re(this,e,t)},getLineTokens:function(e,t){return Re(this,P(e),t,!0)},getTokenTypeAt:function(e){e=z(this.doc,e);var t,n=Oe(this,S(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}i=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var s=r[o[t][a]];s&&i.push(s)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var l=0;l<r._global.length;l++){var c=r._global[l];c.pred(o,this)&&-1==d(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(e,t){var n=this.doc;return e=R(n,null==e?n.first+n.size-1:e),je(this,e+1,t).state},cursorCoords:function(e,t){var n,i=this.doc.sel.primary();return n=null==e?i.head:"object"==typeof e?z(this.doc,e):e?i.from():i.to(),Dt(this,n,t||"page")},charCoords:function(e,t){return At(this,z(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Tt(this,e,t||"page"),Pt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Tt(this,{top:e,left:0},t||"page").top,D(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=S(this.doc,e)}else i=e;return Et(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-se(i):0)},defaultTextHeight:function(){return Nt(this.display)},defaultCharWidth:function(){return Bt(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display,a=(e=Dt(this,z(this.doc,e))).bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==i)a=e.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==r?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?s=0:"middle"==r&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&function(e,t){var n=an(e,t);null!=n.scrollTop&&dn(e,n.scrollTop),null!=n.scrollLeft&&pn(e,n.scrollLeft)}(this,{left:s,top:a,right:s+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:xn(dr),triggerOnKeyPress:xn(pr),triggerOnKeyUp:hr,triggerOnMouseDown:xn(mr),execCommand:function(e){if(ga.hasOwnProperty(e))return ga[e].call(null,this)},triggerElectric:xn(function(e){Ar(this,e)}),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=z(this.doc,e),a=0;a<t&&!(o=Pr(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:xn(function(e,t){var n=this;this.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Pr(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()},yo)}),deleteH:xn(function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):tr(this,function(n){var r=Pr(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var a=z(this.doc,e),s=0;s<t;++s){var l=Dt(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Or(this,l,r,n)).hitSide)break}return a},moveV:xn(function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=Dt(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),r.push(s.left);var l=Or(n,s,e,t);return"page"==t&&a==i.sel.primary()&&sn(n,At(n,l,"div").top-s.top),l},yo),r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]}),findWordAt:function(e){var t=S(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),a=w(o,r)?function(e){return w(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!w(e)};n>0&&a(t.charAt(n-1));)--n;for(;i<t.length&&a(t.charAt(i));)++i}return new na(P(e.line,n),P(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?s(this.display.cursorDiv,"CodeMirror-overwrite"):co(this.display.cursorDiv,"CodeMirror-overwrite"),pe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==a()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:xn(function(e,t){cn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-ft(this)-this.display.barHeight,width:e.scrollWidth-ft(this)-this.display.barWidth,clientHeight:ht(this),clientWidth:dt(this)}},scrollIntoView:xn(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:P(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){un(e),e.curOp.scrollToPos=t}(this,e):fn(this,e.from,e.to,e.margin)}),setSize:xn(function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&kt(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Mn(n,r,"widget");break}++r}),this.curOp.forceUpdate=!0,pe(this,"refresh",this)}),operation:function(e){return _n(this,e)},startOperation:function(){return yn(this)},endOperation:function(){return wn(this)},refresh:xn(function(){var e=this.display.cachedTextHeight;Sn(this),this.curOp.forceUpdate=!0,xt(this),cn(this,this.doc.scrollLeft,this.doc.scrollTop),jn(this),(null==e||Math.abs(e-Nt(this.display))>.5)&&Ut(this),pe(this,"refresh",this)}),swapDoc:xn(function(e){var t=this.doc;return t.cm=null,Qn(this,e),xt(this),this.display.input.reset(),cn(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Xe(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}(Cr);var Aa="iter insert remove copy getEditor constructor".split(" ");for(var Da in la.prototype)la.prototype.hasOwnProperty(Da)&&d(Aa,Da)<0&&(Cr.prototype[Da]=function(e){return function(){return e.apply(this.doc,arguments)}}(la.prototype[Da]));return be(la),Cr.inputStyles={textarea:Ta,contenteditable:Ea},Cr.defineMode=function(e){Cr.defaults.mode||"null"==e||(Cr.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Oo[e]=t}.apply(this,arguments)},Cr.defineMIME=function(e,t){jo[e]=t},Cr.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Cr.defineMIME("text/plain","null"),Cr.defineExtension=function(e,t){Cr.prototype[e]=t},Cr.defineDocExtension=function(e,t){la.prototype[e]=t},Cr.fromTextArea=function(e,t){function n(){e.value=l.getValue()}if(t=t?u(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var i=a();t.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}var r;if(e.form&&(To(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var s=o.submit=function(){n(),o.submit=r,o.submit(),o.submit=s}}catch(e){}}t.finishInit=function(t){t.save=n,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,n(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(he(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=r))}},e.style.display="none";var l=Cr(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return l},function(e){e.off=he,e.on=To,e.wheelEventPixels=zn,e.Doc=la,e.splitLines=Do,e.countColumn=f,e.findColumn=h,e.isWordChar=y,e.Pass=go,e.signal=pe,e.Line=Fo,e.changeEnd=Wn,e.scrollbarModel=Xo,e.Pos=P,e.cmpPos=O,e.modes=Oo,e.mimeModes=jo,e.resolveMode=Ee,e.getMode=Te,e.modeExtensions=qo,e.extendMode=Ae,e.copyState=De,e.startState=Ie,e.innerMode=Le,e.commands=ga,e.keyMap=ma,e.keyName=Qi,e.isModifierKey=Zi,e.lookupKey=Xi,e.normalizeKeyMap=Yi,e.StringStream=No,e.SharedTextMarker=aa,e.TextMarker=oa,e.LineWidget=ia,e.e_preventDefault=ye,e.e_stopPropagation=we,e.e_stop=ke,e.addClass=s,e.contains=o,e.rmClass=co,e.keyNames=fa}(Cr),Cr.version="5.32.0",Cr})},{}],61:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.info=i,this.align=r,this.prev=o}function n(e,n,i,r){var o=e.indented;return e.context&&"statement"==e.context.type&&"statement"!=i&&(o=e.context.indented),e.context=new t(o,n,i,r,null,e.context)}function i(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}function r(e,t,n){return"variable"==t.prevToken||"type"==t.prevToken||(!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(e.string.slice(0,n))||(!(!t.typeAtEndOfLine||e.column()!=e.indentation())||void 0))}function o(e){for(;;){if(!e||"top"==e.type)return!0;if("}"==e.type&&"namespace"!=e.prev.info)return!1;e=e.prev}}function a(e){for(var t={},n=e.split(" "),i=0;i<n.length;++i)t[n[i]]=!0;return t}function s(e,t){return"function"==typeof e?e(t):e.propertyIsEnumerable(t)}function l(e,t){if(!t.startOfLine)return!1;for(var n,i=null;n=e.peek();){if("\\"==n&&e.match(/^.$/)){i=l;break}if("/"==n&&e.match(/^\/[\/\*]/,!1))break;e.next()}return t.tokenize=i,"meta"}function c(e,t){return"type"==t.prevToken&&"type"}function u(e){return e.eatWhile(/[\w\.']/),"number"}function f(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return!!n&&(t.cpp11RawStringDelim=n[1],t.tokenize=h,h(e,t))}return e.match(/(u8|u|U|L)/)?!!e.match(/["']/,!1)&&"string":(e.next(),!1)}function d(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}function h(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");return e.match(new RegExp(".*?\\)"+n+'"'))?t.tokenize=null:e.skipToEnd(),"string"}function p(t,n){function i(e){if(e)for(var t in e)e.hasOwnProperty(t)&&r.push(t)}"string"==typeof t&&(t=[t]);var r=[];i(n.keywords),i(n.types),i(n.builtin),i(n.atoms),r.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],r));for(var o=0;o<t.length;++o)e.defineMIME(t[o],n)}function m(e,t){for(var n=!1;!e.eol();){if(!n&&e.match('"""')){t.tokenize=null;break}n="\\"==e.next()&&!n}return"string"}function g(e){return function(t,n){for(var i,r=!1,o=!1;!t.eol();){if(!r&&t.match('"')&&("single"==e||t.match('""'))){o=!0;break}if(!r&&t.match("``")){y=g(e),o=!0;break}i=t.next(),r="single"==e&&!r&&"\\"==i}return o&&(n.tokenize=null),"string"}}e.defineMode("clike",function(a,l){function c(e,t){var n=e.next();if(x[n]){var i=x[n](e,t);if(!1!==i)return i}if('"'==n||"'"==n)return t.tokenize=function(e){return function(t,n){for(var i,r=!1,o=!1;null!=(i=t.next());){if(i==e&&!r){o=!0;break}r=!r&&"\\"==i}return(o||!r&&!C)&&(n.tokenize=null),"string"}}(n),t.tokenize(e,t);if(T.test(n))return d=n,null;if(A.test(n)){if(e.backUp(1),e.match(D))return"number";e.next()}if("/"==n){if(e.eat("*"))return t.tokenize=u,u(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(L.test(n)){for(;!e.match(/^\/[\/*]/,!1)&&e.eat(L););return"operator"}if(e.eatWhile(I),E)for(;e.match(E);)e.eatWhile(I);var r=e.current();return s(v,r)?(s(w,r)&&(d="newstatement"),s(_,r)&&(h=!0),"keyword"):s(b,r)?"type":s(y,r)?(s(w,r)&&(d="newstatement"),"builtin"):s(k,r)?"atom":"variable"}function u(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=null;break}i="*"==n}return"comment"}function f(e,t){l.typeFirstDefinitions&&e.eol()&&o(t.context)&&(t.typeAtEndOfLine=r(e,t,e.pos))}var d,h,p=a.indentUnit,m=l.statementIndentUnit||p,g=l.dontAlignCalls,v=l.keywords||{},b=l.types||{},y=l.builtin||{},w=l.blockKeywords||{},_=l.defKeywords||{},k=l.atoms||{},x=l.hooks||{},C=l.multiLineStrings,S=!1!==l.indentStatements,M=!1!==l.indentSwitch,E=l.namespaceSeparator,T=l.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,A=l.numberStart||/[\d\.]/,D=l.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,L=l.isOperatorChar||/[+\-*&%=<>!?|\/]/,I=l.isIdentifierChar||/[\w\$_\xa1-\uffff]/;return{startState:function(e){return{tokenize:null,context:new t((e||0)-p,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(e,t){var a=t.context;if(e.sol()&&(null==a.align&&(a.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return f(e,t),null;d=h=null;var s=(t.tokenize||c)(e,t);if("comment"==s||"meta"==s)return s;if(null==a.align&&(a.align=!0),";"==d||":"==d||","==d&&e.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==t.context.type;)i(t);else if("{"==d)n(t,e.column(),"}");else if("["==d)n(t,e.column(),"]");else if("("==d)n(t,e.column(),")");else if("}"==d){for(;"statement"==a.type;)a=i(t);for("}"==a.type&&(a=i(t));"statement"==a.type;)a=i(t)}else d==a.type?i(t):S&&(("}"==a.type||"top"==a.type)&&";"!=d||"statement"==a.type&&"newstatement"==d)&&n(t,e.column(),"statement",e.current());if("variable"==s&&("def"==t.prevToken||l.typeFirstDefinitions&&r(e,t,e.start)&&o(t.context)&&e.match(/^\s*\(/,!1))&&(s="def"),x.token){var u=x.token(e,t,s);void 0!==u&&(s=u)}return"def"==s&&!1===l.styleDefs&&(s="variable"),t.startOfLine=!1,t.prevToken=h?"def":s||d,f(e,t),s},indent:function(t,n){if(t.tokenize!=c&&null!=t.tokenize||t.typeAtEndOfLine)return e.Pass;var i=t.context,r=n&&n.charAt(0);if("statement"==i.type&&"}"==r&&(i=i.prev),l.dontIndentStatements)for(;"statement"==i.type&&l.dontIndentStatements.test(i.info);)i=i.prev;if(x.indent){var o=x.indent(t,i,n);if("number"==typeof o)return o}var a=r==i.type,s=i.prev&&"switch"==i.prev.info;if(l.allmanIndentation&&/[{(]/.test(r)){for(;"top"!=i.type&&"}"!=i.type;)i=i.prev;return i.indented}return"statement"==i.type?i.indented+("{"==r?0:m):!i.align||g&&")"==i.type?")"!=i.type||a?i.indented+(a?0:p)+(a||!s||/^(?:case|default)\b/.test(n)?0:p):i.indented+m:i.column+(a?0:1)},electricInput:M?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});var v="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",b="int long char short double float unsigned signed void size_t ptrdiff_t";p(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:a(v),types:a(b+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:a("case do else for if switch while struct"),defKeywords:a("struct"),typeFirstDefinitions:!0,atoms:a("null true false"),hooks:{"#":l,"*":c},modeProps:{fold:["brace","include"]}}),p(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:a(v+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:a(b+" bool wchar_t"),blockKeywords:a("catch class do else finally for if struct switch try while"),defKeywords:a("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:a("true false null"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,hooks:{"#":l,"*":c,u:f,U:f,L:f,R:f,0:u,1:u,2:u,3:u,4:u,5:u,6:u,7:u,8:u,9:u,token:function(e,t,n){if("variable"==n&&"("==e.peek()&&(";"==t.prevToken||null==t.prevToken||"}"==t.prevToken)&&function(e){var t=/(\w+)::~?(\w+)$/.exec(e);return t&&t[1]==t[2]}(e.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),p("text/x-java",{name:"clike",keywords:a("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:a("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:a("catch class do else finally for if switch try while"),defKeywords:a("class interface enum @interface"),typeFirstDefinitions:!0,atoms:a("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(e){return!e.match("interface",!1)&&(e.eatWhile(/[\w\$_]/),"meta")}},modeProps:{fold:["brace","import"]}}),p("text/x-csharp",{name:"clike",keywords:a("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:a("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:a("catch class do else finally for foreach if struct switch try while"),defKeywords:a("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=d,d(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),p("text/x-scala",{name:"clike",keywords:a("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:a("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:a("catch class enum do else finally for forSome if match switch try while"),defKeywords:a("class enum def object package trait type val var"),atoms:a("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return!!e.match('""')&&(t.tokenize=m,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(e,n){var i=n.context;return!("}"!=i.type||!i.align||!e.eat(">"))&&(n.context=new t(i.indented,i.column,i.type,i.info,null,i.prev),"operator")}},modeProps:{closeBrackets:{triples:'"'}}}),p("text/x-kotlin",{name:"clike",keywords:a("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend"),types:a("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:a("catch class do else finally for if where try while enum"),defKeywords:a("class val var object interface fun"),atoms:a("true false null this"),hooks:{'"':function(e,t){return t.tokenize=function(e){return function(t,n){for(var i,r=!1,o=!1;!t.eol();){if(!e&&!r&&t.match('"')){o=!0;break}if(e&&t.match('"""')){o=!0;break}i=t.next(),!r&&"$"==i&&t.match("{")&&t.skipTo("}"),r=!r&&"\\"==i&&!e}return!o&&e||(n.tokenize=null),"string"}}(e.match('""')),t.tokenize(e,t)}},modeProps:{closeBrackets:{triples:'"'}}}),p(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:a("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:a("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:a("for while do if else struct"),builtin:a("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:a("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":l},modeProps:{fold:["brace","include"]}}),p("text/x-nesc",{name:"clike",keywords:a(v+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:a(b),blockKeywords:a("case do else for if switch while struct"),atoms:a("null true false"),hooks:{"#":l},modeProps:{fold:["brace","include"]}}),p("text/x-objectivec",{name:"clike",keywords:a(v+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:a(b),atoms:a("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(e){return e.eatWhile(/[\w\$]/),"keyword"},"#":l,indent:function(e,t,n){if("statement"==t.type&&/^@\w/.test(n))return t.indented}},modeProps:{fold:"brace"}}),p("text/x-squirrel",{name:"clike",keywords:a("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:a(b),blockKeywords:a("case catch class else for foreach if switch try while"),defKeywords:a("function local class"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"#":l},modeProps:{fold:["brace","include"]}});var y=null;p("text/x-ceylon",{name:"clike",keywords:a("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(e){var t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:a("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:a("class dynamic function interface module object package value"),builtin:a("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:a("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return t.tokenize=g(e.match('""')?"triple":"single"),t.tokenize(e,t)},"`":function(e,t){return!(!y||!e.match("`"))&&(t.tokenize=y,y=null,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(e,t,n){if(("variable"==n||"type"==n)&&"."==t.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})},{"../../lib/codemirror":60}],62:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function n(e){return e.scopes[e.scopes.length-1]}var i=t(["and","or","not","is"]),r=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],o=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];e.registerHelper("hintWords","python",r.concat(o)),e.defineMode("python",function(a,s){function l(e,t){if(e.sol()&&(t.indent=e.indentation()),e.sol()&&"py"==n(t).type){var i=n(t).offset;if(e.eatSpace()){var r=e.indentation();return r>i?u(t):r<i&&f(e,t)&&"#"!=e.peek()&&(t.errorToken=!0),null}var o=c(e,t);return i>0&&f(e,t)&&(o+=" "+h),o}return c(e,t)}function c(e,t){if(e.eatSpace())return null;if("#"==e.peek())return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var n=!1;if(e.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(n=!0),e.match(/^[\d_]+\.\d*/)&&(n=!0),e.match(/^\.\d+/)&&(n=!0),n)return e.eat(/J/i),"number";var r=!1;if(e.match(/^0x[0-9a-f_]+/i)&&(r=!0),e.match(/^0b[01_]+/i)&&(r=!0),e.match(/^0o[0-7_]+/i)&&(r=!0),e.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(e.eat(/J/i),r=!0),e.match(/^0(?![\dx])/i)&&(r=!0),r)return e.eat(/L/i),"number"}if(e.match(k))return t.tokenize=function(e){function t(t,r){for(;!t.eol();)if(t.eatWhile(/[^'"\\]/),t.eat("\\")){if(t.next(),n&&t.eol())return i}else{if(t.match(e))return r.tokenize=l,i;t.eat(/['"]/)}if(n){if(s.singleLineStringErrors)return h;r.tokenize=l}return i}for(;"rubf".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var n=1==e.length,i="string";return t.isString=!0,t}(e.current()),t.tokenize(e,t);for(var o=0;o<m.length;o++)if(e.match(m[o]))return"operator";return e.match(p)?"punctuation":"."==t.lastToken&&e.match(_)?"property":e.match(x)||e.match(i)?"keyword":e.match(C)?"builtin":e.match(/^(self|cls)\b/)?"variable-2":e.match(_)?"def"==t.lastToken||"class"==t.lastToken?"def":"variable":(e.next(),h)}function u(e){for(;"py"!=n(e).type;)e.scopes.pop();e.scopes.push({offset:n(e).offset+a.indentUnit,type:"py",align:null})}function f(e,t){for(var i=e.indentation();t.scopes.length>1&&n(t).offset>i;){if("py"!=n(t).type)return!0;t.scopes.pop()}return n(t).offset!=i}function d(e,t){e.sol()&&(t.beginningOfLine=!0);var i=t.tokenize(e,t),r=e.current();if(t.beginningOfLine&&"@"==r)return e.match(_,!1)?"meta":w?"operator":h;/\S/.test(r)&&(t.beginningOfLine=!1),"variable"!=i&&"builtin"!=i||"meta"!=t.lastToken||(i="meta"),"pass"!=r&&"return"!=r||(t.dedent+=1),"lambda"==r&&(t.lambda=!0),":"!=r||t.lambda||"py"!=n(t).type||u(t);var o=1==r.length?"[({".indexOf(r):-1;if(-1!=o&&function(e,t,n){var i=e.match(/^([\s\[\{\(]|#.*)*$/,!1)?null:e.column()+1;t.scopes.push({offset:t.indent+v,type:n,align:i})}(e,t,"])}".slice(o,o+1)),-1!=(o="])}".indexOf(r))){if(n(t).type!=r)return h;t.indent=t.scopes.pop().offset-v}return t.dedent>0&&e.eol()&&"py"==n(t).type&&(t.scopes.length>1&&t.scopes.pop(),t.dedent-=1),i}for(var h="error",p=s.delimiters||s.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/,m=[s.singleOperators,s.doubleOperators,s.doubleDelimiters,s.tripleDelimiters,s.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@])/],g=0;g<m.length;g++)m[g]||m.splice(g--,1);var v=s.hangingIndent||a.indentUnit,b=r,y=o;void 0!=s.extra_keywords&&(b=b.concat(s.extra_keywords)),void 0!=s.extra_builtins&&(y=y.concat(s.extra_builtins));var w=!(s.version&&Number(s.version)<3);if(w){_=s.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;b=b.concat(["nonlocal","False","True","None","async","await"]),y=y.concat(["ascii","bytes","exec","print"]);k=new RegExp("^(([rbuf]|(br))?('{3}|\"{3}|['\"]))","i")}else{var _=s.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;b=b.concat(["exec","print"]),y=y.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var k=new RegExp("^(([rubf]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var x=t(b),C=t(y);return{startState:function(e){return{tokenize:l,scopes:[{offset:e||0,type:"py",align:null}],indent:e||0,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=t.errorToken;n&&(t.errorToken=!1);var i=d(e,t);return i&&"comment"!=i&&(t.lastToken="keyword"==i||"punctuation"==i?e.current():i),"punctuation"==i&&(i=null),e.eol()&&t.lambda&&(t.lambda=!1),n?i+" "+h:i},indent:function(t,i){if(t.tokenize!=l)return t.tokenize.isString?e.Pass:0;var r=n(t),o=r.type==i.charAt(0);return null!=r.align?r.align-(o?1:0):r.offset-(o?v:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"}}),e.defineMIME("text/x-python","python");e.defineMIME("text/x-cython",{name:"python",extra_keywords:function(e){return e.split(" ")}("by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE")})})},{"../../lib/codemirror":60}],63:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror"),e("../../addon/mode/simple")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../../addon/mode/simple"],i):i(CodeMirror)}(function(e){"use strict";e.defineSimpleMode("rust",{start:[{regex:/b?"/,token:"string",next:"string"},{regex:/b?r"/,token:"string",next:"string_raw"},{regex:/b?r#+"/,token:"string",next:"string_raw_hash"},{regex:/'(?:[^'\\]|\\(?:[nrt0'"]|x[\da-fA-F]{2}|u\{[\da-fA-F]{6}\}))'/,token:"string-2"},{regex:/b'(?:[^']|\\(?:['\\nrt0]|x[\da-fA-F]{2}))'/,token:"string-2"},{regex:/(?:(?:[0-9][0-9_]*)(?:(?:[Ee][+-]?[0-9_]+)|\.[0-9_]+(?:[Ee][+-]?[0-9_]+)?)(?:f32|f64)?)|(?:0(?:b[01_]+|(?:o[0-7_]+)|(?:x[0-9a-fA-F_]+))|(?:[0-9][0-9_]*))(?:u8|u16|u32|u64|i8|i16|i32|i64|isize|usize)?/,token:"number"},{regex:/(let(?:\s+mut)?|fn|enum|mod|struct|type)(\s+)([a-zA-Z_][a-zA-Z0-9_]*)/,token:["keyword",null,"def"]},{regex:/(?:abstract|alignof|as|box|break|continue|const|crate|do|else|enum|extern|fn|for|final|if|impl|in|loop|macro|match|mod|move|offsetof|override|priv|proc|pub|pure|ref|return|self|sizeof|static|struct|super|trait|type|typeof|unsafe|unsized|use|virtual|where|while|yield)\b/,token:"keyword"},{regex:/\b(?:Self|isize|usize|char|bool|u8|u16|u32|u64|f16|f32|f64|i8|i16|i32|i64|str|Option)\b/,token:"atom"},{regex:/\b(?:true|false|Some|None|Ok|Err)\b/,token:"builtin"},{regex:/\b(fn)(\s+)([a-zA-Z_][a-zA-Z0-9_]*)/,token:["keyword",null,"def"]},{regex:/#!?\[.*\]/,token:"meta"},{regex:/\/\/.*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+\/*=<>!]+/,token:"operator"},{regex:/[a-zA-Z_]\w*!/,token:"variable-3"},{regex:/[a-zA-Z_]\w*/,token:"variable"},{regex:/[\{\[\(]/,indent:!0},{regex:/[\}\]\)]/,dedent:!0}],string:[{regex:/"/,token:"string",next:"start"},{regex:/(?:[^\\"]|\\(?:.|$))*/,token:"string"}],string_raw:[{regex:/"/,token:"string",next:"start"},{regex:/[^"]*/,token:"string"}],string_raw_hash:[{regex:/"#+/,token:"string",next:"start"},{regex:/(?:[^"]|"(?!#))*/,token:"string"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],electricInput:/^\s*\}$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}}),e.defineMIME("text/x-rustsrc","rust"),e.defineMIME("text/rust","rust")})},{"../../addon/mode/simple":56,"../../lib/codemirror":60}],64:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";e.defineMode("shell",function(){function e(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)i[n[r]]=e}function t(e,i){var o="("==e?")":"{"==e?"}":e;return function(a,s){for(var l,c=!1,u=!1;null!=(l=a.next());){if(l===o&&!u){c=!0;break}if("$"===l&&!u&&"'"!==e){u=!0,a.backUp(1),s.tokens.unshift(r);break}if(!u&&l===e&&e!==o)return s.tokens.unshift(t(e,i)),n(a,s);u=!u&&"\\"===l}return c&&s.tokens.shift(),i}}function n(e,o){return(o.tokens[0]||function(e,o){if(e.eatSpace())return null;var a=e.sol(),s=e.next();if("\\"===s)return e.next(),null;if("'"===s||'"'===s||"`"===s)return o.tokens.unshift(t(s,"`"===s?"quote":"string")),n(e,o);if("#"===s)return a&&e.eat("!")?(e.skipToEnd(),"meta"):(e.skipToEnd(),"comment");if("$"===s)return o.tokens.unshift(r),n(e,o);if("+"===s||"="===s)return"operator";if("-"===s)return e.eat("-"),e.eatWhile(/\w/),"attribute";if(/\d/.test(s)&&(e.eatWhile(/\d/),e.eol()||!/\w/.test(e.peek())))return"number";e.eatWhile(/[\w-]/);var l=e.current();return"="===e.peek()&&/\w+/.test(l)?"def":i.hasOwnProperty(l)?i[l]:null})(e,o)}var i={};e("atom","true false"),e("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function"),e("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep hg kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo svn tee telnet top touch vi vim wall wc wget who write yes zsh");var r=function(e,i){i.tokens.length>1&&e.eat("$");var r=e.next();return/['"({]/.test(r)?(i.tokens[0]=t(r,"("==r?"quote":"{"==r?"def":"string"),n(e,i)):(/\d/.test(r)||e.eatWhile(/\w/),i.tokens.shift(),"def")};return{startState:function(){return{tokens:[]}},token:function(e,t){return n(e,t)},closeBrackets:"()[]{}''\"\"``",lineComment:"#",fold:"brace"}}),e.defineMIME("text/x-sh","shell"),e.defineMIME("application/x-sh","shell")})},{"../../lib/codemirror":60}],65:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":118}],66:[function(e,t,n){(function(n){function i(e){this.curveType=s[e],this.curveType||(this.curveType={name:e}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function r(e,t,i){Array.isArray(e)||(e=e.toArray());var r=new n(e);if(i&&r.length<i){var o=new n(i-r.length);o.fill(0),r=n.concat([o,r])}return t?r.toString(t):r}var o=e("elliptic"),a=e("bn.js");t.exports=function(e){return new i(e)};var s={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};s.p224=s.secp224r1,s.p256=s.secp256r1=s.prime256v1,s.p192=s.secp192r1=s.prime192v1,s.p384=s.secp384r1,s.p521=s.secp521r1,i.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},i.prototype.computeSecret=function(e,t,i){t=t||"utf8",n.isBuffer(e)||(e=new n(e,t));return r(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},i.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),r(n,e)},i.prototype.getPrivateKey=function(e){return r(this.keys.getPrivate(),e)},i.prototype.setPublicKey=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.keys._importPublic(e),this},i.prototype.setPrivateKey=function(e,t){t=t||"utf8",n.isBuffer(e)||(e=new n(e,t));var i=new a(e);return i=i.toString(16),this.keys._importPrivate(i),this}}).call(this,e("buffer").Buffer)},{"bn.js":20,buffer:52,elliptic:83}],67:[function(e,t,n){(function(n){"use strict";function i(e){c.call(this,"digest"),this._hash=e,this.buffers=[]}function r(e){c.call(this,"digest"),this._hash=e}var o=e("inherits"),a=e("./md5"),s=e("ripemd160"),l=e("sha.js"),c=e("cipher-base");o(i,c),i.prototype._update=function(e){this.buffers.push(e)},i.prototype._final=function(){var e=n.concat(this.buffers),t=this._hash(e);return this.buffers=null,t},o(r,c),r.prototype._update=function(e){this._hash.update(e)},r.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return"md5"===(e=e.toLowerCase())?new i(a):new r("rmd160"===e||"ripemd160"===e?new s:l(e))}}).call(this,e("buffer").Buffer)},{"./md5":69,buffer:52,"cipher-base":53,inherits:117,ripemd160:159,"sha.js":162}],68:[function(e,t,n){(function(e){"use strict";var n=4,i=new e(n);i.fill(0);t.exports=function(t,r){var o=r(function(t){if(t.length%n!=0){var r=t.length+(n-t.length%n);t=e.concat([t,i],r)}for(var o=new Array(t.length>>>2),a=0,s=0;a<t.length;a+=n,s++)o[s]=t.readInt32LE(a);return o}(t),8*t.length);t=new e(16);for(var a=0;a<o.length;a++)t.writeInt32LE(o[a],a<<2,!0);return t}}).call(this,e("buffer").Buffer)},{buffer:52}],69:[function(e,t,n){"use strict";function i(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,r=-1732584194,u=271733878,f=0;f<e.length;f+=16){var d=n,h=i,p=r,m=u;i=l(i=l(i=l(i=l(i=s(i=s(i=s(i=s(i=a(i=a(i=a(i=a(i=o(i=o(i=o(i=o(i,r=o(r,u=o(u,n=o(n,i,r,u,e[f+0],7,-680876936),i,r,e[f+1],12,-389564586),n,i,e[f+2],17,606105819),u,n,e[f+3],22,-1044525330),r=o(r,u=o(u,n=o(n,i,r,u,e[f+4],7,-176418897),i,r,e[f+5],12,1200080426),n,i,e[f+6],17,-1473231341),u,n,e[f+7],22,-45705983),r=o(r,u=o(u,n=o(n,i,r,u,e[f+8],7,1770035416),i,r,e[f+9],12,-1958414417),n,i,e[f+10],17,-42063),u,n,e[f+11],22,-1990404162),r=o(r,u=o(u,n=o(n,i,r,u,e[f+12],7,1804603682),i,r,e[f+13],12,-40341101),n,i,e[f+14],17,-1502002290),u,n,e[f+15],22,1236535329),r=a(r,u=a(u,n=a(n,i,r,u,e[f+1],5,-165796510),i,r,e[f+6],9,-1069501632),n,i,e[f+11],14,643717713),u,n,e[f+0],20,-373897302),r=a(r,u=a(u,n=a(n,i,r,u,e[f+5],5,-701558691),i,r,e[f+10],9,38016083),n,i,e[f+15],14,-660478335),u,n,e[f+4],20,-405537848),r=a(r,u=a(u,n=a(n,i,r,u,e[f+9],5,568446438),i,r,e[f+14],9,-1019803690),n,i,e[f+3],14,-187363961),u,n,e[f+8],20,1163531501),r=a(r,u=a(u,n=a(n,i,r,u,e[f+13],5,-1444681467),i,r,e[f+2],9,-51403784),n,i,e[f+7],14,1735328473),u,n,e[f+12],20,-1926607734),r=s(r,u=s(u,n=s(n,i,r,u,e[f+5],4,-378558),i,r,e[f+8],11,-2022574463),n,i,e[f+11],16,1839030562),u,n,e[f+14],23,-35309556),r=s(r,u=s(u,n=s(n,i,r,u,e[f+1],4,-1530992060),i,r,e[f+4],11,1272893353),n,i,e[f+7],16,-155497632),u,n,e[f+10],23,-1094730640),r=s(r,u=s(u,n=s(n,i,r,u,e[f+13],4,681279174),i,r,e[f+0],11,-358537222),n,i,e[f+3],16,-722521979),u,n,e[f+6],23,76029189),r=s(r,u=s(u,n=s(n,i,r,u,e[f+9],4,-640364487),i,r,e[f+12],11,-421815835),n,i,e[f+15],16,530742520),u,n,e[f+2],23,-995338651),r=l(r,u=l(u,n=l(n,i,r,u,e[f+0],6,-198630844),i,r,e[f+7],10,1126891415),n,i,e[f+14],15,-1416354905),u,n,e[f+5],21,-57434055),r=l(r,u=l(u,n=l(n,i,r,u,e[f+12],6,1700485571),i,r,e[f+3],10,-1894986606),n,i,e[f+10],15,-1051523),u,n,e[f+1],21,-2054922799),r=l(r,u=l(u,n=l(n,i,r,u,e[f+8],6,1873313359),i,r,e[f+15],10,-30611744),n,i,e[f+6],15,-1560198380),u,n,e[f+13],21,1309151649),r=l(r,u=l(u,n=l(n,i,r,u,e[f+4],6,-145523070),i,r,e[f+11],10,-1120210379),n,i,e[f+2],15,718787259),u,n,e[f+9],21,-343485551),n=c(n,d),i=c(i,h),r=c(r,p),u=c(u,m)}return[n,i,r,u]}function r(e,t,n,i,r,o){return c(function(e,t){return e<<t|e>>>32-t}(c(c(t,e),c(i,o)),r),n)}function o(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function l(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}function c(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}var u=e("./make-hash");t.exports=function(e){return u(e,i)}},{"./make-hash":68}],70:[function(e,t,n){"use strict";function i(e,t){a.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var n="sha512"===e||"sha384"===e?128:64;if(this._alg=e,this._key=t,t.length>n){t=("rmd160"===e?new c:u(e)).update(t).digest()}else t.length<n&&(t=s.concat([t,f],n));for(var i=this._ipad=s.allocUnsafe(n),r=this._opad=s.allocUnsafe(n),o=0;o<n;o++)i[o]=54^t[o],r[o]=92^t[o];this._hash="rmd160"===e?new c:u(e),this._hash.update(i)}var r=e("inherits"),o=e("./legacy"),a=e("cipher-base"),s=e("safe-buffer").Buffer,l=e("create-hash/md5"),c=e("ripemd160"),u=e("sha.js"),f=s.alloc(128);r(i,a),i.prototype._update=function(e){this._hash.update(e)},i.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new c:u(this._alg)).update(this._opad).update(e).digest()},t.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new i("rmd160",t):"md5"===e?new o(l,t):new i(e,t)}},{"./legacy":71,"cipher-base":53,"create-hash/md5":69,inherits:117,ripemd160:159,"safe-buffer":160,"sha.js":162}],71:[function(e,t,n){"use strict";function i(e,t){a.call(this,"digest"),"string"==typeof t&&(t=o.from(t)),this._alg=e,this._key=t,t.length>l?t=e(t):t.length<l&&(t=o.concat([t,s],l));for(var n=this._ipad=o.allocUnsafe(l),i=this._opad=o.allocUnsafe(l),r=0;r<l;r++)n[r]=54^t[r],i[r]=92^t[r];this._hash=[n]}var r=e("inherits"),o=e("safe-buffer").Buffer,a=e("cipher-base"),s=o.alloc(128),l=64;r(i,a),i.prototype._update=function(e){this._hash.push(e)},i.prototype._final=function(){var e=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,e]))},t.exports=i},{"cipher-base":53,inherits:117,"safe-buffer":160}],72:[function(e,t,n){"use strict";n.randomBytes=n.rng=n.pseudoRandomBytes=n.prng=e("randombytes"),n.createHash=n.Hash=e("create-hash"),n.createHmac=n.Hmac=e("create-hmac");var i=e("browserify-sign/algos"),r=Object.keys(i),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);n.getHashes=function(){return o};var a=e("pbkdf2");n.pbkdf2=a.pbkdf2,n.pbkdf2Sync=a.pbkdf2Sync;var s=e("browserify-cipher");n.Cipher=s.Cipher,n.createCipher=s.createCipher,n.Cipheriv=s.Cipheriv,n.createCipheriv=s.createCipheriv,n.Decipher=s.Decipher,n.createDecipher=s.createDecipher,n.Decipheriv=s.Decipheriv,n.createDecipheriv=s.createDecipheriv,n.getCiphers=s.getCiphers,n.listCiphers=s.listCiphers;var l=e("diffie-hellman");n.DiffieHellmanGroup=l.DiffieHellmanGroup,n.createDiffieHellmanGroup=l.createDiffieHellmanGroup,n.getDiffieHellman=l.getDiffieHellman,n.createDiffieHellman=l.createDiffieHellman,n.DiffieHellman=l.DiffieHellman;var c=e("browserify-sign");n.createSign=c.createSign,n.Sign=c.Sign,n.createVerify=c.createVerify,n.Verify=c.Verify,n.createECDH=e("create-ecdh");var u=e("public-encrypt");n.publicEncrypt=u.publicEncrypt,n.privateEncrypt=u.privateEncrypt,n.publicDecrypt=u.publicDecrypt,n.privateDecrypt=u.privateDecrypt;var f=e("randomfill");n.randomFill=f.randomFill,n.randomFillSync=f.randomFillSync,n.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},n.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":41,"browserify-sign":48,"browserify-sign/algos":45,"create-ecdh":66,"create-hash":67,"create-hmac":70,"diffie-hellman":79,pbkdf2:131,"public-encrypt":138,randombytes:144,randomfill:145}],73:[function(e,t,n){"use strict";n.utils=e("./des/utils"),n.Cipher=e("./des/cipher"),n.DES=e("./des/des"),n.CBC=e("./des/cbc"),n.EDE=e("./des/ede")},{"./des/cbc":74,"./des/cipher":75,"./des/des":76,"./des/ede":77,"./des/utils":78}],74:[function(e,t,n){"use strict";var i=e("minimalistic-assert"),r=e("inherits"),o={};n.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}r(t,e);for(var n=Object.keys(o),i=0;i<n.length;i++){var a=n[i];t.prototype[a]=o[a]}return t.create=function(e){return new t(e)},t},o._cbcInit=function(){var e=new function(e){i.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}(this.options.iv);this._cbcState=e},o._update=function(e,t,n,i){var r=this._cbcState,o=this.constructor.super_.prototype,a=r.iv;if("encrypt"===this.type){for(s=0;s<this.blockSize;s++)a[s]^=e[t+s];o._update.call(this,a,0,n,i);for(s=0;s<this.blockSize;s++)a[s]=n[i+s]}else{o._update.call(this,e,t,n,i);for(s=0;s<this.blockSize;s++)n[i+s]^=a[s];for(var s=0;s<this.blockSize;s++)a[s]=e[t+s]}}},{inherits:117,"minimalistic-assert":123}],75:[function(e,t,n){"use strict";function i(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var r=e("minimalistic-assert");t.exports=i,i.prototype._init=function(){},i.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},i.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),i=0;i<n;i++)this.buffer[this.bufferOff+i]=e[t+i];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(e){var t=0,n=0,i=(this.bufferOff+e.length)/this.blockSize|0,r=new Array(i*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(r,n)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,r,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return r},i.prototype._updateDecrypt=function(e){for(var t=0,n=0,i=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,r=new Array(i*this.blockSize);i>0;i--)t+=this._buffer(e,t),n+=this._flushBuffer(r,n);return t+=this._buffer(e,t),r},i.prototype.final=function(e){var t;e&&(t=this.update(e));var n;return n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},i.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},i.prototype._unpad=function(e){return e},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},{"minimalistic-assert":123}],76:[function(e,t,n){"use strict";function i(e){l.call(this,e);var t=new function(){this.tmp=new Array(2),this.keys=null};this._desState=t,this.deriveKeys(t,e.key)}var r=e("minimalistic-assert"),o=e("inherits"),a=e("../des"),s=a.utils,l=a.Cipher;o(i,l),t.exports=i,i.create=function(e){return new i(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];i.prototype.deriveKeys=function(e,t){e.keys=new Array(32),r.equal(t.length,this.blockSize,"Invalid key length");var n=s.readUInt32BE(t,0),i=s.readUInt32BE(t,4);s.pc1(n,i,e.tmp,0),n=e.tmp[0],i=e.tmp[1];for(var o=0;o<e.keys.length;o+=2){var a=c[o>>>1];n=s.r28shl(n,a),i=s.r28shl(i,a),s.pc2(n,i,e.keys,o)}},i.prototype._update=function(e,t,n,i){var r=this._desState,o=s.readUInt32BE(e,t),a=s.readUInt32BE(e,t+4);s.ip(o,a,r.tmp,0),o=r.tmp[0],a=r.tmp[1],"encrypt"===this.type?this._encrypt(r,o,a,r.tmp,0):this._decrypt(r,o,a,r.tmp,0),o=r.tmp[0],a=r.tmp[1],s.writeUInt32BE(n,o,i),s.writeUInt32BE(n,a,i+4)},i.prototype._pad=function(e,t){for(var n=e.length-t,i=t;i<e.length;i++)e[i]=n;return!0},i.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)r.equal(e[n],t);return e.slice(0,e.length-t)},i.prototype._encrypt=function(e,t,n,i,r){for(var o=t,a=n,l=0;l<e.keys.length;l+=2){var c=e.keys[l],u=e.keys[l+1];s.expand(a,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var f=s.substitute(c,u),d=a;a=(o^s.permute(f))>>>0,o=d}s.rip(a,o,i,r)},i.prototype._decrypt=function(e,t,n,i,r){for(var o=n,a=t,l=e.keys.length-2;l>=0;l-=2){var c=e.keys[l],u=e.keys[l+1];s.expand(o,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var f=s.substitute(c,u),d=o;o=(a^s.permute(f))>>>0,a=d}s.rip(o,a,i,r)}},{"../des":73,inherits:117,"minimalistic-assert":123}],77:[function(e,t,n){"use strict";function i(e){s.call(this,e);var t=new function(e,t){r.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),i=t.slice(8,16),o=t.slice(16,24);this.ciphers="encrypt"===e?[l.create({type:"encrypt",key:n}),l.create({type:"decrypt",key:i}),l.create({type:"encrypt",key:o})]:[l.create({type:"decrypt",key:o}),l.create({type:"encrypt",key:i}),l.create({type:"decrypt",key:n})]}(this.type,this.options.key);this._edeState=t}var r=e("minimalistic-assert"),o=e("inherits"),a=e("../des"),s=a.Cipher,l=a.DES;o(i,s),t.exports=i,i.create=function(e){return new i(e)},i.prototype._update=function(e,t,n,i){var r=this._edeState;r.ciphers[0]._update(e,t,n,i),r.ciphers[1]._update(n,i,n,i),r.ciphers[2]._update(n,i,n,i)},i.prototype._pad=l.prototype._pad,i.prototype._unpad=l.prototype._unpad},{"../des":73,inherits:117,"minimalistic-assert":123}],78:[function(e,t,n){"use strict";n.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},n.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},n.ip=function(e,t,n,i){for(var r=0,o=0,a=6;a>=0;a-=2){for(s=0;s<=24;s+=8)r<<=1,r|=t>>>s+a&1;for(s=0;s<=24;s+=8)r<<=1,r|=e>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1;for(var s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1}n[i+0]=r>>>0,n[i+1]=o>>>0},n.rip=function(e,t,n,i){for(var r=0,o=0,a=0;a<4;a++)for(s=24;s>=0;s-=8)r<<=1,r|=t>>>s+a&1,r<<=1,r|=e>>>s+a&1;for(a=4;a<8;a++)for(var s=24;s>=0;s-=8)o<<=1,o|=t>>>s+a&1,o<<=1,o|=e>>>s+a&1;n[i+0]=r>>>0,n[i+1]=o>>>0},n.pc1=function(e,t,n,i){for(var r=0,o=0,a=7;a>=5;a--){for(s=0;s<=24;s+=8)r<<=1,r|=t>>s+a&1;for(s=0;s<=24;s+=8)r<<=1,r|=e>>s+a&1}for(s=0;s<=24;s+=8)r<<=1,r|=t>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1}for(var s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;n[i+0]=r>>>0,n[i+1]=o>>>0},n.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];n.pc2=function(e,t,n,r){for(var o=0,a=0,s=i.length>>>1,l=0;l<s;l++)o<<=1,o|=e>>>i[l]&1;for(l=s;l<i.length;l++)a<<=1,a|=t>>>i[l]&1;n[r+0]=o>>>0,n[r+1]=a>>>0},n.expand=function(e,t,n){var i=0,r=0;i=(1&e)<<5|e>>>27;for(o=23;o>=15;o-=4)i<<=6,i|=e>>>o&63;for(var o=11;o>=3;o-=4)r|=e>>>o&63,r<<=6;r|=(31&e)<<1|e>>>31,t[n+0]=i>>>0,t[n+1]=r>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];n.substitute=function(e,t){for(var n=0,i=0;i<4;i++){n<<=4,n|=a=r[64*i+(o=e>>>18-6*i&63)]}for(i=0;i<4;i++){var o=t>>>18-6*i&63,a=r[256+64*i+o];n<<=4,n|=a}return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];n.permute=function(e){for(var t=0,n=0;n<o.length;n++)t<<=1,t|=e>>>o[n]&1;return t>>>0},n.padSplit=function(e,t,n){for(var i=e.toString(2);i.length<t;)i="0"+i;for(var r=[],o=0;o<t;o+=n)r.push(i.slice(o,o+n));return r.join(" ")}},{}],79:[function(e,t,n){(function(t){function i(e,n,o,l){return t.isBuffer(n)||void 0===s[n]?i(e,"binary",n,o):(n=n||"binary",l=l||"binary",o=o||new t([2]),t.isBuffer(o)||(o=new t(o,l)),"number"==typeof e?new a(r(e,o),o,!0):(t.isBuffer(e)||(e=new t(e,n)),new a(e,o,!0)))}var r=e("./lib/generatePrime"),o=e("./lib/primes.json"),a=e("./lib/dh"),s={binary:!0,hex:!0,base64:!0};n.DiffieHellmanGroup=n.createDiffieHellmanGroup=n.getDiffieHellman=function(e){var n=new t(o[e].prime,"hex"),i=new t(o[e].gen,"hex");return new a(n,i)},n.createDiffieHellman=n.DiffieHellman=i}).call(this,e("buffer").Buffer)},{"./lib/dh":80,"./lib/generatePrime":81,"./lib/primes.json":82,buffer:52}],80:[function(e,t,n){(function(n){function i(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._pub=new s(e),this}function r(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._priv=new s(e),this}function o(e,t,n){this.setGenerator(t),this.__prime=new s(e),this._prime=s.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=i,this.setPrivateKey=r):this._primeCode=8}function a(e,t){var i=new n(e.toArray());return t?i.toString(t):i}var s=e("bn.js"),l=new(e("miller-rabin")),c=new s(24),u=new s(11),f=new s(10),d=new s(3),h=new s(7),p=e("./generatePrime"),m=e("randombytes");t.exports=o;var g={};Object.defineProperty(o.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),i=[n,e.toString(16)].join("_");if(i in g)return g[i];var r=0;if(e.isEven()||!p.simpleSieve||!p.fermatTest(e)||!l.test(e))return r+=1,r+="02"===n||"05"===n?8:4,g[i]=r,r;l.test(e.shrn(1))||(r+=2);var o;switch(n){case"02":e.mod(c).cmp(u)&&(r+=8);break;case"05":(o=e.mod(f)).cmp(d)&&o.cmp(h)&&(r+=8);break;default:r+=4}return g[i]=r,r}(this.__prime,this.__gen)),this._primeCode}}),o.prototype.generateKeys=function(){return this._priv||(this._priv=new s(m(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},o.prototype.computeSecret=function(e){var t=(e=(e=new s(e)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new n(t.toArray()),r=this.getPrime();if(i.length<r.length){var o=new n(r.length-i.length);o.fill(0),i=n.concat([o,i])}return i},o.prototype.getPublicKey=function(e){return a(this._pub,e)},o.prototype.getPrivateKey=function(e){return a(this._priv,e)},o.prototype.getPrime=function(e){return a(this.__prime,e)},o.prototype.getGenerator=function(e){return a(this._gen,e)},o.prototype.setGenerator=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.__gen=e,this._gen=new s(e),this}}).call(this,e("buffer").Buffer)},{"./generatePrime":81,"bn.js":20,buffer:52,"miller-rabin":122,randombytes:144}],81:[function(e,t,n){function i(e){for(var t=function(){if(null!==v)return v;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var i=Math.ceil(Math.sqrt(n)),r=0;r<t&&e[r]<=i&&n%e[r]!=0;r++);t!==r&&e[r]<=i||(e[t++]=n)}return v=e,e}(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function r(e){var t=s.mont(e);return 0===f.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function o(e,t){if(e<16)return new s(2===t||5===t?[140,123]:[140,39]);t=new s(t);for(var n,o;;){for(n=new s(a(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(u),n.testn(1)||n.iadd(f),t.cmp(f)){if(!t.cmp(d))for(;n.mod(h).cmp(p);)n.iadd(g)}else for(;n.mod(l).cmp(m);)n.iadd(g);if(o=n.shrn(1),i(o)&&i(n)&&r(o)&&r(n)&&c.test(o)&&c.test(n))return n}}var a=e("randombytes");t.exports=o,o.simpleSieve=i,o.fermatTest=r;var s=e("bn.js"),l=new s(24),c=new(e("miller-rabin")),u=new s(1),f=new s(2),d=new s(5),h=(new s(16),new s(8),new s(10)),p=new s(3),m=(new s(7),new s(11)),g=new s(4),v=(new s(12),null)},{"bn.js":20,"miller-rabin":122,randombytes:144}],82:[function(e,t,n){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],83:[function(e,t,n){"use strict";var i=n;i.version=e("../package.json").version,i.utils=e("./elliptic/utils"),i.rand=e("brorand"),i.curve=e("./elliptic/curve"),i.curves=e("./elliptic/curves"),i.ec=e("./elliptic/ec"),i.eddsa=e("./elliptic/eddsa")},{"../package.json":98,"./elliptic/curve":86,"./elliptic/curves":89,"./elliptic/ec":90,"./elliptic/eddsa":93,"./elliptic/utils":97,brorand:22}],84:[function(e,t,n){"use strict";function i(e,t){this.type=e,this.p=new o(t.p,16),this.red=t.prime?o.red(t.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=t.n&&new o(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function r(e,t){this.curve=e,this.type=t,this.precomputed=null}var o=e("bn.js"),a=e("../../elliptic").utils,s=a.getNAF,l=a.getJSF,c=a.assert;t.exports=i,i.prototype.point=function(){throw new Error("Not implemented")},i.prototype.validate=function(){throw new Error("Not implemented")},i.prototype._fixedNafMul=function(e,t){c(e.precomputed);var n=e._getDoubles(),i=s(t,1),r=(1<<n.step+1)-(n.step%2==0?2:1);r/=3;for(var o=[],a=0;a<i.length;a+=n.step){for(var l=0,t=a+n.step-1;t>=a;t--)l=(l<<1)+i[t];o.push(l)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=r;d>0;d--){for(a=0;a<o.length;a++){(l=o[a])===d?f=f.mixedAdd(n.points[a]):l===-d&&(f=f.mixedAdd(n.points[a].neg()))}u=u.add(f)}return u.toP()},i.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var r=i.points,o=s(t,n),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(t=0;l>=0&&0===o[l];l--)t++;if(l>=0&&t++,a=a.dblp(t),l<0)break;var u=o[l];c(0!==u),a="affine"===e.type?u>0?a.mixedAdd(r[u-1>>1]):a.mixedAdd(r[-u-1>>1].neg()):u>0?a.add(r[u-1>>1]):a.add(r[-u-1>>1].neg())}return"affine"===e.type?a.toP():a},i.prototype._wnafMulAdd=function(e,t,n,i,r){for(var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,f=0;f<i;f++){var d=(S=t[f])._getNAFPoints(e);o[f]=d.wnd,a[f]=d.points}for(f=i-1;f>=1;f-=2){var h=f-1,p=f;if(1===o[h]&&1===o[p]){var m=[t[h],null,null,t[p]];0===t[h].y.cmp(t[p].y)?(m[1]=t[h].add(t[p]),m[2]=t[h].toJ().mixedAdd(t[p].neg())):0===t[h].y.cmp(t[p].y.redNeg())?(m[1]=t[h].toJ().mixedAdd(t[p]),m[2]=t[h].add(t[p].neg())):(m[1]=t[h].toJ().mixedAdd(t[p]),m[2]=t[h].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=l(n[h],n[p]);u=Math.max(v[0].length,u),c[h]=new Array(u),c[p]=new Array(u);for(C=0;C<u;C++){var b=0|v[0][C],y=0|v[1][C];c[h][C]=g[3*(b+1)+(y+1)],c[p][C]=0,a[h]=m}}else c[h]=s(n[h],o[h]),c[p]=s(n[p],o[p]),u=Math.max(c[h].length,u),u=Math.max(c[p].length,u)}for(var w=this.jpoint(null,null,null),_=this._wnafT4,f=u;f>=0;f--){for(var k=0;f>=0;){for(var x=!0,C=0;C<i;C++)_[C]=0|c[C][f],0!==_[C]&&(x=!1);if(!x)break;k++,f--}if(f>=0&&k++,w=w.dblp(k),f<0)break;for(C=0;C<i;C++){var S,M=_[C];0!==M&&(M>0?S=a[C][M-1>>1]:M<0&&(S=a[C][-M-1>>1].neg()),w="affine"===S.type?w.mixedAdd(S):w.add(S))}}for(f=0;f<i;f++)a[f]=null;return r?w:w.toP()},i.BasePoint=r,r.prototype.eq=function(){throw new Error("Not implemented")},r.prototype.validate=function(){return this.curve.validate(this)},i.prototype.decodePoint=function(e,t){e=a.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n){6===e[0]?c(e[e.length-1]%2==0):7===e[0]&&c(e[e.length-1]%2==1);return this.point(e.slice(1,1+n),e.slice(1+n,1+2*n))}if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},r.prototype.encodeCompressed=function(e){return this.encode(e,!0)},r.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},r.prototype.encode=function(e,t){return a.encode(this._encode(t),e)},r.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},r.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},r.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,r=0;r<t;r+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}},r.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=1===n?null:this.dbl(),r=1;r<n;r++)t[r]=t[r-1].add(i);return{wnd:e,points:t}},r.prototype._getBeta=function(){return null},r.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},{"../../elliptic":83,"bn.js":20}],85:[function(e,t,n){"use strict";function i(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,c.call(this,"edwards",e),this.a=new s(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function r(e,t,n,i,r){c.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(t,16),this.y=new s(n,16),this.z=i?new s(i,16):this.curve.one,this.t=r&&new s(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var o=e("../curve"),a=e("../../elliptic"),s=e("bn.js"),l=e("inherits"),c=o.base,u=a.utils.assert;l(i,c),t.exports=i,i.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},i.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},i.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)},i.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),r=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(r.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var l=a.fromRed().isOdd();return(t&&!l||!t&&l)&&(a=a.redNeg()),this.point(e,a)},i.prototype.pointFromY=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.one),r=n.redMul(this.d).redAdd(this.one),o=i.redMul(r.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},i.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),r=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===i.cmp(r)},l(r,c.BasePoint),i.prototype.pointFromJSON=function(e){return r.fromJSON(this,e)},i.prototype.point=function(e,t,n,i){return new r(this,e,t,n,i)},r.fromJSON=function(e,t){return new r(e,t[0],t[1],t[2])},r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},r.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},r.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),r=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=i.redAdd(t),a=o.redSub(n),s=i.redSub(t),l=r.redMul(a),c=o.redMul(s),u=r.redMul(s),f=a.redMul(o);return this.curve.point(l,c,f,u)},r.prototype._projDbl=function(){var e,t,n,i=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var a=(c=this.curve._mulA(r)).redAdd(o);if(this.zOne)e=i.redSub(r).redSub(o).redMul(a.redSub(this.curve.two)),t=a.redMul(c.redSub(o)),n=a.redSqr().redSub(a).redSub(a);else{var s=this.z.redSqr(),l=a.redSub(s).redISub(s);e=i.redSub(r).redISub(o).redMul(l),t=a.redMul(c.redSub(o)),n=a.redMul(l)}}else{var c=r.redAdd(o),s=this.curve._mulC(this.c.redMul(this.z)).redSqr(),l=c.redSub(s).redSub(s);e=this.curve._mulC(i.redISub(c)).redMul(l),t=this.curve._mulC(c).redMul(r.redISub(o)),n=c.redMul(l)}return this.curve.point(e,t,n)},r.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},r.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),r=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(t),a=r.redSub(i),s=r.redAdd(i),l=n.redAdd(t),c=o.redMul(a),u=s.redMul(l),f=o.redMul(l),d=a.redMul(s);return this.curve.point(c,u,d,f)},r.prototype._projAdd=function(e){var t,n,i=this.z.redMul(e.z),r=i.redSqr(),o=this.x.redMul(e.x),a=this.y.redMul(e.y),s=this.curve.d.redMul(o).redMul(a),l=r.redSub(s),c=r.redAdd(s),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(a),f=i.redMul(l).redMul(u);return this.curve.twisted?(t=i.redMul(c).redMul(a.redSub(this.curve._mulA(o))),n=l.redMul(c)):(t=i.redMul(c).redMul(a.redSub(o)),n=this.curve._mulC(l).redMul(c)),this.curve.point(f,t,n)},r.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},r.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},r.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},r.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},r.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},r.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},r.prototype.getX=function(){return this.normalize(),this.x.fromRed()},r.prototype.getY=function(){return this.normalize(),this.y.fromRed()},r.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},r.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}return!1},r.prototype.toP=r.prototype.normalize,r.prototype.mixedAdd=r.prototype.add},{"../../elliptic":83,"../curve":86,"bn.js":20,inherits:117}],86:[function(e,t,n){"use strict";var i=n;i.base=e("./base"),i.short=e("./short"),i.mont=e("./mont"),i.edwards=e("./edwards")},{"./base":84,"./edwards":85,"./mont":87,"./short":88}],87:[function(e,t,n){"use strict";function i(e){l.call(this,"mont",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.i4=new a(4).toRed(this.red).redInvm(),this.two=new a(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function r(e,t,n){l.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new a(t,16),this.z=new a(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var o=e("../curve"),a=e("bn.js"),s=e("inherits"),l=o.base,c=e("../../elliptic").utils;s(i,l),t.exports=i,i.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},s(r,l.BasePoint),i.prototype.decodePoint=function(e,t){return this.point(c.toArray(e,t),1)},i.prototype.point=function(e,t){return new r(this,e,t)},i.prototype.pointFromJSON=function(e){return r.fromJSON(this,e)},r.prototype.precompute=function(){},r.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},r.fromJSON=function(e,t){return new r(e,t[0],t[1]||e.one)},r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},r.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},r.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),i=e.redMul(t),r=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(i,r)},r.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},r.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),r=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(n),a=r.redMul(i),s=t.z.redMul(o.redAdd(a).redSqr()),l=t.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,l)},r.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),r=[];0!==t.cmpn(0);t.iushrn(1))r.push(t.andln(1));for(var o=r.length-1;o>=0;o--)0===r[o]?(n=n.diffAdd(i,this),i=i.dbl()):(i=n.diffAdd(i,this),n=n.dbl());return i},r.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},r.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},r.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},r.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},r.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":83,"../curve":86,"bn.js":20,inherits:117}],88:[function(e,t,n){"use strict";function i(e){u.call(this,"short",e),this.a=new l(e.a,16).toRed(this.red),this.b=new l(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function r(e,t,n,i){u.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new l(t,16),this.y=new l(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function o(e,t,n,i){u.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new l(0)):(this.x=new l(t,16),this.y=new l(n,16),this.z=new l(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var a=e("../curve"),s=e("../../elliptic"),l=e("bn.js"),c=e("inherits"),u=a.base,f=s.utils.assert;c(i,u),t.exports=i,i.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new l(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)n=new l(e.lambda,16);else{var r=this._getEndoRoots(this.n);0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(t))?n=r[0]:(n=r[1],f(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}var o;return o=e.basis?e.basis.map(function(e){return{a:new l(e.a,16),b:new l(e.b,16)}}):this._getEndoBasis(n),{beta:t,lambda:n,basis:o}}},i.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:l.mont(e),n=new l(2).toRed(t).redInvm(),i=n.redNeg(),r=new l(3).toRed(t).redNeg().redSqrt().redMul(n);return[i.redAdd(r).fromRed(),i.redSub(r).fromRed()]},i.prototype._getEndoBasis=function(e){for(var t,n,i,r,o,a,s,c,u,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,h=this.n.clone(),p=new l(1),m=new l(0),g=new l(0),v=new l(1),b=0;0!==d.cmpn(0);){var y=h.div(d);c=h.sub(y.mul(d)),u=g.sub(y.mul(p));var w=v.sub(y.mul(m));if(!i&&c.cmp(f)<0)t=s.neg(),n=p,i=c.neg(),r=u;else if(i&&2==++b)break;s=c,h=d,d=c,g=p,p=u,v=m,m=w}o=c.neg(),a=u;var _=i.sqr().add(r.sqr());return o.sqr().add(a.sqr()).cmp(_)>=0&&(o=t,a=n),i.negative&&(i=i.neg(),r=r.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:i,b:r},{a:o,b:a}]},i.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],r=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=r.mul(n.a),s=o.mul(i.a),l=r.mul(n.b),c=o.mul(i.b);return{k1:e.sub(a).sub(s),k2:l.add(c).neg()}},i.prototype.pointFromX=function(e,t){(e=new l(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var r=i.fromRed().isOdd();return(t&&!r||!t&&r)&&(i=i.redNeg()),this.point(e,i)},i.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===n.redSqr().redISub(r).cmpn(0)},i.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,r=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],l=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[2*o]=s,i[2*o+1]=l,r[2*o]=a.k1,r[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,i,r,2*o,n),u=0;u<2*o;u++)i[u]=null,r[u]=null;return c},c(r,u.BasePoint),i.prototype.point=function(e,t,n){return new r(this,e,t,n)},i.prototype.pointFromJSON=function(e,t){return r.fromJSON(this,e,t)},r.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},r.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},r.fromJSON=function(e,t,n){function i(t){return e.point(t[0],t[1],n)}"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;var o=t[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},r.prototype.isInfinity=function(){return this.inf},r.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},r.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),r=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),o=r.redSqr().redISub(this.x.redAdd(this.x)),a=r.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},r.prototype.getX=function(){return this.x.fromRed()},r.prototype.getY=function(){return this.y.fromRed()},r.prototype.mul=function(e){return e=new l(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},r.prototype.mulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r):this.curve._wnafMulAdd(1,i,r,2)},r.prototype.jmulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r,!0):this.curve._wnafMulAdd(1,i,r,2,!0)},r.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},r.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t},r.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);return this.curve.jpoint(this.x,this.y,this.curve.one)},c(o,u.BasePoint),i.prototype.jpoint=function(e,t,n){return new o(this,e,t,n)},o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)},o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),r=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),s=i.redSub(r),l=o.redSub(a);if(0===s.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),f=i.redMul(c),d=l.redSqr().redIAdd(u).redISub(f).redISub(f),h=l.redMul(f.redISub(d)).redISub(o.redMul(u)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(d,h,p)},o.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),r=this.y,o=e.y.redMul(t).redMul(this.z),a=n.redSub(i),s=r.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),c=l.redMul(a),u=n.redMul(l),f=s.redSqr().redIAdd(c).redISub(u).redISub(u),d=s.redMul(u.redISub(f)).redISub(r.redMul(c)),h=this.z.redMul(a);return this.curve.jpoint(f,d,h)},o.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}for(var i=this.curve.a,r=this.curve.tinv,o=this.x,a=this.y,s=this.z,l=s.redSqr().redSqr(),c=a.redAdd(a),n=0;n<e;n++){var u=o.redSqr(),f=c.redSqr(),d=f.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(l)),p=o.redMul(f),m=h.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=h.redMul(g);v=v.redIAdd(v).redISub(d);var b=c.redMul(s);n+1<e&&(l=l.redMul(d)),o=m,s=b,c=v}return this.curve.jpoint(o,c.redMul(r),s)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var s=i.redAdd(i).redIAdd(i),l=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=l,t=s.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),d=f.redSqr(),h=this.x.redAdd(f).redSqr().redISub(u).redISub(d);h=h.redIAdd(h);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},o.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var s=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=s.redSqr().redISub(a).redISub(a);e=l;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),d=this.x.redMul(f),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u);var g=f.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=h.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},o.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,r=i.redSqr().redSqr(),o=t.redSqr(),a=n.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(r)),l=t.redAdd(t),c=(l=l.redIAdd(l)).redMul(a),u=s.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),d=a.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var h=s.redMul(f).redISub(d),p=n.redAdd(n).redMul(i);return this.curve.jpoint(u,h,p)},o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),r=e.redAdd(e).redIAdd(e),o=r.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),l=i.redIAdd(i);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=r.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(l),u=t.redMul(c);u=(u=u.redIAdd(u)).redIAdd(u);var f=this.x.redMul(s).redISub(u);f=(f=f.redIAdd(f)).redIAdd(f);var d=this.y.redMul(c.redMul(l.redISub(c)).redISub(a.redMul(s)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var h=this.z.redAdd(a).redSqr().redISub(n).redISub(s);return this.curve.jpoint(f,d,h)},o.prototype.mul=function(e,t){return e=new l(e,t),this.curve._wnafMul(this,e)},o.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),r=n.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(i)).cmpn(0)},o.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var i=e.clone(),r=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(r),0===this.x.cmp(n))return!0}return!1},o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},o.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":83,"../curve":86,"bn.js":20,inherits:117}],89:[function(e,t,n){"use strict";function i(e){"short"===e.type?this.curve=new s.curve.short(e):"edwards"===e.type?this.curve=new s.curve.edwards(e):this.curve=new s.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,l(this.g.validate(),"Invalid curve"),l(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function r(e,t){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){var n=new i(t);return Object.defineProperty(o,e,{configurable:!0,enumerable:!0,value:n}),n}})}var o=n,a=e("hash.js"),s=e("../elliptic"),l=s.utils.assert;o.PresetCurve=i,r("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),r("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),r("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),r("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),r("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),r("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),r("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=e("./precomputed/secp256k1")}catch(e){c=void 0}r("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})},{"../elliptic":83,"./precomputed/secp256k1":96,"hash.js":102}],90:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);"string"==typeof e&&(s(a.curves.hasOwnProperty(e),"Unknown curve "+e),e=a.curves[e]),e instanceof a.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var r=e("bn.js"),o=e("hmac-drbg"),a=e("../../elliptic"),s=a.utils.assert,l=e("./key"),c=e("./signature");t.exports=i,i.prototype.keyPair=function(e){return new l(this,e)},i.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},i.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},i.prototype.genKeyPair=function(e){e||(e={});for(var t=new o({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a.rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new r(2));;){var s=new r(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},i.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},i.prototype.sign=function(e,t,n,i){"object"==typeof n&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new r(e,16));for(var a=this.n.byteLength(),s=t.getPrivate().toArray("be",a),l=e.toArray("be",a),u=new o({hash:this.hash,entropy:s,nonce:l,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new r(1)),d=0;!0;d++){var h=i.k?i.k(d):new r(u.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(f)>=0)){var p=this.g.mul(h);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var v=h.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var b=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return i.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),b^=1),new c({r:g,s:v,recoveryParam:b})}}}}}},i.prototype.verify=function(e,t,n,i){e=this._truncateToN(new r(e,16)),n=this.keyFromPublic(n,i);var o=(t=new c(t,"hex")).r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s=a.invm(this.n),l=s.mul(e).umod(this.n),u=s.mul(o).umod(this.n);if(!this.curve._maxwellTrick){return!(f=this.g.mulAdd(l,n.getPublic(),u)).isInfinity()&&0===f.getX().umod(this.n).cmp(o)}var f=this.g.jmulAdd(l,n.getPublic(),u);return!f.isInfinity()&&f.eqXToP(o)},i.prototype.recoverPubKey=function(e,t,n,i){s((3&n)===n,"The recovery param is more than two bits"),t=new c(t,i);var o=this.n,a=new r(e),l=t.r,u=t.s,f=1&n,d=n>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");l=d?this.curve.pointFromX(l.add(this.curve.n),f):this.curve.pointFromX(l,f);var h=t.r.invm(o),p=o.sub(a).mul(h).umod(o),m=u.mul(h).umod(o);return this.g.mulAdd(p,l,m)},i.prototype.getKeyRecoveryParam=function(e,t,n,i){if(null!==(t=new c(t,i)).recoveryParam)return t.recoveryParam;for(var r=0;r<4;r++){var o;try{o=this.recoverPubKey(e,t,r)}catch(e){continue}if(o.eq(n))return r}throw new Error("Unable to find valid recovery factor")}},{"../../elliptic":83,"./key":91,"./signature":92,"bn.js":20,"hmac-drbg":114}],91:[function(e,t,n){"use strict";function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var r=e("bn.js"),o=e("../../elliptic").utils.assert;t.exports=i,i.fromPublic=function(e,t,n){return t instanceof i?t:new i(e,{pub:t,pubEnc:n})},i.fromPrivate=function(e,t,n){return t instanceof i?t:new i(e,{priv:t,privEnc:n})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?o(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||o(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.mul(this.priv).getX()},i.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":83,"bn.js":20}],92:[function(e,t,n){"use strict";function i(e,t){if(e instanceof i)return e;this._importDER(e,t)||(c(e.r&&e.s,"Signature without r or s"),this.r=new s(e.r,16),this.s=new s(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function r(e,t){var n=e[t.place++];if(!(128&n))return n;for(var i=15&n,r=0,o=0,a=t.place;o<i;o++,a++)r<<=8,r|=e[a];return t.place=a,r}function o(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function a(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}var s=e("bn.js"),l=e("../../elliptic").utils,c=l.assert;t.exports=i,i.prototype._importDER=function(e,t){e=l.toArray(e,t);var n=new function(){this.place=0};if(48!==e[n.place++])return!1;if(r(e,n)+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var i=r(e,n),o=e.slice(n.place,i+n.place);if(n.place+=i,2!==e[n.place++])return!1;var a=r(e,n);if(e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);return 0===o[0]&&128&o[1]&&(o=o.slice(1)),0===c[0]&&128&c[1]&&(c=c.slice(1)),this.r=new s(o),this.s=new s(c),this.recoveryParam=null,!0},i.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=o(t),n=o(n);!(n[0]||128&n[1]);)n=n.slice(1);var i=[2];a(i,t.length),(i=i.concat(t)).push(2),a(i,n.length);var r=i.concat(n),s=[48];return a(s,r.length),s=s.concat(r),l.encode(s,e)}},{"../../elliptic":83,"bn.js":20}],93:[function(e,t,n){"use strict";function i(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof i))return new i(e);e=o.curves[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}var r=e("hash.js"),o=e("../../elliptic"),a=o.utils,s=a.assert,l=a.parseBytes,c=e("./key"),u=e("./signature");t.exports=i,i.prototype.sign=function(e,t){e=l(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),r=this.g.mul(i),o=this.encodePoint(r),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),s=i.add(a).umod(this.curve.n);return this.makeSignature({R:r,S:s,Rencoded:o})},i.prototype.verify=function(e,t,n){e=l(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),r=this.hashInt(t.Rencoded(),i.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(i.pub().mul(r)).eq(o)},i.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},i.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},i.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},i.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},i.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},i.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),i=0!=(128&e[t]),r=a.intFromLE(n);return this.curve.pointFromY(r,i)},i.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},i.prototype.decodeInt=function(e){return a.intFromLE(e)},i.prototype.isPoint=function(e){return e instanceof this.pointClass}},{"../../elliptic":83,"./key":94,"./signature":95,"hash.js":102}],94:[function(e,t,n){"use strict";function i(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}var r=e("../../elliptic").utils,o=r.assert,a=r.parseBytes,s=r.cachedProperty;i.fromPublic=function(e,t){return t instanceof i?t:new i(e,{pub:t})},i.fromSecret=function(e,t){return t instanceof i?t:new i(e,{secret:t})},i.prototype.secret=function(){return this._secret},s(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),s(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),s(i,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i}),s(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),s(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),s(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(e){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},i.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},i.prototype.getSecret=function(e){return o(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},i.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},t.exports=i},{"../../elliptic":83}],95:[function(e,t,n){"use strict";function i(e,t){this.eddsa=e,"object"!=typeof t&&(t=l(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}var r=e("bn.js"),o=e("../../elliptic").utils,a=o.assert,s=o.cachedProperty,l=o.parseBytes;s(i,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),s(i,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),s(i,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),s(i,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),i.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},i.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},t.exports=i},{"../../elliptic":83,"bn.js":20}],96:[function(e,t,n){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],97:[function(e,t,n){"use strict";var i=n,r=e("bn.js"),o=e("minimalistic-assert"),a=e("minimalistic-crypto-utils");i.assert=o,i.toArray=a.toArray,i.zero2=a.zero2,i.toHex=a.toHex,i.encode=a.encode,i.getNAF=function(e,t){for(var n=[],i=1<<t+1,r=e.clone();r.cmpn(1)>=0;){var o;if(r.isOdd()){var a=r.andln(i-1);o=a>(i>>1)-1?(i>>1)-a:a,r.isubn(o)}else o=0;n.push(o);for(var s=0!==r.cmpn(0)&&0===r.andln(i-1)?t+1:1,l=1;l<s;l++)n.push(0);r.iushrn(s)}return n},i.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var i=0,r=0;e.cmpn(-i)>0||t.cmpn(-r)>0;){var o=e.andln(3)+i&3,a=t.andln(3)+r&3;3===o&&(o=-1),3===a&&(a=-1);var s;s=0==(1&o)?0:3!=(c=e.andln(7)+i&7)&&5!==c||2!==a?o:-o,n[0].push(s);var l;if(0==(1&a))l=0;else{var c=t.andln(7)+r&7;l=3!==c&&5!==c||2!==o?a:-a}n[1].push(l),2*i===s+1&&(i=1-i),2*r===l+1&&(r=1-r),e.iushrn(1),t.iushrn(1)}return n},i.cachedProperty=function(e,t,n){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=n.call(this)}},i.parseBytes=function(e){return"string"==typeof e?i.toArray(e,"hex"):e},i.intFromLE=function(e){return new r(e,"hex","le")}},{"bn.js":20,"minimalistic-assert":123,"minimalistic-crypto-utils":124}],98:[function(e,t,n){t.exports={_args:[["elliptic@6.4.0","/var/lib/jenkins/workspace/brilliant-test/build_frontend"]],_development:!0,_from:"elliptic@6.4.0",_id:"elliptic@6.4.0",_inBundle:!1,_integrity:"sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=",_location:"/elliptic",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"elliptic@6.4.0",name:"elliptic",escapedName:"elliptic",rawSpec:"6.4.0",saveSpec:null,fetchSpec:"6.4.0"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz",_spec:"6.4.0",_where:"/var/lib/jenkins/workspace/brilliant-test/build_frontend",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git@github.com:indutny/elliptic"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.4.0"}},{}],99:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),i=(c=n.slice()).length,l=0;l<i;l++)c[l].apply(this,s);return!0},i.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],100:[function(e,t,n){var i=e("safe-buffer").Buffer,r=e("md5.js");t.exports=function(e,t,n,o){if(i.isBuffer(e)||(e=i.from(e,"binary")),t&&(i.isBuffer(t)||(t=i.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=n/8,s=i.alloc(a),l=i.alloc(o||0),c=i.alloc(0);a>0||o>0;){var u=new r;u.update(c),u.update(e),t&&u.update(t),c=u.digest();var f=0;if(a>0){var d=s.length-a;f=Math.min(a,c.length),c.copy(s,d,0,f),a-=f}if(f<c.length&&o>0){var h=l.length-o,p=Math.min(o,c.length-f);c.copy(l,h,f,f+p),o-=p}}return c.fill(0),{key:s,iv:l}}},{"md5.js":120,"safe-buffer":160}],101:[function(e,t,n){(function(n){"use strict";function i(e){r.call(this),this._block=new n(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var r=e("stream").Transform;e("inherits")(i,r),i.prototype._transform=function(e,t,i){var r=null;try{"buffer"!==t&&(e=new n(e,t)),this.update(e)}catch(e){r=e}i(r)},i.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=new n(e,t||"binary"));for(var i=this._block,r=0;this._blockOffset+e.length-r>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)i[o++]=e[r++];this._update(),this._blockOffset=0}for(;r<e.length;)i[this._blockOffset++]=e[r++];for(var a=0,s=8*e.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},i.prototype._update=function(e){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();return void 0!==e&&(t=t.toString(e)),t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=i}).call(this,e("buffer").Buffer)},{buffer:52,inherits:117,stream:169}],102:[function(e,t,n){var i=n;i.utils=e("./hash/utils"),i.common=e("./hash/common"),i.sha=e("./hash/sha"),i.ripemd=e("./hash/ripemd"),i.hmac=e("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":103,"./hash/hmac":104,"./hash/ripemd":105,"./hash/sha":106,"./hash/utils":113}],103:[function(e,t,n){"use strict";function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var r=e("./utils"),o=e("minimalistic-assert");n.BlockHash=i,i.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},i.prototype.digest=function(e){return this.update(this._pad()),o(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var r=1;r<n;r++)i[r]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[r++]=0;i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=e>>>24&255,i[r++]=e>>>16&255,i[r++]=e>>>8&255,i[r++]=255&e}else for(i[r++]=255&e,i[r++]=e>>>8&255,i[r++]=e>>>16&255,i[r++]=e>>>24&255,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,o=8;o<this.padLength;o++)i[r++]=0;return i}},{"./utils":113,"minimalistic-assert":123}],104:[function(e,t,n){"use strict";function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}var r=e("./utils"),o=e("minimalistic-assert");t.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),o(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},{"./utils":113,"minimalistic-assert":123}],105:[function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function r(e,t,n,i){return e<=15?t^n^i:e<=31?t&n|~t&i:e<=47?(t|~n)^i:e<=63?t&i|n&~i:t^(n|~i)}var o=e("./utils"),a=e("./common"),s=o.rotl32,l=o.sum32,c=o.sum32_3,u=o.sum32_4,f=a.BlockHash;o.inherits(i,f),n.ripemd160=i,i.blockSize=512,i.outSize=160,i.hmacStrength=192,i.padLength=64,i.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],f=this.h[4],g=n,v=i,b=o,y=a,w=f,_=0;_<80;_++){var k=l(s(u(n,r(_,i,o,a),e[d[_]+t],function(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}(_)),p[_]),f);n=f,f=a,a=s(o,10),o=i,i=k,k=l(s(u(g,r(79-_,v,b,y),e[h[_]+t],function(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}(_)),m[_]),w),g=w,w=y,y=s(b,10),b=v,v=k}k=c(this.h[1],o,y),this.h[1]=c(this.h[2],a,w),this.h[2]=c(this.h[3],f,g),this.h[3]=c(this.h[4],n,v),this.h[4]=c(this.h[0],i,b),this.h[0]=k},i.prototype._digest=function(e){return"hex"===e?o.toHex32(this.h,"little"):o.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":103,"./utils":113}],106:[function(e,t,n){"use strict";n.sha1=e("./sha/1"),n.sha224=e("./sha/224"),n.sha256=e("./sha/256"),n.sha384=e("./sha/384"),n.sha512=e("./sha/512")},{"./sha/1":107,"./sha/224":108,"./sha/256":109,"./sha/384":110,"./sha/512":111}],107:[function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}var r=e("../utils"),o=e("../common"),a=e("./common"),s=r.rotl32,l=r.sum32,c=r.sum32_5,u=a.ft_1,f=o.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];r.inherits(i,f),t.exports=i,i.blockSize=512,i.outSize=160,i.hmacStrength=80,i.padLength=64,i.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=s(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var r=this.h[0],o=this.h[1],a=this.h[2],f=this.h[3],h=this.h[4];for(i=0;i<n.length;i++){var p=~~(i/20),m=c(s(r,5),u(p,o,a,f),h,n[i],d[p]);h=f,f=a,a=s(o,30),o=r,r=m}this.h[0]=l(this.h[0],r),this.h[1]=l(this.h[1],o),this.h[2]=l(this.h[2],a),this.h[3]=l(this.h[3],f),this.h[4]=l(this.h[4],h)},i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":103,"../utils":113,"./common":112}],108:[function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}var r=e("../utils"),o=e("./256");r.inherits(i,o),t.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},{"../utils":113,"./256":109}],109:[function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}var r=e("../utils"),o=e("../common"),a=e("./common"),s=e("minimalistic-assert"),l=r.sum32,c=r.sum32_4,u=r.sum32_5,f=a.ch32,d=a.maj32,h=a.s0_256,p=a.s1_256,m=a.g0_256,g=a.g1_256,v=o.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];r.inherits(i,v),t.exports=i,i.blockSize=512,i.outSize=256,i.hmacStrength=192,i.padLength=64,i.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=c(g(n[i-2]),n[i-7],m(n[i-15]),n[i-16]);var r=this.h[0],o=this.h[1],a=this.h[2],v=this.h[3],b=this.h[4],y=this.h[5],w=this.h[6],_=this.h[7];for(s(this.k.length===n.length),i=0;i<n.length;i++){var k=u(_,p(b),f(b,y,w),this.k[i],n[i]),x=l(h(r),d(r,o,a));_=w,w=y,y=b,b=l(v,k),v=a,a=o,o=r,r=l(k,x)}this.h[0]=l(this.h[0],r),this.h[1]=l(this.h[1],o),this.h[2]=l(this.h[2],a),this.h[3]=l(this.h[3],v),this.h[4]=l(this.h[4],b),this.h[5]=l(this.h[5],y),this.h[6]=l(this.h[6],w),this.h[7]=l(this.h[7],_)},i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":103,"../utils":113,"./common":112,"minimalistic-assert":123}],110:[function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}var r=e("../utils"),o=e("./512");r.inherits(i,o),t.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},{"../utils":113,"./512":111}],111:[function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}var r=e("../utils"),o=e("../common"),a=e("minimalistic-assert"),s=r.rotr64_hi,l=r.rotr64_lo,c=r.shr64_hi,u=r.shr64_lo,f=r.sum64,d=r.sum64_hi,h=r.sum64_lo,p=r.sum64_4_hi,m=r.sum64_4_lo,g=r.sum64_5_hi,v=r.sum64_5_lo,b=o.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];r.inherits(i,b),t.exports=i,i.blockSize=1024,i.outSize=512,i.hmacStrength=192,i.padLength=128,i.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var r=function(e,t){var n=s(e,t,19)^s(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}(n[i-4],n[i-3]),o=function(e,t){var n=l(e,t,19)^l(t,e,29)^u(e,t,6);return n<0&&(n+=4294967296),n}(n[i-4],n[i-3]),a=n[i-14],f=n[i-13],d=function(e,t){var n=s(e,t,1)^s(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}(n[i-30],n[i-29]),h=function(e,t){var n=l(e,t,1)^l(e,t,8)^u(e,t,7);return n<0&&(n+=4294967296),n}(n[i-30],n[i-29]),g=n[i-32],v=n[i-31];n[i]=p(r,o,a,f,d,h,g,v),n[i+1]=m(r,o,a,f,d,h,g,v)}},i.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],r=this.h[1],o=this.h[2],c=this.h[3],u=this.h[4],p=this.h[5],m=this.h[6],b=this.h[7],y=this.h[8],w=this.h[9],_=this.h[10],k=this.h[11],x=this.h[12],C=this.h[13],S=this.h[14],M=this.h[15];a(this.k.length===n.length);for(var E=0;E<n.length;E+=2){var T=S,A=M,D=function(e,t){var n=s(e,t,14)^s(e,t,18)^s(t,e,9);return n<0&&(n+=4294967296),n}(y,w),L=function(e,t){var n=l(e,t,14)^l(e,t,18)^l(t,e,9);return n<0&&(n+=4294967296),n}(y,w),I=function(e,t,n,i,r){var o=e&n^~e&r;return o<0&&(o+=4294967296),o}(y,0,_,0,x),P=function(e,t,n,i,r,o){var a=t&i^~t&o;return a<0&&(a+=4294967296),a}(0,w,0,k,0,C),O=this.k[E],j=this.k[E+1],q=n[E],N=n[E+1],B=g(T,A,D,L,I,P,O,j,q,N),R=v(T,A,D,L,I,P,O,j,q,N);T=function(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}(i,r),A=function(e,t){var n=l(e,t,28)^l(t,e,2)^l(t,e,7);return n<0&&(n+=4294967296),n}(i,r),D=function(e,t,n,i,r){var o=e&n^e&r^n&r;return o<0&&(o+=4294967296),o}(i,0,o,0,u),L=function(e,t,n,i,r,o){var a=t&i^t&o^i&o;return a<0&&(a+=4294967296),a}(0,r,0,c,0,p);var z=d(T,A,D,L),F=h(T,A,D,L);S=x,M=C,x=_,C=k,_=y,k=w,y=d(m,b,B,R),w=h(b,b,B,R),m=u,b=p,u=o,p=c,o=i,c=r,i=d(B,R,z,F),r=h(B,R,z,F)}f(this.h,0,i,r),f(this.h,2,o,c),f(this.h,4,u,p),f(this.h,6,m,b),f(this.h,8,y,w),f(this.h,10,_,k),f(this.h,12,x,C),f(this.h,14,S,M)},i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":103,"../utils":113,"minimalistic-assert":123}],112:[function(e,t,n){"use strict";function i(e,t,n){return e&t^~e&n}function r(e,t,n){return e&t^e&n^t&n}function o(e,t,n){return e^t^n}var a=e("../utils").rotr32;n.ft_1=function(e,t,n,a){return 0===e?i(t,n,a):1===e||3===e?o(t,n,a):2===e?r(t,n,a):void 0},n.ch32=i,n.maj32=r,n.p32=o,n.s0_256=function(e){return a(e,2)^a(e,13)^a(e,22)},n.s1_256=function(e){return a(e,6)^a(e,11)^a(e,25)},n.g0_256=function(e){return a(e,7)^a(e,18)^e>>>3},n.g1_256=function(e){return a(e,17)^a(e,19)^e>>>10}},{"../utils":113}],113:[function(e,t,n){"use strict";function i(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function r(e){return 1===e.length?"0"+e:e}function o(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}var a=e("minimalistic-assert"),s=e("inherits");n.inherits=s,n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var i=0;i<e.length;i++){var r=e.charCodeAt(i),o=r>>8,a=255&r;o?n.push(o,a):n.push(a)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},n.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t},n.htonl=i,n.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var a=e[r];"little"===t&&(a=i(a)),n+=o(a.toString(16))}return n},n.zero2=r,n.zero8=o,n.join32=function(e,t,n,i){var r=n-t;a(r%4==0);for(var o=new Array(r/4),s=0,l=t;s<o.length;s++,l+=4){var c;c="big"===i?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],o[s]=c>>>0}return o},n.split32=function(e,t){for(var n=new Array(4*e.length),i=0,r=0;i<e.length;i++,r+=4){var o=e[i];"big"===t?(n[r]=o>>>24,n[r+1]=o>>>16&255,n[r+2]=o>>>8&255,n[r+3]=255&o):(n[r+3]=o>>>24,n[r+2]=o>>>16&255,n[r+1]=o>>>8&255,n[r]=255&o)}return n},n.rotr32=function(e,t){return e>>>t|e<<32-t},n.rotl32=function(e,t){return e<<t|e>>>32-t},n.sum32=function(e,t){return e+t>>>0},n.sum32_3=function(e,t,n){return e+t+n>>>0},n.sum32_4=function(e,t,n,i){return e+t+n+i>>>0},n.sum32_5=function(e,t,n,i,r){return e+t+n+i+r>>>0},n.sum64=function(e,t,n,i){var r=e[t],o=i+e[t+1]>>>0,a=(o<i?1:0)+n+r;e[t]=a>>>0,e[t+1]=o},n.sum64_hi=function(e,t,n,i){return(t+i>>>0<t?1:0)+e+n>>>0},n.sum64_lo=function(e,t,n,i){return t+i>>>0},n.sum64_4_hi=function(e,t,n,i,r,o,a,s){var l=0,c=t;return l+=(c=c+i>>>0)<t?1:0,l+=(c=c+o>>>0)<o?1:0,e+n+r+a+(l+=(c=c+s>>>0)<s?1:0)>>>0},n.sum64_4_lo=function(e,t,n,i,r,o,a,s){return t+i+o+s>>>0},n.sum64_5_hi=function(e,t,n,i,r,o,a,s,l,c){var u=0,f=t;return u+=(f=f+i>>>0)<t?1:0,u+=(f=f+o>>>0)<o?1:0,u+=(f=f+s>>>0)<s?1:0,e+n+r+a+l+(u+=(f=f+c>>>0)<c?1:0)>>>0},n.sum64_5_lo=function(e,t,n,i,r,o,a,s,l,c){return t+i+o+s+c>>>0},n.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},n.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},n.shr64_hi=function(e,t,n){return e>>>n},n.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},{inherits:117,"minimalistic-assert":123}],114:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=o.toArray(e.entropy,e.entropyEnc||"hex"),n=o.toArray(e.nonce,e.nonceEnc||"hex"),r=o.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}var r=e("hash.js"),o=e("minimalistic-crypto-utils"),a=e("minimalistic-assert");t.exports=i,i.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},i.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(e,t,n,i){"string"!=typeof t&&(i=n,n=t,t=null),e=o.toArray(e,t),n=o.toArray(n,i),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},i.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=n,n=t,t=null),n&&(n=o.toArray(n,i||"hex"),this._update(n));for(var r=[];r.length<e;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var a=r.slice(0,e);return this._update(n),this._reseed++,o.encode(a,t)}},{"hash.js":102,"minimalistic-assert":123,"minimalistic-crypto-utils":124}],115:[function(e,t,n){n.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,f=n?r-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-u)-1,h>>=-u,u+=s;u>0;o=256*o+e[t+f],f+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+f],f+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,i),o-=c}return(h?-1:1)*a*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,f=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:o-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=u?(s=0,a=u):a+f>=1?(s=(t*l-1)*Math.pow(2,r),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,r),a=0));r>=8;e[n+h]=255&s,h+=p,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*m}},{}],116:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],117:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],118:[function(e,t,n){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(i(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],119:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],120:[function(e,t,n){(function(n){"use strict";function i(){u.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function r(e,t){return e<<t|e>>>32-t}function o(e,t,n,i,o,a,s){return r(e+(t&n|~t&i)+o+a|0,s)+t|0}function a(e,t,n,i,o,a,s){return r(e+(t&i|n&~i)+o+a|0,s)+t|0}function s(e,t,n,i,o,a,s){return r(e+(t^n^i)+o+a|0,s)+t|0}function l(e,t,n,i,o,a,s){return r(e+(n^(t|~i))+o+a|0,s)+t|0}var c=e("inherits"),u=e("hash-base"),f=new Array(16);c(i,u),i.prototype._update=function(){for(var e=f,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,i=this._b,r=this._c,c=this._d;i=l(i=l(i=l(i=l(i=s(i=s(i=s(i=s(i=a(i=a(i=a(i=a(i=o(i=o(i=o(i=o(i,r=o(r,c=o(c,n=o(n,i,r,c,e[0],3614090360,7),i,r,e[1],3905402710,12),n,i,e[2],606105819,17),c,n,e[3],3250441966,22),r=o(r,c=o(c,n=o(n,i,r,c,e[4],4118548399,7),i,r,e[5],1200080426,12),n,i,e[6],2821735955,17),c,n,e[7],4249261313,22),r=o(r,c=o(c,n=o(n,i,r,c,e[8],1770035416,7),i,r,e[9],2336552879,12),n,i,e[10],4294925233,17),c,n,e[11],2304563134,22),r=o(r,c=o(c,n=o(n,i,r,c,e[12],1804603682,7),i,r,e[13],4254626195,12),n,i,e[14],2792965006,17),c,n,e[15],1236535329,22),r=a(r,c=a(c,n=a(n,i,r,c,e[1],4129170786,5),i,r,e[6],3225465664,9),n,i,e[11],643717713,14),c,n,e[0],3921069994,20),r=a(r,c=a(c,n=a(n,i,r,c,e[5],3593408605,5),i,r,e[10],38016083,9),n,i,e[15],3634488961,14),c,n,e[4],3889429448,20),r=a(r,c=a(c,n=a(n,i,r,c,e[9],568446438,5),i,r,e[14],3275163606,9),n,i,e[3],4107603335,14),c,n,e[8],1163531501,20),r=a(r,c=a(c,n=a(n,i,r,c,e[13],2850285829,5),i,r,e[2],4243563512,9),n,i,e[7],1735328473,14),c,n,e[12],2368359562,20),r=s(r,c=s(c,n=s(n,i,r,c,e[5],4294588738,4),i,r,e[8],2272392833,11),n,i,e[11],1839030562,16),c,n,e[14],4259657740,23),r=s(r,c=s(c,n=s(n,i,r,c,e[1],2763975236,4),i,r,e[4],1272893353,11),n,i,e[7],4139469664,16),c,n,e[10],3200236656,23),r=s(r,c=s(c,n=s(n,i,r,c,e[13],681279174,4),i,r,e[0],3936430074,11),n,i,e[3],3572445317,16),c,n,e[6],76029189,23),r=s(r,c=s(c,n=s(n,i,r,c,e[9],3654602809,4),i,r,e[12],3873151461,11),n,i,e[15],530742520,16),c,n,e[2],3299628645,23),r=l(r,c=l(c,n=l(n,i,r,c,e[0],4096336452,6),i,r,e[7],1126891415,10),n,i,e[14],2878612391,15),c,n,e[5],4237533241,21),r=l(r,c=l(c,n=l(n,i,r,c,e[12],1700485571,6),i,r,e[3],2399980690,10),n,i,e[10],4293915773,15),c,n,e[1],2240044497,21),r=l(r,c=l(c,n=l(n,i,r,c,e[8],1873313359,6),i,r,e[15],4264355552,10),n,i,e[6],2734768916,15),c,n,e[13],1309151649,21),r=l(r,c=l(c,n=l(n,i,r,c,e[4],4149444226,6),i,r,e[11],3174756917,10),n,i,e[2],718787259,15),c,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+i|0,this._c=this._c+r|0,this._d=this._d+c|0},i.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new n(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},t.exports=i}).call(this,e("buffer").Buffer)},{buffer:52,"hash-base":121,inherits:117}],121:[function(e,t,n){"use strict";function i(e){o.call(this),this._block=r.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var r=e("safe-buffer").Buffer,o=e("stream").Transform;e("inherits")(i,o),i.prototype._transform=function(e,t,n){var i=null;try{this.update(e,t)}catch(e){i=e}n(i)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(e)||(e=r.from(e,t));for(var n=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)n[this._blockOffset++]=e[i++];for(var a=0,s=8*e.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=i},{inherits:117,"safe-buffer":160,stream:169}],122:[function(e,t,n){function i(e){this.rand=e||new o.Rand}var r=e("bn.js"),o=e("brorand");t.exports=i,i.create=function(e){return new i(e)},i.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var i=new r(this.rand.generate(n))}while(i.cmp(e)>=0);return i},i.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},i.prototype.test=function(e,t,n){var i=e.bitLength(),o=r.mont(e),a=new r(1).toRed(o);t||(t=Math.max(1,i/48|0));for(var s=e.subn(1),l=0;!s.testn(l);l++);for(var c=e.shrn(l),u=s.toRed(o);t>0;t--){var f=this._randrange(new r(2),s);n&&n(f);var d=f.toRed(o).redPow(c);if(0!==d.cmp(a)&&0!==d.cmp(u)){for(var h=1;h<l;h++){if(0===(d=d.redSqr()).cmp(a))return!1;if(0===d.cmp(u))break}if(h===l)return!1}}return!0},i.prototype.getDivisor=function(e,t){var n=e.bitLength(),i=r.mont(e),o=new r(1).toRed(i);t||(t=Math.max(1,n/48|0));for(var a=e.subn(1),s=0;!a.testn(s);s++);for(var l=e.shrn(s),c=a.toRed(i);t>0;t--){var u=this._randrange(new r(2),a),f=e.gcd(u);if(0!==f.cmpn(1))return f;var d=u.toRed(i).redPow(l);if(0!==d.cmp(o)&&0!==d.cmp(c)){for(var h=1;h<s;h++){if(0===(d=d.redSqr()).cmp(o))return d.fromRed().subn(1).gcd(e);if(0===d.cmp(c))break}if(h===s)return(d=d.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},{"bn.js":20,brorand:22}],123:[function(e,t,n){function i(e,t){if(!e)throw new Error(t||"Assertion failed")}t.exports=i,i.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},{}],124:[function(e,t,n){"use strict";function i(e){return 1===e.length?"0"+e:e}function r(e){for(var t="",n=0;n<e.length;n++)t+=i(e[n].toString(16));return t}var o=n;o.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(i=0;i<e.length;i++)n[i]=0|e[i];return n}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16));else for(var i=0;i<e.length;i++){var r=e.charCodeAt(i),o=r>>8,a=255&r;o?n.push(o,a):n.push(a)}return n},o.zero2=i,o.toHex=r,o.encode=function(e,t){return"hex"===t?r(e):e}},{}],125:[function(e,t,n){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],126:[function(e,t,n){"use strict";var i=e("asn1.js");n.certificate=e("./certificate");var r=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});n.RSAPrivateKey=r;var o=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});n.RSAPublicKey=o;var a=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});n.PublicKey=a;var s=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});n.PrivateKey=l;var c=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});n.EncryptedPrivateKey=c;var u=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});n.DSAPrivateKey=u,n.DSAparam=i.define("DSAparam",function(){this.int()});var f=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(d),this.key("publicKey").optional().explicit(1).bitstr())});n.ECPrivateKey=f;var d=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});n.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":127,"asn1.js":5}],127:[function(e,t,n){"use strict";var i=e("asn1.js"),r=i.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=i.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional())}),s=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),l=i.define("RelativeDistinguishedName",function(){this.setof(o)}),c=i.define("RDNSequence",function(){this.seqof(l)}),u=i.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),f=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))}),d=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),h=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(u),this.key("validity").use(f),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())}),p=i.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});t.exports=p},{"asn1.js":5}],128:[function(e,t,n){(function(n){var i=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,r=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n/m,o=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?-----END \1-----$/m,a=e("evp_bytestokey"),s=e("browserify-aes");t.exports=function(e,t){var l,c=e.toString(),u=c.match(i);if(u){var f="aes"+u[1],d=new n(u[2],"hex"),h=new n(u[3].replace(/\r?\n/g,""),"base64"),p=a(t,d.slice(0,8),parseInt(u[1],10)).key,m=[],g=s.createDecipheriv(f,p,d);m.push(g.update(h)),m.push(g.final()),l=n.concat(m)}else{var v=c.match(o);l=new n(v[2].replace(/\r?\n/g,""),"base64")}return{tag:c.match(r)[1],data:l}}}).call(this,e("buffer").Buffer)},{"browserify-aes":26,buffer:52,evp_bytestokey:100}],129:[function(e,t,n){(function(n){function i(e){var t;"object"!=typeof e||n.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=new n(e));var i,c,u=a(e,t),f=u.tag,d=u.data;switch(f){case"CERTIFICATE":c=r.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=r.PublicKey.decode(d,"der")),i=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+i)}throw new Error("unknown key type "+f);case"ENCRYPTED PRIVATE KEY":d=function(e,t){var i=e.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),a=o[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,f=parseInt(a.split("-")[1],10)/8,d=l.pbkdf2Sync(t,i,r,f),h=s.createDecipheriv(a,d,c),p=[];return p.push(h.update(u)),p.push(h.final()),n.concat(p)}(d=r.EncryptedPrivateKey.decode(d,"der"),t);case"PRIVATE KEY":switch(c=r.PrivateKey.decode(d,"der"),i=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+i)}throw new Error("unknown key type "+f);case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return d=r.ECPrivateKey.decode(d,"der"),{curve:d.parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+f)}}var r=e("./asn1"),o=e("./aesid.json"),a=e("./fixProc"),s=e("browserify-aes"),l=e("pbkdf2");t.exports=i,i.signature=r.signature}).call(this,e("buffer").Buffer)},{"./aesid.json":125,"./asn1":126,"./fixProc":128,"browserify-aes":26,buffer:52,pbkdf2:131}],130:[function(e,t,n){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};!function(e,n){void 0!==t&&null!==t?t.exports=n():"function"==typeof define&&"object"==typeof define.amd?define("payform",n):this.payform=n()}(0,function(){var t,n,i,r,o,a,s,l,c,u,f,d,h,p,m,g,v,b,y,w,_,k,x;return n=function(e){var t,n,i;return null!=e.selectionStart?e.selectionStart:null!=document.selection?(e.focus(),t=document.selection.createRange(),i=e.createTextRange(),n=i.duplicate(),i.moveToBookmark(t.getBookmark()),n.setEndPoint("EndToStart",i),n.text.length):void 0},t=function(e){return function(t){return null==t&&(t=window.event),t.target=t.target||t.srcElement,t.which=t.which||t.keyCode,null==t.preventDefault&&(t.preventDefault=function(){return this.returnValue=!1}),e(t)}},i=function(e,n,i){return i=t(i),null!=e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent("on"+n,i)},m={},a=/(\d{1,4})/g,m.cards=[{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5(018|0[23]|[68])|6(39|7))/,format:a,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",pattern:/^600/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",pattern:/^5019/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:a,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^(5[1-5]|2[2-7])/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",pattern:/^3[0689]/,format:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,2})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^6([045]|22)/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^(62|88)/,format:a,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",pattern:/^35/,format:a,length:[16],cvcLength:[3],luhn:!0}],r=function(e){var t,n,i,r;for(e=(e+"").replace(/\D/g,""),n=0,i=(r=m.cards).length;n<i;n++)if((t=r[n]).pattern.test(e))return t},o=function(e){var t,n,i,r;for(n=0,i=(r=m.cards).length;n<i;n++)if((t=r[n]).type===e)return t},p=function(e){var t,n,i,r,o,a;for(o=!0,a=0,i=0,r=(n=(e+"").split("").reverse()).length;i<r;i++)t=n[i],t=parseInt(t,10),(o=!o)&&(t*=2),t>9&&(t-=9),a+=t;return a%10==0},h=function(e){var t;return!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)||null!=e.selectionStart&&e.selectionStart!==e.selectionEnd},y=function(e){var t,n,i,r,o,a;for(null==e&&(e=""),"","0123456789",a="",i=0,o=(n=e.split("")).length;i<o;i++)t=n[i],(r="".indexOf(t))>-1&&(t="0123456789"[r]),a+=t;return a},v=function(e){var t;if(t=n(e.target),e.target.value=m.formatCardNumber(e.target.value),null!=t&&"change"!==e.type)return e.target.setSelectionRange(t,t)},u=function(e){var t,i,o,a,s,l,c;if(o=String.fromCharCode(e.which),/^\d+$/.test(o)&&(c=e.target.value,t=r(c+o),a=(c.replace(/\D/g,"")+o).length,l=16,t&&(l=t.length[t.length.length-1]),!(a>=l||(i=n(e.target))&&i!==c.length)))return(s=t&&"amex"===t.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(c)?(e.preventDefault(),setTimeout(function(){return e.target.value=c+" "+o})):s.test(c+o)?(e.preventDefault(),setTimeout(function(){return e.target.value=c+o+" "})):void 0},s=function(e){var t,i;if(i=e.target.value,8===e.which&&(!(t=n(e.target))||t===i.length))return/\d\s$/.test(i)?(e.preventDefault(),setTimeout(function(){return e.target.value=i.replace(/\d\s$/,"")})):/\s\d?$/.test(i)?(e.preventDefault(),setTimeout(function(){return e.target.value=i.replace(/\d$/,"")})):void 0},b=function(e){var t;if(t=n(e.target),e.target.value=m.formatCardExpiry(e.target.value),null!=t&&"change"!==e.type)return e.target.setSelectionRange(t,t)},c=function(e){var t,n;if(t=String.fromCharCode(e.which),/^\d+$/.test(t))return n=e.target.value+t,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),setTimeout(function(){return e.target.value="0"+n+" / "})):/^\d\d$/.test(n)?(e.preventDefault(),setTimeout(function(){return e.target.value=n+" / "})):void 0},f=function(e){var t,n;if(t=String.fromCharCode(e.which),/^\d+$/.test(t))return n=e.target.value,/^\d\d$/.test(n)?e.target.value=n+" / ":void 0},d=function(e){var t,n;if("/"===(n=String.fromCharCode(e.which))||" "===n)return t=e.target.value,/^\d$/.test(t)&&"0"!==t?e.target.value="0"+t+" / ":void 0},l=function(e){var t,i;if(i=e.target.value,8===e.which&&(!(t=n(e.target))||t===i.length))return/\d\s\/\s$/.test(i)?(e.preventDefault(),setTimeout(function(){return e.target.value=i.replace(/\d\s\/\s$/,"")})):void 0},g=function(e){var t;if(t=n(e.target),e.target.value=y(e.target.value).replace(/\D/g,"").slice(0,4),null!=t&&"change"!==e.type)return e.target.setSelectionRange(t,t)},x=function(e){var t;if(!(e.metaKey||e.ctrlKey||0===e.which||e.which<33))return t=String.fromCharCode(e.which),/^\d+$/.test(t)?void 0:e.preventDefault()},_=function(e){var t,n,i;if(n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!h(e.target))return i=(e.target.value+n).replace(/\D/g,""),(t=r(i))&&i.length>t.length[t.length.length-1]?e.preventDefault():i.length>16?e.preventDefault():void 0},k=function(e){var t,n;if(t=String.fromCharCode(e.which),/^\d+$/.test(t)&&!h(e.target))return n=e.target.value+t,(n=n.replace(/\D/g,"")).length>6?e.preventDefault():void 0},w=function(e){var t;if(t=String.fromCharCode(e.which),/^\d+$/.test(t)&&!h(e.target))return(e.target.value+t).length>4?e.preventDefault():void 0},m.cvcInput=function(e){return i(e,"keypress",x),i(e,"keypress",w),i(e,"paste",g),i(e,"change",g),i(e,"input",g)},m.expiryInput=function(e){return i(e,"keypress",x),i(e,"keypress",k),i(e,"keypress",c),i(e,"keypress",d),i(e,"keypress",f),i(e,"keydown",l),i(e,"change",b),i(e,"input",b)},m.cardNumberInput=function(e){return i(e,"keypress",x),i(e,"keypress",_),i(e,"keypress",u),i(e,"keydown",s),i(e,"paste",v),i(e,"change",v),i(e,"input",v)},m.numericInput=function(e){return i(e,"keypress",x),i(e,"paste",x),i(e,"change",x),i(e,"input",x)},m.parseCardExpiry=function(e){var t,n,i;return e=e.replace(/\s/g,""),n=e.split("/",2),t=n[0],2===(null!=(i=n[1])?i.length:void 0)&&/^\d+$/.test(i)&&(i=(new Date).getFullYear().toString().slice(0,2)+i),t=parseInt(t,10),i=parseInt(i,10),{month:t,year:i}},m.validateCardNumber=function(t){var n,i;return t=(t+"").replace(/\s+|-/g,""),!!/^\d+$/.test(t)&&(!!(n=r(t))&&(i=t.length,e.call(n.length,i)>=0&&(!1===n.luhn||p(t))))},m.validateCardExpiry=function(e,t){var n,i,r;return"object"==typeof e&&"month"in e&&(e=(r=e).month,t=r.year),!(!e||!t)&&(e=String(e).trim(),t=String(t).trim(),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(1<=e&&e<=12&&(2===t.length&&(t=t<70?"20"+t:"19"+t),4===t.length&&(i=new Date(t,e),n=new Date,i.setMonth(i.getMonth()-1),i.setMonth(i.getMonth()+1,1),i>n)))))},m.validateCardCVC=function(t,n){var i,r;return t=String(t).trim(),!!/^\d+$/.test(t)&&(null!=(i=o(n))?(r=t.length,e.call(i.cvcLength,r)>=0):t.length>=3&&t.length<=4)},m.parseCardType=function(e){var t;return e?(null!=(t=r(e))?t.type:void 0)||null:null},m.formatCardNumber=function(e){var t,n,i,o;return e=y(e),e=e.replace(/\D/g,""),(t=r(e))?(o=t.length[t.length.length-1],e=e.slice(0,o),t.format.global?null!=(i=e.match(t.format))?i.join(" "):void 0:null!=(n=t.format.exec(e))?(n.shift(),(n=n.filter(Boolean)).join(" ")):void 0):e},m.formatCardExpiry=function(e){var t,n,i,r;return e=y(e),(n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(t=n[1]||"",i=n[2]||"",(r=n[3]||"").length>0?i=" / ":" /"===i?(t=t.substring(0,1),i=""):2===t.length||i.length>0?i=" / ":1===t.length&&"0"!==t&&"1"!==t&&(t="0"+t,i=" / "),t+i+r):""},m})}).call(this)},{}],131:[function(e,t,n){n.pbkdf2=e("./lib/async"),n.pbkdf2Sync=e("./lib/sync")},{"./lib/async":132,"./lib/sync":135}],132:[function(e,t,n){(function(n,i){function r(e,t,n,i,r){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:r}},e,i<<3)}).then(function(e){return c.from(e)})}var o,a=e("./precondition"),s=e("./default-encoding"),l=e("./sync"),c=e("safe-buffer").Buffer,u=i.crypto&&i.crypto.subtle,f={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];t.exports=function(e,t,h,p,m,g){if(c.isBuffer(e)||(e=c.from(e,s)),c.isBuffer(t)||(t=c.from(t,s)),a(h,p),"function"==typeof m&&(g=m,m=void 0),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");var v=f[(m=m||"sha1").toLowerCase()];if(!v||"function"!=typeof i.Promise)return n.nextTick(function(){var n;try{n=l(e,t,h,p,m)}catch(e){return g(e)}g(null,n)});!function(e,t){e.then(function(e){n.nextTick(function(){t(null,e)})},function(e){n.nextTick(function(){t(e)})})}(function(e){if(i.process&&!i.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==d[e])return d[e];var t=r(o=o||c.alloc(8),o,10,128,e).then(function(){return!0}).catch(function(){return!1});return d[e]=t,t}(v).then(function(n){return n?r(e,t,h,p,v):l(e,t,h,p,m)}),g)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-encoding":133,"./precondition":134,"./sync":135,_process:137,"safe-buffer":160}],133:[function(e,t,n){(function(e){var n;if(e.browser)n="utf-8";else{n=parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}t.exports=n}).call(this,e("_process"))},{_process:137}],134:[function(e,t,n){var i=Math.pow(2,30)-1;t.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>i||t!=t)throw new TypeError("Bad key length")}},{}],135:[function(e,t,n){function i(e,t,n){var i=function(e){return"rmd160"===e||"ripemd160"===e?o:"md5"===e?r:function(t){return a(e).update(t).digest()}}(e),s="sha512"===e||"sha384"===e?128:64;t.length>s?t=i(t):t.length<s&&(t=c.concat([t,u],s));for(var l=c.allocUnsafe(s+f[e]),d=c.allocUnsafe(s+f[e]),h=0;h<s;h++)l[h]=54^t[h],d[h]=92^t[h];var p=c.allocUnsafe(s+n+4);l.copy(p,0,0,s),this.ipad1=p,this.ipad2=l,this.opad=d,this.alg=e,this.blocksize=s,this.hash=i,this.size=f[e]}var r=e("create-hash/md5"),o=e("ripemd160"),a=e("sha.js"),s=e("./precondition"),l=e("./default-encoding"),c=e("safe-buffer").Buffer,u=c.alloc(128),f={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};i.prototype.run=function(e,t){e.copy(t,this.blocksize);return this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(e,t,n,r,o){c.isBuffer(e)||(e=c.from(e,l)),c.isBuffer(t)||(t=c.from(t,l)),s(n,r);var a=new i(o=o||"sha1",e,t.length),u=c.allocUnsafe(r),d=c.allocUnsafe(t.length+4);t.copy(d,0,0,t.length);for(var h=0,p=f[o],m=Math.ceil(r/p),g=1;g<=m;g++){d.writeUInt32BE(g,t.length);for(var v=a.run(d,a.ipad1),b=v,y=1;y<n;y++){b=a.run(b,a.ipad2);for(var w=0;w<p;w++)v[w]^=b[w]}v.copy(u,h),h+=p}return u}},{"./default-encoding":133,"./precondition":134,"create-hash/md5":69,ripemd160:159,"safe-buffer":160,"sha.js":162}],136:[function(e,t,n){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(this,e("_process"))},{_process:137}],137:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function a(){m&&h&&(m=!1,h.length?p=h.concat(p):g=-1,p.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,m=!1,function(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,f,d=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(e){u=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],138:[function(e,t,n){n.publicEncrypt=e("./publicEncrypt"),n.privateDecrypt=e("./privateDecrypt"),n.privateEncrypt=function(e,t){return n.publicEncrypt(e,t,!0)},n.publicDecrypt=function(e,t){return n.privateDecrypt(e,t,!0)}},{"./privateDecrypt":140,"./publicEncrypt":141}],139:[function(e,t,n){(function(n){var i=e("create-hash");t.exports=function(e,t){for(var r,o=new n(""),a=0;o.length<t;)r=function(e){var t=new n(4);return t.writeUInt32BE(e,0),t}(a++),o=n.concat([o,i("sha1").update(e).update(r).digest()]);return o.slice(0,t)}}).call(this,e("buffer").Buffer)},{buffer:52,"create-hash":67}],140:[function(e,t,n){(function(n){function i(e,t){e.modulus;var i=e.modulus.byteLength(),r=(t.length,c("sha1").update(new n("")).digest()),s=r.length;if(0!==t[0])throw new Error("decryption error");var l=t.slice(1,s+1),u=t.slice(s+1),f=a(l,o(u,s)),d=a(u,o(f,i-s-1));if(function(e,t){e=new n(e),t=new n(t);var i=0,r=e.length;e.length!==t.length&&(i++,r=Math.min(e.length,t.length));var o=-1;for(;++o<r;)i+=e[o]^t[o];return i}(r,d.slice(0,s)))throw new Error("decryption error");for(var h=s;0===d[h];)h++;if(1!==d[h++])throw new Error("decryption error");return d.slice(h)}var r=e("parse-asn1"),o=e("./mgf"),a=e("./xor"),s=e("bn.js"),l=e("browserify-rsa"),c=e("create-hash"),u=e("./withPublic");t.exports=function(e,t,o){var a;a=e.padding?e.padding:o?1:4;var c=r(e),f=c.modulus.byteLength();if(t.length>f||new s(t).cmp(c.modulus)>=0)throw new Error("decryption error");var d;d=o?u(new s(t),c):l(t,c);var h=new n(f-d.length);if(h.fill(0),d=n.concat([h,d],f),4===a)return i(c,d);if(1===a)return function(e,t,n){for(var i=t.slice(0,2),r=2,o=0;0!==t[r++];)if(r>=t.length){o++;break}var a=t.slice(2,r-1);if(t.slice(r-1,r),("0002"!==i.toString("hex")&&!n||"0001"!==i.toString("hex")&&n)&&o++,a.length<8&&o++,o)throw new Error("decryption error");return t.slice(r)}(0,d,o);if(3===a)return d;throw new Error("unknown padding")}}).call(this,e("buffer").Buffer)},{"./mgf":139,"./withPublic":142,"./xor":143,"bn.js":20,"browserify-rsa":44,buffer:52,"create-hash":67,"parse-asn1":129}],141:[function(e,t,n){(function(n){function i(e,t,i){var r=t.length,a=e.modulus.byteLength();if(r>a-11)throw new Error("message too long");var s;return i?(s=new n(a-r-3)).fill(255):s=function(e,t){var i,r=new n(e),a=0,s=o(2*e),l=0;for(;a<e;)l===s.length&&(s=o(2*e),l=0),(i=s[l++])&&(r[a++]=i);return r}(a-r-3),new c(n.concat([new n([0,i?1:2]),s,new n([0]),t],a))}var r=e("parse-asn1"),o=e("randombytes"),a=e("create-hash"),s=e("./mgf"),l=e("./xor"),c=e("bn.js"),u=e("./withPublic"),f=e("browserify-rsa");t.exports=function(e,t,d){var h;h=e.padding?e.padding:d?1:4;var p,m=r(e);if(4===h)p=function(e,t){var i=e.modulus.byteLength(),r=t.length,u=a("sha1").update(new n("")).digest(),f=u.length,d=2*f;if(r>i-d-2)throw new Error("message too long");var h=new n(i-r-d-2);h.fill(0);var p=i-f-1,m=o(f),g=l(n.concat([u,h,new n([1]),t],p),s(m,p)),v=l(m,s(g,f));return new c(n.concat([new n([0]),v,g],i))}(m,t);else if(1===h)p=i(m,t,d);else{if(3!==h)throw new Error("unknown padding");if((p=new c(t)).cmp(m.modulus)>=0)throw new Error("data too long for modulus")}return d?f(p,m):u(p,m)}}).call(this,e("buffer").Buffer)},{"./mgf":139,"./withPublic":142,"./xor":143,"bn.js":20,"browserify-rsa":44,buffer:52,"create-hash":67,"parse-asn1":129,randombytes:144}],142:[function(e,t,n){(function(n){var i=e("bn.js");t.exports=function(e,t){return new n(e.toRed(i.mont(t.modulus)).redPow(new i(t.publicExponent)).fromRed().toArray())}}).call(this,e("buffer").Buffer)},{"bn.js":20,buffer:52}],143:[function(e,t,n){t.exports=function(e,t){for(var n=e.length,i=-1;++i<n;)e[i]^=t[i];return e}},{}],144:[function(e,t,n){(function(n,i){"use strict";var r=e("safe-buffer").Buffer,o=i.crypto||i.msCrypto;o&&o.getRandomValues?t.exports=function(e,t){if(e>65536)throw new Error("requested too many random bytes");var a=new i.Uint8Array(e);e>0&&o.getRandomValues(a);var s=r.from(a.buffer);return"function"==typeof t?n.nextTick(function(){t(null,s)}):s}:t.exports=function(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:137,"safe-buffer":160}],145:[function(e,t,n){(function(t,i){"use strict";function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function o(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>h||e<0)throw new TypeError("offset must be a uint32");if(e>f||e>t)throw new RangeError("offset out of range")}function a(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>h||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>f)throw new RangeError("buffer too small")}function s(e,n,i,r){if(t.browser){var o=e.buffer,a=new Uint8Array(o,n,i);return d.getRandomValues(a),r?void t.nextTick(function(){r(null,e)}):e}{if(!r){return c(i).copy(e,n),e}c(i,function(t,i){if(t)return r(t);i.copy(e,n),r(null,e)})}}var l=e("safe-buffer"),c=e("randombytes"),u=l.Buffer,f=l.kMaxLength,d=i.crypto||i.msCrypto,h=Math.pow(2,32)-1;d&&d.getRandomValues||!t.browser?(n.randomFill=function(e,t,n,r){if(!(u.isBuffer(e)||e instanceof i.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)r=t,t=0,n=e.length;else if("function"==typeof n)r=n,n=e.length-t;else if("function"!=typeof r)throw new TypeError('"cb" argument must be a function');return o(t,e.length),a(n,t,e.length),s(e,t,n,r)},n.randomFillSync=function(e,t,n){if(void 0===t&&(t=0),!(u.isBuffer(e)||e instanceof i.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return o(t,e.length),void 0===n&&(n=e.length-t),a(n,t,e.length),s(e,t,n)}):(n.randomFill=r,n.randomFillSync=r)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:137,randombytes:144,"safe-buffer":160}],146:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":147}],147:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);c.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",r)}function r(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var a=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=i;var l=e("core-util-is");l.inherits=e("inherits");var c=e("./_stream_readable"),u=e("./_stream_writable");l.inherits(i,c);for(var f=s(u.prototype),d=0;d<f.length;d++){var h=f[d];i.prototype[h]||(i.prototype[h]=u.prototype[h])}Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),i.prototype._destroy=function(e,t){this.push(null),this.end(),a(t,e)}},{"./_stream_readable":149,"./_stream_writable":151,"core-util-is":65,inherits:117,"process-nextick-args":136}],148:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}t.exports=i;var r=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":150,"core-util-is":65,inherits:117}],149:[function(e,t,n){(function(n,i){"use strict";function r(t,n){_=_||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof _&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new L,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(D||(D=e("string_decoder/").StringDecoder),this.decoder=new D(t.encoding),this.encoding=t.encoding)}function o(t){if(_=_||e("./_stream_duplex"),!(this instanceof o))return new o(t);this._readableState=new r(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),C.call(this)}function a(e,t,n,i,r){var o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,c(e)}(e,o);else{var a;r||(a=function(e,t){var n;(function(e){return S.isBuffer(e)||e instanceof M})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===S.prototype||(t=function(e){return S.from(e)}(t)),i?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):s(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?s(e,o,t,!1):f(e,o)):s(e,o,t,!1))):i||(o.reading=!1)}return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function s(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&c(e)),f(e,t)}function l(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function c(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(A("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?w(u,e):u(e))}function u(e){A("emit readable"),e.emit("readable"),m(e)}function f(e,t){t.readingMore||(t.readingMore=!0,w(d,e,t))}function d(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(A("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function h(e){A("readable nexttick read 0"),e.read(0)}function p(e,t){t.reading||(A("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),m(e),t.flowing&&!t.reading&&e.read(0)}function m(e){var t=e._readableState;for(A("flow",t.flowing);t.flowing&&null!==e.read(););}function g(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,i=1,r=n.data;e-=r.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?r+=o:r+=o.slice(0,e),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t):function(e,t){var n=S.allocUnsafe(e),i=t.head,r=1;i.data.copy(n),e-=i.data.length;for(;i=i.next;){var o=i.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(a));break}++r}return t.length-=r,n}(e,t);return i}(e,t.buffer,t.decoder),n}function v(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,w(b,t,e))}function b(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function y(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}var w=e("process-nextick-args");t.exports=o;var _,k=e("isarray");o.ReadableState=r;e("events").EventEmitter;var x=function(e,t){return e.listeners(t).length},C=e("./internal/streams/stream"),S=e("safe-buffer").Buffer,M=i.Uint8Array||function(){},E=e("core-util-is");E.inherits=e("inherits");var T=e("util"),A=void 0;A=T&&T.debuglog?T.debuglog("stream"):function(){};var D,L=e("./internal/streams/BufferList"),I=e("./internal/streams/destroy");E.inherits(o,C);var P=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=I.destroy,o.prototype._undestroy=I.undestroy,o.prototype._destroy=function(e,t){this.push(null),t(e)},o.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=S.from(e,t),t=""),n=!0),a(this,e,t,!1,n)},o.prototype.unshift=function(e){return a(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return D||(D=e("string_decoder/").StringDecoder),this._readableState.decoder=new D(t),this._readableState.encoding=t,this};var O=8388608;o.prototype.read=function(e){A("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return A("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?v(this):c(this),null;if(0===(e=l(e,t))&&t.ended)return 0===t.length&&v(this),null;var i=t.needReadable;A("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&A("length less than watermark",i=!0),t.ended||t.reading?A("reading or ended",i=!1):i&&(A("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=l(n,t)));var r;return null===(r=e>0?g(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&v(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function i(t,n){A("onunpipe"),t===u&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,A("cleanup"),e.removeListener("close",s),e.removeListener("finish",l),e.removeListener("drain",h),e.removeListener("error",a),e.removeListener("unpipe",i),u.removeListener("end",r),u.removeListener("end",c),u.removeListener("data",o),p=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function r(){A("onend"),e.end()}function o(t){A("ondata"),g=!1;!1!==e.write(t)||g||((1===f.pipesCount&&f.pipes===e||f.pipesCount>1&&-1!==y(f.pipes,e))&&!p&&(A("false write response, pause",u._readableState.awaitDrain),u._readableState.awaitDrain++,g=!0),u.pause())}function a(t){A("onerror",t),c(),e.removeListener("error",a),0===x(e,"error")&&e.emit("error",t)}function s(){e.removeListener("finish",l),c()}function l(){A("onfinish"),e.removeListener("close",s),c()}function c(){A("unpipe"),u.unpipe(e)}var u=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,A("pipe count=%d opts=%j",f.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?r:c;f.endEmitted?w(d):u.once("end",d),e.on("unpipe",i);var h=function(e){return function(){var t=e._readableState;A("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&x(e,"data")&&(t.flowing=!0,m(e))}}(u);e.on("drain",h);var p=!1,g=!1;return u.on("data",o),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?k(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",a),e.once("close",s),e.once("finish",l),e.emit("pipe",u),f.flowing||(A("pipe resume"),u.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var a=y(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},o.prototype.on=function(e,t){var n=C.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&c(this):w(h,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(A("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,w(p,e,t))}(this,e)),this},o.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(A("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(A("wrapped data"),t.decoder&&(r=t.decoder.write(r)),(!t.objectMode||null!==r&&void 0!==r)&&(t.objectMode||r&&r.length)){i.push(r)||(n=!0,e.pause())}});for(var r in e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<P.length;o++)e.on(P[o],i.emit.bind(i,P[o]));return i._read=function(t){A("wrapped _read",t),n&&(n=!1,e.resume())},i},o._fromList=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":147,"./internal/streams/BufferList":152,"./internal/streams/destroy":153,"./internal/streams/stream":154,_process:137,"core-util-is":65,events:99,inherits:117,isarray:119,"process-nextick-args":136,"safe-buffer":160,"string_decoder/":170,util:23}],150:[function(e,t,n){"use strict";function i(e){this.afterTransform=function(t,n){return function(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&e.push(n);r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e){if(!(this instanceof r))return new r(e);a.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){o(t,e,n)}):o(t)})}function o(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var i=e._writableState,r=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=r;var a=e("./_stream_duplex"),s=e("core-util-is");s.inherits=e("inherits"),s.inherits(r,a),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},r.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":147,"core-util-is":65,inherits:117}],151:[function(e,t,n){(function(n,i){"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;e.entry=null;for(;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function o(){}function a(t,n){g=g||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof g&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?(m(r,i),m(p,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(r(i),e._writableState.errorEmitted=!0,e.emit("error",i),p(e,t))}(e,n,i,t,r);else{var o=d(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||f(e,n),i?v(u,e,n,o,r):u(e,n,o,r)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function s(t){if(g=g||e("./_stream_duplex"),!(C.call(s,this)||this instanceof g))return new s(t);this._writableState=new a(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),w.call(this)}function l(e,t,n,i,r,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=_.from(t,n)),t}(t,i,r);i!==a&&(n=!0,r="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else c(e,t,!1,s,i,r,o);return l}function c(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function u(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),p(e,t)}function f(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)o[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;o.allBuffers=l,c(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new r(t)}else{for(;n;){var u=n.chunk,f=n.encoding,d=n.callback;if(c(e,t,!1,t.objectMode?1:u.length,u,f,d),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function d(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function h(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),p(e,t)})}function p(e,t){var n=d(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,m(h,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}var m=e("process-nextick-args");t.exports=s;var g,v=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:m;s.WritableState=a;var b=e("core-util-is");b.inherits=e("inherits");var y={deprecate:e("util-deprecate")},w=e("./internal/streams/stream"),_=e("safe-buffer").Buffer,k=i.Uint8Array||function(){},x=e("./internal/streams/destroy");b.inherits(s,w),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var C;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!C.call(this,e)||e&&e._writableState instanceof a}})):C=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,n){var i=this._writableState,r=!1,a=function(e){return _.isBuffer(e)||e instanceof k}(e)&&!i.objectMode;return a&&!_.isBuffer(e)&&(e=function(e){return _.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=o),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),m(t,n)}(this,n):(a||function(e,t,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),m(i,o),r=!1),r}(this,i,e,n))&&(i.pendingcb++,r=l(this,i,a,e,t,n)),r},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||f(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,p(e,t),n&&(t.finished?m(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),s.prototype.destroy=x.destroy,s.prototype._undestroy=x.undestroy,s.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":147,"./internal/streams/destroy":153,"./internal/streams/stream":154,_process:137,"core-util-is":65,inherits:117,"process-nextick-args":136,"safe-buffer":160,"util-deprecate":175}],152:[function(e,t,n){"use strict";function i(e,t,n){e.copy(t,n)}var r=e("safe-buffer").Buffer;t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,o=0;n;)i(n.data,t,o),o+=n.data.length,n=n.next;return t},e}()},{"safe-buffer":160}],153:[function(e,t,n){"use strict";function i(e,t){e.emit("error",t)}var r=e("process-nextick-args");t.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;o||a?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":136}],154:[function(e,t,n){t.exports=e("events").EventEmitter},{events:99}],155:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":156}],156:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":147,"./lib/_stream_passthrough.js":148,"./lib/_stream_readable.js":149,"./lib/_stream_transform.js":150,"./lib/_stream_writable.js":151}],157:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":156}],158:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":151}],159:[function(e,t,n){(function(n){"use strict";function i(){f.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function r(e,t){return e<<t|e>>>32-t}function o(e,t,n,i,o,a,s,l){return r(e+(t^n^i)+a+s|0,l)+o|0}function a(e,t,n,i,o,a,s,l){return r(e+(t&n|~t&i)+a+s|0,l)+o|0}function s(e,t,n,i,o,a,s,l){return r(e+((t|~n)^i)+a+s|0,l)+o|0}function l(e,t,n,i,o,a,s,l){return r(e+(t&i|n&~i)+a+s|0,l)+o|0}function c(e,t,n,i,o,a,s,l){return r(e+(t^(n|~i))+a+s|0,l)+o|0}var u=e("inherits"),f=e("hash-base");u(i,f),i.prototype._update=function(){for(var e=new Array(16),t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,i=this._b,u=this._c,f=this._d,d=this._e;d=o(d,n=o(n,i,u,f,d,e[0],0,11),i,u=r(u,10),f,e[1],0,14),i=o(i=r(i,10),u=o(u,f=o(f,d,n,i,u,e[2],0,15),d,n=r(n,10),i,e[3],0,12),f,d=r(d,10),n,e[4],0,5),f=o(f=r(f,10),d=o(d,n=o(n,i,u,f,d,e[5],0,8),i,u=r(u,10),f,e[6],0,7),n,i=r(i,10),u,e[7],0,9),n=o(n=r(n,10),i=o(i,u=o(u,f,d,n,i,e[8],0,11),f,d=r(d,10),n,e[9],0,13),u,f=r(f,10),d,e[10],0,14),u=o(u=r(u,10),f=o(f,d=o(d,n,i,u,f,e[11],0,15),n,i=r(i,10),u,e[12],0,6),d,n=r(n,10),i,e[13],0,7),d=a(d=r(d,10),n=o(n,i=o(i,u,f,d,n,e[14],0,9),u,f=r(f,10),d,e[15],0,8),i,u=r(u,10),f,e[7],1518500249,7),i=a(i=r(i,10),u=a(u,f=a(f,d,n,i,u,e[4],1518500249,6),d,n=r(n,10),i,e[13],1518500249,8),f,d=r(d,10),n,e[1],1518500249,13),f=a(f=r(f,10),d=a(d,n=a(n,i,u,f,d,e[10],1518500249,11),i,u=r(u,10),f,e[6],1518500249,9),n,i=r(i,10),u,e[15],1518500249,7),n=a(n=r(n,10),i=a(i,u=a(u,f,d,n,i,e[3],1518500249,15),f,d=r(d,10),n,e[12],1518500249,7),u,f=r(f,10),d,e[0],1518500249,12),u=a(u=r(u,10),f=a(f,d=a(d,n,i,u,f,e[9],1518500249,15),n,i=r(i,10),u,e[5],1518500249,9),d,n=r(n,10),i,e[2],1518500249,11),d=a(d=r(d,10),n=a(n,i=a(i,u,f,d,n,e[14],1518500249,7),u,f=r(f,10),d,e[11],1518500249,13),i,u=r(u,10),f,e[8],1518500249,12),i=s(i=r(i,10),u=s(u,f=s(f,d,n,i,u,e[3],1859775393,11),d,n=r(n,10),i,e[10],1859775393,13),f,d=r(d,10),n,e[14],1859775393,6),f=s(f=r(f,10),d=s(d,n=s(n,i,u,f,d,e[4],1859775393,7),i,u=r(u,10),f,e[9],1859775393,14),n,i=r(i,10),u,e[15],1859775393,9),n=s(n=r(n,10),i=s(i,u=s(u,f,d,n,i,e[8],1859775393,13),f,d=r(d,10),n,e[1],1859775393,15),u,f=r(f,10),d,e[2],1859775393,14),u=s(u=r(u,10),f=s(f,d=s(d,n,i,u,f,e[7],1859775393,8),n,i=r(i,10),u,e[0],1859775393,13),d,n=r(n,10),i,e[6],1859775393,6),d=s(d=r(d,10),n=s(n,i=s(i,u,f,d,n,e[13],1859775393,5),u,f=r(f,10),d,e[11],1859775393,12),i,u=r(u,10),f,e[5],1859775393,7),i=l(i=r(i,10),u=l(u,f=s(f,d,n,i,u,e[12],1859775393,5),d,n=r(n,10),i,e[1],2400959708,11),f,d=r(d,10),n,e[9],2400959708,12),f=l(f=r(f,10),d=l(d,n=l(n,i,u,f,d,e[11],2400959708,14),i,u=r(u,10),f,e[10],2400959708,15),n,i=r(i,10),u,e[0],2400959708,14),n=l(n=r(n,10),i=l(i,u=l(u,f,d,n,i,e[8],2400959708,15),f,d=r(d,10),n,e[12],2400959708,9),u,f=r(f,10),d,e[4],2400959708,8),u=l(u=r(u,10),f=l(f,d=l(d,n,i,u,f,e[13],2400959708,9),n,i=r(i,10),u,e[3],2400959708,14),d,n=r(n,10),i,e[7],2400959708,5),d=l(d=r(d,10),n=l(n,i=l(i,u,f,d,n,e[15],2400959708,6),u,f=r(f,10),d,e[14],2400959708,8),i,u=r(u,10),f,e[5],2400959708,6),i=c(i=r(i,10),u=l(u,f=l(f,d,n,i,u,e[6],2400959708,5),d,n=r(n,10),i,e[2],2400959708,12),f,d=r(d,10),n,e[4],2840853838,9),f=c(f=r(f,10),d=c(d,n=c(n,i,u,f,d,e[0],2840853838,15),i,u=r(u,10),f,e[5],2840853838,5),n,i=r(i,10),u,e[9],2840853838,11),n=c(n=r(n,10),i=c(i,u=c(u,f,d,n,i,e[7],2840853838,6),f,d=r(d,10),n,e[12],2840853838,8),u,f=r(f,10),d,e[2],2840853838,13),u=c(u=r(u,10),f=c(f,d=c(d,n,i,u,f,e[10],2840853838,12),n,i=r(i,10),u,e[14],2840853838,5),d,n=r(n,10),i,e[1],2840853838,12),d=c(d=r(d,10),n=c(n,i=c(i,u,f,d,n,e[3],2840853838,13),u,f=r(f,10),d,e[8],2840853838,14),i,u=r(u,10),f,e[11],2840853838,11),i=c(i=r(i,10),u=c(u,f=c(f,d,n,i,u,e[6],2840853838,8),d,n=r(n,10),i,e[15],2840853838,5),f,d=r(d,10),n,e[13],2840853838,6),f=r(f,10);var h=this._a,p=this._b,m=this._c,g=this._d,v=this._e;v=c(v,h=c(h,p,m,g,v,e[5],1352829926,8),p,m=r(m,10),g,e[14],1352829926,9),p=c(p=r(p,10),m=c(m,g=c(g,v,h,p,m,e[7],1352829926,9),v,h=r(h,10),p,e[0],1352829926,11),g,v=r(v,10),h,e[9],1352829926,13),g=c(g=r(g,10),v=c(v,h=c(h,p,m,g,v,e[2],1352829926,15),p,m=r(m,10),g,e[11],1352829926,15),h,p=r(p,10),m,e[4],1352829926,5),h=c(h=r(h,10),p=c(p,m=c(m,g,v,h,p,e[13],1352829926,7),g,v=r(v,10),h,e[6],1352829926,7),m,g=r(g,10),v,e[15],1352829926,8),m=c(m=r(m,10),g=c(g,v=c(v,h,p,m,g,e[8],1352829926,11),h,p=r(p,10),m,e[1],1352829926,14),v,h=r(h,10),p,e[10],1352829926,14),v=l(v=r(v,10),h=c(h,p=c(p,m,g,v,h,e[3],1352829926,12),m,g=r(g,10),v,e[12],1352829926,6),p,m=r(m,10),g,e[6],1548603684,9),p=l(p=r(p,10),m=l(m,g=l(g,v,h,p,m,e[11],1548603684,13),v,h=r(h,10),p,e[3],1548603684,15),g,v=r(v,10),h,e[7],1548603684,7),g=l(g=r(g,10),v=l(v,h=l(h,p,m,g,v,e[0],1548603684,12),p,m=r(m,10),g,e[13],1548603684,8),h,p=r(p,10),m,e[5],1548603684,9),h=l(h=r(h,10),p=l(p,m=l(m,g,v,h,p,e[10],1548603684,11),g,v=r(v,10),h,e[14],1548603684,7),m,g=r(g,10),v,e[15],1548603684,7),m=l(m=r(m,10),g=l(g,v=l(v,h,p,m,g,e[8],1548603684,12),h,p=r(p,10),m,e[12],1548603684,7),v,h=r(h,10),p,e[4],1548603684,6),v=l(v=r(v,10),h=l(h,p=l(p,m,g,v,h,e[9],1548603684,15),m,g=r(g,10),v,e[1],1548603684,13),p,m=r(m,10),g,e[2],1548603684,11),p=s(p=r(p,10),m=s(m,g=s(g,v,h,p,m,e[15],1836072691,9),v,h=r(h,10),p,e[5],1836072691,7),g,v=r(v,10),h,e[1],1836072691,15),g=s(g=r(g,10),v=s(v,h=s(h,p,m,g,v,e[3],1836072691,11),p,m=r(m,10),g,e[7],1836072691,8),h,p=r(p,10),m,e[14],1836072691,6),h=s(h=r(h,10),p=s(p,m=s(m,g,v,h,p,e[6],1836072691,6),g,v=r(v,10),h,e[9],1836072691,14),m,g=r(g,10),v,e[11],1836072691,12),m=s(m=r(m,10),g=s(g,v=s(v,h,p,m,g,e[8],1836072691,13),h,p=r(p,10),m,e[12],1836072691,5),v,h=r(h,10),p,e[2],1836072691,14),v=s(v=r(v,10),h=s(h,p=s(p,m,g,v,h,e[10],1836072691,13),m,g=r(g,10),v,e[0],1836072691,13),p,m=r(m,10),g,e[4],1836072691,7),p=a(p=r(p,10),m=a(m,g=s(g,v,h,p,m,e[13],1836072691,5),v,h=r(h,10),p,e[8],2053994217,15),g,v=r(v,10),h,e[6],2053994217,5),g=a(g=r(g,10),v=a(v,h=a(h,p,m,g,v,e[4],2053994217,8),p,m=r(m,10),g,e[1],2053994217,11),h,p=r(p,10),m,e[3],2053994217,14),h=a(h=r(h,10),p=a(p,m=a(m,g,v,h,p,e[11],2053994217,14),g,v=r(v,10),h,e[15],2053994217,6),m,g=r(g,10),v,e[0],2053994217,14),m=a(m=r(m,10),g=a(g,v=a(v,h,p,m,g,e[5],2053994217,6),h,p=r(p,10),m,e[12],2053994217,9),v,h=r(h,10),p,e[2],2053994217,12),v=a(v=r(v,10),h=a(h,p=a(p,m,g,v,h,e[13],2053994217,9),m,g=r(g,10),v,e[9],2053994217,12),p,m=r(m,10),g,e[7],2053994217,5),p=o(p=r(p,10),m=a(m,g=a(g,v,h,p,m,e[10],2053994217,15),v,h=r(h,10),p,e[14],2053994217,8),g,v=r(v,10),h,e[12],0,8),g=o(g=r(g,10),v=o(v,h=o(h,p,m,g,v,e[15],0,5),p,m=r(m,10),g,e[10],0,12),h,p=r(p,10),m,e[4],0,9),h=o(h=r(h,10),p=o(p,m=o(m,g,v,h,p,e[1],0,12),g,v=r(v,10),h,e[5],0,5),m,g=r(g,10),v,e[8],0,14),m=o(m=r(m,10),g=o(g,v=o(v,h,p,m,g,e[7],0,6),h,p=r(p,10),m,e[6],0,8),v,h=r(h,10),p,e[2],0,13),v=o(v=r(v,10),h=o(h,p=o(p,m,g,v,h,e[13],0,6),m,g=r(g,10),v,e[14],0,5),p,m=r(m,10),g,e[0],0,15),p=o(p=r(p,10),m=o(m,g=o(g,v,h,p,m,e[3],0,13),v,h=r(h,10),p,e[9],0,11),g,v=r(v,10),h,e[11],0,11),g=r(g,10);var b=this._b+u+g|0;this._b=this._c+f+v|0,this._c=this._d+d+h|0,this._d=this._e+n+p|0,this._e=this._a+i+m|0,this._a=b},i.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},t.exports=i}).call(this,e("buffer").Buffer)},{buffer:52,"hash-base":101,inherits:117}],160:[function(e,t,n){function i(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return a(e,t,n)}var o=e("buffer"),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(i(o,n),n.Buffer=r),i(a,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:52}],161:[function(e,t,n){function i(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}var r=e("safe-buffer").Buffer;i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var n=this._block,i=this._blockSize,o=e.length,a=this._len,s=0;s<o;){for(var l=a%i,c=Math.min(o-s,i-l),u=0;u<c;u++)n[l+u]=e[s+u];s+=c,(a+=c)%i==0&&this._update(n)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=4294967295&n,r=(n-i)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},{"safe-buffer":160}],162:[function(e,t,n){(n=t.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t}).sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":163,"./sha1":164,"./sha224":165,"./sha256":166,"./sha384":167,"./sha512":168}],163:[function(e,t,n){function i(){this.init(),this._w=f,l.call(this,64,56)}function r(e){return e<<5|e>>>27}function o(e){return e<<30|e>>>2}function a(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}var s=e("inherits"),l=e("./hash"),c=e("safe-buffer").Buffer,u=[1518500249,1859775393,-1894007588,-899497514],f=new Array(80);s(i,l),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},i.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,s=0|this._c,l=0|this._d,c=0|this._e,f=0;f<16;++f)t[f]=e.readInt32BE(4*f);for(;f<80;++f)t[f]=t[f-3]^t[f-8]^t[f-14]^t[f-16];for(var d=0;d<80;++d){var h=~~(d/20),p=r(n)+a(h,i,s,l)+c+t[d]+u[h]|0;c=l,l=s,s=o(i),i=n,n=p}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=l+this._d|0,this._e=c+this._e|0},i.prototype._hash=function(){var e=c.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=i},{"./hash":161,inherits:117,"safe-buffer":160}],164:[function(e,t,n){function i(){this.init(),this._w=d,c.call(this,64,56)}function r(e){return e<<1|e>>>31}function o(e){return e<<5|e>>>27}function a(e){return e<<30|e>>>2}function s(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}var l=e("inherits"),c=e("./hash"),u=e("safe-buffer").Buffer,f=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);l(i,c),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},i.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,l=0|this._c,c=0|this._d,u=0|this._e,d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=r(t[d-3]^t[d-8]^t[d-14]^t[d-16]);for(var h=0;h<80;++h){var p=~~(h/20),m=o(n)+s(p,i,l,c)+u+t[h]+f[p]|0;u=c,c=l,l=a(i),i=n,n=m}this._a=n+this._a|0,this._b=i+this._b|0,this._c=l+this._c|0,this._d=c+this._d|0,this._e=u+this._e|0},i.prototype._hash=function(){var e=u.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=i},{"./hash":161,inherits:117,"safe-buffer":160}],165:[function(e,t,n){function i(){this.init(),this._w=l,a.call(this,64,56)}var r=e("inherits"),o=e("./sha256"),a=e("./hash"),s=e("safe-buffer").Buffer,l=new Array(64);r(i,o),i.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},i.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=i},{"./hash":161,"./sha256":166,inherits:117,"safe-buffer":160}],166:[function(e,t,n){function i(){this.init(),this._w=p,f.call(this,64,56)}function r(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function a(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function s(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function l(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function c(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var u=e("inherits"),f=e("./hash"),d=e("safe-buffer").Buffer,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);u(i,f),i.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},i.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,u=0|this._c,f=0|this._d,d=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,v=0;v<16;++v)t[v]=e.readInt32BE(4*v);for(;v<64;++v)t[v]=c(t[v-2])+t[v-7]+l(t[v-15])+t[v-16]|0;for(var b=0;b<64;++b){var y=g+s(d)+r(d,p,m)+h[b]+t[b]|0,w=a(n)+o(n,i,u)|0;g=m,m=p,p=d,d=f+y|0,f=u,u=i,i=n,n=y+w|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=u+this._c|0,this._d=f+this._d|0,this._e=d+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},i.prototype._hash=function(){var e=d.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=i},{"./hash":161,inherits:117,"safe-buffer":160}],167:[function(e,t,n){function i(){this.init(),this._w=l,a.call(this,128,112)}var r=e("inherits"),o=e("./sha512"),a=e("./hash"),s=e("safe-buffer").Buffer,l=new Array(160);r(i,o),i.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},i.prototype._hash=function(){function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}var t=s.allocUnsafe(48);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=i},{"./hash":161,"./sha512":168,inherits:117,"safe-buffer":160}],168:[function(e,t,n){function i(){this.init(),this._w=v,p.call(this,128,112)}function r(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function a(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function s(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function l(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function c(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function u(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function f(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function d(e,t){return e>>>0<t>>>0?1:0}var h=e("inherits"),p=e("./hash"),m=e("safe-buffer").Buffer,g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],v=new Array(160);h(i,p),i.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},i.prototype._update=function(e){for(var t=this._w,n=0|this._ah,i=0|this._bh,h=0|this._ch,p=0|this._dh,m=0|this._eh,v=0|this._fh,b=0|this._gh,y=0|this._hh,w=0|this._al,_=0|this._bl,k=0|this._cl,x=0|this._dl,C=0|this._el,S=0|this._fl,M=0|this._gl,E=0|this._hl,T=0;T<32;T+=2)t[T]=e.readInt32BE(4*T),t[T+1]=e.readInt32BE(4*T+4);for(;T<160;T+=2){var A=t[T-30],D=t[T-30+1],L=l(A,D),I=c(D,A),P=u(A=t[T-4],D=t[T-4+1]),O=f(D,A),j=t[T-14],q=t[T-14+1],N=t[T-32],B=t[T-32+1],R=I+q|0,z=L+j+d(R,I)|0;z=(z=z+P+d(R=R+O|0,O)|0)+N+d(R=R+B|0,B)|0,t[T]=z,t[T+1]=R}for(var F=0;F<160;F+=2){z=t[F],R=t[F+1];var U=o(n,i,h),H=o(w,_,k),W=a(n,w),K=a(w,n),V=s(m,C),$=s(C,m),G=g[F],Y=g[F+1],X=r(m,v,b),Z=r(C,S,M),J=E+$|0,Q=y+V+d(J,E)|0;Q=(Q=(Q=Q+X+d(J=J+Z|0,Z)|0)+G+d(J=J+Y|0,Y)|0)+z+d(J=J+R|0,R)|0;var ee=K+H|0,te=W+U+d(ee,K)|0;y=b,E=M,b=v,M=S,v=m,S=C,m=p+Q+d(C=x+J|0,x)|0,p=h,x=k,h=i,k=_,i=n,_=w,n=Q+te+d(w=J+ee|0,J)|0}this._al=this._al+w|0,this._bl=this._bl+_|0,this._cl=this._cl+k|0,this._dl=this._dl+x|0,this._el=this._el+C|0,this._fl=this._fl+S|0,this._gl=this._gl+M|0,this._hl=this._hl+E|0,this._ah=this._ah+n+d(this._al,w)|0,this._bh=this._bh+i+d(this._bl,_)|0,this._ch=this._ch+h+d(this._cl,k)|0,this._dh=this._dh+p+d(this._dl,x)|0,this._eh=this._eh+m+d(this._el,C)|0,this._fh=this._fh+v+d(this._fl,S)|0,this._gh=this._gh+b+d(this._gl,M)|0,this._hh=this._hh+y+d(this._hl,E)|0},i.prototype._hash=function(){function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}var t=m.allocUnsafe(64);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=i},{"./hash":161,inherits:117,"safe-buffer":160}],169:[function(e,t,n){function i(){r.call(this)}t.exports=i;var r=e("events").EventEmitter;e("inherits")(i,r),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function i(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function a(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){c.removeListener("data",n),e.removeListener("drain",i),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",l),c.removeListener("close",l),e.removeListener("close",l)}var c=this;c.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(c.on("end",o),c.on("close",a));var u=!1;return c.on("error",s),e.on("error",s),c.on("end",l),c.on("close",l),e.on("close",l),e.emit("pipe",c),e}},{events:99,inherits:117,"readable-stream/duplex.js":146,"readable-stream/passthrough.js":155,"readable-stream/readable.js":156,"readable-stream/transform.js":157,"readable-stream/writable.js":158}],170:[function(e,t,n){"use strict";function i(e){this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(d.isEncoding===h||!h(e)))throw new Error("Unknown encoding: "+e);return t||e}(e);var t;switch(this.encoding){case"utf16le":this.text=a,this.end=s,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=l,this.end=c,t=3;break;default:return this.write=u,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(t)}function r(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"".repeat(n+2)}}(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function a(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}var d=e("safe-buffer").Buffer,h=d.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"".repeat(this.lastTotal-this.lastNeed):t},i.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var o=r(t[i]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--i<n?0:(o=r(t[i]))>=0?(o>0&&(e.lastNeed=o-2),o):--i<n?0:(o=r(t[i]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":160}],171:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("topojson-client"),r=e("topojson-server"),o=e("topojson-simplify");Object.keys(i).forEach(function(e){n[e]=i[e]}),Object.keys(r).forEach(function(e){n[e]=r[e]}),Object.keys(o).forEach(function(e){n[e]=o[e]})},{"topojson-client":172,"topojson-server":173,"topojson-simplify":174}],172:[function(e,t,n){!function(e,i){"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(e.topojson=e.topojson||{})}(this,function(e){"use strict";function t(e,t){var i=t.id,r=t.bbox,o=null==t.properties?{}:t.properties,a=n(e,t);return null==i&&null==r?{type:"Feature",properties:o,geometry:a}:null==r?{type:"Feature",id:i,properties:o,geometry:a}:{type:"Feature",id:i,bbox:r,properties:o,geometry:a}}function n(e,t){function n(e,t){t.length&&t.pop();for(var n=f[e<0?~e:e],i=0,r=n.length;i<r;++i)t.push(u(n[i],i));e<0&&l(t,r)}function i(e){return u(e)}function r(e){for(var t=[],i=0,r=e.length;i<r;++i)n(e[i],t);return t.length<2&&t.push(t[0]),t}function o(e){for(var t=r(e);t.length<4;)t.push(t[0]);return t}function s(e){return e.map(o)}function c(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(c)};case"Point":t=i(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(i);break;case"LineString":t=r(e.arcs);break;case"MultiLineString":t=e.arcs.map(r);break;case"Polygon":t=s(e.arcs);break;case"MultiPolygon":t=e.arcs.map(s);break;default:return null}return{type:n,coordinates:t}}var u=a(e.transform),f=e.arcs;return c(t)}function i(e,t,n){var i,r,o;if(arguments.length>1)i=function(e,t,n){function i(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:s})}function r(e){e.forEach(i)}function o(e){e.forEach(r)}function a(e){switch(s=e,e.type){case"GeometryCollection":e.geometries.forEach(a);break;case"LineString":r(e.arcs);break;case"MultiLineString":case"Polygon":o(e.arcs);break;case"MultiPolygon":!function(e){e.forEach(o)}(e.arcs)}}var s,l=[],c=[];return a(t),c.forEach(null==n?function(e){l.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&l.push(e[0].i)}),l}(0,t,n);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:c(e,i)}}function r(e,t){function i(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(i);break;case"Polygon":r(e.arcs);break;case"MultiPolygon":e.arcs.forEach(r)}}function r(e){e.forEach(function(t){t.forEach(function(t){(a[t=t<0?~t:t]||(a[t]=[])).push(e)})}),s.push(e)}function o(t){return function(e){for(var t,n=-1,i=e.length,r=e[i-1],o=0;++n<i;)t=r,r=e[n],o+=t[0]*r[1]-t[1]*r[0];return Math.abs(o)}(n(e,{type:"Polygon",arcs:[t]}).coordinates[0])}var a={},s=[],l=[];return t.forEach(i),s.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,l.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){a[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),s.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:l.map(function(t){var n,i=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){a[e<0?~e:e].length<2&&i.push(e)})})}),i=c(e,i),(n=i.length)>1)for(var r,s,l=1,u=o(i[0]);l<n;++l)(r=o(i[l]))>u&&(s=i[0],i[0]=i[l],i[l]=s,u=r);return i})}}var o=function(e){return e},a=function(e){if(null==e)return o;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,o){o||(t=n=0);var l=2,c=e.length,u=new Array(c);for(u[0]=(t+=e[0])*i+a,u[1]=(n+=e[1])*r+s;l<c;)u[l]=e[l],++l;return u}},s=function(e){function t(e){(e=r(e))[0]<o&&(o=e[0]),e[0]>l&&(l=e[0]),e[1]<s&&(s=e[1]),e[1]>c&&(c=e[1])}function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var i,r=a(e.transform),o=1/0,s=o,l=-o,c=-o;e.arcs.forEach(function(e){for(var t,n=-1,i=e.length;++n<i;)(t=r(e[n],n))[0]<o&&(o=t[0]),t[0]>l&&(l=t[0]),t[1]<s&&(s=t[1]),t[1]>c&&(c=t[1])});for(i in e.objects)n(e.objects[i]);return[o,s,l,c]},l=function(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n},c=function(e,t){function n(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),a.push(r)}}var i={},r={},o={},a=[],s=-1;return t.forEach(function(n,i){var r,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=t[++s],t[s]=n,t[i]=r)}),t.forEach(function(t){var n,i,a=function(t){var n,i=e.arcs[t<0?~t:t],r=i[0];return e.transform?(n=[0,0],i.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=i[i.length-1],t<0?[n,r]:[r,n]}(t),s=a[0],l=a[1];if(n=o[s])if(delete o[n.end],n.push(t),n.end=l,i=r[l]){delete r[i.start];var c=i===n?n:n.concat(i);r[c.start=n.start]=o[c.end=i.end]=c}else r[n.start]=o[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(t),n.start=s,i=o[s]){delete o[i.end];var u=i===n?n:i.concat(n);r[u.start=i.start]=o[u.end=n.end]=u}else r[n.start]=o[n.end]=n;else r[(n=[t]).start=s]=o[n.end=l]=n}),n(o,r),n(r,o),t.forEach(function(e){i[e<0?~e:e]||a.push([e])}),a},u=function(e,t){for(var n=0,i=e.length;n<i;){var r=n+i>>>1;e[r]<t?n=r+1:i=r}return n},f=function(e){if(null==e)return o;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,o){o||(t=n=0);var l=2,c=e.length,u=new Array(c),f=Math.round((e[0]-a)/i),d=Math.round((e[1]-s)/r);for(u[0]=f-t,t=f,u[1]=d-n,n=d;l<c;)u[l]=e[l],++l;return u}};e.bbox=s,e.feature=function(e,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return t(e,n)})}:t(e,n)},e.mesh=function(e){return n(e,i.apply(this,arguments))},e.meshArcs=i,e.merge=function(e){return n(e,r.apply(this,arguments))},e.mergeArcs=r,e.neighbors=function(e){function t(e,t){e.forEach(function(e){e<0&&(e=~e);var n=r[e];n?n.push(t):r[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function i(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){i(e,t)}):e.type in a&&a[e.type](e.arcs,t)}var r={},o=e.map(function(){return[]}),a={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(i);for(var s in r)for(var l=r[s],c=l.length,f=0;f<c;++f)for(var d=f+1;d<c;++d){var h,p=l[f],m=l[d];(h=o[p])[s=u(h,m)]!==m&&h.splice(s,0,m),(h=o[m])[s=u(h,p)]!==p&&h.splice(s,0,p)}return o},e.quantize=function(e,t){function n(e){return h(e)}function i(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(i)};break;case"Point":t={type:"Point",coordinates:n(e.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:e.coordinates.map(n)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}if(e.transform)throw new Error("already quantized");if(t&&t.scale)u=e.bbox;else{if(!((r=Math.floor(t))>=2))throw new Error("n must be 2");var r,o=(u=e.bbox||s(e))[0],a=u[1],l=u[2],c=u[3];t={scale:[l-o?(l-o)/(r-1):1,c-a?(c-a)/(r-1):1],translate:[o,a]}}var u,d,h=f(t),p=e.objects,m={};for(d in p)m[d]=i(p[d]);return{type:"Topology",bbox:u,transform:t,objects:m,arcs:e.arcs.map(function(e){var t,n=0,i=1,r=e.length,o=new Array(r);for(o[0]=h(e[0],0);++n<r;)((t=h(e[n],n))[0]||t[1])&&(o[i++]=t);return 1===i&&(o[i++]=[0,0]),o.length=i,o})}},e.transform=a,e.untransform=f,Object.defineProperty(e,"__esModule",{value:!0})})},{}],173:[function(e,t,n){!function(e,i){"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(e.topojson=e.topojson||{})}(this,function(e){"use strict";function t(e,t,n){for(var i,r=t+(n---t>>1);t<r;++t,--n)i=e[t],e[t]=e[n],e[n]=i}function n(e){return null==e?{type:null}:("FeatureCollection"===e.type?function(e){var t={type:"GeometryCollection",geometries:e.features.map(i)};null!=e.bbox&&(t.bbox=e.bbox);return t}:"Feature"===e.type?i:r)(e)}function i(e){var t,n=r(e.geometry);null!=e.id&&(n.id=e.id),null!=e.bbox&&(n.bbox=e.bbox);for(t in e.properties){n.properties=e.properties;break}return n}function r(e){if(null==e)return{type:null};var t="GeometryCollection"===e.type?{type:"GeometryCollection",geometries:e.geometries.map(r)}:"Point"===e.type||"MultiPoint"===e.type?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return null!=e.bbox&&(t.bbox=e.bbox),t}function o(e){var t,n=e[0],i=e[1];return i<n&&(t=n,n=i,i=t),n+31*i}function a(e,t){var n,i=e[0],r=e[1],o=t[0],a=t[1];return r<i&&(n=i,i=r,r=n),a<o&&(n=o,o=a,a=n),i===o&&r===a}var s=function(e,t,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var a=new i(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),s=new o(e),l=e-1,c=0;c<e;++c)a[c]=r;return{set:function(i,o){for(var c=t(i)&l,u=a[c],f=0;u!=r;){if(n(u,i))return s[c]=o;if(++f>=e)throw new Error("full hashmap");u=a[c=c+1&l]}return a[c]=i,s[c]=o,o},maybeSet:function(i,o){for(var c=t(i)&l,u=a[c],f=0;u!=r;){if(n(u,i))return s[c];if(++f>=e)throw new Error("full hashmap");u=a[c=c+1&l]}return a[c]=i,s[c]=o,o},get:function(i,o){for(var c=t(i)&l,u=a[c],f=0;u!=r;){if(n(u,i))return s[c];if(++f>=e)break;u=a[c=c+1&l]}return o},keys:function(){for(var e=[],t=0,n=a.length;t<n;++t){var i=a[t];i!=r&&e.push(i)}return e}}},l=function(e,t){return e[0]===t[0]&&e[1]===t[1]},c=new ArrayBuffer(16),u=new Float64Array(c),f=new Uint32Array(c),d=function(e){u[0]=e[0],u[1]=e[1];var t=f[0]^f[1];return 2147483647&(t=t<<5^t>>7^f[2]^f[3])},h=function(e){function t(e,t,n,i){if(m[n]!==e){m[n]=e;var r=g[n];if(r>=0){var o=v[n];r===t&&o===i||r===i&&o===t||(++y,b[n]=1)}else g[n]=t,v[n]=i}}function n(e){return d(u[e])}function i(e,t){return l(u[e],u[t])}var r,o,a,c,u=e.coordinates,f=e.lines,h=e.rings,p=function(){for(var e=s(1.4*u.length,n,i,Int32Array,-1,Int32Array),t=new Int32Array(u.length),r=0,o=u.length;r<o;++r)t[r]=e.maybeSet(r,r);return t}(),m=new Int32Array(u.length),g=new Int32Array(u.length),v=new Int32Array(u.length),b=new Int8Array(u.length),y=0;for(r=0,o=u.length;r<o;++r)m[r]=g[r]=v[r]=-1;for(r=0,o=f.length;r<o;++r){var w=f[r],_=w[0],k=w[1];for(a=p[_],c=p[++_],++y,b[a]=1;++_<=k;)t(r,a,a=c,c=p[_]);++y,b[c]=1}for(r=0,o=u.length;r<o;++r)m[r]=-1;for(r=0,o=h.length;r<o;++r){var x=h[r],C=x[0]+1,S=x[1];for(t(r,p[S-1],a=p[C-1],c=p[C]);++C<=S;)t(r,a,a=c,c=p[C])}m=g=v=null;var M,E=function(e,t,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),a=e-1,s=0;s<e;++s)o[s]=r;return{add:function(i){for(var s=t(i)&a,l=o[s],c=0;l!=r;){if(n(l,i))return!0;if(++c>=e)throw new Error("full hashset");l=o[s=s+1&a]}return o[s]=i,!0},has:function(i){for(var s=t(i)&a,l=o[s],c=0;l!=r;){if(n(l,i))return!0;if(++c>=e)break;l=o[s=s+1&a]}return!1},values:function(){for(var e=[],t=0,n=o.length;t<n;++t){var i=o[t];i!=r&&e.push(i)}return e}}}(1.4*y,d,l);for(r=0,o=u.length;r<o;++r)b[M=p[r]]&&E.add(u[M]);return E},p=function(e){var n,i,r,o=h(e),a=e.coordinates,s=e.lines,l=e.rings;for(i=0,r=s.length;i<r;++i)for(var c=s[i],u=c[0],f=c[1];++u<f;)o.has(a[u])&&(n={0:u,1:c[1]},c[1]=u,c=c.next=n);for(i=0,r=l.length;i<r;++i)for(var d=l[i],p=d[0],m=p,g=d[1],v=o.has(a[p]);++m<g;)o.has(a[m])&&(v?(n={0:m,1:d[1]},d[1]=m,d=d.next=n):(!function(e,n,i,r){t(e,n,i),t(e,n,n+r),t(e,n+r,i)}(a,p,g,g-m),a[g]=a[p],v=!0,m=p));return e},m=function(e){function t(e){var t,n,i,r,o,a,s,c;if(i=g.get(t=f[e[0]]))for(s=0,c=i.length;s<c;++s)if(r=i[s],function(e,t){var n=e[0],i=t[0],r=e[1],o=t[1];if(n-r!=i-o)return!1;for(;n<=r;++n,++i)if(!l(f[n],f[i]))return!1;return!0}(r,e))return e[0]=r[0],void(e[1]=r[1]);if(o=g.get(n=f[e[1]]))for(s=0,c=o.length;s<c;++s)if(a=o[s],function(e,t){var n=e[0],i=t[0],r=e[1],o=t[1];if(n-r!=i-o)return!1;for(;n<=r;++n,--o)if(!l(f[n],f[o]))return!1;return!0}(a,e))return e[1]=a[0],void(e[0]=a[1]);i?i.push(e):g.set(t,[e]),o?o.push(e):g.set(n,[e]),v.push(e)}function n(e,t){var n=e[0],i=t[0],o=e[1]-n;if(o!==t[1]-i)return!1;for(var a=r(e),s=r(t),c=0;c<o;++c)if(!l(f[n+(c+a)%o],f[i+(c+s)%o]))return!1;return!0}function i(e,t){var n=e[0],i=t[0],o=e[1],a=t[1],s=o-n;if(s!==a-i)return!1;for(var c=r(e),u=s-r(t),d=0;d<s;++d)if(!l(f[n+(d+c)%s],f[a-(d+u)%s]))return!1;return!0}function r(e){for(var t=e[0],n=e[1],i=t,r=i,o=f[i];++i<n;){var a=f[i];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(r=i,o=a)}return r-t}var o,a,c,u,f=e.coordinates,h=e.lines,p=e.rings,m=h.length+p.length;for(delete e.lines,delete e.rings,c=0,u=h.length;c<u;++c)for(o=h[c];o=o.next;)++m;for(c=0,u=p.length;c<u;++c)for(a=p[c];a=a.next;)++m;var g=s(2*m*1.4,d,l),v=e.arcs=[];for(c=0,u=h.length;c<u;++c){o=h[c];do{t(o)}while(o=o.next)}for(c=0,u=p.length;c<u;++c)if((a=p[c]).next)do{t(a)}while(a=a.next);else!function(e){var t,o,a,s,l;if(o=g.get(t=f[e[0]]))for(s=0,l=o.length;s<l;++s){if(a=o[s],n(a,e))return e[0]=a[0],void(e[1]=a[1]);if(i(a,e))return e[0]=a[1],void(e[1]=a[0])}if(o=g.get(t=f[e[0]+r(e)]))for(s=0,l=o.length;s<l;++s){if(a=o[s],n(a,e))return e[0]=a[0],void(e[1]=a[1]);if(i(a,e))return e[0]=a[1],void(e[1]=a[0])}o?o.push(e):g.set(t,[e]),v.push(e)}(a);return e};e.topology=function(e,t){function i(e){e&&g.hasOwnProperty(e.type)&&g[e.type](e)}function r(e){var t=[];do{var n=h.get(e);t.push(e[0]<e[1]?n:~n)}while(e=e.next);return t}function l(e){return e.map(r)}var c=function(e){function t(e){null!=e&&c.hasOwnProperty(e.type)&&c[e.type](e)}function n(e){var t=e[0],n=e[1];t<o&&(o=t),t>s&&(s=t),n<a&&(a=n),n>l&&(l=n)}function i(e){e.forEach(n)}function r(e){e.forEach(i)}var o=1/0,a=1/0,s=-1/0,l=-1/0,c={GeometryCollection:function(e){e.geometries.forEach(t)},Point:function(e){n(e.coordinates)},MultiPoint:function(e){e.coordinates.forEach(n)},LineString:function(e){i(e.arcs)},MultiLineString:function(e){e.arcs.forEach(i)},Polygon:function(e){e.arcs.forEach(i)},MultiPolygon:function(e){e.arcs.forEach(r)}};for(var u in e)t(e[u]);return s>=o&&l>=a?[o,a,s,l]:void 0}(e=function(e){var t,i={};for(t in e)i[t]=n(e[t]);return i}(e)),u=t>0&&c&&function(e,t,n){function i(e){return[Math.round((e[0]-c)*h),Math.round((e[1]-u)*p)]}function r(e,t){for(var n,i,r,o,a,s=-1,l=0,f=e.length,d=new Array(f);++s<f;)n=e[s],o=Math.round((n[0]-c)*h),a=Math.round((n[1]-u)*p),o===i&&a===r||(d[l++]=[i=o,r=a]);for(d.length=l;l<t;)l=d.push([d[0][0],d[0][1]]);return d}function o(e){return r(e,2)}function a(e){return r(e,4)}function s(e){return e.map(a)}function l(e){null!=e&&m.hasOwnProperty(e.type)&&m[e.type](e)}var c=t[0],u=t[1],f=t[2],d=t[3],h=f-c?(n-1)/(f-c):1,p=d-u?(n-1)/(d-u):1,m={GeometryCollection:function(e){e.geometries.forEach(l)},Point:function(e){e.coordinates=i(e.coordinates)},MultiPoint:function(e){e.coordinates=e.coordinates.map(i)},LineString:function(e){e.arcs=o(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(o)},Polygon:function(e){e.arcs=s(e.arcs)},MultiPolygon:function(e){e.arcs=e.arcs.map(s)}};for(var g in e)l(e[g]);return{scale:[1/h,1/p],translate:[c,u]}}(e,c,t),f=m(p(function(e){function t(e){e&&c.hasOwnProperty(e.type)&&c[e.type](e)}function n(e){for(var t=0,n=e.length;t<n;++t)l[++o]=e[t];var i={0:o-n+1,1:o};return a.push(i),i}function i(e){for(var t=0,n=e.length;t<n;++t)l[++o]=e[t];var i={0:o-n+1,1:o};return s.push(i),i}function r(e){return e.map(i)}var o=-1,a=[],s=[],l=[],c={GeometryCollection:function(e){e.geometries.forEach(t)},LineString:function(e){e.arcs=n(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(n)},Polygon:function(e){e.arcs=e.arcs.map(i)},MultiPolygon:function(e){e.arcs=e.arcs.map(r)}};for(var u in e)t(e[u]);return{type:"Topology",coordinates:l,lines:a,rings:s,objects:e}}(e))),d=f.coordinates,h=s(1.4*f.arcs.length,o,a);e=f.objects,f.bbox=c,f.arcs=f.arcs.map(function(e,t){return h.set(e,t),d.slice(e[0],e[1]+1)}),delete f.coordinates,d=null;var g={GeometryCollection:function(e){e.geometries.forEach(i)},LineString:function(e){e.arcs=r(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(r)},Polygon:function(e){e.arcs=e.arcs.map(r)},MultiPolygon:function(e){e.arcs=e.arcs.map(l)}};for(var v in e)i(e[v]);return u&&(f.transform=u,f.arcs=function(e){for(var t=-1,n=e.length;++t<n;){for(var i,r,o=e[t],a=0,s=1,l=o.length,c=o[0],u=c[0],f=c[1];++a<l;)i=(c=o[a])[0],r=c[1],i===u&&r===f||(o[s++]=[i-u,r-f],u=i,f=r);1===s&&(o[s++]=[0,0]),o.length=s}return e}(f.arcs)),f},Object.defineProperty(e,"__esModule",{value:!0})})},{}],174:[function(e,t,n){!function(i,r){"object"==typeof n&&void 0!==t?r(n,e("topojson-client")):"function"==typeof define&&define.amd?define(["exports","topojson-client"],r):r(i.topojson=i.topojson||{},i.topojson)}(this,function(e,t){"use strict";function n(){return!0}function i(e){return e}function r(e){return null!=e.type}function o(e){var t=e[0],n=e[1],i=e[2];return Math.abs((t[0]-i[0])*(n[1]-t[1])-(t[0]-n[0])*(i[1]-t[1]))/2}function a(e){for(var t,n=-1,i=e.length,r=e[i-1],o=0;++n<i;)t=r,r=e[n],o+=t[0]*r[1]-t[1]*r[0];return Math.abs(o)/2}function s(e,t){return e[1][2]-t[1][2]}function l(e,t){return t-e}function c(e,t){for(var n,i,r,o=0,a=e.length,s=0,l=e[t?o++:a-1],c=l[0]*m,u=l[1]*m/2+p,f=b(u),d=y(u);o<a;++o){n=c,c=(l=e[o])[0]*m,u=l[1]*m/2+p,i=f,f=b(u),r=d,d=y(u);var h=c-n,g=h>=0?1:-1,w=g*h,_=r*d,k=i*f+_*b(w),x=_*g*y(w);s+=v(x,k)}return s}var u=function(e){function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}function n(e){for(var t=0,n=e.length;t<n;++t,++o)for(var i=e[t],a=0,s=i.length;a<s;++a){var l=i[a];l<0&&(l=~l);var c=r[l];null==c?r[l]=o:c!==o&&(r[l]=-1)}}var i,r=new Array(e.arcs.length),o=0;for(i in e.objects)t(e.objects[i]);return function(e){for(var t,n=0,i=e.length;n<i;++n)if(-1===r[(t=e[n])<0?~t:t])return!0;return!1}},f=function(e,n,i){return n=null==n?Number.MIN_VALUE:+n,null==i&&(i=a),function(r,o){return i(t.feature(e,{type:"Polygon",arcs:[r]}).geometry.coordinates[0],o)>=n}},d=Math.PI,h=2*d,p=d/4,m=d/180,g=Math.abs,v=Math.atan2,b=Math.cos,y=Math.sin;e.filter=function(e,t){function o(e){var t,n;switch(e.type){case"Polygon":t=(n=a(e.arcs))?{type:"Polygon",arcs:n}:{type:null};break;case"MultiPolygon":t=(n=e.arcs.map(a).filter(i)).length?{type:"MultiPolygon",arcs:n}:{type:null};break;case"GeometryCollection":t=(n=e.geometries.map(o).filter(r)).length?{type:"GeometryCollection",geometries:n}:{type:null};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function a(e){return e.length&&function(e){return t(e,!1)}(e[0])?[e[0]].concat(e.slice(1).filter(s)):null}function s(e){return t(e,!0)}var l,c=e.objects,u={};null==t&&(t=n);for(l in c)u[l]=o(c[l]);return function(e){function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":e.arcs.forEach(i);break;case"MultiPolygon":e.arcs.forEach(r)}}function n(e){e<0&&(e=~e),g[e]||(g[e]=1,++v)}function i(e){e.forEach(n)}function r(e){e.forEach(i)}function o(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(o)};break;case"LineString":t={type:"LineString",arcs:s(e.arcs)};break;case"MultiLineString":t={type:"MultiLineString",arcs:e.arcs.map(s)};break;case"Polygon":t={type:"Polygon",arcs:e.arcs.map(s)};break;case"MultiPolygon":t={type:"MultiPolygon",arcs:e.arcs.map(l)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function a(e){return e<0?~g[~e]:g[e]}function s(e){return e.map(a)}function l(e){return e.map(s)}var c,u,f=e.objects,d={},h=e.arcs,p=h.length,m=-1,g=new Array(p),v=0,b=-1;for(u in f)t(f[u]);for(c=new Array(v);++m<p;)g[m]&&(g[m]=++b,c[b]=h[m]);for(u in f)d[u]=o(f[u]);return{type:"Topology",bbox:e.bbox,transform:e.transform,objects:d,arcs:c}}({type:"Topology",bbox:e.bbox,transform:e.transform,objects:u,arcs:e.arcs})},e.filterAttached=u,e.filterAttachedWeight=function(e,t,n){var i=u(e),r=f(e,t,n);return function(e,t){return i(e,t)||r(e,t)}},e.filterWeight=f,e.planarRingArea=a,e.planarTriangleArea=o,e.presimplify=function(e,n){function i(e){a.remove(e),e[1][2]=n(e),a.push(e)}var r=e.transform?t.transform(e.transform):function(e){return[e[0],e[1],0]},a=function(){function e(e,t){for(;t>0;){var n=(t+1>>1)-1,r=i[n];if(s(e,r)>=0)break;i[r._=t]=r,i[e._=t=n]=e}}function t(e,t){for(;;){var n=t+1<<1,o=n-1,a=t,l=i[a];if(o<r&&s(i[o],l)<0&&(l=i[a=o]),n<r&&s(i[n],l)<0&&(l=i[a=n]),a===t)break;i[l._=t]=l,i[e._=t=a]=e}}var n={},i=[],r=0;return n.push=function(t){return e(i[t._=r]=t,r++),r},n.pop=function(){if(!(r<=0)){var e,n=i[0];return--r>0&&(e=i[r],t(i[e._=0]=e,0)),n}},n.remove=function(n){var o,a=n._;if(i[a]===n)return a!==--r&&(o=i[r],(s(o,n)<0?e:t)(i[o._=a]=o,a)),a},n}();null==n&&(n=o);var l=e.arcs.map(function(e){var t,o,s,l=[],c=0;for(o=1,s=(e=e.map(r)).length-1;o<s;++o)(t=[e[o-1],e[o],e[o+1]])[1][2]=n(t),l.push(t),a.push(t);for(e[0][2]=e[s][2]=1/0,o=0,s=l.length;o<s;++o)(t=l[o]).previous=l[o-1],t.next=l[o+1];for(;t=a.pop();){var u=t.previous,f=t.next;t[1][2]<c?t[1][2]=c:c=t[1][2],u&&(u.next=f,u[2]=t[2],i(u)),f&&(f.previous=u,f[0]=t[0],i(f))}return e});return{type:"Topology",bbox:e.bbox,objects:e.objects,arcs:l}},e.quantile=function(e,t){var n=[];return e.arcs.forEach(function(e){e.forEach(function(e){isFinite(e[2])&&n.push(e[2])})}),n.length&&function(e,t){if(n=e.length){if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];var n,i=(n-1)*t,r=Math.floor(i),o=e[r];return o+(e[r+1]-o)*(i-r)}}(n.sort(l),t)},e.simplify=function(e,t){t=null==t?Number.MIN_VALUE:+t;var n=e.arcs.map(function(e){for(var n,i=-1,r=0,o=e.length,a=new Array(o);++i<o;)(n=e[i])[2]>=t&&(a[r++]=[n[0],n[1]]);return a.length=r,a});return{type:"Topology",transform:e.transform,bbox:e.bbox,objects:e.objects,arcs:n}},e.sphericalRingArea=function(e,t){var n=c(e,!0);return t&&(n*=-1),2*(n<0?h+n:n)},e.sphericalTriangleArea=function(e){return 2*g(c(e,!1))},Object.defineProperty(e,"__esModule",{value:!0})})},{"topojson-client":172}],175:[function(e,t,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],176:[function(e,t,n){"use strict";t.exports=Object.assign||function(e,t){for(var n,i,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){n=arguments[o],i=Object.keys(Object(n));for(var a=0;a<i.length;a++)r[i[a]]=n[i[a]]}return r}},{}],177:[function(e,t,n){function i(e,t){if(t=t||{},window.CustomEvent)n=new CustomEvent(e,{detail:t});else{var n;(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t)}return n}function r(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function o(e,t){return e+t}function a(e,t){function n(e,n){if(s!==e){if(s&&!e)switch(s){case"zoom":t.handleZoomEnd(n);break;case"drag":t.handleDragEnd(n)}switch(e){case"zoom":t.handleZoomStart(n);break;case"drag":t.handleDragStart(n)}}s=e}function i(e){2===l?n("zoom"):1===l&&t.canDrag()?n("drag",e):n(null,e)}function r(e){return Array.prototype.slice.call(e).map(function(e){return{x:e.pageX,y:e.pageY}})}function o(e,t){var n,i;return n=e.x-t.x,i=e.y-t.y,Math.sqrt(n*n+i*i)}function a(e){e.stopPropagation(),e.preventDefault()}var s=null,l=0,c=null,u=null,f=!0;e.addEventListener("touchstart",function(e){t.enabled&&(f=!0,l=e.touches.length,function(e){var n=(new Date).getTime();if(l>1&&(c=null),n-c<300)switch(a(e),t.handleDoubleTap(e),s){case"zoom":t.handleZoomEnd(e);break;case"drag":t.handleDragEnd(e)}1===l&&(c=n)}(e))}),e.addEventListener("touchmove",function(e){if(t.enabled){if(f)i(e),s&&a(e),u=r(e.touches);else{switch(s){case"zoom":t.handleZoom(e,function(e,t){var n=o(e[0],e[1]);return o(t[0],t[1])/n}(u,r(e.touches)));break;case"drag":t.handleDrag(e)}s&&(a(e),t.update())}f=!1}}),e.addEventListener("touchend",function(e){t.enabled&&(l=e.touches.length,i(e))})}function s(e,t){this.el=e,this.zoomFactor=1,this.lastScale=1,this.offset={x:0,y:0},this.options=l({},this.defaults,t),this.setupMarkup(),this.bindEvents(),this.update(),this.enable()}var l=e("object-assign");s.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,animationInterval:5,maxZoom:4,minZoom:.5,lockDragAxis:!1,use2d:!0,updateAllElementStyles:!1,zoomStartEventName:"pz_zoomstart",zoomEndEventName:"pz_zoomend",dragStartEventName:"pz_dragstart",dragEndEventName:"pz_dragend",doubleTapEventName:"pz_doubletap",zoomInEventName:"pz_zoomin",zoomOutEventName:"pz_zoomout"},handleDragStart:function(e){this.el.dispatchEvent(i(this.options.dragStartEventName)),this.stopAnimation(),this.lastDragPosition=!1,this.hasInteraction=!0,this.handleDrag(e)},handleDrag:function(e){if(this.zoomFactor>1){var t=this.getTouches(e)[0];this.drag(t,this.lastDragPosition),this.offset=this.sanitizeOffset(this.offset),this.lastDragPosition=t}},handleDragEnd:function(){this.el.dispatchEvent(i(this.options.dragEndEventName)),this.end()},handleZoomStart:function(e){this.el.dispatchEvent(i(this.options.zoomStartEventName)),this.el.dispatchEvent(i(this.options.zoomInEventName,this.zoomFactor)),this.stopAnimation(),this.lastScale=1,this.nthZoom=0,this.lastZoomCenter=!1,this.hasInteraction=!0},handleZoom:function(e,t){var n=this.getTouchCenter(this.getTouches(e)),i=t/this.lastScale;this.lastScale=t,this.nthZoom+=1,this.nthZoom>3&&(this.scale(i,n),this.drag(n,this.lastZoomCenter)),this.lastZoomCenter=n},handleZoomEnd:function(){this.el.dispatchEvent(i(this.options.zoomEndEventName)),this.end()},handleDoubleTap:function(e){var t=this.getTouches(e)[0],n=this.zoomFactor>1?1:this.options.tapZoomFactor,r=this.zoomFactor,o=function(e){this.scaleTo(r+e*(n-r),t)}.bind(this);this.hasInteraction||(r>n&&(t=this.getCurrentZoomCenter()),this.animate(this.options.animationDuration,this.options.animationInterval,o,this.swing),this.el.dispatchEvent(i(this.options.doubleTapEventName)),r>n?this.el.dispatchEvent(i(this.options.zoomOutEventName,this.zoomFactor)):this.el.dispatchEvent(i(this.options.zoomInEventName,this.zoomFactor)))},sanitizeOffset:function(e){var t=(this.zoomFactor-1)*this.getContainerX(),n=(this.zoomFactor-1)*this.getContainerY(),i=Math.max(t,0),r=Math.max(n,0),o=Math.min(t,0),a=Math.min(n,0);return{x:Math.min(Math.max(e.x,o),i),y:Math.min(Math.max(e.y,a),r)}},scaleTo:function(e,t){this.scale(e/this.zoomFactor,t)},scale:function(e,t){e=this.scaleZoomFactor(e),this.addOffset({x:(e-1)*(t.x+this.offset.x),y:(e-1)*(t.y+this.offset.y)})},scaleZoomFactor:function(e){var t=this.zoomFactor;return this.zoomFactor*=e,this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom)),this.zoomFactor/t},drag:function(e,t){t&&(this.options.lockDragAxis?Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?this.addOffset({x:-(e.x-t.x),y:0}):this.addOffset({y:-(e.y-t.y),x:0}):this.addOffset({y:-(e.y-t.y),x:-(e.x-t.x)}))},getTouchCenter:function(e){return this.getVectorAvg(e)},getVectorAvg:function(e){return{x:e.map(function(e){return e.x}).reduce(o)/e.length,y:e.map(function(e){return e.y}).reduce(o)/e.length}},addOffset:function(e){this.offset={x:this.offset.x+e.x,y:this.offset.y+e.y}},sanitize:function(){this.zoomFactor<this.options.zoomOutFactor?(this.el.dispatchEvent(i("pz_zoomout",this.zoomFactor)),this.zoomOutAnimation()):this.isInsaneOffset(this.offset)&&this.sanitizeOffsetAnimation()},isInsaneOffset:function(e){var t=this.sanitizeOffset(e);return t.x!==e.x||t.y!==e.y},sanitizeOffsetAnimation:function(){var e=this.sanitizeOffset(this.offset),t=this.offset.x,n=this.offset.y,i=function(i){this.offset.x=t+i*(e.x-t),this.offset.y=n+i*(e.y-n),this.update()}.bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,i,this.swing)},zoomOutAnimation:function(){var e=this.zoomFactor,t=this.getCurrentZoomCenter(),n=function(n){this.scaleTo(e+n*(1-e),t)}.bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,n,this.swing)},updateAspectRatio:function(){this.setContainerY(this.getContainerX()/this.getAspectRatio())},getInitialZoomFactor:function(){return this.container.offsetWidth/this.el.offsetWidth},getAspectRatio:function(){return this.el.offsetWidth/this.el.offsetHeight},getCurrentZoomCenter:function(){var e=this.container.offsetWidth*this.zoomFactor,t=this.offset.x,n=e-t-this.container.offsetWidth,i=t/n,r=i*this.container.offsetWidth/(i+1),o=this.container.offsetHeight*this.zoomFactor,a=this.offset.y,s=o-a-this.container.offsetHeight,l=a/s,c=l*this.container.offsetHeight/(l+1);return 0===n&&(r=this.container.offsetWidth),0===s&&(c=this.container.offsetHeight),{x:r,y:c}},canDrag:function(){return!function(e,t){return e>t-.01&&e<t+.01}(this.zoomFactor,1)},getTouches:function(e){var t=this.container.getBoundingClientRect(),n=t.top+document.body.scrollTop,i=t.left+document.body.scrollLeft;return Array.prototype.slice.call(e.touches).map(function(e){return{x:e.pageX-i,y:e.pageY-n}})},animate:function(e,t,n,i,r){var o=(new Date).getTime(),a=function(){if(this.inAnimation){var s=(new Date).getTime()-o,l=s/e;s>=e?(n(1),r&&r(),this.update(),this.stopAnimation(),this.update()):(i&&(l=i(l)),n(l),this.update(),setTimeout(a,t))}}.bind(this);this.inAnimation=!0,a()},stopAnimation:function(){this.inAnimation=!1},swing:function(e){return-Math.cos(e*Math.PI)/2+.5},getContainerX:function(){return this.container.offsetWidth},getContainerY:function(){return this.container.offsetHeight},setContainerY:function(e){return this.container.style.height=e+"px"},setupMarkup:function(){this.el.insertAdjacentHTML("beforebegin",'<div class="PinchZoom PinchZoom-container"></div>'),this.container=this.el.parentNode.querySelector(".PinchZoom-container"),this.container.appendChild(this.el),r(this.container,{overflow:"visible",position:"relative"}),r(this.el,{webkitTransformOrigin:"0% 0%",mozTransformOrigin:"0% 0%",msTransformOrigin:"0% 0%",oTransformOrigin:"0% 0%",transformOrigin:"0% 0%",position:"absolute"})},end:function(){this.hasInteraction=!1,this.sanitize(),this.update()},bindEvents:function(){a(this.container,this),window.addEventListener("resize",this.update.bind(this),!1);for(var e=this.el.querySelectorAll("img"),t=0;t<e.length;t++)e[t].addEventListener("load",this.update.bind(this))},update:function(){var e={};this.updatePlaned||(this.updatePlaned=!0,setTimeout(function(){this.updatePlaned=!1,this.updateAspectRatio();var t=this.getInitialZoomFactor()*this.zoomFactor,n=-this.offset.x/t,i=-this.offset.y/t,o="scale3d("+t+", "+t+",1) translate3d("+n+"px,"+i+"px,0px)",a="scale("+t+", "+t+") translate("+n+"px,"+i+"px)",s=function(){this.clone&&(this.clone.parentNode.removeChild(this.clone),delete this.clone)}.bind(this);this.options.updateAllElementStyles&&l(e,{webkitTransformOrigin:"0% 0%",mozTransformOrigin:"0% 0%",msTransformOrigin:"0% 0%",oTransformOrigin:"0% 0%",transformOrigin:"0% 0%",position:"absolute"}),!this.options.use2d||this.hasInteraction||this.inAnimation?(this.is3d=!0,s(),l(e,{webkitTransform:o,oTransform:a,msTransform:a,mozTransform:a,transform:o}),r(this.el,e)):(this.is3d&&(this.clone=this.el.cloneNode(!0),this.clone.style.pointerEvents="none",this.container.appendChild(this.clone),setTimeout(s,200)),l(e,{"webkit-transform":a,oTransform:a,msTransform:a,mozTransform:a,transform:a}),r(this.el,e),this.is3d=!1)}.bind(this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}},t.exports=s},{"object-assign":176}],178:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,i=n.eval,r=n.execScript;!i&&r&&(r.call(n,"null"),i=n.eval),forEach(Object_keys(e),function(t){n[t]=e[t]}),forEach(globals,function(t){e[t]&&(n[t]=e[t])});var o=Object_keys(n),a=i.call(n,this.code);return forEach(Object_keys(n),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=n[t])}),forEach(globals,function(t){t in e||defineProp(e,t,n[t])}),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return forEach(Object_keys(t),function(n){e[n]=t[n]}),n},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(n){t[n]=e[n]}),t}},{indexof:116}],179:[function(e,t,n){function i(e){return e||"default"}var r=e("codemirror/lib/codemirror");e("codemirror/mode/python/python"),e("codemirror/mode/shell/shell"),e("codemirror/mode/clike/clike"),e("codemirror/mode/rust/rust"),e("codemirror/keymap/vim"),e("codemirror/keymap/emacs");var o={},a={0:"python",1:"shell",2:"clike",3:"rust"},s={light:"clouds",dark:"tn80s"};o.init=function(e){var t=e.$textarea.parents(".codex-textarea");e.$editor.html(""),t.find(".CodeMirror").remove(),e.$editor.append(t),t.removeClass("hide");return{cm:r.fromTextArea(e.$textarea[0],{lineNumbers:!0,indentUnit:4,mode:a[e.language],theme:s[e.initialTheme],keyMap:i(e.initialKeybinding)}),initialCode:e.initialCode,initialLanguage:e.initialLanguage}},o.isUnchanged=function(e,t){var n=e.cm.getValue()===e.initialCode,i=parseInt(t,10)===e.initialLanguage;return n&&i},o.setKeybinding=function(e,t){e.cm.setOption("keyMap",i(t))},o.setReadOnly=function(e){e.cm.setOption("readOnly",!0)},o.onChange=function(e,t){e.cm.on("change",t)},o.getValue=function(e){return e.cm.getValue()},o.setValue=function(e,t){e.cm.setValue(t)},o.getCursor=function(e){return e.cm.getCursor()},o.setCursor=function(e,t){e.cm.setCursor(t)},o.focus=function(e){e.cm.focus()},o.setLanguage=function(e,t){e.cm.setOption("mode",a[t])},o.setTheme=function(e,t){e.cm.setOption("theme",s[t])},t.exports=o},{"codemirror/keymap/emacs":58,"codemirror/keymap/vim":59,"codemirror/lib/codemirror":60,"codemirror/mode/clike/clike":61,"codemirror/mode/python/python":62,"codemirror/mode/rust/rust":63,"codemirror/mode/shell/shell":64}],180:[function(e,t,n){var i=e("jquery"),r={el:!1};r.init=function(){return this.el=i("#system-msgs"),this.el.is(":visible")||this.show(),this},r.show=function(){return""!==this.el.text()&&(this.el.find(".alert").show().addClass("fade in"),this.el.fadeIn(100)),this},r.add=function(e){return this.warning(e)},r.warning=function(e,t){return this._create_msg(e,t,".alert:not(.alert-error,.alert-success)","")},r.success=function(e,t){return this._create_msg(e,t,".alert.alert-success","alert-success")},r.error=function(e,t){return this._create_msg(e,t,".alert.alert-error","alert-error")},r._create_msg=function(e,t,n,i){if(0===this.el.find(n).length){var r="sysmsgs_alert_id_"+Math.round(1e4*Math.random());this.el.append('<div class="alert '+i+'" id="'+r+'"><div class="container"><a href="#" class="close" data-dismiss="alert" data-target="#'+r+'">&times;</a><ul></ul></div></div>')}var o=this.el.find(n);return t=t&&t>0?t:null,o.find("ul").append("<li>"+e+"</li>"),o.alert(),o.find(".close").on("click",function(){document.getElementById(r).remove()}),this.show(),null!==t&&setTimeout(function(){o.alert("close")},t),this},t.exports=r},{jquery:"jquery"}],181:[function(e,t,n){var i=e("jquery"),r=e("raven-js"),o=e("fastclick"),a=e("util/global");if(e("lib/ajax_upload"),e("util/ajax"),e("util/pager"),e("util/popstate"),e("util/sharing"),e("app/generic_controllers"),e("app/header"),e("app/paid"),e("app/intercom"),e("app/search"),e("app/notifications"),e("app/content_modal"),e("app/mini_profiles"),e("app/sets"),e("app/save_to_group"),e("app/comments"),e("app/mentions"),e("app/discussions"),e("app/solvables"),e("app/disputes"),e("app/solution_discussions"),e("app/instant_response"),e("app/newsfeed"),e("app/error_modal"),e("app/preloaders"),e("app/nux"),e("app/visualizations"),e("app/videos"),e("app/zoomable"),e("app/signup"),e("app/login"),e("app/codex"),a.is_ios&&a.app_version.isGreaterThanOrEqualTo("0.9.1")){var s=function(){window.location="loadcomplete://"};window.isLoaded?s():i.window.on("load",s)}var l=i(document.body),c="desktop-browser";a.is_android?c="android-native":a.is_ios?c="ios-native":a.is_mobile&&(c="mobile-browser"),r.config("https://d612e82b08ca463f9c43f76ee96728a6@new-sentry.brilliant.org/7",{tags:{anonymous:!l.hasClass("active"),b2:l.hasClass("b2"),client:c},whitelistUrls:[/brilliant\.org/,/ds055uzetaobb\.cloudfront\.net/,/d18l82el6cdm1i\.cloudfront\.net/]}).install(),r.setUserContext({id:i.body.data("user")}),i(function(){i(".alert.persist").persist_alert_dismiss(),a.is_mobile&&(a.is_ios&&a.ios_version&&a.ios_version.isGreaterThanOrEqualTo("9.3.0")||o(document.body))})},{"app/codex":"app/codex","app/comments":"app/comments","app/content_modal":"app/content_modal","app/discussions":"app/discussions","app/disputes":"app/disputes","app/error_modal":"app/error_modal","app/generic_controllers":"app/generic_controllers","app/header":"app/header","app/instant_response":"app/instant_response","app/intercom":"app/intercom","app/login":"app/login","app/mentions":"app/mentions","app/mini_profiles":"app/mini_profiles","app/newsfeed":"app/newsfeed","app/notifications":"app/notifications","app/nux":"app/nux","app/paid":"app/paid","app/preloaders":"app/preloaders","app/save_to_group":"app/save_to_group","app/search":"app/search","app/sets":"app/sets","app/signup":"app/signup","app/solution_discussions":"app/solution_discussions","app/solvables":"app/solvables","app/videos":"app/videos","app/visualizations":"app/visualizations","app/zoomable":"app/zoomable",fastclick:"fastclick",jquery:"jquery","lib/ajax_upload":"lib/ajax_upload","raven-js":"raven-js","util/ajax":"util/ajax","util/global":"util/global","util/pager":"util/pager","util/popstate":"util/popstate","util/sharing":"util/sharing"}],182:[function(e,t,n){var i=e("jquery"),r=(e("util/ajax"),e("app/error_modal")),o={};o.tagging_events=function(e){var t,n=(e=e||i.body).find(".nf-create-tags"),o=n.find(".tag-list"),a=n.find("[name=new-tag]"),s=n.parents("form").find("[name=selected_tags]"),l=[],c=n.data(),u=!1,f=function(e){(e=e||o).find("a").on("click",function(e){e.preventDefault();var t=i(this);l.remove(t.data("tag-id")),s.val(l.join("|")),t.parent(".tag").remove(),0===l.length&&n.removeClass("with-tags"),h()})},d=function(e){n.addClass("error"),i("#"+e).show()},h=function(){n.removeClass("error"),n.find(".error span").hide()},p=!1,m=function(){(t=a.val().trim()).length>0&&(l.length>=5?(d("too-many"),a.val("")):p||(p=!0,n.addClass("loading"),i.post(c.actionUrl,{tag_name:t}).done(function(e){n.removeClass("loading"),a.trigger("tag_added"),e.success&&(l.indexOf(e.tag_id)>=0?d("exists"):(l.push(e.tag_id),s.val(l.join("|")),o.append(c.tagTmpl.replace("[tag_name]",e.tag_name).replace("[tag_id]",e.tag_id)),n.addClass("with-tags"),h(),f(o.find(".tag").last())))}).fail(r.handler).then(function(){p=!1,a.val("")})))};s.val()&&s.val().length>0?(l=s.val().split(/\|/g).map(function(e){return parseInt(e,10)}),n.addClass("with-tags")):o.children().length&&(o.children().each(function(){l.push(i(this).data("id"))}),s.val(l.join("|"))),a.on("keyup",function(e){t=a.val().trim().replace(/\s/g,""),a.val(t),t.length>=3?u||(u=!0,n.addClass("loading"),i.post(c.autocompleteUrl,{partial_tag:t}).done(function(e){if(e.success){var t=[];e.suggestions.forEach(function(e,n){t.push(e[1])}),a.data("typeahead")?a.data("typeahead").source=t:a.typeahead({source:t}),t.length>0&&(a.typeahead("lookup"),a.typeahead("show"))}else u=!1;n.removeClass("loading")}).fail(r.handler)):u&&(u=!1)}),a.on("keydown",function(e){if(13===e.which){e.preventDefault();var t=a.data("typeahead");t&&t.shown&&0!==t.$menu.find(".active").length||m()}}),a.on("ta_select",m),a.select(),f()},t.exports=o},{"app/error_modal":"app/error_modal",jquery:"jquery","util/ajax":"util/ajax"}],"app/codex":[function(e,t,n){function i(e,t){for(var n in t)l[n]=t[n];try{window.localStorage[e]=JSON.stringify({prefs:l})}catch(e){}}var r=window.ajaxModule||e("util/ajax"),o=e("jquery"),a=e("app/codex_codemirror"),s={};codexConfirm=function(e,t,n,i){o("#confirm-modal").length>0&&o("#confirm-modal").remove();var r=!1,a=o('<div class="modal hide codex-confirm" id="confirm-modal"><div class="modal-body"><p>'+t+'</p></div><div class="modal-footer"><a href="#" class="btn cancel" data-dismiss="modal">'+n.cancel_text+'</a><a href="#" class="btn btn-accent confirm">'+n.ok_text+"</a></div></div>");a.find(".confirm").on("click",function(e){e.preventDefault(),r=!0,a.modal("hide"),a.trigger(o.Event("codex.hide"))}),a.on("hide",function(e){i(r)}),e.after().append(a),a.modal()};var l={};s.controller=function(e){var t=e.data(),n=function(e){try{l=JSON.parse(window.localStorage[e]).prefs}catch(e){}return l}(t.editorKey),s=e.parents(".solv-container,#solv-main"),c=e.find(".codex-form"),u=e.find(".btn-run"),f=e.find(".btn-reset"),d=e.find(".codex-textarea textarea"),h=e.find(".codex-editor > div"),p=e.find("[name=language]"),m=e.find(".editor-mode"),g=e.find(".editor-theme"),v=e.find(".codex-orig").text(),b=t.codexLanguage,y=function(){f.toggleClass("hide",a.isUnchanged(x,p.val()))},w=function(){s.each(function(){var e=o(this);e.css({height:e.outerHeight()})})},_=null;n.keybinding&&"default"!==n.keybinding&&(_=n.keybinding.replace("ace/keyboard/",""));var k=n.theme||"light",x=a.init({$editor:h,$textarea:d,language:p.val(),initialKeybinding:_,initialTheme:k,initialCode:v,initialLanguage:b}),C=null;if(e.on("touchstart",function(e){e.stopPropagation();var t=o(window),n=t.scrollTop(),i=0;C=setInterval(function(){(0===t.scrollTop()||i>20)&&(clearInterval(C),t.scrollTop(n)),i++},16)}),e.on("touchmove",function(e){clearInterval(C)}),setTimeout(function(){s.css({height:"auto"})}),t.autoRefresh)return a.setReadOnly(x),e.find(".CodeMirror-scroll").addClass("disabled"),void setTimeout(function(){w(),r("codex_page").get(t.cmpUrl,{solvable_id:t.solvableId,note_id:t.noteId,codex_env_id:t.codexEnvId})},1e3);n.keybinding&&m.val(n.keybinding).parent().show(),n.theme&&g.val(n.theme).parent().show();var S=/[\u2018|\u2019]/g,M=/[\u201C|\u201D]/g;a.onChange(x,function(e){var t=a.getValue(x);if(S.test(t)||M.test(t)){t=t.replace(S,"'").replace(M,'"');var n=a.getCursor(x);setTimeout(function(){a.setValue(x,t),a.setCursor(x,n)})}d.val(a.getValue(x)),y()}),u.on("click",function(){w(),r("codex_page").form(c[0],{url:t.formAction,page_key:"codex_page",cluster:t.formField__cluster,param_key:t.formField__param_key||"",version:t.formField__version})}),f.on("click",function(e){e.preventDefault(),f.hasClass("hide")||(a.setValue(x,v),p.val(b),a.focus(x),y())}),p.on("change",function(){a.setLanguage(x,p.val()),a.focus(x),y()}),m.on("change",function(){var e=m.val();i(t.editorKey,{keybinding:e}),a.setKeybinding(x,e),a.focus(x)}),g.on("change",function(){var e=g.val();i(t.editorKey,{theme:e}),a.setTheme(x,e),a.focus(x)}),e.find("header label").show(),y();var E=e.find(".codex-email");E.length&&E.find(".btn").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=E.data();codexConfirm(E.parents("footer"),t.confirmText,{ok_text:t.confirmOkText,cancel_text:t.confirmCancelText},function(e){if(e){E.removeClass("error");var n={target_url:t.targetUrl,target_title:t.targetTitle};setTimeout(function(){o.post(t.baseUrl+"/codex/_native/email_me/",n).fail(function(){E.addClass("error")}).then(function(e){e.success?E.addClass("success"):E.addClass("error")})},100)}})})};var c={};s.expandableCode=function(e){var t=e.data("codex-env-id")||null,n=e.find(".codex-expand-toggle"),i=function(i,r){i&&i.preventDefault(),void 0!==r?(t&&(c[t]=r),n.toggleClass("active",r),e.toggleClass("expanded",r)):(t&&(c[t]=!c[t]),n.toggleClass("active"),e.toggleClass("expanded"));var a="";if(e.hasClass("expanded")){a=o.id("wrapper").offset().left+parseInt(o.id("wrapper").css("padding-left"))-e.offset().left+"px"}e.css("margin-left",a)};n.show(),t&&(c[t]=c[t]||!1,!0===c[t]&&i(null,!0)),n.on("click",i)},t.exports=s},{"app/codex_codemirror":179,jquery:"jquery","util/ajax":"util/ajax"}],"app/comments":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=(e("util/global"),e("util/ajax")),a=e("util/autosave"),s=e("util/ui"),l=e("util/urls"),c=e("app/generic_controllers"),u=e("app/error_modal"),f={};f.hitPreviewSolution=!1;var d=function(){var e=null,t=null,n={version:1,commentId:null,formIdParentId:null,parentId:null,topLevelDiscCommentForm:!1,paramKey:null,commentText:"",isEditingThis:!1,commentFormSuccess:!1,errors:""};return function(a){if(a.length&&a.hasClass("comment-form-placeholder")||(a=a.find(".comment-form-placeholder")).length){if(null===e){var s=i.id("comment-form-template");e=r.template(s.text());var u=l.getParamsObject();u.sort&&(t=u.sort)}var d=a.data();t&&d.formUrl.indexOf("sort="+t)<0&&(d.formUrl=l.appendGetParam(d.formUrl,"sort",t)),d.formId="discussion_comment_form_id_",d.formIdParentId?d.formId+="parent_id_"+d.formIdParentId:d.commentId?d.formId+="comment_"+d.commentId:d.postId?d.formId+="post_"+d.postId:d.formId+="unknown",d.formIdParentId?d.autosaveKey="comment-for-"+d.formIdParentId:d.commentId?d.autosaveKey="comment-"+d.commentId:d.autosaveKey="top-comment-for-"+d.postId;var h=a.find(".errorlist").get(0);h&&(d.errors=h.outerHTML),d=r.extend({},n,d);var p=i(e(d)),m=a.parent();a.replaceWith(p),f.init(),c.initGenericControllers(m),r.defer(function(){m.find("form").off("submit"),o.autosubmit.init(m)}),h&&p.find("textarea:visible").focus()}}}();f.editEvents=function(e){var t=".cmmnt, .discsol-post",n="click.commentediting";e.find(".edit-link .action").on("click",function(){var e=i(this),t=e.find(".dropdown-menu"),n=t.outerWidth()<e.offset().left+e.outerWidth()+10;t.toggleClass("pull-right",n)}),e.find(".edit-comment-trigger").off_on(n,function(e){e.preventDefault();var n=i(this).parents(t);d(n),n.addClass("editing"),n.find(".comment-form").removeClass("previewing");var r=n.find("textarea:visible");m(r),r.focus().mentionsAndWikiLinks().autosize();var o=n.find("fieldset");a.setVal(o)}),e.find(".cancel-edit-trigger").off_on(n,function(e){e.preventDefault();i(this).parents(t).removeClass("editing focused replying")}),e.find(".delete-trigger").off_on(n,function(e){e.preventDefault();i(this).parents(t).addClass("deleting")}),e.find(".delete-cancel-trigger").off_on(n,function(e){e.preventDefault();i(this).parents(t).removeClass("deleting")}),e.find(".saved").delay(5e3).fadeOut(200,function(){i(this).remove()})},f.expander=function(e){e.find(".discsol-post .desc, .discsol-post .cmmnt .text").each(function(){var e=i(this);e.innerWidth()!==e[0].scrollWidth&&e.addClass("scrollable")})};var h=function(e){var t=i.id("voting_div_for_comment_"+e),n=t.find(".vote-up.voted").length>0,r=t.find(".vote-down.voted").length>0;return n?"True":r?"False":"None"},p=function(e,t){var n=e.data("vote-count")+t;e.toggleClass("voted",t>0),e.data("vote-count",n),e.find(".count").html(n),e.blur()},m=function(e){e.off_on("mentions.show",function(){e.parents(".cmmnt").addClass("mentions-active")}).off_on("mentions.hide",function(){e.parents(".cmmnt").removeClass("mentions-active")})};f.events=function(e){var t=(e=e||i.body).find(".comment-form").not("#new_post_form_id, #new_solution_form_id, #new_dispute_form_id, #new_wikifeedback_form_id");t.each(function(e,t){var n=i(t);n.find("textarea:visible").each(function(e,t){var r=i(t);m(r),r.mentionsAndWikiLinks();var o=function(){r.autosize(),n.addClass("focused"),setTimeout(function(){r.trigger("autosize.resize")},100)};r.val()?o():r.one("input",function(){o()})})}),t.filter(".previewing").find("textarea").mentionsAndWikiLinks();var n=t.find(".comment-form-buttons");n.find(".preview").off_on("click.previewlink",function(e){e.preventDefault();var t=i(this),n=i(this).parents("form");t.parents(".comment-form-buttons").addClass("dim"),o("discussions_comments").form(n.get(0),{preview_comment:!0})}),n.find(".edit").off_on("click.editlink",function(t){t.preventDefault(),i(this).parents(".comment-form").removeClass("previewing"),f.events(e)}),n.find("[type=submit]").on("click",function(){i(this).parents(".comment-form-buttons").addClass("dim")}),e.find(".cmmnt").each(function(){var e=i(this),t=e.next(".cmmnt-container"),n=t.find(".reply-form-wrapper"),r=e.find(".show-replies"),o=e.find(".hide-replies"),a=e.find(".reply-unhide-link");r.on("click",function(){e.addClass("expanded"),t.removeClass("hide"),n.hasClass("replying")||a.removeClass("hide")}),o.on("click",function(){e.removeClass("expanded"),t.addClass("hide"),a.addClass("hide")})}),e.find(".cmmnt:not(.solution)").each(function(){var e=i(this);e.find(".reply-unhide-link").off_on("click.unhidereply",function(t){t.preventDefault();var n=i(this),r=e.data("comment"),o=i("div.unhide_new_reply_"+r);if(d(o),o.toggleClass("replying"),o.hasClass("replying")){n.addClass("hide");var s=o.find("textarea");m(s),s.mentionsAndWikiLinks();var l=o.find("fieldset");a.setVal(l),s.focus(),o.find(".cancel-edit-trigger").one("click",function(){n.removeClass("hide")})}})}),e.find(".discsol-post").find(".reply-unhide-link").off_on("click.comments",function(){var e=i(this).parents(".discsol-post").next(".discsol-comments");e.toggleClass("hide-form"),e.hasClass("hide-form")||e.find(".top-level-comment-form textarea").mentionsAndWikiLinks()}),e.find(".cmmnt .text").each(function(){var e=i(this),t="preface-html",n=e.data(t);n&&(i("p:first",e).prepend(i(n)),e.removeAttr("data-"+t).removeData(t))}),t.find("textarea").off_on("focus.commentform",function(){var e=i(this).parents(".comment-form");e.addClass("focused"),e.find("textarea:visible").autosize()}),function(e){(e=e||i.body).find(".cmmnt").find(".vote").off_on("click.commentvote",function(e){var t=i(this),n=t.parents(".voting"),r=n.find(".vote-up"),o=n.find(".vote-down"),a=n.data("action_url"),s=n.data("comment_id"),l=h(s),c=t.hasClass("vote-up")?"True":"False";l==c&&(c="None"),i.ajax({type:"POST",url:a,data:{comment_id:s,vote:c}}).fail(u.handler).then(function(e){var t=h(s);t!=e.vote&&("None"==e.vote?"True"==t?p(r,-1):p(o,-1):"True"==e.vote?(p(r,1),"False"==t&&p(o,-1)):"False"==e.vote&&(p(o,1),"True"==t&&p(r,-1)))})})}(),this.editEvents(e.find(".disc-comments")),e.find(".top-level-comment-form,.cmmnt.editing,.reply-form-wrapper.replying").each(function(){d(i(this))})},f.subscribe=function(e){(e=e||i.body).find("a.discussions_subscribe").off_on("click.dscsubscr",function(e){e.preventDefault();var t=i(this),n=t.parents("form"),r=n.find("input[type=checkbox]"),o=n.parents(".disc-post"),a=!t.hasClass("subscribed"),s=n.data();if(t.parents(".wiggle").removeClass("wiggle"),0===o.length&&(o=i(".disc-comments-list")),r.prop("checked",a),n.submit(),!a){var l=o.find(".comment-subscr[data-subscribed=true]"),c={title_text:s.confirmTitle,cancel_text:s.confirmCancel,ok_text:s.confirmOk};l.length>0&&i.confirm(s.confirmText,c,function(e){e&&l.each(function(){i(this).submit()})})}})},f.expandThreadsFor=function(e){e.parents(".cmmnt-container").prev(".cmmnt").find(".show-replies").trigger("click")},f.formattingGuideLink=function(e){var t,n;e.on("click",function(r){r.preventDefault(),t=t||e.data(),(n=n||i(t.target)).fadeToggle(100,function(){n.is(":visible")&&s.Anchors.scrollToTarget(n)})})},f.init=function(e){e=e||i.body,this.events(e),this.votes(e),this.subscribe(e),this.expander(e),e.find(".latexprocessor-block,.latexprocessor-inline").scale_svg()},f.votes=function(e){var t=(e=e||i.body).find(".discsol-vote").not(".inited").not(".disabled");t.addClass("inited"),t.on("click",function(){var e=i(this),t=e.data(),n="True"===t.currentVote?"None":"True";e.hasClass("disabled")||(e.addClass("disabled"),i.ajax({type:"POST",url:t.actionUrl,data:{post_id:t.postId,vote:n}}).fail(u.handler).then(function(n){if(e.removeClass("disabled"),n.success){"True"===n.vote?(e.addClass("voted"),t.count++):(e.removeClass("voted"),t.count--),e.data("current-vote",n.vote);var i=e.find(".vote-count");i.length?i.find(".count").html(t.count):e.find(".count").html(t.count)}}))})},f.add_form=function(){i("#new_post_form_id, #new_solution_form_id, #new_dispute_form_id, #new_wikifeedback_form_id, .edit-solution-form").each(function(){var e=i(this),t=e.find(".comment-form-buttons"),n=t.find(".preview"),r=t.find(".edit");n.off_on("click.dsc",function(n){n.preventDefault(),t.addClass("dim");var r;e.hasClass("edit-solution-form")?(r={preview_comment:!0},f.hitPreviewSolution=!0):r={preview_post:!0},o("discussions").form(i("#"+i(this).data("preview_form_id")),r)}),r.off_on("click.dsc",function(t){t.preventDefault(),e.removeClass("previewing"),i("textarea:visible").mentionsAndWikiLinks()})})},t.exports=f},{"app/error_modal":"app/error_modal","app/generic_controllers":"app/generic_controllers",jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax","util/autosave":"util/autosave","util/global":"util/global","util/ui":"util/ui","util/urls":"util/urls"}],"app/content_modal":[function(e,t,n){var i,r,o,a,s,l=e("jquery"),c=e("underscore"),u=e("util/ui"),f=e("app/generic_controllers"),d=e("util/global"),h=e("util/ajax"),p=e("app/error_modal"),m=e("util/latex"),g={urlStack:[]},v=window.vkey,b=null,y=!1,w=!1,_=!1,k=!1,x=null,C=[],S="assessment_modal_public_solvable_component",M="discussions_modal_single_component",E="profile_savedsets_set_page_modal",T=!1,A={},D={},L=function(e){var t=l(this),n=t.data(),r=n.modalUrl||null;t.addClass("inited"),i&&0!==i.length&&null!==r&&t.find(".modal-link").on("click",function(e){if(!e.metaKey){e.preventDefault();var o=t.parents(".nf-feed-item");if(o.data("just-dragged"))return void o.removeData("just-dragged");if(b=t,O(n),y=n.isSolvable,w=n.isSet,_=n.refreshable,i.addClass("loading"),i.removeClass("loaded"),y?i.addClass("solvable").removeClass("note set"):w?i.addClass("set").removeClass("solvable note"):i.addClass("note").removeClass("solvable set"),D[r])R(r,n);else if(A[r])var a=setInterval(function(){D[r]&&(clearInterval(a),R(r,n))},200);else x=l.ajax({url:r,data:{force_full_page:"true"},success:I,error:P})}})},I=function(t){if(x=null,t.redirect)window.location=t.redirect;else{i.toggleClass("loading loaded");var n=s.modalUrl.replace("/modal","").replace("/_modal","").replace("-thread","/thread");if(n&&window.history.pushState){var u=d.getRelativeUrl();if(n!==u){var h={modalContent:!0};s.isPost||s.isSolvable?(h.isPostOrSolvable=!0,window.history.state&&window.history.state.isPostOrSolvable?window.history.replaceState(h,"",n):(g.urlStack.push(u),window.history.pushState(h,"",n))):(g.urlStack.push(u),window.history.pushState(h,"",n))}}y?(r.html(t),o.html(""),a.html(""),B()):w?(a.html(t),f.initGenericControllers(a),o.html(""),r.html(""),l.cmp("profile_savedsets_set_page_modal").removeClass("leaderboard")):(o.html(t),f.initGenericControllers(o),r.html(""),a.html(""),B()),i.mathjax_update(),m.checkOverflow(i);var p=i.find(".mini-profile");i.on("scroll",c.throttle(function(){p.each(function(){l(this).mini_profile("hide")})},16)),y?e("app/solvables")[S](r):w?e("app/sets")[E](a):e("app/discussions")[M](o)}},P=function(e,t){"abort"!==t&&(404===e.status?(x=null,j(),l(".cmp_"+b.data("param_key")+"_id").parents(".nf-feed-item").remove()):(k=!0,x=null,j(),p.handler(e)))},O=function(e){w&&i.is(":visible")&&(C.push({view:i.clone(),data:s,current_open_feed_item:b}),i.addClass("sub-view")),s=e,i.show().addClass("clearfix"),u.crop(),l.window.off("keydown.nfmodal"),l.window.on("keydown.nfmodal",function(e){27===e.which&&j()})},j=function(e){e=e||{};var t=!1;if(null!==x&&(x.abort(),x=null,t=!0),!k&&b&&b.data("refreshable")){var n=b.data(),r={version:n.version,deferred:n.deferred,page_key:n.page_key,cmp_url:n.cmp_url,individual_reload:n.individual_reload,param_key:n.param_key},o=new h(r.page_key);o.error=function(e){404===e.status?l(".cmp_"+r.param_key+"_id").parents(".nf-feed-item").remove():e.status>0&&p.handler(e)},setTimeout(function(){o.get(r.cmp_url,r)},100)}if(!e.backButtonClicked&&window.history&&window.history.pushState&&!t&&(T=!0,window.history.back()),C.length){var a=C.pop();b=a.current_open_feed_item,i.replaceWith(a.view),i=l.id("nf-feeditem-modal").removeClass("inited"),w=!0,v[E](i),h.autosubmit.init(),q(i),f.initGenericControllers(i)}else b=null,k=!1,i.hide().removeClass("clearfix"),u.crop(!1),l.window.off("keydown.nfmodal")},q=function(e,t){e=e||l.body,i=l.id("nf-feeditem-modal"),r=l.cmp(S),o=l.cmp(M),a=l.cmp(E),!0!==t&&i.length>0&&(e.find(".modal-feed-item").each(L),i.hasClass("inited")||(i.addClass("inited"),i.on("click",function(e){if(e.target===i[0])j();else if(w||C.length){(e.target===r[0]||e.target===o[0]||e.target===a[0]||e.target===l.id("setview-header")[0])&&j()}else l(e.target).hasClass("refresh")&&(e.preventDefault(),l(e.target).parents("form").submit(),setTimeout(function(){window.location.href=window.location.href},1e3))}),i.on("click",".close-modal",function(e){e.preventDefault(),j()}),l("#nf-modal-close").on("click",j)))},N=function(e){if(0!==e.length){var t=e.data().modalUrl;t&&!0!==A[t]&&(A[t]=!0,l.get(t,{is_preloading:!0,force_full_page:!0}).then(function(e){D[t]=e}).fail(function(){A[t]=!1}))}},B=function(){var e=r.add(o).find(".modal-target");e.length&&e.each(function(){N(l(this))})},R=function(e,t){if(I(D[e]),delete D[e],delete A[e],t.isSolvable&&l.body.hasClass("active")){var n=e.replace("?","start_attempt/?");t.version=VERSIONS[t.page_key],l.post(n,t).fail(p.handler)}};g.preloadFirstItem=function(e){N(e.find(".modal-feed-item").first())},g.popstateHandlerHook=function(){if(T)return T=!1,g.urlStack.pop(),!0;var e=g.urlStack;return e.length>0&&d.getRelativeUrl()===e[e.length-1]&&(g.urlStack.pop(),j({backButtonClicked:!0}),!0)},g.modal_events=L,g.feeditem_modal=q,g.feeditem_modal_close=j,t.exports=g},{"app/discussions":"app/discussions","app/error_modal":"app/error_modal","app/generic_controllers":"app/generic_controllers","app/sets":"app/sets","app/solvables":"app/solvables",jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax","util/global":"util/global","util/latex":"util/latex","util/ui":"util/ui"}],"app/discussions":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("util/ajax"),a=e("util/ui"),s=e("app/comments"),l=e("app/sets"),c=e("app/content_modal"),u={},f=window.vkey,d=function(e){e=e||i.body,s.events(e),s.expander(e),s.subscribe(e);var t=i.id("subscr-placeholder");t.length&&i.cmp("discussions_subscribe").appendTo(t).removeClass("hide"),e.find(".latexprocessor-block,.latexprocessor-inline").scale_svg()},h=function(){var e=i("#edit_post_form_id"),t=i("#disc-post-single"),n=i(".edit-form textarea",t);n.autosize().wikiLinks(),i("#newdisc-edit").on("click",function(e){e.preventDefault(),t.addClass("editing"),n.trigger("autosize.resize")}),i("#newdisc-delete").on("click",function(e){e.preventDefault(),t.addClass("deleting")}),e.find(".preview:not(.fake)").on("click",function(t){t.preventDefault(),o("discussions_single").form(e[0],{preview_post:!0})}),e.find(".edit:not(.fake)").on("click",function(e){e.preventDefault(),t.addClass("editing"),t.removeClass("previewing"),n.trigger("autosize.resize")}),i("#delete-cancel").on("click",function(e){e.preventDefault(),t.removeClass("deleting")})};u.onload=function(e){if(d(e),h(),window.location.search.indexOf("unsubscribe_from_post=true")>=0){var t=i.cmp("discussions_subscribe");t.addClass("wiggle"),r.defer(function(){a.Anchors.scrollToTarget(t)})}else{var n=window.location.hash.match(/#comment-a3f5[\d]+e92/);if(n){var o=i(n[0]);s.expandThreadsFor(o),o.addClass("highlight"),setTimeout(function(){o.removeClass("highlight")},3e3)}}e.data("is-page")&&(l.saveitem.tooltip(),l.saveitem.forms())},u.editableTitle=function(e){var t=e.find(".edit-title-link"),n=e.parent().find(".edit-title-form"),i=n.find(".cancel-edit-link");t.add(i).on("click",function(){e.add(n).toggleClass("hide")})};var p="discussions_modal_single_component";u[p]=function(){var e=i.cmp(p);e.find(".mini-profile").mini_profile(),d(),h(),l.saveitem.tooltip(),l.saveitem.forms(),e.find(".modal-target").each(c.modal_events),o.autosubmit.init(e)},f[p]=u[p],f.discussions_single=function(){var e=f.handle.apply(this,arguments);e.mathjax_update(),e.find(".mini-profile").mini_profile(),d(),h(),l.saveitem.tooltip(),l.saveitem.forms()},f.modal_groups_post_component=f.discussions_single,f.discussions_subscribe=function(){f.handle.apply(this,arguments);s.subscribe()},f.discussions_comments=function(){var e=f.handle.apply(this,arguments);e.mathjax_update(),e.find(".mini-profile").mini_profile(),d();var t=e.find(".disc-comments").data("highlighted-comment-id");if(t){var n="comment-a3f5"+t+"e92",o=i.id(n);s.expandThreadsFor(o),o.addClass("highlight"),setTimeout(function(){o.removeClass("highlight")},3e3),o.is_in_pane()||r.delay(function(){a.Anchors.scrollToTarget(o,function(){window.location.hash=n})},500)}},f.discussions_comment_subscribe=function(e,t){f.handle(e,t);s.subscribe()},t.exports=u},{"app/comments":"app/comments","app/content_modal":"app/content_modal","app/sets":"app/sets",jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax","util/ui":"util/ui"}],"app/disputes":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("util/ajax"),a={},s=function(){var e=!1;return function(t){!1===e&&(e=!0,t.find("#solvable-resend-verification-form").submit())}}(),l=function(e,t){e.find(".choose-choice").on("click",function(n){n.preventDefault();var r=t.filter(":checked"),o=e.find("input[type=submit]").hide();if(0!=r.length){i(this).hide();var a=r.val();e.addClass("out"),setTimeout(function(){switch(e.find(".options").hide(),e.find("."+a).show(),a){case"term_help":case"cant_read":break;case"clarification":case"dispute":case"rules_guidelines":o.show()}e.removeClass("out")},250)}})};a.modal=function(e){i.body.children(".modal-bg").find(".dispute-form-modal").parents(".modal-bg").remove();var t=i("#dispute-trigger:not(.active)"),n=e.find("input[type=radio]"),a=e.data(),c=function(){i.body.data("reloading-disputes",!0);var e=a.solvableUrl,t=a.pageKey;o("assessment").get(e,{page_key:t,version:VERSIONS[t]})};if(n.length||i("#cmp_quizzes_interstitial_pane_id:visible").length||e.off_on("hide",c),function(e){var t=e.find("textarea");t.on("keypress.shownote",function(){var n=i(this);r.defer(function(){n.val().length>0&&(e.find(".note").show(),t.off("keypress.shownote"))})})}(e),t.on("click",function(t){t.preventDefault(),e.off_on("hide",function(){var t=n.filter("[checked=checked]");e.find(".options").is(":hidden")&&t.length&&["term_help","cant_read"].indexOf(t.val())>-1&&c()}),e.appendTo("body"),e.modal(),s(e),l(e,n)}),e.find("form").on("submit",function(){i.body.data("reloading-disputes",!0)}),!0===e.data("show-at-start")){var u=i("body > .modal-bg > #dispute_form_id");u.length&&(u.parents(".modal-bg").remove(),e=i("#dispute_form_id")),e.appendTo("body").modal()}},a.webview=function(e){var t=e.find("input[type=radio]");s(e),l(e,t)},t.exports=a},{jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax"}],"app/error_modal":[function(e,t,n){var i=e("jquery");e("util/jquery_custom_plugins");var r={},o=function(){return i.id("default-ajax-error").data()};r.standardError=function(){var e=o();i.modal(e.errorTitle,e.errorContent)},r.timeoutError=function(){var e=o();i.modal(e.errorTitle,e.timeoutContent)},r.backendError=function(e){var t=e.responseJSON.error;i.modal(t.title,t.message)},r.handler=function(e){"abort"!==e.statusText&&(403===e.status?r.backendError(e):"timeout"===e.statusText?r.timeoutError():r.standardError())},t.exports=r},{jquery:"jquery","util/jquery_custom_plugins":"util/jquery_custom_plugins"}],"app/generic_controllers":[function(e,t,n){function i(t,n,i){var r=[],o=Array.prototype.slice.call(arguments).splice(3,100);void 0!==i?(i instanceof Array?r=i:"Arguments"==typeof i?r=Array.protoype.slice.call(i):"object"==typeof i&&r.push(i),r=r.concat(o)):r=o;var c=l(t),u=function(){var e={};return function(n){if(!e[c.context])throw e[c.context]=c.context,a.captureMessage("[module error] "+t+" ("+window.location.pathname+")"),n}}(),f=!1;try{var d=e(c.context);f=!0}catch(e){u(e)}f&&function(e){s(e,c.name,e,r),"function"==typeof n&&n()}(d)}var r=e("jquery"),o=e("underscore"),a=e("raven-js"),s=function(e,t,n,i){for(var r=t.split("."),o=r.pop(),a=0;a<r.length;a++)e=e[r[a]];!function(e,t,n,i){e[t].apply(n,i)}(e,o,n,i)},l=function(e){var t={context:"",name:""},n=e.indexOf(":");return n>0?(t.context=e.substring(0,n),t.name=e.substring(n+1)):(n=e.indexOf("."),t.name=e.substring(n+1)),t};t.exports={initGenericControllers:function(e,t){e=e||r.body,t=o.extend({callback:o.noop,force:!1},t);var n=e.find("[data-controller]").add(e.filter("[data-controller]"));t.force||(n=n.not("[data-controller-inited]"));var a=function(e,t){var n=0;return function(){(n+=1)===e&&"function"==typeof t&&t()}}(n.length,t.callback);n.each(function(){var e=r(this),t=e.data("controller");e.attr("data-controller-inited",!0),t&&t.split(",").forEach(function(t){(t=t.trim()).length&&new i(t,a,e)})})},executeFunctionByName:function(e){i(e,void 0,Array.prototype.slice.call(arguments).splice(1,100))}}},{jquery:"jquery","raven-js":"raven-js",underscore:"underscore"}],"app/header":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("util/analytics"),a=e("util/global"),s=e("app/generic_controllers"),l=e("util/ui"),c={};c.streakModal=function(e){r.defer(function(){if(0===i.id("sales-card").length){if(a.is_mobile)return e.show(),void r.defer(function(){e.addClass("animated")});var t=e.html(),n=i.id("solv-main"),o=n.data("full-url")||"";o+=-1===o.indexOf("?")?"?":"&",t=t.replace(/__share_url__((\?)|(%3F))/g,o).replace(/&streak=|&amp;streak=/g,"&streak="),e.html(t),s.initGenericControllers(e),l.modalController(e),r.defer(function(){e.find(".streak-icon").addClass("animated")}),0===i.id("wiki-main").length&&e.find(".continue-btn").on("click",function(){n.find(".esr-problem")[0].click()})}})},c.topicsNav=function(e){var t=e.find(".hdr-link").find("a"),n=e.children("div"),r=!1;t.on("click",function(t){t.preventDefault(),r=!r,e.toggleClass("expanded",r)}),i.body.on("click",function(o){r&&o.target!==t[0]&&o.target!==n[0]&&0===i(o.target).parents().filter(n).length&&(e.removeClass("expanded"),r=!1)})},c.continuePracticing=function(e){var t=e.data(),n={action:"click",element_type:"button",continue_practicing_quiz_id:t.targetQuizId,continue_practicing_problems_left:t.problemsLeft,path:window.location.pathname,full_path:window.location.pathname+window.location.search},a=i.id("footer-notifs"),s=a.outerHeight(),l=e.outerHeight();a.css("height",s+l+20),e.find(".continue-practicing-button").on("click",function(){o.track("ui",r.extend({element_id:"continue_practicing_button"},n))});e.find("form").find(".close").on("click",function(){e.hide(),a.css("height",s),o.track("ui",r.extend({element_id:"continue_practicing_dismissed"},n))})},t.exports=c},{"app/generic_controllers":"app/generic_controllers",jquery:"jquery",underscore:"underscore","util/analytics":"util/analytics","util/global":"util/global","util/ui":"util/ui"}],"app/instant_response":[function(e,t,n){var i=e("crypto"),r=e("jquery"),o=e("underscore"),a=e("util/global"),s=e("app/generic_controllers"),l=e("util/ajax"),c=e("app/solvables"),u=e("app/sets"),f=e("app/preloaders"),d={},h={},p=null,m=null,g=null,v=function(e){return e=e||{},e.answer=e.answer.trim(),e.preventUpdate=!1,e.hasMultipleOptions||(e=function(e){0===e.answer.indexOf("+")&&(e.answer=e.answer.substring(1)),e.answer.length&&(e.answer=e.answer.replace(/^0+/,""),""===e.answer&&(e.answer="0"));var t=parseFloat(e.answer),n=e.answer.replace(/[\d-Ee\.]/g,"");return isNaN(t)||n.length>0?e.validationError=!0:null===e.answer.match(/[\.Ee]/)||e.isFloat?e.validationError=!1:e.validationError=!0,e.alreadyTriedThisAnswer=e.answersList.indexOf(e.answer.toString())>=0,e}(e)),e.validationError||e.alreadyTriedThisAnswer||(e=function(e){var t=m.update(e.answer+e.salt).digest("hex");return e.answerIsCorrect=t==e.hash,e.answerIsCorrect||(e.answersList.unshift(e.answer),e.preventUpdate=e.isFloat),e.triesLeft--,e.attemptNumber++,e}(e)),e.canStillAnswer=e.triesLeft>0&&!e.answerIsCorrect,e.isMobile=a.is_mobile,e.b2=a.b2,e.answersListWithAnd=function(){var t=e.answersList,n=e.answersList.length;return 1===n?t=t[0]:2===n?t=t.join(" and "):(t[n-1]="and "+t[n-1],t=t.join(",")),t},e};d.processAttemptData=v;d.init=function(e){var t=e.data(),n=h[t.solvable]||{},l=e.parents(".solv-details,.solv-details-loggedout"),b=l.find("#mcq-form,#text_answer_entry_form,.solv-form-logged-out");m=i.createHash("sha1");try{t.answersList=t.answersList.length?t.answersList.split(/,/g):[]}catch(e){t.answersList=[]}if(t.answersList=t.answersList.filter(function(e){return e.length>0}),t.answerIsCorrect=!1,t.$choices=t.hasMultipleOptions&&b.find("svg").length?b.find(".btn-mcq"):null,t.b2=a.b2,null===g||g>=t.numFreeSolutionsRemaining?g=t.numFreeSolutionsRemaining:t.numFreeSolutionsRemaining=g,t.exportOnly)return d.data=t,n.data=t,void(h[t.solvable]=n);n.template=n.template||null,null===n.template&&(n.template=o.template(e.text())),n.data=t,h[t.solvable]=n,b.on("submit",function(e){e.preventDefault(),o.defer(function(){if(!b.data("no_instant_response")){p=t.solvable,t.viewedSolution=b.data("viewed-solution"),t.viewedSolution?t.answer=null:"single_select"===t.problemType?t.answer=b.find("input[type=radio]:checked").val():"multi_select"===t.problemType?(answers=[],b.find("input[type=checkbox]").each(function(e){r(this).is(":checked")&&answers.push(e+1)}),t.answer=answers.join("|")):t.answer=b.find("#id_answer,#logged-out-answer").val(),t.answer?(t.answer=t.answer||"",t.answer=t.answer.replace(/__replace_plus__/g,"+"),t=v(t)):t.canStillAnswer=!1;var e=l.parents(".solv-main");e.data("ir-verification",{canStillAnswer:t.canStillAnswer,answerIsCorrect:t.answerIsCorrect,attemptNumber:t.attemptNumber,triesLeft:t.triesLeft,answer:t.answer,preventUpdate:t.preventUpdate}),t.preventUpdate||(n.$originalSidebar=l.clone(),n.$solvable=e,o.defer(function(){var i=t;t.isMobile&&t.hasMultipleOptions&&!t.answer&&o.extend(i,{canStillAnswer:!0}),l.html(n.template(i)),function(e,t){if(!t.canStillAnswer){var n="endstate "+(t.answerIsCorrect?"correct":"incorrect");if(t.isPracticeSection)if(a.is_ios&&a.app_version.isGreaterThanOrEqualTo("0.9.1"))t.answerIsCorrect?window.location="answercorrect://":window.location="answerincorrect://";else if(a.is_android)try{Android.onPracticeSolvableAnswered(t.answerIsCorrect)}catch(e){}e.addClass(n)}var i=e.parents(".solv-main");if(t.hasMultipleOptions&&t.$choices&&e.find(".btn-mcq").each(function(e){var n=r(t.$choices[e]),i=r(this),o=i.find(".choice-text"),a=o.length?o:i;n.find("input").remove(),a.html(n.html())}),r(".btn-solution").not(".solution-btn-b2").addClass("disabled dim").attr("disabled","disabled"),e.find(".btn.disabled").off_on("click",function(e){e.preventDefault()}),c.practiceAnon(i),u.saveitem.tooltip(),u.saveitem.forms(),s.initGenericControllers(e),e.mathjax_update(),"single_select"==t.problemType&&e.find(".btn-mcq").each(function(){var e=r(this),n=e.data("choice");t.answer===n&&e.addClass(t.answerIsCorrect?"correct":"incorrect")}),t.isPracticeSection||t.isProblemOfTheDay){var o=i.parents(".prac-preload-wrapper");o.length&&f.practice(o,{reloaded:!0,instantResponse:!0})}}(l,t),e.trigger(r.Event("instantresponse.updated",t))})),n.data=t,h[t.solvable]=n}})})},d.timeout=function(){var e=h[p],t=e.$originalSidebar||null;if(null!==t){e.$solvable.find(".solv-details").replaceWith(t),t.find(".spinner").removeClass("active"),t.find(":disabled,.dim").removeClass("dim disabled").removeAttr("disabled"),o.defer(function(){s.initGenericControllers(t),u.saveitem.forms(),u.saveitem.tooltip(),l.autosubmit.init(t)})}},t.exports=d},{"app/generic_controllers":"app/generic_controllers","app/preloaders":"app/preloaders","app/sets":"app/sets","app/solvables":"app/solvables",crypto:72,jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax","util/global":"util/global"}],"app/intercom":[function(e,t,n){function i(e){var t=o.extend({},e);delete t.controller,delete t.controllerInited,delete t.conversationFlag,delete t.delay;var n=a.id("custom-intercom-launcher");if(n.length){var i=n.outerHeight()+2*parseInt(n.css("bottom")),r=a.id("continue-practicing-notif");if(r.length){i+=r.outerHeight()+parseInt(r.css("bottom"))}t.vertical_padding=i}return t}function r(e){return"brilliant_intercom__"+e.user_hash+":"+e.conversationFlag}var o=e("underscore"),a=e("jquery"),s={},l=o.once(function(e){!function(){function t(){var t=r.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/"+e;var n=r.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}var n=window,i=n.Intercom;if("function"==typeof i)i("reattach_activator"),i("update",intercomSettings);else{var r=document,o=function(){o.c(arguments)};o.q=[],o.c=function(e){o.q.push(e)},n.Intercom=o,n.attachEvent?n.attachEvent("onload",t):n.addEventListener("load",t,!1)}}()});s.showOnLoad=function(e){var t=e.data(),n=parseInt(t.delay,10),o=function(){window.Intercom("boot",i(t)),window.localStorage&&t.conversationFlag&&window.Intercom("onShow",function(){window.localStorage[r(t)]="1"})};l(t.app_id),n?setTimeout(o,1e3*n):o(),window.Intercom("onShow",function(){e.addClass("active")}),window.Intercom("onHide",function(){e.removeClass("active")});var a=e.find(".unread-message-counter");window.Intercom("onUnreadCountChange",function(e){a.text(e),a.toggle(e>0)})},s.showOnClick=function(e){var t=i(e.data()),n=!1,r=e.find(".intercom-trigger");r.length||(r=e),l(t.app_id),r.on("click",function(e){e.preventDefault(),n?window.Intercom("show"):(n=!0,window.Intercom("boot",t),window.Intercom(t.method||"showNewMessage"))})},s.showIfConversation=function(e){var t=e.data();window.localStorage&&1===parseInt(window.localStorage[r(t)],10)&&(l(t.app_id),window.Intercom("boot",i(t)))},t.exports=s},{jquery:"jquery",underscore:"underscore"}],"app/login":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("util/global"),a=e("util/analytics"),s={};s.onload=function(){var e=i.id("signin"),t=i.id("signup"),n=i("#signup-form,#signup_form");if(0!==e.length&&0!==t.length&&0!==n.length){var r=window.location.hash||!1;if(r){i("input[name=next]").each(function(){var e=i(this);e.val(e.val()+r)})}var s=function(e){o.is_mobile||e.find("input").filter("[type=email], [type=password], [type=text]").first().focus()};if(i(".goto-signup").on("click",function(n){n.preventDefault(),e.fadeOut(100,function(){t.fadeIn(100),s(t)})}),i(".goto-signin").on("click",function(n){n.preventDefault(),t.fadeOut(100,function(){e.fadeIn(100),s(e)})}),i(".goto-signup-form").on("click",function(e){e.preventDefault(),t.fadeOut(100,function(){n.fadeIn(100),s(n)})}),i(".goto-signup-main").on("click",function(e){e.preventDefault(),n.fadeOut(100,function(){t.fadeIn(100),s(t)})}),e.is(":visible")&&s(e),i(".validation-error").length>0&&a.track("ui",{action:"click",element_type:"form",element_id:"v4_signup_validation_error"}),n.length>0&&!n.hasClass(".fb")){var l=i(this).find("input[type=text], select"),c=i(this).find("#id_birthday_month, #id_birthday_day, #id_birthday_year");l.on("blur.validation",function(e){var t=i.trim(i(this).val()),n=i(this).parents(".control-group"),r=i(this).parents(".outer-field").find(".validation-error-msg");""===t?n.hasClass("error")||(n.addClass("error validation-error"),r.show()):n.hasClass("validation-error")&&(n.removeClass("error validation-error"),r.hide())}),c.off("blur.validation"),c.on("blur.bday_validation",function(e){var t=i(this).parents(".control-group"),n=i(this).parents(".outer-field").find(".validation-error-msg");0===parseInt(i(this).val(),10)?t.hasClass("validation-error")||(t.addClass("error validation-error"),n.show()):t.hasClass("validation-error")&&c.each(function(e,r){if(0===parseInt(i(this).val(),10))return!1;e===c.length-1&&t.hasClass("validation-error")&&(t.removeClass("error validation-error"),n.hide())})})}}},s.googleAuth=function(){var e,t="googleapis.ready",n=function(){window.location.href="/account/google/login/callback/"},o=function(t){t.success&&t.data&&t.data.redirect?"social-signup"==t.data.redirect?window.location=e.signupUrl:"nux"==t.data.redirect?window.location=e.nuxUrl:window.location="/":n()},a=function(){var t=!1;return function(a){t||(t=!0,a.access_token?i.post(e.loginUrl,{access_token:a.access_token}).then(o).always(function(){t=!1}):(a.error&&-1===["immediate_failed","access_denied"].indexOf(a.error)&&n(),r.defer(function(){t=!1})))}}(),s=function(){gapi.auth.signIn({callback:a,clientid:e.clientId,cookiepolicy:"single_host_origin",scope:"profile email",apppackagename:"org.brilliant.android"})};return r.defer(function(){window.googleApisLoaded?i.body.trigger(i.Event(t)):window.onGoogleApisLoaded=function(){window.googleApisLoaded=!0,i.body.trigger(i.Event(t))}}),function(n){e=n.data(),n.on("click",function(){window.googleApisLoaded?s():i.body.on(t,s)})}}(),s.loginBtnFallback=function(e){null===e[0].form&&e.one("click",function(){i.id(e.attr("form")).submit()})},t.exports=s},{jquery:"jquery",underscore:"underscore","util/analytics":"util/analytics","util/global":"util/global"}],"app/mentions":[function(e,t,n){var i=e("jquery"),r=e("underscore");e("lib/podio-mentions-input-1.6.0");var o=null,a={stopTriggerRegex:/\n/,elastic:!1,templates:{mentionItemSyntax:r.template("mention[<%= id %>:<%= value %>]"),autocompleteListItem:r.template('<li data-ref-id="<%= id %>" data-ref-type="" data-display="<%= display %>"><strong><%= content %></strong> <%= age %><%= country %></li>')},mentionRegex:/mention\[[\d]+:(.*?)\]/g,onDataRequest:function(e,t,n){o.prefix=t,i.getJSON(o.url,o,function(e){(e=e||[]).map(function(e){return e.id=e.user_id,e.name=e.first_name+" "+e.last_name,e.age=null!==e.age?e.age.toString():"",e.country=e.country||"",e.age=e.age.length&&e.country.length?e.age+", ":e.age,e.isUser=!0,e}),n.call(this,e)})}},s={triggerChar:"[[wiki-",stopTriggerRegex:/\||\]/,allowRepeat:!0,showAvatars:!0,elastic:!1,onCaret:!0,templates:{mentionItemSyntax:r.template("<%= value %>"),mentionItemHighlight:r.template("<%= value %>")},onDataRequest:function(e,t,n){var r={prefix:t};i.getJSON("/wiki/wiki_suggestions/",r,function(e){(e=e||[]).map(function(e){return e.icon="wiki-icon",e.isWiki=!0,e}),n.call(this,e)})}},l=function(){var e=/\[\[(start|end)(.*?)(\]\]|<br \/>)/g,t=function(e){var t='<span class="wiki-syntax-highlight start-end">'+e;return-1===t.indexOf("<br />")?t+="</span>":t=t.replace("<br />","</span><br />"),t};return function(n){return n.replace(e,t)}}();i.fn.mentions=function(){null!==(o=i.id("mentions-data").data()||null)&&(o[o.type+"_id"]=o.id);var e=a;return e.existingMentions=e.existingMentions||[],e.mentionsStorage={get:function(){return e.existingMentions},set:function(t){e.existingMentions=t}},i(this).mentionsInput(e)},i.fn.wikiLinks=function(e){var t=s;return(e=!0===e)&&(t.highlightFunction=l),i(this).mentionsInput(t)},i.fn.mentionsAndWikiLinks=function(){null!==(o=i.id("mentions-data").data()||null)&&(o[o.type+"_id"]=o.id);var e=a;e.existingMentions=e.existingMentions||[],e.mentionsStorage={get:function(){return e.existingMentions},set:function(t){e.existingMentions=t}};var t={elastic:!1,onCaret:!0,mentions:e,wikiLinks:s};return i(this).mentionsInput(t)}},{jquery:"jquery","lib/podio-mentions-input-1.6.0":"lib/podio-mentions-input-1.6.0",underscore:"underscore"}],"app/mini_profiles":[function(e,t,n){function i(e){var t=[],n=e.offset(),i=f(window),r=i.width()/2,o=e.data("mini_profile_rendered")||null,a=n.top-i.scrollTop();return a-=o?o.height()+50:300,t.push(n.left>r?"right":"left"),t.push(a>0?"top":"bottom"),t.join(" ")}function r(e,t){var n={},i=e.offset(),r=t.attr("class").split(" ");-1!==r.indexOf("top")?n.top=i.top-(t.height()+20):n.top=i.top+e.height()+20,-1!==r.indexOf("left")?n.left=i.left+e.width()/2-3:n.left=i.left-t.width()+e.width()/2;return{zIndex:e.parents(".modal,.nf-feeditem-modal").length?700:300,top:~~n.top,left:~~n.left}}function o(e,t){f(".topic > div",t);t.off_on("mouseenter",function(){a(e)}),t.off_on("mouseleave",function(){s(e)});var n=t.find(".mp-following");v(n),t.hasClass("editable")&&t.find(".btn-edit").off_on("click",function(n){n.preventDefault(),t.toggleClass("editing");var i=t.hasClass("editing");u(e,t,{isEditing:i,wasEditing:!0})})}function a(e){clearTimeout(e.timeout)}function s(e){e.timeout=setTimeout(function(){var t=g[e.id];(!t||t&&!t.data.wasEditing)&&e.hide()},300)}function l(e,t){g[e].data=d.extend({},g[e].data,t)}function c(e,t){var n={element_id:"profile_card_"+e};t&&(n.field_name=t),p.track("ui",n)}function u(e,t,n){var o,a,s,h=t.find(".profile-content"),p=g[e.id]||null;p?(o=p.template,s=p.data,a=p.errorTemplate):(o=d.template(h.find("script").text()),s=h.data(),a=d.template(s.genericErrorMessage)),n&&(s=d.extend(s,n)),s=function(e){var t={};return["interests","skills","competitions"].forEach(function(n){var i=e[n];if(!d.has(i,"numOthers")){var r=i.length-e.listFieldDisplayLength;t[n]={items:i,numOthers:Math.max(r,0)}}}),d.extend({},e,t)}(s),g[e.id]={template:o,errorTemplate:a,data:s},h.html(o(s)),s.isEditing||m.loadForElement(h.find(".status-msg"),!0),s.isEditing?(!function(e,t){t.find(".text-field-group").each(function(e){return function(){var t=f(this),n=t.find("[contenteditable]"),i=(t.find(".error"),t.data("url")),r=function(e,t){var n=e.text().trim(),i="default-value",r=e.data("default"),o=e.hasClass(i);o&&!t||0!==n.length&&n!==r?n.length&&o&&n!==r&&(e.removeClass(i),e.css({minWidth:16})):(e.addClass(i),t?e.text(r):e.text(""))},o=function(t){null===t&&(t=g[e.id].errorTemplate({isRemoving:!1}))};n.on("click focus",function(){d.defer(function(){document.execCommand("selectAll",!1,null)})}),n.on("blur",function(){var t={},a=!1;n.each(function(){var e=f(this),n=e.text().trim(),i=e.data();n===i.default.trim()&&(n=""),n!==i.current&&(a=!0,e.data("current",n),c("edited_field",i.name)),i.apiFieldName&&(t[i.apiFieldName]=n),t[i.name]=n,d.defer(function(){r(e,!0)})}),a&&f.post(i,t).then(function(n){n.success?(o(""),l(e.id,t)):o(n.value)}).fail(function(e){o(null)})}),n.on("input",function(e){r(f(this),!1)}),n.on("focus",function(e){var t=f(this),n=t.data("default");t.text().trim()===n&&d.defer(function(){t.css({minWidth:t.width()}),t.text("")})}),n.on("keydown",function(e){13!==e.which&&27!==e.which||(e.preventDefault(),f(this).blur(),window.getSelection().removeAllRanges())}),n.each(function(){var e=f(this);e.data("current",e.text()),r(e,!0)})}}(e)),t.find(".list-field").each(function(e,t){return function(){var n=f(this),i=n.find("input"),r=n.data(),o=r.url,a=g[e.id].data[r.fieldName+"Typeahead"],s=!1,d=function(n){var i={};i[r.fieldName]=n,l(e.id,i),u(e,t)},h=function(t,i){var r=!0===i,o=r?".removal-error":".input-error";null===t&&(t=g[e.id].errorTemplate({isRemoving:r})),n.find(o).text(t),n.find("[disabled]").prop("disabled",!1)},p=function(){var e=i.val().trim();if(e.length&&!s){s=!0;var t={value:e};i.prop("disabled",!0),f.post(o,t).then(function(e){e.success?d(e.existing_values):h(e.value)}).fail(function(){h(null)}).always(function(){s=!1}),c("list_added_item",r.fieldName)}};n.find(".btn-remove").on("click",function(){var e=f(this),t={remove:e.data("id")};e.prop("disabled",!0),f.post(o,t).then(function(e){e.success?d(e.existing_values):h(e.value,!0)}).fail(function(){h(null,!0)}),c("list_removed_item",r.fieldName)}),i.typeahead({source:a,menu:'<ul class="typeahead dropdown-menu miniprofile"></ul>',matchWidth:!0}),i.on("ta_select",p),i.on("keydown",function(e){13!==e.which&&27!==e.which||setTimeout(p,200)})}}(e,t))}(e,t),s.trackedViewed||(c("edit_state_viewed"),s.trackedViewed=!0)):s.wasEditing&&(c("edit_state_closed"),s.trackedViewed=!1),t.removeClass("left right top bottom").addClass(i(e.$target)),t.css(r(e.$target,t))}var f=e("jquery"),d=e("underscore"),h=(e("util/global"),e("util/ajax"),e("app/error_modal")),p=e("util/analytics"),m=e("util/mathjax_loader"),g={},v=function(e){e.show(),e.off("submit"),e.on("submit",function(t){t.preventDefault();var n=e.attr("action"),i=e.serializeArray(),r=e.find("[name=subscribed]"),o=0,a=i.length,s={};for(o;o<a;o++)s[i[o].name]=i[o].value;r.val(r.data("alt-value")),r.data("alt-value",s.subscribed),f.post(n,s).done(function(t){if(!0!==t.success){var n=e.find(".errors").data(),i=n[t.reason]||n.error_unknown;f.modal(n.error_title,i)}t.redirect_url&&(window.location=t.redirect_url)}).fail(h.handler)})},b=!1,y=function(e){this.$target=f(e),this.id=this.$target.data("id")||null,this.loading=!1,this.hid_while_loading=!1,this.timeout=null,this.visible=!1,null!==this.id&&function(e){var t;e.$target.on("mouseenter",function(){t=setTimeout(function(){e.show()},200)}),e.$target.on("mouseleave",function(){clearTimeout(t),s(e)})}(this)};y.prototype={show:function(){if(!this.visible){var e=this,t=f.body.children("#mini-profile-"+this.id),n={};f(".mini-profile").miniProfile("hide"),function(e){f.body.on("click.mp",function(t){e.visible&&0===f(t.target).parents(".mini-profile-full,.mini-profile-full-new").length&&e.hide()});var t=f.id("nf-feeditem-modal");t.length&&t.is(":visible")&&f.window.on("scroll.mp",d.throttle(function(t){e.visible&&e.hide()},16))}(this);var a=function(t){t.removeClass("left right top bottom").addClass(i(e.$target))};t.length>0&&this.$target.data("mini_profile_rendered",t),(n=this.$target.data()).mini_profile_rendered?(a(n.mini_profile_rendered),n.mini_profile_rendered.css(r(this.$target,n.mini_profile_rendered)).show(),this.visible=!0,g[this.id]&&l(this.id,{isEditing:!1,wasEditing:!1}),n.mini_profile_rendered.hasClass("mini-profile-full-new")&&(n.mini_profile_rendered.removeClass("editing"),u(this,n.mini_profile_rendered)),o(this,n.mini_profile_rendered)):function(e,t){b||(e.loading=!0,b=!0,f.get("/profile/mini_profile/",{identity:e.id,orientation:""}).done(function(e){b=!1,t(200==e.status?e.new_html:null)}).fail(function(){b=!1,t(null)}))}(this,function(t){if(null!==t){f.body.append(t);var n=f.body.find("#mini-profile-"+e.id);a(n),n.css(r(e.$target,n)),e.$target.data("mini_profile_rendered",n),e.loading=!1,e.hid_while_loading?(e.hid_while_loading=!1,e.hide(),e.visible=!1):(e.visible=!0,n.hasClass("mini-profile-full-new")&&u(e,n),o(e,n)),p.set_analytics_events(n)}})}},hide:function(){if(this.loading)this.hid_while_loading=!0;else{a(this),f.body.off("click.mp"),f.window.off("scroll.mp"),this.visible=!1;var e=this.$target.data("mini_profile_rendered")||null;null!==e&&(e.find(".list-field input").typeahead("hide"),e.hide())}}},f.fn.miniProfile=f.fn.mini_profile=function(e){return f(this).filter(".mini-profile").each(function(){var t=f(this),n=t.data("mini-profile");if(void 0!==e)try{n[e]()}catch(e){}else n||(n=new y(this),t.data("mini-profile",n))})},f(function(){f.body.hasClass("miniprofile-enabled")?f(".mini-profile").miniProfile():f.fn.miniProfile=function(){}})},{"app/error_modal":"app/error_modal",jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax","util/analytics":"util/analytics","util/global":"util/global","util/mathjax_loader":"util/mathjax_loader"}],"app/newsfeed":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=(e("bootstrap-datepicker"),e("util/global")),a=(e("util/ajax"),e("app/content_modal")),s=e("util/pager"),l=e("util/tag"),c=e("util/ui"),u=e("app/sets"),f=e("util/latex"),d=e("util/urls");e("util/popstate");var h=o.is_mobile?5:15,p={},m=window.vkey||{},g={topic:"sub_topic",sub_topic:"chapter",chapter:"recommended_concept_quiz"},v={},b=function(e,t,n,o){o=o||r.noop;var a=t+"-"+n;if(void 0!==e&&v["load_action_"+e]!==a){v["load_action_"+e]=a;var s={next_category_type:e,current_selected_category_id:t,previous_selected_category_id:n};i.post("/assessment/get_categorization_options/",s).done(function(t){v[e]=t,o()})}else o()},y=function(e,t,n,o){o=o||r.noop,void 0!==v[t]&&void 0!==v[t][n]?b(g[t],"",n,function(){var a=v[t][n],s=e.find("select"),l=e.find("div.dropdown");!function(e,t){var n=r.template(i("#custom_select_options_tmpl").text())({options:t}),o=e.find("ul.dropdown-menu"),a=r.template(i("#html_select_options_tmpl").text())({options:t}),s=e.find("select"),l=s.val();e.find(".dropdown-menu a").find("span").first().html("..."),o.html(n),s.html(a),c.CustomSelectbox(e),l&&setTimeout(function(){o.find('[data-opt-value="'+l+'"]').click()},50)}(e,a),s.off_on("change",function(){w(l,t,s.val())}),o(!0)}):o(!1)},w=function(e,t,n){var r=e.parent("div.field"),o=g[t],a=r.parent().find("div.field-"+o);n&&a.length>0&&y(a,o,n,function(e){e&&(!0===a.data("is-reloading")?a.data("is-reloading",!1):(r.slideUp(),a.find("a.back_link").show(),a.slideDown(400,function(){i(this).css("overflow","visible")})))})};p.CategorizationNavBack=function(){return function(e){var t=e.parents("div.field"),n=t.prev();e.on("click",function(){t.slideUp(),n.slideDown(400,function(){i(this).css("overflow","visible")})})}}(),p.TopicSelector=function(){var e,t;return function(n){e=n.find("select"),t=n.data(),p.selectedTopic=null;var i=function(){p.selectedTopic=parseInt(e.val(),10),void 0!==t.filter_categories&&w(n,"topic",e.val())};e.off_on("change",i),void 0!==t.filter_categories&&b("sub_topic","","",i)}}(),p.LevelSelector=function(){var e;return function(t){e=t.data("level-data"),t.on("open",function(){var n=e[p.selectedTopic]||0;t.find(".dropdown-menu a").each(function(){var e=i(this);(e.data("opt-value")||0)>n?e.addClass("disabled"):e.removeClass("disabled")})})}}(),p.difficultySelector=function(e){var t=e.hasClass("dropdown")?e:e.parents(".dropdown"),n=e.find("a, .lvl"),r=i.id("nf-difficulty-form"),o=r.find(":radio");t.removeClass("dim"),n.on("click",function(e){e.preventDefault();var a=i(this);o.filter("[value="+a.data("opt-value")+"]").prop("checked","checked"),t.addClass("dim"),n.addClass("disabled").removeClass("active"),a.addClass("active"),r.submit()})},p.filterMenu=function(e){e.find(".trigger").on("click",function(){e.toggleClass("filtering")})};var _=function(e){((e=e||i.body).is(".nf-feed-item")?e:e.find(".nf-feed-item")).each(function(){var e=i(this);e.find(".staff-tools-toggle").on("click",function(t){t.preventDefault(),t.stopPropagation(),e.find(".staff-tools").toggle()}),e.find(".mini-profile").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=i(this).data("url");t&&(window.location.href=t)})})};p.datepicker=function(e){var t=!1,n={maxViewMode:0,minViewMode:"days",startView:0,clearBtn:window.location.search.search(/[\?|&]before_date=/)>=0,templates:{leftArrow:'<span class="arrow left"></span>',rightArrow:'<span class="arrow right"></span>'}},i=function(t){var n=d.getParamsObject();null!==t?n.before_date=t.getTime()/1e3:n.before_date&&delete n.before_date,e.siblings(".dropdown-toggle").dropdown("toggle"),window.location=d.appendGetParams(window.location.pathname,n)};e.datepicker(r.extend({},n,e.data())),e.on("changeDate",function(e){t||i(e.date)}),e.find(".clear").on("click",function(e){t=!0,i(null)})},p.portalFeed=function(e){e.find("select").on("change",function(){if(e.addClass("loading"),"/community/home/"===window.location.pathname)i(this.form).submit();else{var t={};e.find("select").each(function(){t[this.name]=this.value});var n=r.template(e.data("url-format"))(t);window.history?(i(this.form).submit(),window.history.replaceState({},"",n)):window.location.href=n}}),e.find(".feed-section-choice").on("click",function(){var e=i(this).data();i(e.field).val(e.choice).trigger(i.Event("change"))});var t=".portal-feed-filters";e.find(t+" > button").on("click",function(){i(this).parents(t).toggleClass("open")})},p.problemsFeedPreviews=function(){var e,t,n,r,o,a,s={},l=!1,c=!1;return function(u){if((e=i.id("problem-preview-tooltip")).length){t=e.find(".content"),n=e.find(".dropdown-menu"),r=n.outerHeight(!0)-t.outerHeight()+parseInt(t.css("max-height"));var d=function(){a=setTimeout(function(){c||(e.css("left",-99999),l=!1)},300)};e.appendTo(i.body),u.find(".modal-feed-item").each(function(){var c=i(this),u=c.data("solvable-id"),h=c.data("preview-url"),p=function(n){l&&e.data("solvable-id")===u&&(t.html(n).mathjax_update(),f.checkOverflow(t),m())},m=function(o){o=o||{};var a=c.offset().top+c.outerHeight()/2,s=o.useActualHeight?n.outerHeight(!0):r,l=i.window.scrollTop(),u=l+i.window.height(),f=a-s,d=a+s,h="bottom";d>u&&(f>l||f<l&&d-u>l-f)&&(h="top"),e.toggleClass("dropdown","bottom"===h),e.toggleClass("dropup","top"===h),e.css({left:c.offset().left,top:a}),e.toggleClass("overflowing",t[0].scrollHeight>t[0].clientHeight)};c.on("mouseenter",function(){clearTimeout(a),o=setTimeout(function(){var n=u in s;e.toggleClass("loading",!n),t.html(n?s[u]:"").mathjax_update(),f.checkOverflow(t),m({useActualHeight:n}),l=!0,e.data("solvable-id",u),n||i.get(h).always(function(){e.removeClass("loading")}).then(function(e){s[u]=e,p(e)}).fail(function(){p("Sorry! Something went wrong.")})},280)}).on("mouseleave",function(){clearTimeout(o),d()})}),e.off_on("mouseenter.problemPreview",function(){c=!0}).off_on("mouseleave.problemPreview",function(){c=!1,d()})}}}(),p.portalFeedSwitcher=function(e){var t=e.find("#switcher-btns .btn"),n=i(".modal-feed-item.feed-section-row"),a=n.outerHeight()-2*parseInt(n.css("padding-top"),10),s=function(e){e.find(".latexprocessor-inline,.latexprocessor-block,.MathJax").each(function(){var e=i(this).parents(".td"),t=e.height();t>a&&e.css({transform:"scale("+a/t+")",transformOrigin:"0 0"})})};t.on("click",function(n){n.preventDefault();var r=i(this);if(!r.hasClass("active")){t.removeClass("active"),r.addClass("active"),e.find(".feed-section").removeClass("active");var a=e.find(r.data("target"));a.addClass("active"),o.is_mobile||s(a)}}),o.is_mobile||r.defer(function(){s(i(".feed-section:visible"))})},i(function(){var e=i.id("newsfeed-page","newsfeed-set-page"),t=i.id("newsfeed-editor"),n=i.id("profile"),o=i.id("wiki-main");t.length>0?l.tagging_events(t):(e.length>0||n.length>0||o.length>0)&&(s.init(),o.length||s.autopagination(),a.feeditem_modal(),i(".nf-feed-subscription").each(function(){var e=i(this);0===e.children().length&&e.remove()}),i(".latexprocessor-block").scale_svg(),_()),i(document).on("click",".nf-btn-action:not(.disabled, .btn-save)",function(e){e.preventDefault();var t=i(this),n=t.parents("form"),r=n.data()||{},o=r.count||0,a=t.hasClass("active");t.hasClass("loading")||"ignore"===t.data("action")||(o=a?o-1:o+1,n.data("count",o),t.html(r.tmpl.replace("[count]",o)),t.toggleClass("zero",0===o),t.toggleClass("active"),t.addClass("loading"),setTimeout(function(){n.submit()},1))}),i.body.on("click",".btn-follow",function(e){e.preventDefault();var t=i(this).parents("form"),n=t.find("[type=submit]"),o=t.find("[name=subscribed]"),a=n.data(),s=o.val(),l=n.html().trim(),c=a.toggleClass||"btn-accent",u=n.hasClass("btn-toggle");r.defer(function(){n.html(a.altText),n.data("alt-text",l),n.trigger("blur").toggleClass(c).toggleClass("btn-subscribed","yes"===s)}),setTimeout(function(){t.submit()},u?200:10)})});var k=function(e,t){var n=m.handle(e,t);i(".nf-next-container.loading").removeClass("loading").addClass("loaded"),n.find(".mini-profile").mini_profile(),n.mathjax_update(),a.feeditem_modal(n),s.reset_autopagination_point(),s.needs_additional_pagination(n),i(".latexprocessor-block").scale_svg(),f.checkOverflow(n),i.cmp("profile_savedsets_set_page").length&&u.setview.update_feed(n);(new Date).getTime();i.window.trigger("scroll"),a.open_modal_is_set&&a.preloadFirstItem($newsfeed_modal_set_content),_(n)};m.newsfeed_newsfeed_container=k,m.newsfeed_firehose_container=k,m.newsfeed_explore_container=k,m.newsfeed_feed_container=k,m.profile_newsfeed_favorites_container=k,m.problems_started_problems_container=k,m.newsfeed_generic_tag_container=k,m.profile_savedsets_set_container=k,m.profile_savedsets_set_listing_container=k,m.profile_newsfeed_favorites=k,m.newsfeed_generic_tag=k,m.wiki_community_posts_container=k,m.topic_feed_container=k,m.topic_feed_page=k,m.problems_feed_container=k,m.discussions_feed_container=k,m.sets_feed_container=k,m.home_activity_container=k,m.community_problems_container=k,m.community_discussions_container=k,m.community_wikis_featured_container=k,m.groups_newsfeed_container=k,m.community_portal_lttr_listing_container=k,m.community_portal_featured_users_listing_container=k,m.community_portal_problems=m.community_portal_need_solution=m.community_portal_discussions=m.community_portal_problems_container=m.community_portal_need_solution_container=m.community_portal_discussions_container=function(e,t){if(k(e,t),i.body.hasClass("portal-page")){i(".cmp_"+t+"_id").parents(".feed-section").find(".nf-feed-item-wrapper").slice(h).remove()}s.autopagination(!0),i.window.trigger("scroll")},m.profile_savedsets_set_page=function(e,t){var n=m.handle(e,t);a.feeditem_modal(n),u.setview.reset_container(),u.setview.update_feed(n),s.autopagination(),s.reset_autopagination_point(),s.needs_additional_pagination(n),i.window.trigger("scroll")};var x=function(e,t){var n=m.handle(e,t);n.find(".mini-profile").mini_profile(),n.mathjax_update(),a.feeditem_modal(n),i(".latexprocessor-block").scale_svg(),_(n.parent())};m.newsfeed_feeditem_challengerecommendation=x,m.problems_started_solvable_component=x,m.profile_savedsets_item_problem=x,m.profile_savedsets_setlisting_item_set=x,m.newsfeed_feeditem_saved_set=x,m.groups_feeditem_discussionpost=x,m.groups_feeditem_newsfeedproblemset=x,m.friends_sidebarleaderboard=function(e,t){m.handle(e,t);friends_leaderboard_events()},m.contacts_newsfeed_element=function(e,t){m.handle(e,t).find(".mini-profile").mini_profile()},m.newsfeed_mark_reshare=function(e,t){var n=m.handle(e,t).parents(".cmp_reshare").first(),r=n.data("reshare-key");r&&i('.cmp_reshare[data-reshare-key="'+r+'"]').not(n).find("> div").each(function(){i(this).html(e.new_html)})},t.exports=p},{"app/content_modal":"app/content_modal","app/sets":"app/sets","bootstrap-datepicker":21,jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax","util/global":"util/global","util/latex":"util/latex","util/pager":"util/pager","util/popstate":"util/popstate","util/tag":182,"util/ui":"util/ui","util/urls":"util/urls"}],"app/notifications":[function(e,t,n){var i=e("jquery"),r=e("util/ajax"),o=e("util/global"),a={},s=null,l=0,c=document.title,u=function(e){document.title=(e?"("+e+") ":"")+c},f=function(e){null!==s&&e!==l&&(s.text(o.commaFormat(e)),0===l?s.removeClass("hide"):0===e&&s.addClass("hide"),l<e&&(s.parents("#header").removeClass("short"),s.addClass("wiggle-more")),u(e),l=e)};a.dropdownHandler=function(e){var t=e.find(".cmp-deferred"),n=t.parent(),i=t.clone(),o=!1;e.on("open",function(){o?(n.html(t),r.deferred.load(i)):(r.deferred.load(t),o=!0),s.length&&s.removeClass("wiggle-more")}),e.find(".dropdown-menu").on("click",function(e){e.stopPropagation()})},a.toggleDismissed=function(e){e.on("click",function(t){t.preventDefault();var n=e.data();e.addClass("dim"),r(n.pageKey).get(e.attr("href"),{component_key:n.componentKey})})},a.unreadCount=function(e){s=e,l=parseInt(s.text().replace(/,/g,""),10),u(l);var t=s.data(),n=0,r=function(){var e;i.get(t.url).then(function(t){"num_notifications"in t?f(t.num_notifications):"logged_out"in t&&clearTimeout(e)}),e=setTimeout(r,function(e){return 100*Math.pow(e,2)+500*e+5e3}(n)),n++};r()},a.updateCount=function(e){f(e.data("notif-count")),i(".dropdown.hdr-settings").trigger("update")},window.vkey=window.vkey||{},window.vkey.notifications_page=function(e,t){e.new_html=e.new_html.replace(/&amp;(.*?);/g,"&$1;");window.vkey.handle(e,t).mathjax_update()},t.exports=a},{jquery:"jquery","util/ajax":"util/ajax","util/global":"util/global"}],"app/nux":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("d3"),a=e("topojson"),s=e("util/global"),l=e("util/flags"),c=e("util/analytics"),u=e("util/urls"),f=(e("util/ui"),e("app/generic_controllers")),d=(e("app/error_modal"),{}),h=null,p=0,m="nx-target-active",g=function(e){var t=p;p=e,r.defer(function(){h.removeClass("nx-slide-"+t).addClass("nx-slide-"+p);var e=h.find(".slide-"+p),n=e.data("on-visible")||null;b(e),n&&f.executeFunctionByName(n,e),h.trigger(i.Event("nux.slidechange"))});var n=!0===i.body.data("is-mobile")?"_mobile":"_desktop";c.track("ui",{action:"click",element_type:"button",element_id:"nux_slide_"+e+n})},v=function(){g(p+1)},b=function(e){r.defer(function(){i("."+m).off("click.lock").removeClass(m),e.length>0?(e.find(".nx-modal").each(function(){var t=e.data("reposition-handler");t?f.executeFunctionByName(t,i(this)):y(i(this))}),r.defer(function(){e.addClass("in")})):(i.body.trigger("nuxClose"),h.hide())})},y=function(e){var t=e.data("target")||null;if(t){var n=i(t);r.defer(function(){n.addClass(m),function(e,t,n){var o=e.data("reposition");o&&r.defer(function(){if("top-top"===o||"bottom-top"===o){var r=t.offset().top+("bottom-top"===o?t.outerHeight():0),a=e.offset().top-e.position().top;e.css({top:r-a+parseInt(e.css("margin-top"))}),n&&e.show(),i.id("prac-topic-header").length&&i.html.add(i.body).animate({scrollTop:t.offset().top-i.id("header").outerHeight()-28},{duration:300})}})}(e,n)})}};d.tour=function(e){var t=(h=e).prop("class").match(/nx-slide-(\d{1,})/)[1];p=parseInt(t,10),g(p),h.on("click",".nx-next",v),r.defer(function(){window.history.replaceState&&window.history.replaceState({},"",window.location.href.replace(/tour=true&?/,"").replace(/[&\?]$/,""))})},d.overlay=function(e){e.on("click",function(){l.update(e.data("flag"),!0),r.defer(function(){e.hide()})})},d.banner=function(e){l.update(e.data("flag"),!0)},d.problemsOfTheDay=function(e){l.update(e.data("flag"),!0)},d.potdHighlight=function(e){var t=e.find(".nx-modal");setTimeout(function(){var e=t.offset(),n=i.window.height();if(e.top>n){var r=i.html.add(i.body);r.animate({scrollTop:e.top-n+t.height()+8}),h.on("nux.slidechange",function(){r.animate({scrollTop:0})})}},500)},d.welcomePage=function(e){var t=e.find(".nux-welcome-step"),n=e.find(".category-link"),r=e.find(".category-item"),o=window.location.search.indexOf("step=")>=0?parseInt(window.location.search.match(/[\?&]step=(\d{1})/)[1],10):1;e.find(".continue").on("click",function(e){e.preventDefault(),o++,t.removeClass("active"),t.filter(".nux-welcome-step-"+o).addClass("active");try{window.history.replaceState({},null,this.href.replace("step="+(o-1),"step="+o))}catch(e){}});var a=e.find('.btn[type="submit"]');n.on("click.selectCategory",function(){a.prop("disabled",""),s.is_mobile||e.find(".content").removeClass("unselected-category"),n.off("click.selectCategory")}),n.on("click",function(e){var t=i(this);if(!t.hasClass("active")){var o=t.data();n.removeClass("active"),t.addClass("active"),t.find("input").prop("checked",!0),r.removeClass("active"),r.filter(o.target).addClass("active"),c.track("ui",{action:"click",element_id:"clicked_nux_category_option",user_category:o.category,element_type:"button"})}})},d.earthAnimation=function(e){var t=u.getParamsObject();if(!t.step||1===parseInt(t.step,10)){var n=e.width(),i=e.height(),r=n/200*100,s=o.geo.orthographic().scale(r).translate([n/2,i/2]).clipAngle(90),l=o.geo.path().projection(s),c=o.scale.linear().domain([0,n]).range([-180,180]),f=o.select(e[0]).append("svg").attr("width",n).attr("height",i),d={type:"Topology",transform:{scale:[.036003600360036005,.017366249624962502],translate:[-180,-90]},objects:{land:{type:"GeometryCollection",geometries:[{type:"Polygon",arcs:[[0]]},{type:"Polygon",arcs:[[1]]},{type:"Polygon",arcs:[[2]]},{type:"Polygon",arcs:[[3]]},{type:"Polygon",arcs:[[4]]},{type:"Polygon",arcs:[[5]]},{type:"Polygon",arcs:[[6]]},{type:"Polygon",arcs:[[7]]},{type:"Polygon",arcs:[[8,9]]},{type:"Polygon",arcs:[[10,-10]]},{type:"Polygon",arcs:[[11]]},{type:"Polygon",arcs:[[12]]},{type:"Polygon",arcs:[[13]]},{type:"Polygon",arcs:[[14]]},{type:"Polygon",arcs:[[15]]},{type:"Polygon",arcs:[[16]]},{type:"Polygon",arcs:[[17]]},{type:"Polygon",arcs:[[18]]},{type:"Polygon",arcs:[[19]]},{type:"Polygon",arcs:[[20]]},{type:"Polygon",arcs:[[21]]},{type:"Polygon",arcs:[[22]]},{type:"Polygon",arcs:[[23]]},{type:"Polygon",arcs:[[24]]},{type:"Polygon",arcs:[[25]]},{type:"Polygon",arcs:[[26]]},{type:"Polygon",arcs:[[27]]},{type:"Polygon",arcs:[[28]]},{type:"Polygon",arcs:[[29]]},{type:"Polygon",arcs:[[30]]},{type:"Polygon",arcs:[[31]]},{type:"Polygon",arcs:[[32]]},{type:"Polygon",arcs:[[33]]},{type:"Polygon",arcs:[[34]]},{type:"Polygon",arcs:[[35]]},{type:"Polygon",arcs:[[36]]},{type:"Polygon",arcs:[[37]]},{type:"Polygon",arcs:[[38]]},{type:"Polygon",arcs:[[39]]},{type:"Polygon",arcs:[[40]]},{type:"Polygon",arcs:[[41]]},{type:"Polygon",arcs:[[42]]},{type:"Polygon",arcs:[[43]]},{type:"Polygon",arcs:[[44]]},{type:"Polygon",arcs:[[45],[46]]},{type:"Polygon",arcs:[[47]]},{type:"Polygon",arcs:[[48]]},{type:"Polygon",arcs:[[49]]},{type:"Polygon",arcs:[[50]]},{type:"Polygon",arcs:[[51]]},{type:"Polygon",arcs:[[52]]},{type:"Polygon",arcs:[[53]]}],bbox:[-180,-90.00000000000003,180.00000000000014,83.64513000000002]}},arcs:[[[3345,574],[-16,-56],[-171,43],[187,13]],[[3745,688],[51,-114],[-264,-54],[116,168],[97,0]],[[3098,1097],[-9,-70],[-150,-12],[109,201],[50,-119]],[[0,304],[279,48],[330,-86],[265,-13],[157,60],[-297,50],[20,95],[-111,54],[172,-13],[108,81],[-238,50],[-45,101],[112,-11],[189,59],[50,54],[253,71],[431,-10],[160,44],[177,-85],[192,-7],[-84,155],[204,-58],[220,35],[338,-55],[203,55],[47,79],[-35,88],[21,161],[132,154],[24,-89],[-94,-80],[111,-202],[-13,-193],[-239,-126],[-185,-5],[82,-48],[-101,-48],[71,-108],[436,-122],[40,-48],[235,85],[194,-20],[396,100],[-32,62],[-165,-11],[-4,64],[191,96],[213,44],[162,104],[-2,55],[144,109],[279,-22],[271,94],[270,7],[92,-46],[262,59],[52,67],[133,-73],[365,203],[127,15],[167,-117],[181,5],[18,-101],[-44,-125],[85,-14],[79,128],[105,24],[143,129],[144,58],[74,-59],[252,-1],[87,97],[93,-79],[206,61],[202,-76],[40,37],[180,-12],[165,32],[75,-43],[224,2],[32,-56],[212,-38],[233,-126],[237,-55],[-54,-113],[-140,-104],[-21,-92],[98,-97],[-145,-24],[-55,-103],[75,-64],[298,-135],[140,-4],[-9951,-14]],[[3118,2082],[75,-49],[-86,-53],[-80,32],[66,140],[25,-70]],[[9038,2834],[80,-5],[-10,-135],[-52,-19],[-18,159]],[[9805,2826],[34,-49],[-136,-280],[-64,88],[166,241]],[[9849,3100],[109,-88],[-70,-207],[-61,102],[22,193]],[[0,4229],[9981,-14],[2,24],[-9983,18]],[[0,4257],[0,-28]],[[0,4257],[0,-28]],[[6390,4402],[11,-96],[-93,-560],[-85,-2],[-20,127],[31,378],[91,93],[41,147],[24,-87]],[[8987,4390],[28,-24],[50,-275],[180,-364],[7,-325],[-102,-395],[-87,-72],[-157,58],[-30,109],[-99,71],[-48,131],[-82,65],[-144,-42],[-69,-96],[-156,-68],[-84,50],[22,115],[-67,450],[21,152],[186,119],[60,189],[113,149],[36,-61],[111,216],[127,-71],[-42,-136],[106,-153],[45,0],[46,386],[29,-178]],[[8017,4792],[59,18],[106,-131],[-256,109],[91,4]],[[8725,5116],[37,-127],[80,95],[173,-124],[116,-302],[-23,-59],[-88,144],[-59,-98],[-110,116],[-21,111],[-118,107],[-87,149],[100,-12]],[[8478,5264],[-22,-57],[-118,-11],[83,-283],[-80,101],[3,-150],[-46,157],[59,237],[121,6]],[[7939,4845],[-90,94],[-111,348],[-89,182],[58,16],[177,-297],[63,-182],[-8,-161]],[[8274,5288],[-48,-337],[-165,63],[-31,142],[15,142],[93,63],[104,220],[68,-87],[-36,-206]],[[8510,5667],[-28,-163],[-49,130],[77,33]],[[8369,6248],[33,-81],[-21,-159],[-47,37],[35,203]],[[2984,6327],[118,-73],[-94,-32],[-24,105]],[[2786,6493],[153,-142],[-99,-25],[-54,167]],[[5431,7384],[-12,-93],[-74,57],[86,36]],[[8915,7321],[-20,-115],[-257,-72],[9,-141],[-53,107],[89,123],[85,5],[104,155],[24,172],[44,-116],[-25,-118]],[[8997,7726],[45,-52],[-66,-73],[-50,80],[17,124],[54,-79]],[[3440,8101],[74,-83],[-21,-86],[-140,-8],[87,177]],[[8989,8105],[-3,-226],[-40,-50],[14,449],[29,-173]],[[4811,8192],[-89,-26],[8,119],[112,39],[-31,-132]],[[4916,8559],[26,-157],[71,-172],[2,-124],[-176,-35],[41,60],[19,196],[-70,125],[87,107]],[[2634,8963],[57,-89],[-67,-61],[10,150]],[[4597,9009],[24,-76],[-140,-94],[-157,122],[273,48]],[[0,9154],[281,-172],[-111,-98],[-167,92],[-3,178]],[[0,9301],[9999,-40],[-35,16],[-9964,24]],[[2485,9184],[88,-132],[51,154],[118,-41],[-3,-118],[-122,-32],[-43,-103],[-162,-158],[-42,-177],[66,-107],[278,-112],[66,-227],[36,78],[-34,121],[92,108],[-55,131],[11,202],[119,7],[118,-79],[54,-165],[85,123],[77,-230],[124,-99],[46,-143],[-121,-109],[-177,-1],[-130,-196],[126,133],[58,-167],[129,-18],[-154,-137],[-44,73],[-88,-65],[4,-118],[-81,-24],[-79,-189],[0,-137],[-156,-237],[36,-263],[-31,-96],[-81,281],[-153,5],[5,-58],[-147,18],[-74,-121],[-14,-284],[96,-248],[101,66],[14,99],[90,31],[-53,-326],[161,-51],[-20,-209],[68,-149],[51,48],[76,-56],[38,114],[104,105],[9,-85],[265,-14],[-14,-45],[145,-229],[119,-32],[81,-251],[-21,-48],[298,-178],[132,-149],[3,-204],[-106,-276],[-23,-334],[-62,-194],[-74,-22],[-106,-146],[-11,-161],[-168,-361],[-99,30],[47,-142],[-68,-105],[-86,-6],[5,-107],[-82,-22],[46,-86],[-115,-216],[54,-54],[-97,-201],[28,-93],[-80,-85],[-109,90],[-20,323],[36,147],[33,402],[48,271],[38,635],[-8,175],[-157,213],[-150,571],[37,317],[82,177],[-55,296],[-25,-83],[-161,149],[-51,160],[-99,58],[-97,131],[-51,-31],[-193,152],[-62,123],[-8,135],[-173,356],[-25,127],[-43,-58],[147,-391],[-77,79],[-80,172],[-62,306],[-93,90],[-105,329],[14,300],[-18,164],[48,36],[-128,105],[-185,420],[-362,159],[-171,-116],[-175,-190],[-149,-57],[201,173],[-170,128],[-64,98],[149,189],[-116,-19],[-88,70],[101,52],[78,-26],[-126,159],[267,142],[120,-43],[241,-26],[197,-72],[232,91],[67,-58],[85,22],[244,-84],[11,-41],[204,64],[51,-45],[268,3],[-50,116],[35,106],[130,-140]],[[1829,9393],[86,-39],[157,13],[26,-97],[97,-55],[-40,-74],[-99,25],[-204,-37],[-169,174],[146,90]],[[2595,9395],[118,34],[44,-97],[81,40],[251,-128],[-1,-104],[194,-107],[-58,-108],[-78,80],[48,-214],[-105,62],[-3,-81],[-165,135],[61,150],[-176,166],[-65,-25],[-205,39],[-42,105],[101,53]],[[2212,9435],[83,-5],[-27,-143],[-115,71],[59,77]],[[2411,9373],[-36,78],[111,-16],[-75,-62]],[[1654,9294],[-152,27],[28,139],[204,-6],[57,-41],[-137,-119]],[[9029,9534],[-170,-55],[-40,77],[210,-22]],[[2264,9600],[9,-99],[-122,77],[113,22]],[[1994,9570],[53,-69],[-164,-33],[11,43],[-164,3],[64,72],[176,-58],[24,42]],[[6598,9255],[-165,43],[112,208],[154,67],[194,40],[0,-41],[-183,-56],[-171,-166],[59,-95]],[[2370,9622],[152,-86],[224,6],[-23,-73],[-291,23],[-62,130]],[[1772,9654],[-4,-45],[-181,-44],[185,89]],[[0,9154],[0,-230],[9963,-25],[19,-90],[-159,-76],[-93,-102],[-39,39],[-149,-40],[-40,-289],[-148,-221],[-37,251],[81,154],[147,178],[23,81],[-121,-115],[-23,71],[-141,-116],[-334,-42],[-196,-248],[172,-94],[-35,-268],[-144,-291],[-72,-6],[-132,-203],[53,-171],[-10,-98],[-72,-40],[-9,193],[-53,126],[-89,-60],[16,118],[-114,-127],[99,-120],[-54,-100],[77,-186],[5,-107],[-96,-304],[-77,-102],[-141,-79],[-63,18],[-80,-153],[90,-218],[9,-208],[-113,-176],[-2,76],[-138,200],[-27,-198],[118,-294],[4,-209],[-59,88],[-52,264],[-38,58],[17,178],[-45,316],[-82,-51],[3,125],[-80,262],[-124,-73],[-184,-322],[-13,-319],[-65,-138],[-111,462],[-25,309],[-60,-27],[-114,262],[-135,-20],[-189,80],[-89,80],[-39,131],[-59,-9],[106,-343],[62,5],[57,112],[104,-216],[-56,-187],[-253,-291],[-145,-79],[-23,238],[-97,261],[-2,74],[-110,315],[-66,37],[132,-581],[49,-155],[113,-203],[22,-112],[194,91],[-15,-163],[-111,-365],[-175,-313],[-41,-224],[47,-247],[8,-227],[-37,-116],[-129,-177],[7,-270],[-57,-51],[-22,-195],[-111,-232],[-67,-67],[-172,-51],[-122,445],[-26,287],[-73,313],[55,267],[-48,403],[-86,226],[28,241],[-36,98],[-73,-29],[-43,116],[-175,-90],[-154,-22],[-137,169],[-144,430],[32,81],[-14,331],[70,251],[136,212],[25,191],[76,145],[104,-34],[101,82],[224,43],[44,-233],[115,-60],[107,-115],[49,141],[224,-106],[148,20],[53,265],[-237,48],[-41,162],[86,101],[164,47],[89,-63],[86,98],[-133,150],[68,116],[-154,-81],[-78,42],[-86,-231],[32,-87],[-167,-34],[34,-130],[-66,-79],[-59,281],[-129,193],[-64,-57],[119,-210],[-40,-22],[-182,248],[-65,-71],[-95,-3],[-146,-369],[-90,-42],[-98,53],[-13,355],[39,42],[169,-19],[19,149],[-94,154],[83,-2],[151,171],[24,85],[114,53],[-7,178],[66,-179],[89,-14],[198,83],[58,230],[129,16],[2,59],[-144,-37],[-51,159],[121,144],[-89,35],[-121,-171],[26,-154],[-80,-229],[-82,-43],[-72,237],[-130,-51],[-19,195],[154,145],[117,191],[123,116],[250,79],[51,-58],[286,-130],[-53,-111],[-124,44],[28,-135],[266,134],[-30,105],[78,-18],[3,-92],[205,126],[141,2],[48,56],[240,-71],[-69,139],[90,115],[104,-266],[-67,-121],[105,83],[-54,213],[182,50],[24,76],[175,17],[10,68],[168,53],[209,23],[34,49],[253,-33],[78,-80],[-125,-66],[383,-70],[2,44],[148,-40],[75,-129],[27,60],[211,-20],[17,78],[251,-37],[96,-78],[168,1],[54,-82],[264,38],[226,-40],[-9960,-25]],[[6364,7560],[2,-213],[129,-36],[-26,225],[51,5],[-123,210],[76,38],[-52,103],[-125,-141],[68,-191]],[[7918,9692],[-157,-23],[51,76],[106,-53]],[[5506,9772],[-31,-167],[-164,119],[54,66],[141,-18]],[[5706,9813],[14,-52],[-163,3],[-75,43],[224,6]],[[7775,9725],[-184,31],[-59,53],[132,52],[118,-85],[-7,-51]],[[2583,9770],[-56,-80],[-107,4],[-107,104],[120,64],[150,-92]],[[3097,9968],[183,-43],[-258,-147],[-159,-28],[42,-46],[-143,-135],[-248,17],[122,165],[-180,147],[341,71],[300,-1]],[[4247,9992],[174,-46],[-308,-30],[243,-61],[206,44],[98,-36],[-153,-66],[-55,-80],[34,-101],[-25,-155],[-116,-57],[34,-183],[-150,-96],[-112,-20],[-67,-83],[-156,-70],[-84,-160],[-15,-149],[-136,44],[-94,159],[-64,205],[86,158],[-72,-37],[-66,137],[31,53],[-108,169],[-74,34],[-201,-3],[-129,137],[206,55],[-64,42],[215,110],[376,34],[324,59],[222,-7]]]};f.append("path").datum(a.feature(d,d.objects.land)).attr("class","land").attr("d",l);var h=0;setInterval(function(){h+=.5,s.rotate([c(h),0]),f.selectAll("path").attr("d",l)},20)}},t.exports=d},{"app/error_modal":"app/error_modal","app/generic_controllers":"app/generic_controllers",d3:"d3",jquery:"jquery",topojson:171,underscore:"underscore","util/analytics":"util/analytics","util/flags":"util/flags","util/global":"util/global","util/ui":"util/ui","util/urls":"util/urls"}],"app/paid":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=(e("payform"),e("util/global")),a=(e("util/ajax"),e("app/generic_controllers")),s=e("util/ui"),l=e("app/error_modal"),c=e("raven-js"),u=e("util/analytics"),f=e("util/urls"),d=e("util/mathjax_loader");e("bootstrap-datepicker");var h={},p=null,m=!1,g=function(e){u.track("payment timeout error",{step:e})};h.SellPage=new function(){function e(e){if("from"in e&&e.from.length>0){var n=t.find(".sp-features ul"),i=n.find(".sp-"+e.from);0===i.length?console.log("Feature does not exist: "+e.from):r.defer(function(){"solutions"===e.from&&n.prepend(n.find(".sp-practice")),n.prepend(i)})}}var t,n,d=this,h="/premium-modal/",p=!1,m=!1;return d.isOpen=function(){return m},d.trigger=function(e){e.off_on("click.paid",function(t){t.preventDefault(),d.open(e.data())}),S()},d.controller=function(r){n=(t=r).find(".close");var o=i.id("subscription-info-modal").detach();o.length&&t.find(".learn-more").on("click",function(e){e.preventDefault(),o.clone().modal()});var a=t.find(".bulk-pricing");a.find(".btn-link").on("click",function(e){a.toggleClass("expanded")});var s=r.data();s.from&&e(s)},d.open=function(g){if(i.body.trigger(i.Event("paywall.startOpen")),g=g||{},o.is_android)try{Android.openPaymentActivity(g.from)}catch(e){c.captureMessage("Android: Could not trigger payment view ["+e.toString()+"]"),window.location="/premium/?newbrowser=true"}else if(o.user_is_authenticated){if(!m){if(p){g.preventDefault&&g.preventDefault(),e(g);var v=t.find(".paywall-btn"),b=t.find(".paywall-btn").attr("href"),y=encodeURIComponent(window.location.pathname+window.location.search);return v.attr("href",f.appendGetParam(b,"next",y)),t.addClass("visible"),s.crop(),n.on("click.sellPage",d.close),t.on("click.sellPage",function(e){(e.target==t[0]||i(e.target).hasClass("wrapper"))&&d.close()}),i.window.on("keydown.sellPage",function(e){27===e.keyCode&&t.hasClass("visible")&&d.close()}),m=!0,d}!function(e){var t=i.create("div");t.addClass("sell-page-preload sell-page-modal").html('<div class="content"><span class="spinner"></span></div>'),t.appendTo(i.body);var n={};e.targetObjectId&&e.targetObjectType&&(n={element_id:e.axId,target_object_id:e.targetObjectId,target_object_type:e.targetObjectType,target_object_referrer:encodeURIComponent(window.location.pathname+window.location.search)},e.ignoreBlockedContent&&(n.ignore_blocked_content=!0)),i.get(h,n).then(function(n){var s=i.create("div").html(n);s.find(".sp-features li:gt(2)").remove(),i.body.append(s),!o.is_mobile&&e.from&&s.find("#sell-page").addClass("from-"+e.from),r.defer(function(){t.remove()}),p=!0,u.set_analytics_events(s),a.initGenericControllers(s,{callback:function(){d.open(e)}})}).fail(function(){i(".sell-page-preload").hide(),l.handler.apply(this,arguments)})}(g)}}else window.location="/account/signup/?next=/premium/"},d.close=function(){return t.removeClass("visible"),i.body.hasClass("modal-open")||s.crop(!1),i.window.add(n).add(t).off(".sellPage"),m=!1,d},d},h.paywallGiftModal=function(e){var t=e.find("#paywall-gift-modal"),n=t.find("form"),a=null;S(),e.find(".show-gift-modal").on("click",function(){a=i(this).data("plan"),m&&(t.find("li :input:not(select)").val(""),m=!1),o.is_mobile&&(t.on("show",function(){i.body.css("position","fixed")}),t.on("hide",function(){i.body.css("position","relative")})),t.modal(),r.defer(function(){t.find("input:visible:first").focus()})}),i.id("paywall-gift-modal-back").on("click",function(){i.id("paypal-modal").find(".sell-page").removeClass("visible"),t.modal("show")}),n.off_on("submit",function(o){o.preventDefault();var s={};n.find(":input").each(function(){this.name&&(s[this.name]=this.value)}),n.find(".errorlist").hide(),i.post(n.prop("action"),s).fail(l.handler).then(function(o){o.gift_message_id?(p=o.gift_message_id,t.modal("hide"),e.data("paypal-is-supported")?L(a):i("#stripe-hidden-checkout-btn-"+a+" .stripe-checkout-btn").click()):o.errors&&r.each(o.errors,function(e,t){var i=e.map(function(e){return"<li>"+e+"</li>"}).join("");n.find("#error-"+t).html(i).show()})})})},h.giftDatepicker=function(e){var t={maxViewMode:0,minViewMode:"days",startView:0,clearBtn:!1,templates:{leftArrow:'<span class="arrow left"></span>',rightArrow:'<span class="arrow right"></span>'}};e.datepicker(r.extend({},t,e.data())),e.on("changeDate",function(e){var t=e.date.getFullYear(),n=e.date.getMonth()+1,r=e.date.getDate();i.id("gift-date-text").text(t+"/"+n+"/"+r),i.id("id_delivery_date_year").val(t),i.id("id_delivery_date_month").val(n),i.id("id_delivery_date_day").val(r)})},h.giftSubscriptionHandler=function(e){e.success?window.location.href=e.gift_purchase.show_url:l.standardError()},h.giftShowPurchasePage=function(e){var t=e.find("form"),n=i.id("paywall-gift-modal").modal({show:!1});e.find(".print-btn").on("click",function(){window.print()}),e.find(".edit-btn").on("click",function(){n.modal("show")}),t.off_on("submit",function(e){e.preventDefault();var o={};t.find(":input").each(function(){this.name&&(o[this.name]=this.value)}),t.find(".errorlist").hide(),i.post(t.prop("action"),o).fail(l.handler).then(function(e){e.success?(n.modal("hide"),i.id("gift-message").text(e.message)):e.errors&&r.each(e.errors,function(e,n){var i=e.map(function(e){return"<li>"+e+"</li>"}).join("");t.find("#error-"+n).html(i).show()})})})},h.paywallCourses=function(e){var t=e.find(".btn-group .btn"),n=function(e){u.track("ui",r.extend({action:"click",path:window.location.pathname,full_path:window.location.pathname+window.location.search},e))};t.on("click",function(){var r=i(this);r.hasClass("active")||(t.toggleClass("active"),e.toggleClass("practice"),n({element_id:"clicked_paywall_courses_tab",tab_name:r.data("ax-tab")}))}),e.find(".course").on("click",function(){var e=i(this);e.toggleClass("flipped"),n({element_id:"clicked_paywall_course_group",course_group:e.data("ax-course-group")})})},h.Checkout={};var v,b=null,y=function(e,t,n){var r=i.id("paid-subscribe").data(),o=r.url,s={plan:v.plan,stripeToken:e.id},u={url:o,data:s,type:"POST",timeout:6e4};p&&(s.gift_message_id=p),w()&&(u.url=i.id("inr-one-time-card-payment").data("url"),u.data.order_id=v.paytmOrderId,u.data.amount=v.amount),_()&&(u.url=i.id("stripe-one-time-payment").data("url"),u.data.payment_plan_id=v.paymentPlanId,u.data.amount=v.amount);var f=i.ajax(u);if(!0===n)return f;f.then(function(e){if(r.callback)h[r.callback](e);else{var t=i(document.createElement("div")).append(e);i.body.append(t),a.initGenericControllers(t)}}).fail(function(e){"timeout"===e.statusText&&(c.captureMessage("stripeTokenHandler: timeout error"),g("Sending token to backend")),l.handler(e)}),null!==b&&((w()||_())&&i(".payment-options-modal").find(".close").trigger("click"),h.SellPage.close(),b.modal("show"))},w=function(){return void 0!==v.paytmOrderId},_=function(){return void 0!==v.paymentPlanId},k=!1,x=!1,C=null;h.Checkout.trigger=function(){var e,t=function(e){var t=e.data();e.removeClass("disabled").removeAttr("disabled").data("ax-id",t.loadedAxId).attr("data-ax-id",t.loadedAxId),e.off_on("click.checkout",function(e){e.preventDefault(),M(C,t)})},n=function(e){};return function(r){k?x?n():t(r):(i.body.on("checkout.preloadDone",function(){t(r)}),i.body.on("checkout.preloadFailed",function(){n()})),r.filter(".disabled").on("click.checkout",function(t){t.preventDefault(),e||(e=i.id("checkout-loading-modal")),e.modal(),e.parent(".modal-bg").css("z-index",1042)})}}();var S=function(){var e=!1,t=!1;return function(){if(!t){t=!0;var n=i.id("stripe-checkout-data").data();if(n.giftSubscription||!o.b2&&!n.useCustomForm)var r=0,a=setInterval(function(){if(r++,"StripeCheckout"in window){if(clearInterval(a),null===C){var t={key:n.key,image:n.image,email:n.email||null,token:y,opened:function(){u.track("ui",{element_id:"stripe_checkout_modal_opened"})},closed:function(){u.track("ui",{element_id:"stripe_checkout_modal_closed"})}};n.panelLabel&&(t.panelLabel=n.panelLabel),C=StripeCheckout.configure(t)}k=!0,i.body.trigger(i.Event("checkout.preloadDone"))}else if(75===r&&(clearInterval(a),k=!0,x=!0,i.body.trigger(i.Event("checkout.preloadFailed")),!e)){e=!0;var o=function(){c.captureMessage("Paid.Checkout.trigger: poll timeout waiting for StripeCheckout."),g("Loading checkout.js")};h.SellPage.isOpen()||i.id("sellpage-wrapper").length?o():i.body.one("paywall.startOpen",o)}},200)}}}(),M=function(e,t){!function(e,t){!e&&window.location.href.indexOf("http://")>=0&&(window.location=window.location.href.replace("http://","https://")+"#plans")}(t.httpOk),t=function(e){var t=r.extend({},e);return["controller","controllerInited","loadedAxId","axId","axType","httpOk","majorAmount","ax_active"].forEach(function(e){delete t[e]}),t.name=t.name.replace("^2"," Premium").replace("[USD]","").trim(),t}(t),v=r.extend({},t),delete t.plan,e.open(t)};h.Checkout.preload=function(){S()},h.Checkout.response=function(e){var t,n=e.data(),r=0;n.success&&n.displaySuccess||(n.success?t=setInterval(function(){i.get(n.url,{s:n.subscription}).then(function(n){if("active"===n){e.addClass("loaded success");var r=i.id("paid-status-success-btn").attr("href");e.off_on("hide",function(){window.location.href=r}),clearInterval(t)}}).fail(function(e){clearInterval(t),l.handler(e)}),++r>=60&&(e.addClass("loaded error"),clearInterval(t),c.captureMessage("Paid.Checkout.response: timeout error"),g("Checkout subscription status"))},1e3):e.addClass("loaded error")),null!==b&&b.modal("hide"),e.modal(),e.on("hide",function(){i.body.addClass("disabled"),window.location.reload()})},h.Checkout.prestatus=function(e){e.modal({show:!1}),e.on("show",function(){i(".sell-page.visible").removeClass("visible")}),b=e},i(function(){"#plans"!==window.location.hash||i.body.hasClass("brilliant_square")||h.SellPage.open()});var E=function(){var e=null,t=!1,n=r.template('<ul class="errorlist"><%= list %></ul>'),o=r.template("<li><%- message %></li>"),a=function(e,t){return i.window.trigger(i.Event("survey."+t))};return function(s){if(s.preventDefault(),$source=i(this),t)a($source,"complete");else{if(null===e){if(!(e=i.id("paid-cancel-survey")).length)return void l.standardError();e.on("submit",function(s){s.preventDefault(),i.post(e.attr("action"),e.serialize()).fail(l.handler).then(function(i){if(i.success)t=!0,e.modal("hide"),a($source,"complete");else{e.parent().scrollTop(0);var s=[];for(var l in i.errors)s.push(i.errors[l][0]);var c=s.map(function(e){return o({message:e})}).join("");r.defer(function(){e.find(".errorlist").remove(),e.find(".modal-body").prepend(n({list:c}))})}})})}a($source,"beforeshown"),e.modal()}}}();h.Payment={};var T=null,A=null,D=function(e){i.get(e.url,e).then(function(e){i.body.addClass("disabled"),window.location.reload()}).fail(l.handler)};h.Payment.modalTrigger=function(e){e.on("click",function(t){t.preventDefault(),e.hasClass("disabled")||((A=e.data()).force?D(A):null!==T&&T.modal("show"))})},h.Payment.cancelModal=function(e){(T=e.clone(!0)).modal({show:!1}),T.find("#paid-cancel").on("click",function(){var e=i.id("payment-switch-plan-modal").clone(!0),t=this,n=arguments;e.length?(T.modal("hide"),e.find(".cancel-link").on("click",function(){E.apply(t,n)}),e.addClass("canceling"),e.modal()):(T.modal("hide"),E.apply(t,n))}),i.window.on("survey.complete",function(e){if(i.id("acct-settings-subscription").find(".cancel a").addClass("disabled"),A.isPaytm){var t=i.id("cancel-confirm-"+A.id);t.modal("show"),t.find("#confirm-btn").on("click",function(){D(A)})}else null!==A&&D(A)})},h.Payment.Renew=function(e){e.on("click",function(t){t.preventDefault(),e.addClass("disabled"),i.body.addClass("disabled"),i.get(i(this).attr("href")).then(function(){window.location.reload()}).fail(l.handler).fail(function(){i.body.removeClass("disabled")})})},h.Payment.UpdateCard=function(e){e.on("click",function(t){if(!e.hasClass("disabled")){var n=i(this).data(),r=i(".payment-methods .card-info"),o=r.find(".spinner");n.allowRememberMe=!1,e.addClass("disabled"),StripeCheckout.configure({key:n.key,image:n.image,email:n.email||null,name:n.name,panelLabel:n.buttonLabel,token:function(t,a){e.addClass("disabled"),o.addClass("visible"),i.post(n.url,{stripeToken:t.id}).then(function(){["last4","exp_month","exp_year"].forEach(function(e){r.find("."+e).text(t.card[e])}),e.removeClass("disabled"),o.removeClass("visible")}).fail(l.handler)},closed:function(){e.removeClass("disabled")}}).open(n)}})},h.switchPlanModal=function(e){e.on("click",function(e){i.id("payment-switch-plan-modal").clone(!0).modal()})},h.couponCountdown=function(){var e=null,t=null,n=null,i=function(e){return(e=e.toString())<10?"0"+e:e},o=function(t,r,o,a){var s=Math.round((new Date).getTime()/1e3)-t,l=r-s;if(s>0||a){l<0&&(l=0);var c=~~(l/86400),u=~~(l%86400/3600),f=~~(l%3600/60),d=l%60,h=o({days:c,hours:c>0?i(u):u,minutes:i(f),seconds:i(d)});h!==n&&(e.text(h),n=h)}return l};return function(n){var i=r.template(n.data("template")),a=n.data("seconds"),s=Math.round((new Date).getTime()/1e3);e=null===e?n:e.add(n),r.defer(function(){o(s,a,i,!0),e.removeClass("hide")}),null===t&&(t=setInterval(function(){o(s,a,i)<=0&&(clearInterval(t),setTimeout(function(){e.addClass("hide")},3e3))},250))}}(),h.Paytm={},h.Paytm.loadPaymentForm=function(e){e.on("click",function(t){t.preventDefault();var n=i.create("div").addClass("sell-page-preload sell-page").html('<div><span class="spinner"></span></div>').appendTo(i.body),o=e.data("plan-url");i.get(o).then(function(e){var t=i.create("div").html(e);i.body.append(t),r.defer(function(){n.remove()}),u.set_analytics_events(t),a.initGenericControllers(t),t.find(".sell-page").addClass("visible")}).fail(function(){n.remove(),l.handler.apply(this,arguments)})})},h.onetimeModal=function(e){e.on("click",function(){$modal=i(e.data("modal-target")).clone(!0),$modal.appendTo(i.body).show(),$modal.find(".close").on("click",function(){$modal.remove()})})};var L=function(e){var t=null,n=null;null===t&&(t=i.id("paypal-modal"),n=t.find(".sell-page"),t.removeClass("hide").appendTo(i.body),t.find(".close").on("click",function(){n.removeClass("visible"),s.crop(!1)})),r.defer(function(){t.removeClass("annual monthly").addClass(e),n.addClass("visible"),s.crop(),p&&t.find("[name=gift_message_id]").val(p)})};h.paypalModalTrigger=function(e){e.on("click",function(){L(e.data("plan"))})},h.paypalCheckoutButtons=function(e){e.find(".paypal a,.paypal button").on("click",function(e){i(this).parents(".paypal").addClass("loading")})},h.cancelPaypalSubscription=function(e){e.on("click",function(e){e.preventDefault(),A=T.data(),T.modal("show")}),r.defer(function(){i.window.off_on("survey.complete",function(t){e.hasClass("disabled")||(e.addClass("disabled").prop("disabled","disabled"),i.body.addClass("disabled"),i.get(e.attr("href")).fail(l.handler).fail(function(){i.body.removeClass("disabled")}).then(function(t){if("CANCELED"===t.state)window.location.reload();else{i.body.removeClass("disabled"),e.removeClass("disabled").removeProp("disabled");var n=e.data();i.modal(n.notCanceledTitle,n.notCanceledText)}}))})})},h.salesCardTrigger=function(e){var t=null;e.on("click",function(n){if(n.preventDefault(),t)t.modal("show");else{var o=e.data(),a={element_id:o.axId,source_chapter_id:o.sourceChapterId,source_chapter_slug:o.sourceChapterSlug,target_object_referrer:encodeURIComponent(window.location.pathname+window.location.search)};(t=i('<div class="b2-sales-card modal"><span class="spinner"></span></div>')).modal(),i.get(o.salesUrl,a).then(function(e){r.defer(function(){var n=i(e);i.body.append(n),t.modal("hide");var r=function(){var e=t.find(".content");e.scrollHeight()>e.outerHeight()&&e.addClass("scrollable")};(t=n).find("img").on("load",r),t.on("show",function(){d.loadForElement(t),r()}),t.modal()})}).fail(function(){window.location.href=e.attr("href")})}})},h.switchPaywallPosition=function(e){var t=e.find("#prac-markers .prac-marker"),n=e.find("#prev-marker-btn"),r=e.find("#next-marker-btn"),o=e.find(".spm-feature"),a=t.length,s=1,l="disabled",c=function(e){o.removeClass("current"),o.filter('[data-position="'+s+'"]').addClass("current"),t.removeClass("current"),e?e.addClass("current"):t.filter('[data-position="'+s+'"]').addClass("current"),n.removeClass(l),r.removeClass(l),1==s?n.addClass(l):s==a&&r.addClass(l)};t.on("click",function(e){e.preventDefault();var t=i(this),n=t.data("position");n!=s&&(s=n,c(t))}),n.on("click",function(e){e.preventDefault(),i(this).hasClass(l)||(s--,c())}),r.on("click",function(e){e.preventDefault(),i(this).hasClass(l)||(s++,c())})},h.testimonials=function(e){var t=e.hasClass("open");e.find(".show-hide-btn").on("click",function(){e.toggleClass("open"),(t=!t)&&r.defer(function(){s.Anchors.scrollToTarget(e)})})},h.premiumSurvey=function(e){i.html.add(i.body).animate({scrollTop:0},{duration:100})},t.exports=h},{"app/error_modal":"app/error_modal","app/generic_controllers":"app/generic_controllers","bootstrap-datepicker":21,jquery:"jquery",payform:130,"raven-js":"raven-js",underscore:"underscore","util/ajax":"util/ajax","util/analytics":"util/analytics","util/global":"util/global","util/mathjax_loader":"util/mathjax_loader","util/ui":"util/ui","util/urls":"util/urls"}],"app/preloaders":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("util/global"),a=e("app/generic_controllers"),s=e("util/ajax"),l=e("util/mathjax_loader"),c=e("util/analytics"),u={},f={solvableList:[],currentPosition:null,$markers:null,inited:!1,solvablesLoaded:0,submitted:!1,noHistory:!1,targetPosition:null},d=f.solvableList.slice(0),h=f.currentPosition,p=f.$markers,m=f.inited,g=f.solvablesLoaded,v=f.submitted,b=f.noHistory,y=f.targetPosition,w={reloaded:!1,instantResponse:!1};u.practice=function(e,t){if(!0===(t=r.extend({},w,t||{})).reset&&(d=f.solvableList.slice(0),h=f.currentPosition,p=f.$markers,m=f.inited,g=f.solvablesLoaded,v=f.submitted,b=f.noHistory,y=f.targetPosition),e.data("disabled"))disabledPreloader={$container:e,opts:t};else{h=null===h?e.data("current")-1:h,b=e.data("no-history");var n=function(t,f){f=!0===f;var m=i.id("interstitial-pane-continue-form");if(m.length)return y=t,void m.submit();if(y=null,t!==h&&d[t]){var g=d[t].content;switch(g){case null:!function(t){e.addClass("loading"),e.one("preloaded.p"+t,function(){n(t),"error"!==d[t].content&&e.removeClass("loading")})}(t);break;case"error":!function(e){b?window.location.reload():window.location=d[e].url}(t);break;default:!function(t,n,f){var m=e.find("#solv-main").add(i.id("admin-sidebar")),g=i(n),v=g.find("#interstitial-pane-continue-form");v.length&&1==p.filter(":not(.correct,.incorrect)").length&&(v.find('input[name="form_name"]').val("continue_and_finish"),v.find("button").html("Finish quiz")),d[h].content=m,h=t,m.remove(),e.append(g);var b=e.find(".endstate").length>0;i.body.toggleClass("endstate",b),l.loadForElement(e),a.initGenericControllers(e,{force:!0}),s.autosubmit.init(e),c.set_analytics_events(e),e.find(".mini-profile").mini_profile(),k(),i.body.add(i.html).scrollTop(0),f||u(h);var y=d[h];y.viewed||(d[h].viewed=!0,r.defer(function(e,t){var n=window.location,r=n.pathname;c.track("sign_of_life",{from_request:!0,is_android:o.is_android,ajax:!1,path:r,method:"GET",full_path:r+n.search});var a=null;switch(e.data.contentType){case"solvable":a={position:t+1};break;case"interstitial_pane":a={action:e.data.paneAction,ipconn_id:e.data.paneConnection,quiz_id:e.data.paneQuiz}}a&&i.post(e.data.statusUrl,a)},y,h)),i.body.trigger("quizSolvablePositionChanged")}(t,g,f)}}},u=window.history.pushState&&!b?function(e){r.defer(function(){var t={position:e};window.history.pushState(t,"",d[e].url)})}:function(){},_=function(e){var t=i(this),r=t.data("position");if(void 0===r)if(t.hasClass("btn-prev")){var o=p.filter(":not(.correct, .incorrect, .completed)");r=t.hasClass("solv-done-btn")&&o.length?o.first().data("position"):h-1}else r=h+1;e.preventDefault&&e.preventDefault(),t.hasClass("disabled")||n(r)},k=function(){if(null===p||t.reloaded){if(p=i.id("prac-markers").find(".prac-marker"),h=h<0?p.filter(".current").data("position"):h,o.is_mobile&&!t.instantResponse){var n=g<d.length-1;r.defer(function(){e.find(".btn-prev:not(.solv-done-btn)").toggleClass("disabled",0===h),e.find(".btn-next:not(.solv-done-btn)").toggleClass("disabled",h===d.length-1)}),p.toggleClass("disabled",n),e.find(".actions-container").toggleClass("disabled",n)}}else p.removeClass("current"),p.eq(h).addClass("current"),i.id("prac-markers").empty().append(p);p.off_on("click.quiznav",_),e.find(".btn-next,.btn-prev").not(".btn-continue").off_on("click.quiznav",_),e.find("#text_answer_entry_form,#mcq-form,#start-over-btn").on("submit",function(){v=!0,g!==d.length&&(e.find(".btn-next,.btn-prev").add(p).addClass("disabled"),e.find(".actions-container").addClass("disabled"))}),x(),e.mathjax_update()},x=function(){var t="num-free-solutions-remaining",n="revealed-solution-position",r=e.data(t),o=e.data(n)||[],s=i.id("alt-solution-btn").children();if(r>0&&i.id("solv-simple-solution").length)e.data(t,r-1),o.push(h),e.data(n,o);else if(0===r&&-1===o.indexOf(h)&&s.length){var l=e.find(".btn-solution-full");l.length&&l.each(function(){var e=i(this),t=s.clone(),n=e.parents(".solv-main").find(".solv-details"),r=t.data("ax-id");e.replaceWith(t),r=n.hasClass("incorrect")?r.replace("preloaded","incorrect"):n.hasClass("correct")?r.replace("preloaded","correct"):r.replace("preloaded","nonterminal"),t.data("solvable",n.data("solvable")),t.data("ax-id",r),a.executeFunctionByName(t.data("controller"),t),c.set_analytics_events(t.parent())})}};k(),m||(m=!0,p.each(function(t){var n=i(this),o=h===t,a=n.data();d.push({url:n.attr("href"),data:a,viewed:o,content:o?e.find("#solv-main"):null}),o||r.defer(function(){!function(t){var n=t.data("position");i.get(t.attr("href"),{web_preloading:!0,is_preloading:!0,force_full_page:!0}).then(function(t){d[n].content=t,e.trigger(i.Event("preloaded.p"+n)),g++}).fail(function(){d[n].content="error",e.trigger(i.Event("preloaded.p"+n))})}(n)})}),b||i.window.on("popstate",function(){if(v)window.history.forward();else{var e;try{e=parseInt(window.location.href.match(/p=(\d)/)[1],10)-1}catch(n){var t=window.history.state&&"position"in window.history.state;e=t?window.history.state.position:0}n(e,!0)}})),t.instantResponse||(v=!1),t.reloaded=!1,t.instantResponse=!1,t.useTargetPosition&&(null===y?(y=h+1)<d.length&&n(y):n(y),y=null)}},u.enablePreloader=function(e){e.data("disabled",!1),u.practice(e,{reset:!0})},t.exports=u},{"app/generic_controllers":"app/generic_controllers",jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax","util/analytics":"util/analytics","util/global":"util/global","util/mathjax_loader":"util/mathjax_loader"}],"app/save_to_group":[function(e,t,n){var i,r,o,a=e("jquery"),s=e("underscore"),l=e("util/global"),c=e("util/ajax"),u={},f=window.vkey||{},d={},h=null,p=!1,m=!1,g=function(e){if(m)p=!0;else{p=e||!p;var t=a.id("nf-feeditem-modal");p?(a.body.on("click.savetogroup saveitem.open",function(){g(!1)}),t.off_on("scroll.saveitem",s.throttle(v,100))):(a.body.off("click.savetogroup saveitem.open"),t.off("scroll.saveitem")),i.toggle(p),p?(h&&h.length>0&&h.outerHeight()<h[0].scrollHeight&&(h.addClass("scrollable"),a.id("groupitem-gradient").addClass("active")),v(),o.addClass("selected"),a.body.trigger(a.Event("savetogroup.open"))):(i.removeClass("success"),o.removeClass("selected"))}},v=function(){if(!m&&!l.is_mobile){var e=0,t=0,n=r.offset(),o="",a="",s=l.is_mobile?0:28;"left"===r.data("position")?(t=n.top,e=n.left-i.width()-s,o="adjusted",a="bottom"):"bottom"===r.data("position")?(t=n.top+r.outerHeight(),e=n.left+r.width()/2,o="bottom"):(t=n.top-i.height(),e=n.left+r.width()/2,a="bottom"),i.addClass(o).removeClass(a).css({top:~~t,left:~~e})}},b=function(){i.on("click",function(e){e.stopPropagation()});var e=a.id("groupitem-form-groups");h=e.find(".sets"),function(){var e=h.find("input"),t=e.filter(".auto-checked");t.length>0&&e.on("click.autocheck",function(){e.off("click.autocheck"),t.prop("checked",!1).removeClass(".auto-checked")})}(),i.removeClass("nux new success"),i.find(".success").length>0&&(i.addClass("success"),g(!0)),v(),e.on("submit",function(){g(!1)})},y=function(){var e=(r=a.id("groups-tooltip-target")).data("object-id"),t=a();["assessment_add_solvable_to_group","quizzes_add_solvable_to_group","potw_add_solvable_to_group","discussions_add_to_group"].forEach(function(e){t=t.add(a(".saveitem-tooltip#cmp_"+e+"_id"))}),t.each(function(){var t=a(this),n=t.data("object-id");n!==e&&(d[n]=t,t.detach())}),0===(i=t.filter("[data-object-id="+e+"]")).length?(i=d[e])&&i.appendTo(a.body):i.length>1&&(i.slice(1).remove(),i=i.first()),i&&i.length&&(r.length?(!0!==i.data("inited")&&(i.appendTo(a.body),i.data("inited",!0),i.find("form").off("submit"),c.autosubmit.init(i)),(o=a.id("groups-tooltip-trigger")).on("click",function(e){e.preventDefault(),e.stopPropagation(),g()}),p&&g(!0)):!0===i.data("is-webview")&&(p=!0,m=!0,i.addClass("in")))},w=function(e){(!0===e||i&&i.length&&r.length)&&(v(),b())};u.controller=function(e){y(),w()};f.assessment_add_solvable_to_group=f.quizzes_add_solvable_to_group=f.potw_add_solvable_to_group=f.discussions_add_to_group=function(){f.handle.apply(this,arguments),w()},t.exports=u},{jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax","util/global":"util/global"}],"app/search":[function(e,t,n){var i,r,o=e("jquery"),a=e("underscore"),s=e("algoliasearch"),l=e("util/global"),c=e("util/ui"),u=e("app/content_modal"),f=e("util/mathjax_loader"),d=e("raven-js"),h=e("util/analytics"),p=e("util/latex"),m=e("lib/wafer"),g=null,v=null,b={},y=null,w=null,_=null,k=null,x=null,C=null,S={},M=!1,E=["wikis","problems","quizzes","notes","users"],T=[],A={version:1,search_type:"wikis",wiki_quality_threshold:200,page:0,pages:0,use_page:!1,topics:"",levels:"easy",allow_empty_queries:!1},D={},L=function(e,t){return e=e.replace(/\s/g,"+"),!0===t&&(e=escape(e)),e},I=function(){var e=k.find(".load-page").last(),t=l.is_mobile?o.window:_.find(".search-results-wrapper"),n=function(){t.scrollTop()+t.outerHeight()+100>(l.is_mobile?e.offset().top:e.position().top+o.id("header").outerHeight())&&P(e)};A.page===A.pages-1?e.remove():(t.off_on("scroll",a.throttle(function(){e.hasClass("loaded")||n()},10)),n()),k.find(".internal-link").off_on("click",function(e){e.preventDefault(),e.stopPropagation();var t=o(this).attr("href");e.metaKey?window.open(t):window.location.href=t})},P=function(e){e.hasClass("loaded")||(e.addClass("loaded"),A.page<A.pages-1?(A.page++,A.use_page=!0,M=!0,J()):o.window.off("scroll.searchpage"))},O=function(e,t){w.removeClass("loading").addClass("loaded"),k=o.id("site-search-result-list"),x=o.id("site-search-header"),null===e?j(t):q(e)},j=function(e){l.is_native&&1==e.hits.length&&0===e.page&&"<next page>"!==T[T.length-1]&&d.captureMessage("A user got only one search hit, which is probably an issue",{tags:{search_history:'["'+T.join('", "')+'"]'}}),B(),R(e),function(){if(x.removeClass(E.join(" ")),x.addClass(A.search_type),h.set_analytics_events(_),!x.hasClass("inited")){var e=o("#search-type a"),t=o("#search-level-list button"),n=o("#search-topics-list a");h.track("ui",{action:"click",element_type:"link",element_id:"user_searched"});var i=function(e,t){e.removeClass("active"),t.addClass("active")},r=function(){var t=e.filter("[data-opt-value="+A.search_type+"]");i(e,t)},a=function(){["problems","quizzes"].indexOf(A.search_type)>=0?(A.oldLevels&&(A.levels=A.oldLevels,A.oldLevels=null),A.oldTopics&&0===A.topics.length&&(A.topics=A.oldTopics,A.oldTopics=null)):(A.levels&&(A.oldLevels=A.levels,A.levels=""),A.topics&&(A.oldTopics=A.topics,A.topics=""))},s=function(e,t,n,r){if(r=!1!==r,n.hasClass("active"))!0===r&&(t.removeClass("active"),t.find("a").removeClass("active"),A[e]="",J());else{var o=n.data();i(t,n),A[e]=o.optValue,a(),J()}};x.addClass("inited"),r(),e.on("click",function(t){t.preventDefault(),s("search_type",e,o(this),!1)}),A.levels.length&&"string"==typeof A.levels&&(t.removeClass("active"),t.filter("[data-opt-value="+A.levels+"]").addClass("active")),t.on("click",function(e){e.preventDefault();var n=o(this),i=n.data("opt-value");n.hasClass("active")||(t.removeClass("active"),n.addClass("active"),A.levels=i,J())}),n.on("click",function(e){e.preventDefault();var t=o(this);t.hasClass("active")||(o("#search-topic-active").html(t.html()),s("topics",n,t))}),k.on("click",".change-search-type",function(e){e.preventDefault(),A.search_type=o(this).data("opt-value"),a(),r(),J()})}}(),I(),X(),function(e){var t="/search/_analytics/",n=window.ga||function(){};t+="user-"+r+"/",t+=A.search_type+"/",t+="query-"+L(e.query,!0)+"/",0===A._filters.length&&A._filters.push("none"),t+="filters-"+L(A._filters.join(","))+"/",t+="total-"+e.nbHits+"/",n("send","event","search","search_result",t+="page-"+(e.page+1)+"-"+e.nbPages+"/");var i=e.userData&&e.userData.length?e.userData[0].card_type_name:"NONE";h.track("search_result",{search_type:A.search_type,query:L(e.query,!0),filters:L(A._filters.join(",")),hits:e.nbHits,page:e.page+1,pages:e.nbPages,path:window.location.pathname,is_android:l.is_android,custom_search_card_type:i})}(e)},q=function(e){var t="";t=e.message.indexOf("Cannot connect to the AlgoliaSearch API")>=0?"You seem to be offline. Check your connection to continue searching.":e.message+" Try again later.",o.modal("Search error",t),d.captureMessage("Search error: "+e.message)},N=function(e){return a.template(o.id(e).text())},B=function(){D={page:N("search-page-tmpl"),problems:N("search-problems-tmpl"),quizzes:N("search-quizzes-tmpl"),notes:N("search-notes-tmpl"),wikis:N("search-wiki-tmpl"),sets:N("search-sets-tmpl"),users:N("search-users-tmpl"),empty:N("search-empty-tmpl"),card:{course:N("search-card-course-tmpl"),topic:N("search-card-topic-tmpl"),chapter:N("search-card-chapter-tmpl"),special:N("search-card-special-tmpl")}}},R=function(e){var t="";if(0===A.page)if(e.userData&&e.userData.length){var n=e.userData[0];S[n.card_id]||null===S[n.card_id]?C.html(S[n.card_id]):(C.html(D.card[n.card_type_name.toLowerCase()](n)),o.get("/api/v1/search/grab_custom_search_card/"+n.card_id+"/").fail(function(){S[n.card_id]=null,C.empty()}).then(function(e){S[n.card_id]=e.rendered_html,C.html(e.rendered_html)}))}else C.empty();e.hits.length>0?(x.removeClass("empty"),e.hits.forEach(function(e,n){var i=D[e.document_type],r=F(e);t+=i(r)})):0===A.page&&(x.addClass("empty"),t=D.empty($(e))),A.page=e.page,A.pages=e.nbPages,t.length>0&&(t=D.page({page:A.page,html:z(t)}),A.page>0?k.append(t):k.html(t)),u.feeditem_modal(),k.find(".load-modal").not(".inited").each(function(){var e=o(this),t=e.data(),n=t.fullUrl,i=t.modalUrl;!0===e.data("clean-urls")&&(n="/"+n.split(/:\/\/.*?\//)[1],i&&(i="/"+i.split(/:\/\/.*?\//)[1])),e.hasClass("search-problem")?e.data("modal-url",n.replace(/\-problem\/(.)/,"-problem/modal/$1").replace("/problems/","/problems/modal/")):e.hasClass("search-note")?e.data("modal-url",n.replace("/thread/","/modal-thread/")):e.data("modal-url",i),e.addClass("inited"),u.modal_events.apply(this)}),p.checkOverflow(k)},z=function(e){return e.replace(/data-src=/g,"src=")},F=function(e){switch(e.document_type){case"wikis":return U(e);case"problems":return H(e);case"quizzes":return W(e);case"notes":return K(e);case"users":return V(e);default:return e}},U=function(e){return e.processed_title=G(e),e.processed_blurb=Y(e),e.is_low_quality=(e.quality_score||0)<A.wiki_quality_threshold,e},H=function(e){return e.level=e.level>0&&"None"!==e.level?e.level:0,e.concept_quiz_slug=e.concept_quiz_slug||!1,e.num_likes=e.num_likes||0,e.num_shares=e.num_shares||0,e.percent_solved=e.percent_solved||0,e.processed_title=G(e),e.processed_blurb=Y(e),e.topic_name="Unknown"===e.topic_name?null:e.topic_name,e},W=function(e){return e.topic_name=e.topic_name||null,e.quiz_type=e.quiz_type||null,e.paid_quiz=e.paid_quiz&&!0===e.paid_quiz,e},K=function(e){return e.processed_title=G(e),e.processed_blurb=Y(e,!1),e},V=function(e){return e.user_id=e.objectID.split("-")[1],e.school_name="None"===e.school_name?null:e.school_name,e},$=function(e){var t=1,n={query:e.query};return E.forEach(function(e){if(e!==A.search_type){var i="alt_search_"+t;n[i]=e,n[i+"_text"]=function(e,t){return"users"===e?t?"member":"members":t?e.substr(0,e.length-1):e}(e),t++}}),n},G=function(e){return e.rendered_title?e.rendered_title:e.title?a.escape(e.title):null},Y=function(e,t){t=!1!==t;var n;if(e.rendered_blurb)n=e.rendered_blurb;else{if(!e.blurb)return null;n=t?a.escape(e.blurb):e.blurb}return n.replace(/<a\ /g,"<span ").replace(/<\/a>/g,"</span>")},X=function(){l.is_mobile||(c.crop(),o.body.addClass("search-active")),_.hasClass("active")||_.hide().addClass("active").fadeIn(150),f.loadForElement(k)},Z=function(){l.is_mobile||(c.crop(!1),o.body.removeClass("search-active")),_.removeClass("active"),y.val(""),w.removeClass("loaded"),o.window.off("scroll.searchpage")},J=function(e){e=e||y.val();var t=[],n={facets:"*",facetFilters:[],attributesToHighlight:[]};if(A.page&&A.page>0&&!0===A.use_page?(A.use_page=!1,n.page=A.page):A.page=0,"problems"===A.search_type){var r;r="hard"===A.levels?"rating>1800":"medium"===A.levels?"(rating:1400 to 1800, rating<0)":"rating:0 to 1400",n.numericFilters=r,t.push("levels-"+A.levels)}else"wikis"!==A.search_type||i.isPrivilegedUser?"notes"===A.search_type&&(n.numericFilters="quality_score>=65"):n.numericFilters="quality_score>="+A.wiki_quality_threshold;A.topics.length>0&&["problems","quizzes"].indexOf(A.search_type)>=0&&(n.facetFilters.push("topic_name:"+A.topics),t.push("topic-"+L(A.topics,!0))),A._filters=t,m.set("search_options",A),function(e,t,n){var i="string"==typeof t?t:"<next page>";T.push(i),t="string"==typeof t?t:"<none>",n=n||{},(g[e]||E.indexOf(e)>=0)&&(t.trim().length>0||A.allow_empty_queries)?(M?M=!1:y.val(t),A.search_type=e,null===v&&(v=s(g.application_id,g.readonly_api_key)),b[e]||(b[e]="users"===e?v.initIndex(g[e].index_name):v.initIndex(g.problems.index_name)),w.addClass("loading").removeClass("loaded"),"users"!==e&&E.indexOf(e)>=0&&n.facetFilters.push("document_type:"+e),b[e].search(t,n,O)):Z()}(A.search_type,e,n)};o(function(){if(y=o.id("site-search-input"),_=o.id("site-search-results"),C=o.id("site-search-custom-result"),y.length>0&&_.length>0&&(w=y.parent(),i=o("#site-search-data").data(),i.isPrivilegedUser=!0===i.isPrivilegedUser,g=i.settings,r=i.user,function(){var e=null;y.on("keydown input",function(t){clearTimeout(e),13===t.which||t.forceSearch?(M=!0,J(y.val())):e=setTimeout(function(){M=!0,J(y.val())},1e3)}),_.add(o.id("search-hide")).on("click",function(e){o(e.target).closest(".search-results-wrapper").length||(e.preventDefault(),Z())}),o.id("search-input-btn").on("click",function(){y.focus()})}(),y.val().length>0)){var e=m.get("search_options")||null;null!==e&&e.version&&e.version===A.version&&(A=e),J(unescape(y.val()))}}),t.exports={}},{algoliasearch:"algoliasearch","app/content_modal":"app/content_modal",jquery:"jquery","lib/wafer":"lib/wafer","raven-js":"raven-js",underscore:"underscore","util/analytics":"util/analytics","util/global":"util/global","util/latex":"util/latex","util/mathjax_loader":"util/mathjax_loader","util/ui":"util/ui"}],"app/sets":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("lib/wafer"),a=e("util/global"),s=(e("util/ui"),e("util/ajax")),l=e("util/pager"),c=e("app/content_modal"),u=e("util/tag"),f=e("util/flags"),d=e("app/generic_controllers"),h=e("app/error_modal");e("jquery-ui/sortable");var p,m,g,v,b,y={},w=window.vkey||{},_={},k=null,x=!1,C=null,S=!1,M=function(e){if(S)x=!0;else{x=e||!x;var t=i.id("nf-feeditem-modal");x?(i.body.on("click.saveitem savetogroup.open",function(){M(!1)}),t.off_on("scroll.saveitem",r.throttle(E,100))):(i.body.off("click.saveitem savetogroup.open"),t.off("scroll.saveitem")),p.toggle(x),x?(k&&k.length>0&&k.outerHeight()<k[0].scrollHeight&&(k.addClass("scrollable"),i.id("setitem-gradient").addClass("active")),E(),g.addClass("selected"),i.body.trigger(i.Event("saveitem.open"))):(p.removeClass("success"),g.removeClass("selected"))}},E=function(){if(!S&&!a.is_mobile){var e=0,t=0,n=m.offset(),i="",r="",o=a.is_mobile?0:28;"left"===m.data("position")?(t=n.top,e=n.left-p.width()-o,i="adjusted",r="bottom"):"bottom"===m.data("position")?(t=n.top+m.outerHeight(),e=n.left+m.width()/2,i="bottom"):(t=n.top-p.height(),e=n.left+m.width()/2,r="bottom"),p.addClass(i).removeClass(r).css({top:~~t,left:~~e})}},T=function(){p.on("click",function(e){e.stopPropagation()});var e=i.id("setitem-form-sets"),t=i.id("setitem-form-new-set"),n=i(".toggle-new-set"),r="savedsets_viewed_nux",a="dismissed_saved_set_nux";k=e.find(".sets"),function(){var e=k.find("input"),t=e.filter(".auto-checked");t.length>0&&e.on("click.autocheck",function(){e.off("click.autocheck"),t.prop("checked",!1).removeClass(".auto-checked")})}(),p.removeClass("nux new success"),t.find(".errorlist").length>0?p.addClass("new"):p.find(".success").length>0?(p.addClass("success"),M(!0)):p.find(".nux").length&&(!0===o.get(r)?f.update(a,!0):(p.addClass("nux"),i.id("saveitem-nux-hide").on("click",function(e){e.preventDefault(),o.set(r,!0),f.update(a,!0),p.removeClass("nux"),E()}))),E(),n.on("click",function(e){e.preventDefault(),p.toggleClass("new"),p.find("input:visible").focus(),E()}),e.on("submit",function(){M(!1)})},A=function(e){(!0===e||p&&p.length&&m.length)&&(!function(){if(!S){var e=p.find("input:checked").not(".auto-checked").length;e>0?g.html(v({num_sets:e})):g.html(g.data("orig-html")),g.hasClass("inited")&&null!==C&&C<e&&(g.addClass("success"),setTimeout(function(){g.removeClass("success")},200)),C=e,g.addClass("inited")}}(),E(),T())},D=null,L=function(){b=i.id("newsfeed_savedsets_set_wrapper")},I=function(e){O()&&(b.find(".nf-set-item").prependTo(b),j(),R())},P=function(){b.find(".newsfeed_savedsets_set_paginate").click()},O=function(){return b.hasClass("sortable")},j=function(){b.data("ui-sortable")?b.sortable("refresh"):(b.sortable({items:".nf-set-item",tolerance:"intersect",handle:"*",placeholder:"nf-feed-item nf-set-item placeholder"}),b.on("sortstop",q),b.on("sortupdate",N))},q=function(e,t){t.item.data("just-dragged",!0),setTimeout(function(){t.item.removeData("just-dragged")},500)},N=function(e,t){var n=(D=b.data("sort-url")).replace("100",t.item.find(".set-item-content").data("item")).replace("200",t.item.index()+1);i.post(n).then(B).fail(h.handler)},B=function(e){},R=function(){var e=b.find(".delete").not(".inited");e.on("click",function(e){e.preventDefault();var t=i(this),n=t.data(),r=function(){i.post(t.attr("href")).then(function(e){z(t,e)}).fail(h.handler)};i.id("set-lb-list").find("li a").length>0&&n.confirmBoxTitle?i.confirm(n.confirmBoxTitle,{title_text:""},function(e){e&&r()}):r()}),e.addClass("inited")},z=function(e,t){t.success&&e.parents(".nf-set-item").remove()},F=function(){var e=i.id("setview-edit-form");if(e.length){var t=i.id("setview-edit-link"),n=i.id("setview-edit-cancel"),r=i.id("newsfeed-set-page","set-container"),o=e.find("textarea");t.on("click",function(e){e.preventDefault(),r.addClass("editing"),o.change()}),n.on("click",function(e){e.preventDefault(),r.removeClass("editing")}),o.autosize(),u.tagging_events(i.cmp("profile_savedsets_set_header")),r.toggleClass("editing",e.find(".errorlist").length>0)}};y.copyToClassTrigger=function(e){var t=i(".copyset-tooltip");e.on("click",function(e){e.stopPropagation(),t.removeClass("hide success")}),i.body.on("click",function(){t.addClass("hide")}),t.on("click",function(e){e.stopPropagation()})};var U=!1,H=function(){var e=i(".set-leaderboard"),t=i.id("set-lb-sort"),n=t.find("a"),r=t.data(),o=i.id("set_pagination_container"),a=o.find("a"),l=o.data();n.on("click",function(e){e.preventDefault();var t=i(this);t.hasClass("active")||(n.toggleClass("active"),U=!0,s(r.page).get(r.url,{component_key:r.cmp,version:VERSIONS[r.cmp],order_leaderboard_by:t.data("sort-by")}))}),a.on("click",function(t){t.preventDefault();var n=i(this);s(l.page).get(l.url,{component_key:l.cmp,version:VERSIONS[l.cmp],page:n.data("page-number")}),i.doc.scrollTop()>e.offset().top&&UI.Anchors.scrollToTarget(e,function(){var t=e.find(".cmp-deferred");t.length&&s.deferred.load(t)})})};y.leaderboardToggle=function(e){var t=e.children(),n=i.id("newsfeed-set-page").add(i.cmp("profile_savedsets_set_page_modal"));U?U=!1:n.removeClass("leaderboard"),t.on("click",function(e){if(e.preventDefault(),!i(this).hasClass("active")&&(n.toggleClass("leaderboard"),t.toggleClass("active"),n.hasClass("leaderboard"))){var r=n.find(".cmp-deferred");r.length&&s.deferred.load(r)}})},y.submitScoreForm=function(e){e.find(".btn").on("click",function(){i(".set-leaderboard").addClass("cant-submit-score")})};var W=function(e){var t=i.id("setlist-create-btn"),n=i.id("setlist-create-modal"),r=i.id("setlist-create-success");t.length&&t.on("click",function(e){e.preventDefault(),n.modal(),i.id("id_title").focus()}),r.length&&(r.modal(),n.modal("hide")),!0===e&&n.length&&n.modal()};i(function(){void 0===window.Sets&&(L(),I(),F(),H(),W())});var K=function(){w.handle.apply(this,arguments),A()};w.assessment_add_solvable_to_saved_set=K,w.discussions_add_to_saved_set=K,w.quizzes_add_solvable_to_saved_set=K,w.potw_add_solvable_to_saved_set=K,w.profile_savedsets_set_leaderboard=function(){w.handle.apply(this,arguments),U=!0,H()},w.profile_savedsets_set_header=function(){w.handle.apply(this,arguments).mathjax_update(),F()};var V=!1;w.profile_savedsets_set_page_modal=function(){var e=i.cmp("profile_savedsets_set_page_modal").find(".cmp-deferred");if(e.length&&s.deferred.load(e),b=i.id("newsfeed_savedsets_set_wrapper"),I(),F(),b.find(".modal-feed-item").not(".inited").each(c.modal_events).addClass("inited"),H(),s.autosubmit.init(),l.init(),P(),!V){V=!1;var t=w.profile_savedsets_set_container;w.profile_savedsets_set_container=function(){t.apply(this,arguments),P()}}},w.profile_savedsets_create_set=function(){w.handle.apply(this,arguments),i.body.children(".modal-bg").remove(),W(!0)},w.my_savedsets_sidebar=function(){w.handle.apply(this,arguments);var e=i.id("saved-sets-sidebar-module");d.initGenericControllers(e),e.find(".mini-profile").mini_profile()},w.profile_savedsets_copy_to_class=function(){var e=w.handle.apply(this,arguments);e.find(".success").length>0&&e.find(".copyset-tooltip").removeClass("hide").addClass("success")},y.saveitem={tooltip:function(){var e=(m=i.id("sets-tooltip-target")).data("object-id"),t=i();["assessment_add_solvable_to_saved_set","discussions_add_to_saved_set","quizzes_add_solvable_to_saved_set","potw_add_solvable_to_saved_set"].forEach(function(e){t=t.add(i(".saveitem-tooltip#cmp_"+e+"_id"))}),t.each(function(){var t=i(this),n=t.data("object-id");n!==e&&(_[n]=t,t.detach())}),0===(p=t.filter("[data-object-id="+e+"]")).length?(p=_[e])&&p.appendTo(i.body):p.length>1&&(p.slice(1).remove(),p=p.first()),p&&p.length&&(m.length?(!0!==p.data("inited")&&(p.appendTo(i.body),p.data("inited",!0)),g=i.id("sets-tooltip-trigger"),v=r.template(g.data("tmpl")),g.on("click",function(e){e.preventDefault(),e.stopPropagation(),M()}),x&&M(!0)):!0===p.data("is-webview")&&(x=!0,S=!0,p.addClass("in")))},forms:A},y.setview={update_feed:I,reset_container:L},y.setlist={modals:W},y.profile_savedsets_set_page_modal=w.profile_savedsets_set_page_modal,y.SavedSetsList=function(e){c.feeditem_modal(e),e.find(".quick-set-link").each(c.modal_events)},y.SavedSetsSidebarModule=function(e){var t=e.parents(".savedsets-module").first(),n=e[0].scrollHeight-e.innerHeight();e.on("scroll",function(){var i=e.scrollTop();t.toggleClass("start",i<=0),t.toggleClass("end",i>=n)}),n>0&&(e.trigger("scroll"),t.addClass("scroll"))},y.MoreSetsByAuthor=function(e){var t=e.find("a");t.attr("href")===window.location.pathname&&t.on("click",function(e){e.preventDefault(),c.feeditem_modal_close()})},y.checkIfUserCanSubmitScore=function(){0===i.id("newsfeed_savedsets_set_wrapper").find(".status .correct").length&&i(".set-leaderboard").addClass("cant-submit-score")},t.exports=y},{"app/content_modal":"app/content_modal","app/error_modal":"app/error_modal","app/generic_controllers":"app/generic_controllers",jquery:"jquery","jquery-ui/sortable":3,"lib/wafer":"lib/wafer",underscore:"underscore","util/ajax":"util/ajax","util/flags":"util/flags","util/global":"util/global","util/pager":"util/pager","util/tag":182,"util/ui":"util/ui"}],"app/signup":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("util/global"),a=e("util/analytics"),s=e("app/generic_controllers"),l={};l.bdayExpl=function(e){var t;t=o.is_mobile?"left":e.parents(".public-signup-modal").length?"bottom":"right",e.tooltip({show:!1,trigger:"manual",placement:t}),e.on("click",r.throttle(function(t){t.preventDefault(),t.stopPropagation(),e.tooltip("toggle"),e.toggleClass("active")},200)),i.body.on("click",function(){e.hasClass("active")&&e.click()})},l.showPassword=function(e){var t=e.data("field"),n=e.parentsUntil("form").parent().find(t),i=!1;e.on("click",function(){i=!i,e.toggleClass("active",i),n.attr("type",i?"text":"password")})},l.signUpModal=function(e){e.parent(".modal-bg").on("click",function(){e.parents(".solv-public-form").removeClass("open"),i(".btn-mcq.dim").removeClass("dim")}),e.on("click",function(e){e.stopPropagation()});var t=e.find("#position-dots").find(".position-dot"),n=e.find("#prev-position-dot"),o=e.find("#next-position-dot"),l=e.find("#slides").find(".slide"),c=l.length,u=1,f="disabled",d=function(e){l.removeClass("active"),l.filter('[data-position="'+u+'"]').addClass("active"),t.removeClass("active"),e?e.addClass("active"):t.filter('[data-position="'+u+'"]').addClass("active"),n.removeClass(f),o.removeClass(f),u==c?o.addClass(f):1==u&&n.addClass(f),a.track("ui",{element_id:"viewed_signup_login_modal_tour_slide_"+u})};t.on("click",function(e){var t=i(this),n=t.data("position");e.preventDefault(),n!=u&&(u=n,d(t))}),n.on("click",function(e){e.preventDefault(),i(this).hasClass(f)||(u--,d())}),o.on("click",function(e){e.preventDefault(),i(this).hasClass(f)||(u++,d())});var h=e.find(".public-signup-right");if(e.data("show-form")){var p=e.find("#signup-email"),m=e.find("#signup-form-container"),g=e.find("#problem-login-link"),v=e.find("#login-form-container"),b="show-form",y=p.data(),w=m.data(),_=!1,k=g.data(),x=v.data(),C=!1;p.on("click",function(e){if(e.preventDefault(),_)h.addClass(b);else{var t=r.extend({page_key:w.pageKey},y);i.get(w.url,t).then(function(e){_=!0,m.html(e.actions.homepage_signup_form.new_html),s.initGenericControllers(m),h.addClass(b)}).fail(function(e){window.location.href=p.attr("href")})}}),g.on("click",function(e){if(e.preventDefault(),C)h.addClass(b);else{var t=r.extend({page_key:x.pageKey},k);i.get(x.url,t).then(function(e){C=!0,v.html(e.actions.homepage_login_form.new_html),s.initGenericControllers(v),h.addClass(b)}).fail(function(e){window.location.href=g.attr("href")})}})}var S=e.find("#problem-signup-link-alternative"),M=e.find("#problem-login-link-alternative");S.on("click",function(e){e.preventDefault(),h.removeClass(b+" show-login").addClass("show-signup")}),M.on("click",function(e){e.preventDefault(),h.removeClass(b+" show-signup").addClass("show-login")})},t.exports=l},{"app/generic_controllers":"app/generic_controllers",jquery:"jquery",underscore:"underscore","util/analytics":"util/analytics","util/global":"util/global"}],"app/solution_discussions":[function(e,t,n){var i,r=e("jquery"),o=e("underscore"),a=(e("util/global"),e("util/ui")),s=e("util/ajax"),l=e("app/comments"),c=e("app/solvables"),u=e("raven-js"),f={},d=window.vkey||{},h=!1,p=!1,m=!1,g=!1,v=!1,b=function(){var e,t=!1;if(!(i<=0)){if(!1!==m&&m.length>0)e=m;else if(!1!==p&&p.length>0)e=p,t=!0;else if(g)e=r.id("comment-a3f5"+g+"e92"),t=!0;else{if(!(!1!==h&&h.length>0))return;e=h}var n=function(){t&&(e.addClass("highlight"),setTimeout(function(){e.removeClass("highlight")},5e3))};e.length>0&&o.defer(function(){l.expandThreadsFor(e),e.is_in_pane()?n():o.delay(function(){a.Anchors.scrollToTarget(e,n)},500)})}};f.add=function(e){var t=e.find(".guide-link"),n=e.find(".discsol-add-guide"),i=e.find("#new_post_form_id, #new_solution_form_id, #new_dispute_form_id, #new_wikifeedback_form_id"),o=i.find("textarea"),a=i.find("[type=submit]");b();var s=o.filter(":visible");s.length||(s=o),s.autosize().mentionsAndWikiLinks(),i.after(n),t.off_on("click",function(e){e.preventDefault(),n.fadeToggle(100)}),r("#make-visible-form, #make-private-form").on("submit",function(e){r(this).find("button").addClass("dim")}),i.on("submit",function(){r(this).attr("disabled","disabled"),a.attr("disabled","disabled")}),o.on("focus",function(){r(".mobile-solution-tips").show()}),r.body.on("solvable.statechange",function(e){"solutions"===e.currentState&&o.trigger("autosize.resize")})},f.comments=function(e){if(l.expander(e),l.editEvents(e),e.find(".solution-comments-trigger").on("click",function(){var e=r(this).parents(".discsol-post-wrapper"),t=e.find(".discsol-comments .cmp-deferred");e.toggleClass("comments-expanded"),t.length&&s.deferred.load(t)}),e.find(".action.subscr .cmp-deferred").each(function(){s.deferred.load(r(this))}),!0!==v){var t=window.location.hash||null;if(t){v=!0,t=t.split(/\//g);var n,a,u=e.parents("#solv-main");switch(t[1]){case"solution-comments":n="solutions",a=u.find(".btn-solution").data("solutions-loaded"),e=r(".solv-solutions");break;case"dispute-comments":n="disputes",a=u.find(".report-link").data("disputes-loaded"),e=r(".solv-disputes")}if(a&&c.setStateForSolvable(e.parents(".solv-main"),n),t[2])if((h=r("#post-"+t[2])).length)window.location.search.indexOf("unsubscribe_from_post=true")>=0?(m=h.find(".action.subscr")).addClass("wiggle"):t[3]&&(g=parseInt(t[3],10),o.defer(function(){r.id("solution-comments-trigger-"+t[2]).click()})),i=e.find(".discsol-post").length,b();else{v=!1;var f=r.id("solution-next-page");f.length&&(y=t[2],f.click())}}}};var y=null;f.loadSolutionsPage=function(e){e.on("click",function(){var t=e.data(),n={component_key:t.componentKey,param_key:t.paramKey};t.position&&(n.p=t.position),y&&(n.solution=y),e.addClass("loading"),s(t.pageKey).get(t.url,n)})},d.quizzes_solvabledisputecomments=d.quizzes_challengesolvablesolutioncomments=d.potw_solvablesolutioncomments=d.potw_solvabledisputecomments=d.wikidiscussions_wikifeedbackcomments=d.disputediscussions_publicsolvabledisputecomments=d.solutiondiscussions_publicsolvablesolutioncomments=function(e,t){var n=d.handle(e,t);l.events(),l.subscribe(),n.find(".latex").mathjax_update(),n.find(".mini-profile").mini_profile();var o=n.find(".disc-comments").data("highlighted-comment-id");o&&(p=r.id("comment-a3f5"+o+"e92"),i=1),g&&!p&&0===(p=r("#comment-a3f5"+g+"e92")).length&&(p=!1),b(),l.expander(n),i--},d.quizzes_challengesolvablesolutionwrapper=d.potw_solvablesolutionwrapper=d.solutiondiscussions_publicsolvablesolutionwrapper=function(e,t){var n=d.handle(e,t);n.find(".latex").mathjax_update(),l.init(n),n.find(".mini-profile").mini_profile();var i=!1,o={};r(".solv-solutions .solution-header .text .mini-profile").each(function(){var e=r(this).data("id");if(e in o)o[e].count++,i=!0;else{var t=r(this).attr("href");o[e]={name:t?t.match(/\/profile\/(.*)\//)[1]:r(this).text().trim(),count:1}}});for(var a in o)o[o[a].name]=o[a].count,delete o[a];var s={},c=!1;if(l.hitPreviewSolution){r(".hdr-settings .dropdown-toggle img").attr("alt")in o||(s["__Lost.Edits"]="Yes",c=!0)}i&&(s._Authors=JSON.stringify(o),c=!0),c&&u.captureMessage("Messed up solutions",{tags:s}),l.hitPreviewSolution=!1},t.exports=f},{"app/comments":"app/comments","app/solvables":"app/solvables",jquery:"jquery","raven-js":"raven-js",underscore:"underscore","util/ajax":"util/ajax","util/global":"util/global","util/ui":"util/ui"}],"app/solvables":[function(e,t,n){var i,r=e("jquery"),o=e("underscore"),a=e("lib/wafer"),s=e("util/modal_helpers"),l=e("util/global"),c=e("util/ui"),u=e("util/ajax"),f=e("util/urls"),d=e("util/sticky"),h=e("util/analytics"),p=e("app/content_modal"),m=e("app/preloaders"),g=e("app/error_modal"),v=e("app/comments"),b=e("app/zoomable"),y=e("app/sets"),w=e("app/generic_controllers"),_=e("util/flags"),k=e("util/latex"),x=e("raven-js"),C={},S={},M=!1,E=null,T=!1,A=function(e){return S[e.data("solvable")]||{}},D=function(e){if(e.$solversList){var t=e.$solversList;C.recentSolvers(t)}e.$solversContainer&&u.deferred.load(e.$solversContainer.children(".cmp-deferred"))},L=function(){var e=["solutions","disputes"];return function(t,n){if(t=t||"default",n.previousState=n.previousState||null,n.currentState=n.currentState||null,"back"!==t){if(n.$solvable.removeClass(e.join(" ")),s.removeBackButton(),t&&e.indexOf(t)>=0&&n.$solvable.addClass(t),("solutions"===t||"disputes"===t)&&(I(n,t),"disputes"===t))if(l.is_mobile){var i=r(".solv-disputes");i.removeClass("hide"),c.Anchors.scrollToTarget(i)}else"solutions"===n.currentState&&c.Anchors.scrollToTarget(r.body);P(n),O(n),n.$solvable.mathjax_update(),n.previousState=n.currentState,n.currentState=t,r.body.trigger(r.Event("solvable.statechange",n))}else L(n.previousState,n)}}();C.setStateForSolvable=function(e,t){L(t=t||null,A(e))};var I=function(e,t){e.$solvable=e.$solvable||r(".solv-main");var n=e.$solvable.find("solutions"===t?".solv-solutions":".solv-disputes"),i=e.$solvable.find("#solv-simple-solution-target"),a=n.find(".cmp-deferred");if(e.$solvable.find(".btn-solution.wiggle-less").removeClass("wiggle-less active-green").blur(),e.$solvable.find(".btn-solution.wiggle").removeClass("wiggle").blur(),l.is_mobile&&i.length>0)c.Anchors.scrollToTarget(i);else{if("solutions"===t&&l.is_mobile&&0===i.length){var s=r.cmp("solutiondiscussions_publicsolvableaddsolutionpost");s.length||(s=r.cmp("solutiondiscussions_publicsolvablesolutionlist")),s.length&&c.Anchors.scrollToTarget(s)}if(n.length>0){a.each(function(){u.deferred.add(r(this))});var f=e.$solvable.parents("#nf-feeditem-modal");f.length>0&&function(e,t){var n=t.length,i=function(e,t){var n=e.offset().top,i=n+e.outerHeight(),r=t.offset().top,o=r+t.outerHeight();return i>=r&&n<=o},a=function(t){var r=u.deferred.cmps.length,o=r-u.deferred.count,a=!1;for(o;o<r;o++)!1!==(a=u.deferred.cmps[o])&&i(a,t)&&(u.deferred.load(a),u.deferred.cmps[o]=!1,u.deferred.count--,0==--n&&e.off("scroll.deferred"))};o.defer(a,e),e.on("scroll.deferred",o.throttle(function(e){a(r(e.target)||null)},50))}(f,a),n.find("textarea:visible").autosize()}c.Anchors.scrollToTarget(r("#solutions-scrollable-container,#disputes-scrollable-container,#solv-simple-solution,#b2-solution").filter(":visible"))}},P=function(e){var t=e.$solvable;l.is_mobile?t.scale_svg(.4):t.scale_svg()},O=function(e){e.$solvable.find(".btn-mcq").scale_svg()},j=function(e){"solutions"===e.currentState?(e.$solvable.find(".solv-details .btn-solution").removeClass("active"),L("",e)):(e.$solvable.find(".solv-details .btn-solution").removeClass("btn-accent").addClass("active"),e.$solvable.find(".esr-problem").addClass("btn-accent active"),L("solutions",e))},q=function(e){var t=S[e.solvable];t.solutionsLoading||(t.solutionsJustLoaded=!0,t.solutionsLoading=!0,u(e.page_key).post(e.postLink,e))};C.solvable=function(e){var t=e,n=t.data("solvable"),i=S[n]||{};i.$solvable=t,i.data=r.id("solvable-data").data(),i.solvableDidOnload=!0===i.solvable,i.currentState=null,i.previousState=null,S[n]=i,r.id("direct-link-input").on("click",function(e){e.stopPropagation(),r(this).select()}),P(i),i.solutionsJustLoaded?(S[n].solutionsJustLoaded=i.solutionsJustLoaded=!1,L("solutions",i)):i.disputesJustLoaded?(r(".dispute-disc-modal").modal("hide"),S[n].disputesJustLoaded=i.disputesJustLoaded=!1,L("disputes",i)):l.is_mobile&&l.user_is_authenticated&&i.$solvable.find("#solv-simple-solution").length&&L("solutions",i),t.find(".uses-latex, .latex").mathjax_update(),!0!==i.solvableDidOnload&&(S[n].solvableDidOnload=!0,y.saveitem.tooltip(),y.saveitem.forms(),v.add_form(),v.votes());var o=t.data("ir-verification");if(o&&!o.preventUpdate){var a=t.find(".solv-details"),s=o.canStillAnswer===!a.hasClass("endstate"),c=o.answerIsCorrect===a.hasClass("correct"),u=o.attemptNumber===t.find("#attempt-number").data("attempt-number");s&&c&&u||h.track("instant response mismatch",{solvable:n,answer:encodeURIComponent(o.answer),url:window.location.href,"endstate mismatch":!s,"correct/incorrect state mismatch":!c,"attempt number mismatch":!u}),t.removeData("ir-verification")}},C.solvableRedesign=function(e){var t=e.data("solvable"),n=S[t]||{};n.$solvable=e,n.data=r.id("solvable-data").data(),n.solvableDidOnload=!0===n.solvable,S[t]=n,y.saveitem.tooltip(),y.saveitem.forms(),v.add_form(),v.votes(),e.find(".sharing-dd .dropdown-menu").on("click",function(e){e.stopPropagation()}),e.find(".bsharing-link").on("click",function(){r(this).parents(".dropup").removeClass("open")}),e.find(".direct-link").on("click",function(){r(this).find("input").select()}),("solutions"===n.currentState||n.$solvable.hasClass("solutions"))&&n.$solvable.find(".solv-details .btn-solution").first().addClass("active"),b.images(e),C.cropActionsMenu(e)},C.editableTitle=function(e){var t=e.find(".edit-title-link");if(null!==e&&e.length&&null!==t&&t.length){var n=e.find(".cancel-edit-link");t.on("click",function(){e.addClass("editing")}),n.on("click",function(){e.removeClass("editing")})}},C.solversInit=function(e){S[e.data("solvable")].$solversContainer=e,e.find(".cmp-deferred").length?D(A(e)):e.appendTo(r.cmp(e.data("cmp-target"))).removeClass("hide")},C.answerFormWrapper=function(e){o.defer(function(){var t=A(e);e.find("form").on("submit",function(){t.$solvable.find(".spinner").addClass("active")}),l.is_mobile?-1!==navigator.userAgent.indexOf("Android 4.0")&&e.find("#id_answer").on("focus",function(){var e=r(this);setTimeout(function(){var t=e.offset().top-20;t>0&&r.window.scrollTop(t)},500)}):e.data("disable-auto-focus")||e.find("#id_answer").select(),O(t)})},C.loggedOutForm=function(e){var t=e.find("#logged-out-answer"),n=e.parents(".solv-details,.solv-details-loggedout").find(".logged-out-solution"),i=r.id("solv-public-signup"),o=i.find("#signup-fb"),a=i.find("#login-fb"),s=i.find("#signup-google"),l=i.find("#login-google"),u=i.find("#signup-email, #problem-signup-link-alternative"),d=i.find("#problem-login-link, #problem-login-link-alternative"),p=i.find("#public-answer"),m=e.find(".btn-mcq"),g=e.find("[name=logged-out-mcq]"),v=e.hasClass("mcq-form"),b=e.hasClass("multi-select"),y=e.data(),w=(y.redirect,o.attr("href")),_=a.attr("href"),k=s.attr("href"),x=l.attr("href"),C=u.attr("href"),S=d.attr("href"),M=!0===y.delayedSignup,E=function(){var e="";if(b){var n=[];g.each(function(e){r(this).is(":checked")&&n.push(e+1)}),e=n.join("|")}else if(!v&&t.length)e=t.val();else if(g.length){var i=g.filter(":checked");e=i.length?i.val():""}return e.trim()},T=function(e,t){if(e){var n=-1===e.indexOf("%3F")?"?":"&";return e+encodeURIComponent(n+t)}},A=function(e,n,c){if(r.body.hasClass("hundredday-page")){var m=r.id("solv-main");m.css({height:m.outerHeight()}),i.appendTo(r.body),i.find(".modal-bg").off_on("click.modalhack",function(){m.css({height:"auto"}),i.insertAfter(".solv-problem")})}!function(e,t){e.preventDefault();var n=E(),r={},c={},m=w,g=_,v=k,b=x,M=C,A=S;h.track("ui",{action:"click",element_type:"button",element_id:"logged_out_solvables_"+t});var D=isNaN(parseFloat(n));if(i.removeClass("text-answer alt"),n.length?(n.indexOf("|")>=0?p.text("Those choices"):(p.text(n.replace(/__replace_plus__/g,"+").replace(/__rep_perc__/g,"%").replace(/__rep_ques__/g,"?")),p.mathjax_update()),r.attempt=encodeURIComponent(n),c.attempt=encodeURIComponent(n),u.add(d).data("attempt",n),u.add(d).attr("data-attempt",n),D&&i.addClass("text-answer")):(i.addClass("alt"),n="no-input"),m&&(m=m.replace("try-value-value",encodeURIComponent(n))),g&&(g=g.replace("try-value-value",encodeURIComponent(n))),v&&(v=v.replace("try-value-value",encodeURIComponent(n))),b&&(b=b.replace("try-value-value",encodeURIComponent(n))),M&&(M=M.replace("try-value-value",encodeURIComponent(n))),A&&(A=A.replace("try-value-value",encodeURIComponent(n))),y.isQuiz){var L="problem="+y.solvableSlug+"&attempt="+n;m=T(m,L),g=T(g,L),v=T(v,L),b=T(b,L),M=T(M,L);var I="";-1==A.indexOf("problem=")&&(I+="problem="+y.solvableSlug,-1==A.indexOf("attempt=")&&(I+="&")),-1==A.indexOf("attempt=")&&(I+="attempt="+encodeURIComponent(n)),A=T(A,I)}if(y.topicTag&&(r.topic_tag=y.topicTag,c.topic_tag=y.topicTag,m=T(m,"topic_tag="+y.topicTag),g=T(g,"topic_tag="+y.topicTag),v=T(v,"topic_tag="+y.topicTag),b=T(b,"topic_tag="+y.topicTag),u.add(d).data("topic_tag",y.topicTag),u.add(d).attr("data-topic_tag",y.topicTag)),M){var P=M.match(/next=(.*)/);P.length&&(u.data("next",P[1]),u.attr("data-next",P[1]),u.data("already_escaped",!0),u.attr("data-already_escaped",!0))}if(A){var O=A.match(/next=(.*)/);if(O.length){var j=decodeURIComponent(O[1]);d.data("next",j),d.attr("data-next",j)}}o.attr("href",f.appendGetParams(m,r)),a.attr("href",f.appendGetParams(g,r)),s.attr("href",f.appendGetParams(v,r)),l.attr("href",f.appendGetParams(b,r)),u.attr("href",f.appendGetParams(M,c)),d.attr("href",f.appendGetParams(A,c))}(e,n),r.id("nf-modal-close").hide(),r(".like-us-modal").removeClass("visible"),i.addClass("open"),t.blur();var g=i.find("#public-signup-tour");g.length&&!g.data("already-opened")&&(g.data("already-opened",!0),g.attr("data-already-opened",!0),h.track("ui",{element_id:"viewed_signup_login_modal_tour_slide_1"})),c&&i.on("click",function(){i.removeClass("open")})},D=!1,L=function(e,t){M?setTimeout(function(){A(e,t,!1)},1e4):A(e,t,!0)},I=function(t){if(M){var n=e.parents(".solv-main").find("#solv-simple-solution");n.show(),t&&c.Anchors.scrollToTarget(n)}};e.on("submit",function(e){e.preventDefault(),L(e,"submitted_form"),I(),E()&&M&&!D&&(D=!0,h.track("ui",{element_id:"viewed_logged_out_answer_sponsored"}))}),n.off_on("click",function(i){t.val(""),m.removeClass("active dim"),g.filter(":checked").prop("checked",!1),L(i,"clicked_solution_btn"),M&&(i.preventDefault(),I(!0),e.data("viewed-solution",!0),e.submit(),h.track("ui",{element_id:"viewed_logged_out_solution_sponsored"}),n.fadeOut(100))}),r.body.on("quizSolvablePositionChanged",function(){r(".logged-out-solution").removeClass("dim disabled").removeAttr("disabled")})},C.preventSocialButtonDoubleClick=function(e){e.find(".signup-social").on("click",function(e){var t=r(this);t.hasClass("disabled")?e.preventDefault():t.addClass("disabled")})},C.mcqForm=function(e){$selectors=e.find("label");var t=function(){var t=e.find("input:checked").length<=0;e.find(".btn-submit").prop("disabled",t).toggleClass("disabled",t)};$selectors.on("click",function(){var e=r(this),n=e.find("input");null!==(n.val()||null)&&(n.prop("checked",!0),$selectors.removeClass("active correct dim"),e.addClass("active correct")),t()}),t()},C.multiSelectForm=function(e){var t=function(){var t=e.find("input:checked").length<=0;e.find(".btn-submit").prop("disabled",t).toggleClass("disabled",t)};e.find("label").on("click",function(e){e.preventDefault();var n=r(this);setTimeout(function(){var e=n.find("input"),i=e.val()||null,r=e.is(":checked");null!==i&&(r?(e.prop("checked",!1),n.removeClass("active correct")):(e.prop("checked",!0),n.addClass("active correct")),t())})}),t()},C.answerForm=function(e){var t=e.find("#id_answer");e.on("submit",function(n){n.preventDefault();var i=e.attr("id"),a="mcq-form"===i,s="text_answer_entry_form"===i,l=t.val(),c=t.data("placeholder");if(M&&0===E&&(a||s&&""!==l&&l!==c))r.id("solv-public-form").addClass("open");else{var f=new u(e.find("#id_page_key").val()),d=e.parents(".solv-main"),p=e.parents(".solv-details").clone(),m=!1,v=0,b=function(e){v&&!m&&(m=!0,h.track("ui",{element_id:"solvable_answer_resend",resend_count:v,resend_successful:e,resend_total_time:500*v,path:window.location.pathname}))},y=function(){d.find(".solv-details").replaceWith(p),d.find(".b2-solution").hide(),d.removeClass("solutions"),p.find(".spinner").removeClass("active"),p.find(":disabled,.dim").removeClass("dim disabled").removeAttr("disabled"),w.initGenericControllers(p)};f.success=function(){u.prototype.success.apply(f,arguments),b(!0)},f.error=function(t,n){0===t.status?function(t){v<120?(v++,setTimeout(function(){f.post(t.url,t)},500)):(r.modal("Error",e.data("max-resend-error")),y(),b(!1))}(n):"timeout"===t.statusText?(g.timeoutError(),y()):t.status>0&&(g.handler(t),y())},o.defer(function(e){var t=d.data("ir-verification"),n={};try{t.preventUpdate?n.instant_response_check="cant_tell":n.instant_response_check=t.answerIsCorrect?"correct":"incorrect",n.instant_response_problem_completed=t.canStillAnswer?"no":"yes",n.instant_response_tries_left=t.triesLeft}catch(e){}f.form(e,n)},e.clone())}})},C.edit=function(e){var t=e.find("form"),n=r(".solv-edit-trigger"),i=r.id("solvable-mcq-options-btn"),o=r.id("question-text-preview"),a=r.id("question-text-preview-field"),s=t.find("textarea"),l=function(n){n&&n.preventDefault(),r(this).addClass("active"),e.removeClass("previewing"),e.addClass("editing"),a.val("true"),r(window).scrollTop(t.offset().top-150),s.autosize().wikiLinks(),s.focus(),e.data("previewing",!1)};n.on("click",l),e.hasClass("editing")&&l(),i.on("click",function(e){e.preventDefault();var t=r.id("edit-mcq-choices");t.siblings().hide(),t.show()}),r.id("edit-mcq-cancel").on("click",function(e){e.preventDefault();var t=r.id("edit-mcq-choices");t.siblings().show(),t.hide()}),o.on("click",function(e){e.preventDefault(),t.submit()}),t.on("submit",function(){var t=e.data();t.suspended&&t.previewing&&r.modal(t.suspendedTitle,t.suspendedText)}),e.find(".saved").addClass("out")},C.solutionButton=function(e){var t=e.data(),n=A(e);e.off_on("click touchstart",o.debounce(function(i){if(i.preventDefault(),!e.hasClass("disabled")){var a=r(".solv-solutions");if(l.is_mobile&&a.hasClass("expanded")&&r.doc.scrollTop(a.offset().top-r(".m-action-bar").height()),e.data("solutions-loaded"))j(n);else{var s=function(){var n=l.is_mobile?e.find(".main"):e;e.addClass("dim").blur(),c.toggleButtonLoadingState(n,!0),q(t)},u=r.id("solv-confirm-box");if(u.length)if(l.is_mobile){u.show(),o.defer(function(){u.addClass("active")}),u.find(".btn").off_on("click",function(){u.removeClass("active"),setTimeout(function(){u.hide()},210),r(this).hasClass("btn-confirm")&&s()})}else if("touchstart"===i.type){var f=u.clone();f.find(".btn-confirm").off_on("click",function(){s()}),f.modal()}else s();else s()}}},300)),-1!==window.location.href.indexOf("/solution-comments/")&&"solutions"!==n.currentState&&(e.data("solutions-loaded")?j(n):n.$solvable.find(".solv-details.endstate").length&&q(e.data()))},C.disputeDiscTrigger=function(e){var t=e.data(),n=A(e),i=!1,o=r(".dispute-disc-modal");e.on("click",function(e){e.preventDefault(),t.disputesLoaded?(L("disputes",n),!1===i&&(i=!0,r("#solvable-resend-verification-form").submit())):(o.modal("show"),!1===i&&(i=!0,o.find("#solvable-resend-verification-form").submit()))})},C.staffDisputeDiscForm=function(e){e.on("submit",function(){S[e.data("solvable")].disputesJustLoaded=!0})},C.disputeModalForm=function(e){var t=e.find(".explanation");e.find('input[type="radio"]').on("change",function(){t.hasClass("visible")||(t.addClass("visible"),t.find("textarea").autosize())})},C.disputeModalFormEndState=function(e){var t=r.id("enter-dispute-discussions-form");t.on("submit",function(){S[t.data("solvable-id")].disputesJustLoaded=!0}),e.find(".view").on("click",function(){e.find(".view-reports").addClass("loading"),t.trigger("submit")})},C.deleteForm=function(e){var t=r.id("stats-delete-btn");t.on("click",function(){var n=e.find("form");e.modal(),t.addClass("hide"),n.on("submit",function(){e.modal("hide")})})},C.reviewedForm=function(e){var t=r.id("stats-reviewed-btn");t.on("click",function(){var n=e.find("form");e.modal(),t.addClass("hide"),n.on("submit",function(){e.modal("hide")})})},C.suggestForFBForm=function(e){var t=r.id("suggest-for-fb-btn");t.on("click",function(){var n=e.find("form");e.modal(),t.addClass("hide"),n.on("submit",function(){e.modal("hide")})})},C.mostPopularRecommendedProblem=function(e){var t=r(".recommended-problems .most-popular-recommended-problem");t.length&&t.clone(!0,!0).appendTo(e.empty())};var N=!1;C.NotifyAboutGoodSolution=new function(){var e=this,t=null,n=null,i=null,o=null,a=1e3,s=500;return e.exists=!1,e.controller=function(s){e.exists=!0,n=(t=s).find(".dropdown-toggle"),i=t.find(".dropdown-menu"),l.is_mobile?r(".btn-solution").off_on("click",function(e){e.preventDefault();var n=t.modal();n.find("button").on("click",function(){n.modal("hide")}),n.off_on("hide",function(){L("solutions",A(r.id("solv-main")))})}):(n.on("mouseenter",e.show).on("click",function(e){e.preventDefault()}),t.on("mouseleave",function(){o=setTimeout(e.hide,a)}).on("mouseenter",function(){clearTimeout(o)})),i.on("click",function(e){e.stopPropagation()}),t.find("form").on("submit",function(){N=!0,t.addClass("loading")}),N&&(N=!1,e.show())},e.show=function(e){t.hasClass("open")||(t.addClass("open"),i.addClass("open").fadeIn(e||s))},e.hide=function(e){if(t.hasClass("open")){var n=function(){t.removeClass("open"),i.removeClass("open")};i.is(":visible")?i.fadeOut({duration:e||s,complete:n}):(i.hide(),n())}},e.toggle=function(n){t.hasClass("open")?e.hide(n):e.show(n)},e.toggleIcon=function(e){t&&(e?t.show():t.hide())},e},C.cropActionsMenu=function(e){var t=r.id("solv-actions-dropdown");t.find(".dropdown-toggle").on("click",function(){var n=e.outerHeight(!0)-e.find(".solv-footer").outerHeight(!0);l.is_mobile&&(n-=e.find(".solv-details").outerHeight(!0)),t.find(".dropdown-menu").css("max-height",n)})},C.showChapterIntro=function(e){var t=e;e.hasClass("quiz-wrapper")||(t=e.parents(".quiz-wrapper"),e.find(".btn-link").on("click",function(){t.toggleClass("chapter-intro-view")}));var n=t.find(".chapter-intro-wrapper"),i=n.find(".btn-tabs .btn");i.on("click",function(){var e=r(this);e.hasClass("active")||(i.removeClass("active"),e.addClass("active"),n.removeClass("intro quizzes wikis").addClass(e.data("value")))})},C.practiceAnonWrapper=function(e){function t(e){n.removeClass(a).eq(e).addClass(a),o.removeClass(s).eq(e).addClass(s),r.body.trigger("quizSolvablePositionChanged")}M=!0,E=e.data("signup_after_n_problems");var n=e.find(".prac-anon-item"),i=e.find(".prev-marker-btn, .next-marker-btn"),o=e.find(".prac-markers").find(".prac-marker"),a=(o.length,"visible"),s="current";i.on("click",function(e){e.preventDefault();var i=r(this),o=n.filter("."+a),s=n.index(o);s+=n.length,i.hasClass("prev-marker-btn")?s--:i.hasClass("next-marker-btn")&&s++,t(s%=n.length)}),o.each(function(e,n){r(n).on("click",function(){t(e)})})},C.practiceAnon=function(e){if(e.hasClass("prac-anon-item")){var t=e.find(".solv-details"),n=e.outerHeight();t.css({overflow:"auto"});var i=t.scrollHeight()+2;t.css({overflow:"hidden"}),n<i&&o.defer(function(){t.css({position:"static"})})}},C.nextSkillB2Modal=function(){var e=null;return function(t){t.on("click",function(t){t.preventDefault(),null===e?e=r.id("prac-next-skill-b2").modal():e.modal("show")})}}(),C.checkAnswerButton=function(e){var t=A(e).$solvable,n=function(t){t=!0===t,l.is_ios&&l.app_version.isGreaterThanOrEqualTo("0.9.7")&&(window.location=t?"disableanswerbutton://":"enableanswerbutton://");var n="btn-outline disabled";e.removeClass(t?"btn-accent":n),e.addClass(t?n:"btn-accent")};o.defer(function(){var e=t.find(".btn-mcq");t.find(".mcq-form").removeClass("disable-for-mobile"),e.one("click",n)}),e.on("click",function(){e.hasClass("disabled")||t.find("#mcq-form").submit()})},C.recentSolvers=function(e){S[e.data("solvable")].$solversList=e;var t=e.parents(".solv-author").find(".likes-container"),n=e.find(".btn-expand").width();t.css("padding-left",n+14),e.removeClass("hidden"),e.find(".mini-profile").mini_profile(),e.find("button").off_on("click",function(){e.toggleClass("expanded");var n=e.find("button:visible").width();t.css("padding-left",n+14)})},C.downloadToBrain=function(e){var t=function(t){t?e.addClass("downloading"):e.removeClass("downloading")};e.find(".download-btn").on("click",function(){t(!0)}),e.find(".cancel-btn").on("click",function(){t(!1)})},vkey.assessment_modal_public_solvable_component=function(e){var t=e.find(".solv-main").data("solvable");S[t]=S[t]||{},S[t].solvableDidOnload=!1,w.initGenericControllers(e),v.add_form(),v.votes(),v.events(),e.find(".modal-target").each(p.modal_events),e.find(".mini-profile").mini_profile(),u.autosubmit.init(e)},C.assessment_modal_public_solvable_component=vkey.assessment_modal_public_solvable_component,C.levelUpModal=function(e){var t=r.id("streak-modal"),n=function(){e.appendTo(r.body),e.removeClass("hide"),o.defer(function(){e.addClass("in")}),e.find(".close").on("click",function(){e.removeClass("in"),setTimeout(function(){e.addClass("hide")},300)}),r.id("sidebar-leveled-up-msg").show(),h.track("ui",{element_id:e.data("ax-id"),element_type:"modal",action:"displayed",path:window.location.pathname,full_path:window.location.pathname+window.location.search})};o.defer(function(){t.length?t.on("hide",function(){o.defer(n)}):n()})},C.trackSkillSharing=function(){h.track("ui",{element_type:"modal",action:"displayed",gif_content:r.id("gif-name-holder").data("ax-id"),element_id:"end_of_skill_share_modal"})},C.staffBios=function(e){var t=!1,n=null!=e.data("delay")?e.data("delay"):200,i=r.id("prac-staff-bios"),a=function(r){if(l.is_mobile)i.modal();else{r.stopPropagation();var a=e.data("flag");a&&(_.update(a,!0),e.removeData("flag"),e.removeAttr("data-flag")),t=!t,e.toggleClass("bios-visible",t),t?(i.show(),o.defer(function(){i.addClass("in")})):(i.removeClass("in"),setTimeout(function(){i.hide()},n))}};e.find(".bios-hover-trigger").on("mouseenter mouseleave",function(t){e.data("flag")||e.toggleClass("bios-hover")}).on("click",a),e.find(".btn-bios").on("click",a)},C.pracSolutionToggle=function(){var e={};return function(t){t.on("click",function(){j(A(t)),t.blur();var n=t.data();if(n.axUrl&&n.targetObjectId&&!e[n.targetObjectId]){var i={element_id:n.axId,source_attempt_id:n.sourceAttemptId,target_object_id:n.targetObjectId,target_object_type:"solution",target_object_referrer:encodeURIComponent(n.targetObjectReferrer)};r.get(n.axUrl,i),e[n.targetObjectId]=!0}})}}(),C.autocompleteChapter=function(e){var t=e.find(".autocomplete-field"),n=(e.find(".autocomplete-target"),e.siblings(".field-concept-quiz,.field-challenge-quiz")),i=e.data("autocomplete-url");r.id("id_topic").on("change",function(){t.trigger("autocomplete.reset"),e.data("autocomplete-url",i+"?topic="+r(this).val())}),t.on("autocomplete.ready autocomplete.select",function(e){n.each(function(){var t=r(this),n=t.data("autocomplete-url").split(/\?/g)[0],i=e.autocomplete.id;i&&(n+="?chapter="+i),t.data("autocomplete-url",n)})})},C.endstate=function(e){var t=r(".solv-author"),n=r(".solv-problem");o.defer(function(){var i=t.offset().top,o=n.outerHeight(!0),a=r(".solv-details").outerHeight(!0);if(o<a){var s=parseInt(n.css("margin-top"),10);o=a,s<0&&(o-=s),n.css("min-height",o)}var l="height";e.find(".potw-solutions-activity").length&&(l="outerHeight"),d.stick(e,{bottom:i,handler:function(e,t){if(e.hasClass("stuck-bottom")){var n=Math.max(o,a)-e[l]();e.css("top",n)}else e.css("top","")},namespace:"sticky-solv-details-endstate"})})},C.autoshowSolutions=function(e){var t=A(e);o.defer(function(){t.$solvable.find(".btn-solution[data-controller*=solutionButton]").click(),"replaceState"in window.history&&window.history.replaceState({},"",window.location.href.replace(/[\?|&]just_created=true/,""))})},C.wikiContribModal=function(e){r.id("wiki-contrib-btn").on("click",function(){e.modal()})},C.previewCustomEndstateText=function(e){e.on("click",function(){r.id("solv-custom-endstate-preview").toggle()})},C.wikiModalProblem=function(e){p.feeditem_modal(),e.find(".load-modal").each(function(){if(l.is_native){var e=r(this).find(".modal-link"),t=e.attr("href");t+=-1===t.indexOf("?")?"?":"&",t+="newwindow=true",e.attr("href",t).attr("target","")}else p.modal_events.apply(this,arguments),k.checkOverflow(r(this))})};var B=function(e,t){var n=vkey.handle(e,t),o=n.parents(".solv-main"),a=A(o),s=o.find(".endstate").length>0;if(r.body.toggleClass("endstate",s),a.$solvable=n.parents(".solv-main"),a.solvableDidOnload=!1,S[o.data("solvable")]=a,C.solvable(o),C.solvableRedesign(o),l.is_mobile&&C.NotifyAboutGoodSolution.exists&&C.NotifyAboutGoodSolution.toggleIcon(a.data.answerIsCorrect||0===a.data.attemptNumber),function(e,t){if((e=e||r("[data-controller].dim")).length){e.removeClass("dim disabled").removeAttr("disabled"),e.data("solutions-loaded",t);var n=l.is_mobile?e.find(".main"):e;c.toggleButtonLoadingState(n,!1)}}(r(".btn-solution.dim,.btn-solution.disabled"),r(".solv-simple-solution,.solv-solutions").length>0),D(a),y.saveitem.tooltip(),y.saveitem.forms(),n.mathjax_update(),l.is_mobile&&!r.body.hasClass("prac-solvable")){var f=o.find(".btn-solution");r(".solv-details.endstate.correct").length&&f.data("solutions-loaded",!0),!1===f.data("originally-disabled")&&f.removeClass("disabled")}else l.is_mobile&&C.solutionButton(o.find(".btn-solution").not(".btn-b2-flag"));if(l.instant_try_it_yourself&&s){var d=r.id("cmp_wiki_canonical_page_id");if(d.length){var h=d.find(".summary").data();u(h.pageKey).post(h.cmpUrl,{component_key:h.cmpKey,version:VERSIONS[h.cmpKey]})}}var p=n.find(".mcq.endstate .mcq");if(p.length&&i&&!a.data.canStillAnswer){var m=p.data("registered-choice").toString();m&&i!==m&&x.captureMessage("Registered choice does not match the corresponding clicked one",{tags:{"____Clicked.Choice":i,"___Registered.Choice":m,"__Answer.Is.Correct":a.data.answerIsCorrect,"_Problem.Url":window.location.href}})}if(i=null,r.body.hasClass("portal-page")||r.body.hasClass("portal-feed-page")){var g,v;if(a.data.answerIsCorrect?(g="correct",v="Correct"):"solutions"===a.currentState?(g="viewed-solution",v="Viewed solution"):a.data.canStillAnswer?a.data.attemptNumber>0&&(g="incomplete",v="Not finished"):(g="incorrect",v="Incorrect"),g||v){var b=a.$solvable.data("solvable"),w=r('.problems-section .feed-section-row[data-solvable-id="'+b+'"] .icon');g&&w.removeClass("correct viewed-solution incorrect incomplete").addClass(g),v&&w.attr("title",v)}}return n};vkey.assessment_public_solvable_logged_in=vkey.hundred_day_challenge_solvable_logged_in=B,vkey.profile_problem_in_savedset_component=function(){var e=B.apply(vkey,arguments).parents(".solv-main");if(A(e).data.answerIsCorrect){r(".set-leaderboard").addClass("cant-submit-score");var t=r.id("set-leaderboard");if(t.length){var n=t.data();u(n.page_key).get(n.url,{version:VERSIONS[n.cmp_key],component_key:n.cmp_key})}}},vkey.quizzes_problemset=function(){var e=B.apply(vkey,arguments);C.cropActionsMenu(e);var t=e.parents(".prac-preload-wrapper");if(t.length&&m.practice(t,{reloaded:!0}),e.find(".mini-profile").mini_profile(),l.is_mobile){var n=e.find(".prac-endstate,.b2-solution");n.length&&0===r.id("solv-simple-solution").length&&c.Anchors.scrollToTarget(n)}else{var i=r.id("b2-solution"),o=e.find(".solv-details").hasClass("endstate");if(i.length&&o){var s="auto_scrolled_to_free_solution";!0!==a.get(s)&&(c.Anchors.scrollToTarget(i),a.set(s,!0))}}T=!1},vkey.potw_problemset=vkey.potw_problemset_default=vkey.quizzes_problemset;var R=function(e,t,n){var i=vkey.handle(e,t);i.find(".latex").mathjax_update(),v.votes(),v.add_form(),v.subscribe(),i.find(".vote-trigger.with-tooltip").tooltip(),v.events(),i.find(".mini-profile").mini_profile(),i.find(".latexprocessor-block,.latexprocessor-inline").scale_svg();var r=A(i.parents(".solv-main"));I(r,n)};vkey.quizzes_challengesolvablesolutionlist=vkey.potw_solvablesolutionlist=vkey.solutiondiscussions_publicsolvablesolutionlist=function(e,t){R(e,t,"solutions")},vkey.potw_solvabledisputelist=vkey.quizzes_solvabledisputelist=vkey.disputediscussions_publicsolvabledisputelist=function(e,t){R(e,t,"disputes")};var z=function(e,t){var n=vkey.handle(e,t);A(r.id("solv-main"));return n.find(".latex").mathjax_update(),v.add_form(),n};vkey.quizzes_challengesolvableaddsolutionpost=vkey.potw_addsolvabledisputepost=vkey.potw_solvableaddsolutionpost=vkey.quizzes_addsolvabledisputepost=vkey.groups_groupsolvableaddsolutionpost=vkey.solutiondiscussions_publicsolvableaddsolutionpost=vkey.disputediscussions_publicsolvableadddisputepost=z,vkey.disputediscussions_publicsolvableadddisputepostmodal=vkey.potw_addsolvabledisputepostmodal=vkey.quizzes_addsolvabledisputepostmodal=function(){var e=z.apply(vkey,arguments);w.initGenericControllers(e)},vkey.quizzes_solvabledisputesubscribe=vkey.quizzes_challengesolvablesolutionsubscribe=vkey.disputediscussions_publicsolvabledisputesubscribe=vkey.solutiondiscussions_publicsolvablesolutionsubscribe=function(e,t){vkey.handle(e,t),v.subscribe()},vkey.quizzes_interstitial_pane=function(e,t){var n=vkey.handle(e,t),i=n.parents(".prac-preload-wrapper");if(i.length){var o;!0===r.body.data("reloading-disputes")?(o=!1,r.body.data("reloading-disputes",!1)):!0===r.body.data("reloading-pane-from-chapter-intro")?(o=!1,r.body.data("reloading-pane-from-chapter-intro",!1)):o=!(n.find(".solv-pane.is-editing-pane").length>0||r.id("sales-card").length>0),m.practice(i,{reloaded:!0,useTargetPosition:o})}T=!0},vkey.quizzes_endstate=function(e,t){vkey.handle(e,t),r.body.trigger(r.Event("quizendstate.reload")),T&&setTimeout(function(){r.body.trigger(r.Event("quizendstate.show",{showCountdown:!0}))},10)},t.exports=C},{"app/comments":"app/comments","app/content_modal":"app/content_modal","app/error_modal":"app/error_modal","app/generic_controllers":"app/generic_controllers","app/preloaders":"app/preloaders","app/sets":"app/sets","app/zoomable":"app/zoomable",jquery:"jquery","lib/wafer":"lib/wafer","raven-js":"raven-js",underscore:"underscore","util/ajax":"util/ajax","util/analytics":"util/analytics","util/flags":"util/flags","util/global":"util/global","util/latex":"util/latex","util/modal_helpers":"util/modal_helpers","util/sticky":"util/sticky","util/ui":"util/ui","util/urls":"util/urls"}],"app/videos":[function(e,t,n){var i=e("util/analytics"),r={};r.wistiaController=function(e){var t=e.data("video");window._wq=window._wq||[],_wq.push({id:t,onHasData:function(e){["play","pause","seek","end"].forEach(function(n){e.bind(n,function(){i.track("ui",{action:"video_action",element_id:"video_wistia_"+n,video_id:t})})})}})},t.exports=r},{"util/analytics":"util/analytics"}],"app/visualizations":[function(e,t,n){var i=e("jquery"),r=(e("underscore"),e("util/analytics")),o={},a={};o.render=function(e){if(!e.hasClass("viz-rendered")){var t=e.data(),n=e.find(".content"),r=function(t){var r=i("<div />").html(t);[{tag:"link",attr:"href"},{tag:"script",attr:"src"}].forEach(function(e){r.find(e.tag+"["+e.attr+"]").each(function(){var t=i(this),n=t.attr(e.attr);(n=n.split("?")[0])in a?t.remove():(a[n]=1,t.appendTo(i.body))})}),n.width(n.parent().width()),n.html(r.html()),s(e),i.body.on("quizSolvablePositionChanged",function(){s(e)})},o=function(){e.addClass("loading-error")},l=function(){i.get(t.src).then(r).fail(o),e.addClass("viz-rendered")};if(e.is(":visible"))l();else{var c="quizSolvablePositionChanged.renderviz-"+t.name;i.body.on(c,function(){e.is(":visible")&&(i.body.off(c),l())})}}},o.display=function(e){i('.viz-wrapper[data-name="'+e+'"]').addClass("loaded").find(".content").width("auto")};var s=function(e){e.is(":visible")&&r.track("ui",{action:"viewed_visualization",visualization_name:e.data("name")})};t.exports=o},{jquery:"jquery",underscore:"underscore","util/analytics":"util/analytics"}],"app/zoomable":[function(e,t,n){function i(e){this.img=e,this.$img=r(e),this.zoomed=!1;var t=this,n=!1,i=function(){if(!n&&t.img.width){n=!0;var e=t.$img.parent().width(),i=t.$img.css("width");i.indexOf("px")>=0?t.width=Math.min(e,parseInt(i,10)):t.width=e,t.height=parseInt(t.$img.css("height"),10),c(t)&&u(t)}};o.defer(i),this.$img.on("load",i)}var r=e("jquery"),o=e("underscore"),a=e("vanillapinchzoom"),s=e("util/global"),l={},c=function(e){return e.img.naturalWidth>e.width||e.img.naturalHeight>e.height},u=function(e){var t=r('<div class="zoomable-image"><span></span></div>'),n=e.$img.clone();t.append(n),e.$img.replaceWith(t),e.$img=n,e.img=n[0],e.$container=t,e.$container.on("click",r.proxy(e.show,e))};i.prototype={show:function(){o.has(this,"$zoomModal")||function(e){var t=e.$img.clone(),n=r('<div class="modal hide zoomable-modal"><button></button></div>');t[0].style.cssText="",n.append(t),n.on("show hide",function(){o.defer(function(){e.zoomed=!e.zoomed,n.toggleClass("visible",e.zoomed)})}),s.is_mobile&&(pinchzoom=new a(t[0]),t.on("click",function(e){e.stopPropagation()})),n.modal({show:!1}),n.on("click",r.proxy(e.hide,e)),e.$zoomModal=n}(this),this.$zoomModal.modal("show")},hide:function(){this.$zoomModal.modal("hide")}},l.images=function(e){e.find("img").each(function(){var e=this,t=r(e);if(!t.data("zoomable-image")&&!function(e){return e.is(".avatar, .no-zoom")||e.parents(".avatar, .no-zoom").length}(t)){var n=function(){t.data("zoomable-image",new i(e))};e.complete?n():t.on("load",n)}})},t.exports=l},{jquery:"jquery",underscore:"underscore","util/global":"util/global",vanillapinchzoom:177}],fastclick:[function(e,t,n){!function(){"use strict";function e(t,n){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=0,l=a.length;s<l;s++)this[a[s]]=r(this[a[s]],this);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!n,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,o=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=r&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(r&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return i&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;r&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],r){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,n,s,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(c=e.changedTouches[0],(u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=u.tagName.toLowerCase())){if(t=this.findControl(u)){if(this.focus(u),i)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-n>100||r&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),r&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!r||o||!(l=u.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;i&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,n,r;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):void 0!==t&&t.exports?(t.exports=e.attach,t.exports.FastClick=e):window.FastClick=e}()},{}],"lib/ajax_upload":[function(require,module,exports){var $=require("jquery"),_=require("underscore"),cursor=require("util/cursor"),errorModal=require("app/error_modal"),qq={};qq.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var i=e.length;for(n<0&&(n+=i);n<i;n++)if(n in e&&e[n]===t)return n;return-1},qq.getUniqueId=function(){var e=0;return function(){return e++}}(),qq.attach=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},qq.detach=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n)},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.insertBefore=function(e,t){t.parentNode.insertBefore(e,t)},qq.remove=function(e){e.parentNode.removeChild(e)},qq.contains=function(e,t){return e==t||(e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e)))},qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.css=function(e,t){$(e).css(t)},qq.hasClass=function(e,t){$(e).hasClass(t)},qq.addClass=function(e,t){$(e).addClass(t)},qq.removeClass=function(e,t){$(e).removeClass(t)},qq.setText=function(e,t){e.innerText=t,e.textContent=t},qq.children=function(e){for(var t=[],n=e.firstChild;n;)1==n.nodeType&&t.push(n),n=n.nextSibling;return t},qq.getByClass=function(e,t){if(e.querySelectorAll)return e.querySelectorAll("."+t);for(var n=[],i=e.getElementsByTagName("*"),r=i.length,o=0;o<r;o++)qq.hasClass(i[o],t)&&n.push(i[o]);return n},qq.obj2url=function(e,t,n){var i=[],r="&",o=function(e,n){var r=t?/\[]$/.test(t)?t:t+"["+n+"]":n;"undefined"!=r&&"undefined"!=n&&i.push("object"==typeof e?qq.obj2url(e,r,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(r)+"="+encodeURIComponent(e()):encodeURIComponent(r)+"="+encodeURIComponent(e))};if(!n&&t)r=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",i.push(t),i.push(qq.obj2url(e));else if("[object Array]"===Object.prototype.toString.call(e)&&void 0!==e)for(var a=0,s=e.length;a<s;++a)o(e[a],a);else if(void 0!==e&&null!==e&&"object"==typeof e)for(var l in e)e.hasOwnProperty(l)&&o(e[l],l);else i.push(encodeURIComponent(t)+"="+encodeURIComponent(e));return i.join(r).replace(/^&/,"").replace(/%20/g,"+")},qq.FileUploaderBasic=function(e){this._options={debug:!1,action:"/server/upload",params:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,filesLimit:0,onSubmit:function(e,t){},onProgress:function(e,t,n,i){},onComplete:function(e,t,n){},onAllComplete:function(e){},onCancel:function(e,t){},messages:{typeError:"{file} has an invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",filesLimitError:"No more than {filesLimit} files are allowed to be uploaded.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(e){alert(e)}},qq.extend(this._options,e),this._filesInProgress=0,this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FileUploaderBasic.prototype={setParams:function(e){this._options.params=e},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(e){var t=this;return new qq.UploadButton({element:e,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(e){t._onInputChange(e)}})},_createUploadHandler:function(){var e,t=this;return e=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm",new qq[e]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(e,n,i,r){t._onProgress(e,n,i,r),t._options.onProgress(e,n,i,r)},onComplete:function(e,n,i){t._onComplete(e,n,i),t._options.onComplete(e,n,i)},onAllComplete:function(e){t._options.onAllComplete(e)},onCancel:function(e,n){t._onCancel(e,n),t._options.onCancel(e,n)}})},_preventLeaveInProgress:function(){var e=this;qq.attach(window,"beforeunload",function(t){if(e._filesInProgress)return t=t||window.event,t.returnValue=e._options.messages.onLeave,e._options.messages.onLeave})},_onSubmit:function(){this._filesInProgress++},_onProgress:function(e,t,n,i){},_onComplete:function(e,t,n){this._filesInProgress--,n.error&&this._options.showMessage(n.error)},_onCancel:function(){this._filesInProgress--},_onInputChange:function(e){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(e.files):this._validateFile(e)&&this._uploadFile(e),this._button.reset()},_uploadFileList:function(e){var t,n=0;for(t=0;t<e.length;t++){if(!this._validateFile(e[t],n))return;n++}for(t=0;t<e.length;t++)this._uploadFile(e[t])},_uploadFile:function(e){var t=this._handler.add(e),n=this._handler.getName(t);!1!==this._options.onSubmit(t,n)&&(this._onSubmit(t,n),this._handler.upload(t,this._options.params))},_validateFile:function(e,t){var n,i,r,o;return e.value?n=e.value.replace(/.*(\/|\\)/,""):(n=null!=e.fileName?e.fileName:e.name,i=null!=e.fileSize?e.fileSize:e.size),this._isAllowedExtension(n)?0===i?(this._error("emptyError",n),!1):i&&this._options.sizeLimit&&i>this._options.sizeLimit?(this._error("sizeError",n),!1):i&&i<this._options.minSizeLimit?(this._error("minSizeError",n),!1):!(this._options.filesLimit&&(void 0==t&&(t=0),r=void 0==this._handler._completed_files?0:this._handler._completed_files.length,o=void 0==this._handler._queue?0:this._handler._queue.length,this._options.filesLimit<=r+o+t))||(this._error("filesLimitError",n),!1):(this._error("typeError",n),!1)},_error:function(e,t){function n(e,t){i=i.replace(e,t)}var i=this._options.messages[e],r=this._options.allowedExtensions;0!==r[r.length-1].indexOf("and ")&&(r[r.length-1]="and "+r[r.length-1]),n("{file}",this._formatFileName(t)),n("{extensions}",r.join(", ")),n("{sizeLimit}",this._formatSize(this._options.sizeLimit)),n("{minSizeLimit}",this._formatSize(this._options.minSizeLimit)),n("{filesLimit}",this._options.filesLimit),this._options.showMessage(i)},_formatFileName:function(e){return e.length>33&&(e=e.slice(0,19)+"..."+e.slice(-13)),e},_isAllowedExtension:function(e){var t=-1!==e.indexOf(".")?e.replace(/.*[.]/,"").toLowerCase():"",n=this._options.allowedExtensions;if(!n.length)return!0;for(var i=0;i<n.length;i++)if(n[i].toLowerCase()==t)return!0;return!1},_formatSize:function(e){var t=-1;do{e/=1024,t++}while(e>99);return Math.max(e,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]}},qq.FileUploader=function(e){qq.FileUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button">'+e.btnTitle+'</div><span class="spinner hide"></span><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}}),qq.extend(this._options,e),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button=this._createUploadButton(this._find(this._element,"button")),this._bindCancelEvent(),this._setupDragDrop()},qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype),qq.extend(qq.FileUploader.prototype,{_find:function(e,t){var n=qq.getByClass(e,this._options.classes[t])[0];if(!n)throw new Error("element not found "+t);return n},_setupDragDrop:function(){var e=this,t=this._find(this._element,"drop"),n=new qq.UploadDropZone({element:t,onEnter:function(n){qq.addClass(t,e._classes.dropActive),n.stopPropagation()},onLeave:function(e){e.stopPropagation()},onLeaveNotDescendants:function(){qq.removeClass(t,e._classes.dropActive)},onDrop:function(n){for(var i=qq.getByClass(document,e._classes.drop),r=0;r<i.length;r++)i[r].style.display="none";qq.removeClass(t,e._classes.dropActive),!e._options.multiple&&n.dataTransfer.files.length>1?alert("Multiple file uploads are disabled."):e._uploadFileList(n.dataTransfer.files)}});t.style.display="none";var i;qq.attach(document,"dragenter",function(e){n._isValidFileDrag(e)&&(t.style.display="block",clearTimeout(i))}),qq.attach(document,"dragover",function(e){n._isValidFileDrag(e)&&clearTimeout(i)}),qq.attach(document,"dragleave",function(e){if(n._isValidFileDrag(e)){var r=document.elementFromPoint(e.clientX,e.clientY);r&&"HTML"!=r.nodeName||(t.style.display="none"),clearTimeout(i),e.target===document.body&&(i=setTimeout(function(){t.style.display="none"},200))}})},_onSubmit:function(e,t){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onProgress:function(e,t,n,i){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var r=this._getItemByFileId(e),o=this._find(r,"size");o.style.display="inline";var a;a=n!=i?Math.round(n/i*100)+"% from "+this._formatSize(i):this._formatSize(i),qq.setText(o,a)},_onComplete:function(e,t,n){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var i=this._getItemByFileId(e);qq.remove(this._find(i,"cancel")),qq.remove(this._find(i,"spinner")),n.success?qq.addClass(i,this._classes.success):qq.addClass(i,this._classes.fail)},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);n.qqFileId=e;var i=this._find(n,"file");qq.setText(i,this._formatFileName(t)),this._find(n,"size").style.display="none",this._listElement.appendChild(n)},_getItemByFileId:function(e){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==e)return t;t=t.nextSibling}},_bindCancelEvent:function(){var e=this,t=this._listElement;qq.attach(t,"click",function(t){var n=(t=t||window.event).target||t.srcElement;if(qq.hasClass(n,e._classes.cancel)){qq.preventDefault(t);var i=n.parentNode;e._handler.cancel(i.qqFileId),qq.remove(i)}})}}),qq.UploadDropZone=function(e){this._options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}},qq.extend(this._options,e),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_disableDropOutside:function(){qq.UploadDropZone.dropOutsideDisabled||(qq.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var e=this;qq.attach(e._element,"dragover",function(t){if(e._isValidFileDrag(t)){var n=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"==n||"linkMove"==n?"move":"copy",t.stopPropagation(),t.preventDefault()}}),qq.attach(e._element,"dragenter",function(t){e._isValidFileDrag(t)&&e._options.onEnter(t)}),qq.attach(e._element,"dragleave",function(t){if(e._isValidFileDrag(t)){e._options.onLeave(t);var n=document.elementFromPoint(t.clientX,t.clientY);qq.contains(this,n)||e._options.onLeaveNotDescendants(t)}}),qq.attach(e._element,"drop",function(t){e._isValidFileDrag(t)&&(t.preventDefault(),e._options.onDrop(t))})},_isValidFileDrag:function(e){var t=e.dataTransfer,n=navigator.userAgent.indexOf("AppleWebKit")>-1;return t&&"none"!=t.effectAllowed&&(t.files||!n&&t.types.contains&&t.types.contains("Files"))}},qq.UploadButton=function(e){this._options={element:null,multiple:!1,name:"file",onChange:function(e){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,e),this._element=this._options.element,qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input),qq.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var e=document.createElement("input");this._options.multiple&&e.setAttribute("multiple","multiple"),e.setAttribute("type","file"),e.setAttribute("name",this._options.name),qq.css(e,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(e);var t=this;return qq.attach(e,"change",function(){t._options.onChange(e)}),qq.attach(e,"mouseover",function(){qq.addClass(t._element,t._options.hoverClass)}),qq.attach(e,"mouseout",function(){qq.removeClass(t._element,t._options.hoverClass)}),qq.attach(e,"focus",function(){qq.addClass(t._element,t._options.focusClass)}),qq.attach(e,"blur",function(){qq.removeClass(t._element,t._options.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}},qq.UploadHandlerAbstract=function(e){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(e,t,n,i){},onComplete:function(e,t,n){},onAllComplete:function(e){},onCancel:function(e,t){}},qq.extend(this._options,e),this._queue=[],this._params=[],this._completed_files=[]},qq.UploadHandlerAbstract.prototype={log:function(e){this._options.debug&&window.console&&console.log("[uploader] "+e)},add:function(e){},upload:function(e,t){var n=this._queue.push(e),i={};qq.extend(i,t),this._params[e]=i,n<=this._options.maxConnections&&this._upload(e,this._params[e])},cancel:function(e){this._cancel(e),this._dequeue(e)},cancelAll:function(){for(var e=0;e<this._queue.length;e++)this._cancel(this._queue[e]);this._queue=[]},getName:function(e){},getSize:function(e){},getQueue:function(){return this._queue},_upload:function(e){},_cancel:function(e){},_dequeue:function(e){var t=qq.indexOf(this._queue,e);this._queue.splice(t,1);var n=this._options.maxConnections;if(this._queue.length>=n){var i=this._queue[n-1];this._upload(i,this._params[i])}0==this._queue.length&&this._onAllComplete()},_onAllComplete:function(){this._options.onAllComplete(this._completed_files)}},qq.UploadHandlerForm=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(e){e.setAttribute("name","qqfile");var t="qq-upload-handler-iframe"+qq.getUniqueId();return this._inputs[t]=e,e.parentNode&&qq.remove(e),t},getName:function(e){return this._inputs[e].value.replace(/.*(\/|\\)/,"")},_cancel:function(e){this._options.onCancel(e,this.getName(e)),delete this._inputs[e];var t=document.getElementById(e);t&&(t.setAttribute("src","javascript:false;"),qq.remove(t))},_upload:function(e,t){var n=this._inputs[e];if(!n)throw new Error("file with passed id was not added, or already uploaded or cancelled");var i=this.getName(e),r=this._createIframe(e),o=this._createForm(r,t);o.appendChild(n);var a=this;return this._attachLoadEvent(r,function(){a.log("iframe loaded");var t=a._getIframeContentJSON(r);a._options.onComplete(e,i,t),a._dequeue(e),delete a._inputs[e],setTimeout(function(){qq.remove(r)},1)}),o.submit(),qq.remove(o),e},_attachLoadEvent:function(e,t){qq.attach(e,"load",function(){e.parentNode&&(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML||t())})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")")}catch(e){response={}}return response},_createIframe:function(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e,t){var n=null;if(t.csrf_token&&t.csrf_name){var i='<input type="hidden" name="'+t.csrf_name+'" value="'+t.csrf_token+'" />';n=qq.toElement('<form method="post" enctype="multipart/form-data">'+i+"</form>")}else n=qq.toElement('<form method="post" enctype="multipart/form-data"></form>');delete t.csrf_token,delete t.csrf_name,delete t.csrf_xname;var r=qq.obj2url(t,this._options.action);return n.setAttribute("action",r),n.setAttribute("target",e.name),n.style.display="none",document.body.appendChild(n),n}}),qq.UploadHandlerXhr=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var e=document.createElement("input");return e.type="file","multiple"in e&&"undefined"!=typeof File&&void 0!==(new XMLHttpRequest).upload},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(e){if(!(e instanceof File))throw new Error("Passed obj is not a File (in qq.UploadHandlerXhr)");return this._files.push(e)-1},getName:function(e){var t=this._files[e];return null!=t.fileName?t.fileName:t.name},getSize:function(e){var t=this._files[e];return null!=t.fileSize?t.fileSize:t.size},getLoaded:function(e){return this._loaded[e]||0},_upload:function(e,t){var n=this._files[e],i=this.getName(e);this._loaded[e]=0;var r=this._xhrs[e]=new XMLHttpRequest,o=this;r.upload.onprogress=function(t){t.lengthComputable&&(o._loaded[e]=t.loaded,o._options.onProgress(e,i,t.loaded,t.total))},r.onreadystatechange=function(){4==r.readyState&&o._onComplete(e,r)};var a=null,s=null;(t=t||{}).csrf_token&&t.csrf_xname&&(a=t.csrf_token,s=t.csrf_xname,delete t.csrf_token,delete t.csrf_xname,delete t.csrf_name),t.qqfile=i;var l=qq.obj2url(t,this._options.action);r.open("POST",l,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-File-Name",encodeURIComponent(i)),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a&&r.setRequestHeader(s,a),r.send(n)},_onComplete:function(id,xhr){if(this._files[id]){var name=this.getName(id),size=this.getSize(id);if(this._options.onProgress(id,name,size,size),200==xhr.status||201==xhr.status){this.log("xhr - server response received"),this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")")}catch(e){response={}}this._completed_files.push({file:this._files[id],response:response}),this._options.onComplete(id,name,response)}else this._completed_files.push({file:this._files[id],response:{}}),this._options.onComplete(id,name,{});this._files[id]=null,this._xhrs[id]=null,this._dequeue(id)}},_cancel:function(e){this._options.onCancel(e,this.getName(e)),this._files[e]=null,this._xhrs[e]&&(this._xhrs[e].abort(),this._xhrs[e]=null)}}),qq.controller=function(e){var t=e.data(),n=0,i=$(t.target),r=["jpg","jpeg","png","gif"];t.allowSvg&&r.push("svg");var o=new qq.FileUploader({action:t.url,element:e[0],multiple:!0,allowedExtensions:r,sizeLimit:10485760,btnTitle:t.btnTitle,onComplete:function(e,t,r){if(r.success){var o=r.filename.match(/\.([^.]*)$/)[1].toLowerCase(),a="![]("+r.url+("svg"===o?"|width=300":"")+"){: .center}\n",s=$.window.scrollTop();cursor.insert(i,a,n),i.trigger("autosave.save"),i.trigger($.Event("ajaxupload.complete",{response:r})),!0===i.data("autosize")&&i.trigger("autosize.resize"),cursor.set(i,n+a.length),$.window.scrollTop(s);var l=i.attr("id");l.indexOf("__copy")&&i.siblings("#"+l.replace("__copy","")).val(i.val())}else{i.trigger($.Event("ajaxupload.message",{message:"Upload failed"}));try{errorModal.standardError()}catch(e){}}},onProgress:function(){e.find(".spinner").show()},onAllComplete:function(){e.find(".spinner").hide()},showMessage:function(e){i.trigger($.Event("ajaxupload.message",{message:e}));try{$.modal("Error",e)}catch(e){}},params:{csrf_token:t.token,csrf_name:"csrfmiddlewaretoken",csrf_xname:"X-CSRFToken"}});e.data("ajax-uploader",o);var a=function(){i.on("keydown",function(){n=cursor.get(i)}),i.on("focus",function(){_.defer(function(){n=cursor.get(i)})}),i.on("click",function(){_.defer(function(){n=cursor.get(i)})})};i.length?a():$(t.target.replace("__copy","")).on("mentions.ready",function(){i=$(t.target),a()})},module.exports=qq},{"app/error_modal":"app/error_modal",jquery:"jquery",underscore:"underscore","util/cursor":"util/cursor"}],"util/ajax":[function(e,t,n){var i=e("jquery"),r=e("underscore"),o=e("util/csrf"),a=e("app/system_msgs"),s=e("app/generic_controllers"),l=e("app/error_modal"),c=e("util/mathjax_loader"),u=e("util/analytics");window.vkey=window.vkey||{},window.vkey.handle=function(e,t){var n=i("#cmp_"+t+"_id");return 0===n.length&&(n=i(".cmp_"+t+"_id")),n.html(e.new_html),d.init(n),s.initGenericControllers(n),u.set_analytics_events(n),c.loadForElement(n),n.find(".cmp-deferred").each(function(){h.add(i(this))}),n};var f=function(e){return this instanceof f?(this.key=e||!1,this):new f(e)};f.prototype={post:function(e,t){return this.send(e,t,"POST")},get:function(e,t){return this.send(e,t,"GET")},form:function(e,t){e=e||"",t=t||{};var n={},r=i(e);return 0===r.length?this:(n.url="string"==typeof t.url?t.url:r.attr("action"),n.url=n.url||"",n.url=0===n.url.length?window.location.href:n.url,r.find("input:not([type=radio], [type=checkbox]),input[type=checkbox]:checked,input[type=radio]:checked,input[type=checkbox]:selected,select,textarea").each(function(e,t){var i=this.name||"";i.length>0&&(n[i]&&n[i]!==this.value?n[i]instanceof Array?n[i].push(this.value):n[i]=[n[i],this.value]:n[i]=this.value)}),t=i.extend(!0,{},n,t,r.data()),r.find("button,input[type=submit],.btn").prop("disabled","disabled").addClass("dim"),this.send(t.url,t,"POST"))},send:function(e,t,n){var r=this;return e=e||"",t=t||{},n=n||"POST",t.page_key=t.page_key||this.key,t.version=t.version||VERSIONS[t.page_key]||-1,t.deferred=t.deferred||!1,t.timeout=t.timeout||9e4,o.same_origin(e)?(i.ajax({url:e,data:t,type:n,timeout:t.timeout,cache:!1,success:function(e){"string"==typeof e.redirect&&(t.redirectHandler?s.executeFunctionByName(t.redirectHandler,e.redirect,t):window.location=e.redirect),i.each(e.actions||{},function(e,n){var o=VERSIONS[n.component_key]||-1;if(o===n.version)n.result&&n.result.reload?f(t.page_key).get(n.result.reload,{param_key:e,version:o}):r.success(e,n,t.deferred);else{VERSIONS[n.component_key]=n.version;var s=n.js_failure_mode;switch(Math.abs(o-n.version)>1&&(s="hard"),i(".hide-on-error").hide(),s){case"soft_with_update":a.warning("Some of the information in that request was out of date due to changes to our server code. We're updating the page."),r.success(e,n);break;case"soft_without_update":a.warning("Some of the information in that request was out of date due to changes to our server code. You must refresh the page and try again.");break;case"no_warn_no_update":break;case"hard":a.warning('Some of the information in that request was out of date due to changes to our server code. This page will refresh in 5 seconds. <a href="'+window.location.href+'">Refresh now.</a>'),setTimeout(function(){window.location.reload()},5e3);break;default:console.log("unknown failure mode!")}}}),i.each(e.ajax_tracked_events||{},function(e,t){u.track(t.event_name,t.event_properties)}),i.each(e.messages||{},function(e,t){"error"==t.message_type?a.error(t.message_text):a.warning(t.message_text)})},error:function(e){r.error(e,t)}}),this):r.error({error:"csrf",responseText:"CSRF error",status:0})},error:function(e,t){i(".hide-on-error").hide(),e.status=e.status||0,t.page_key=this.key,delete t.version,delete t.csrfmiddlewaretoken,delete t.deferred,"timeout"===e.statusText?(l.timeoutError(),t.timeoutHandler&&(s.executeFunctionByName(t.timeoutHandler,t),delete t.timeoutHandler),u.track("timeout_errors",t)):e.status>0&&(l.handler(e),t.status=e.status,u.track("ajax_errors",t))},success:function(e,t,n){(window.vkey[t.component_key]||window.vkey.handle)(t,e,n||!1)}};var d={_blacklist:['[action*="account/"]','[action*="avatar/"]'],init:function(e){e=e||i("body");var t="form:not(.disable-auto-submit, "+d._blacklist.join(", ")+")";e.find("form").each(function(){var e=i(this);e.is(t)&&(e.off_on("submit.auto_submit",function(e){e.preventDefault(),d.process.apply(this,arguments)}),e.not(".disable_submit_auto_disabling")&&e.submit_auto_disable())})},process:function(e){e.preventDefault(),f("assessment").form(i(this).get(0))},disable:function(e){e.off("submit.auto_submit")}};f.autosubmit=d;var h={cmps:[],count:0,listening:!1,show_overridden:!1,should_autoshow:/opera mini|series40/i};f.deferred=h,h.add=function(e){this.should_autoshow.test(navigator.userAgent)?h.load(e):e.is(":visible")?e.is_in_pane()?h.load(e):(h.cmps.push(e),h.count++,h.listening||h.listen()):h.check_for_unhide()},h.listen=function(){this.listening=!0,i(window).on("scroll.deferred",r.throttle(function(e){var t=0,n=h.cmps.length,r=!1;for(t;t<n;t++)!1!==(r=h.cmps[t])&&r.is_in_pane()&&(h.load(r),h.cmps[t]=!1,h.count--,0===h.count&&(h.listening=!1,i(window).off("scroll.deferred")))},16))},h.check_for_unhide=function(e){if(!this.show_overridden){this.show_overridden=!0;var t=i.fn.show;i.fn.show=function(e,n){return i(this).each(function(){var r=i(this);t.apply(r,[e,n]),r.find(".cmp-deferred").each(function(){var e=i(this);e.is(":visible")&&h.load(e)})})}}},h.load=function(e){var t=e.data();e.find(".js").addClass("spinner"),f(t.cmp_page_key).get(t.cmp_url,{version:VERSIONS[t.cmp_component_key],param_key:t.cmp_param_key,deferred:!0})},i(function(){i("form:not(.disable_submit_auto_disabling, #_fb_login)").submit_auto_disable(),i("form").each(function(){""===i(this).attr("action")&&i(this).attr("action",window.location.href)}),d.init(),i(".cmp-deferred").each(function(){h.add(i(this))})}),t.exports=f},{"app/error_modal":"app/error_modal","app/generic_controllers":"app/generic_controllers","app/system_msgs":180,jquery:"jquery",underscore:"underscore","util/analytics":"util/analytics","util/csrf":"util/csrf","util/mathjax_loader":"util/mathjax_loader"}],"util/pager":[function(e,t,n){var i,r=e("jquery"),o=e("underscore"),a=e("util/ajax"),s={},l=null;s.paginate_triggered_ts=i;var c=function(e){r.body.on("click",".newsfeed_"+e+"_paginate",function(t){t.preventDefault(),t.stopPropagation();var n,o,s=r(this),c=s.parents(".nf-next-container"),u=c.siblings(".next_container_stub"),f=u.children().first(),d=u.data("page-key");if(void 0!==f&&0!=f.length&&!u.hasClass("loaded")){n=f.attr("class").slice(4,-3),o=s.data().next_url,c.addClass("loading");var h=d+"_container";"skill"===e&&(h="wiki_community_posts_container",d="wiki_canonical_page"),u.addClass("loaded");var m=new a(h);m.error=function(e){"timeout"===e.statusText?(c.removeClass("loading"),u.removeClass("loaded")):(c.hide(),f.hide())},i=(new Date).getTime(),p||b(!0),null===l&&(l="savedsets_set"===e);var g={page_key:d,version:VERSIONS[h],param_key:n},v=s.parents(".nf-feed-wrapper"),y=v.data("feed-type")||null,w=v.data("filter_content_type")||"",_=v.data("popular")||"",k=v.data("reviewed_state")||"",x=v.data("user_to_display_id")||null;v.length&&("normal"===y&&(g.show_all_content=!0),g.filter_content_type=w,""!==_&&(g.popular=_),g.reviewed_state=k,x&&(g.user_to_display_id=x)),m.get(o,g)}})};s.paginate=c,s.init=function(){r(".feed").not(".inited").each(function(){var e=r(this),t=e.attr("id").replace(/^newsfeed_/,"").replace(/_wrapper$/,"");c(t),e.addClass("inited")})},s.is_autopaginating=!1;var u,f,d,h,p=!1,m=function(){d=r(".nf-next-container:not(.loaded):visible:last"),s.is_autopaginating=!1,d.length>0&&u<10?f=d.offset().top-500:(p=!1,r.window.off("scroll.nfpage"))};s.reset_autopagination_point=m;var g;s.needs_additional_pagination=function(e){var t=e.find(".nf-feed-item:visible:not(.nf-next-empty)").length;p&&(t>0&&t<4?g<5&&(g++,v(!1)):g=0)};var v=function(e){e=!1!==e,s.is_autopaginating||(s.is_autopaginating=!0,d.find("a").click(),e&&u++)},b=function(e){e=e||!1,h=r.window.height(),u=0,g=0,m(),d.length>0&&(p=!0,r.window.off_on("scroll.nfpage",o.debounce(function(e){r.window.scrollTop()+h>=f&&v()},100)),e||v())};s.autopagination=b,t.exports=s},{jquery:"jquery",underscore:"underscore","util/ajax":"util/ajax"}],"util/popstate":[function(e,t,n){var i=e("jquery"),r=e("util/global"),o=e("app/content_modal"),a={};a.popstate=function(){var e=r.getRelativeUrl();i.window.on("popstate",function(t){if(o.popstateHandlerHook())e=r.getRelativeUrl();else{var n=r.getRelativeUrl();if(n!==e){if(event.state&&event.state.modalContent){var a=i.id("nf-feeditem-modal"),s=(a.length>0&&a.is(":visible")?a:i.body).find('.modal-link[href="'+n+'"]');if(s.length>0)return o.urlStack.push(e),e=n,void s.trigger("click")}e=n,location.href=location.href}}})},t.exports=a},{"app/content_modal":"app/content_modal",jquery:"jquery","util/global":"util/global"}],"util/sharing":[function(e,t,n){var i=e("jquery"),r=e("lib/wafer"),o=e("util/global"),a=e("util/flags"),s=e("util/urls"),l=e("util/analytics"),c={},u=function(e,t,n){t=t||550,n=n||440;var r=i.window.width()/2-t/2,o=i.window.height()/2-n/2,a="width="+t+",height="+n;r>0&&o>0&&(a+=",left="+r+",top="+o),window.open(e,"socialpopup",a)},f=function(e){return-1===e.indexOf(encodeURIComponent("/"))?encodeURIComponent(e):e};c.facebook=function(e){e.on("click",function(t){t.preventDefault();var n=window.FB||null,i=e.data(),r={utm_content:i.axId,ref:i.axId};i.gifUrl&&i.gifUrl.length>0&&(r.gif_url=f(i.gifUrl)),i.ogType&&i.ogType.length>0&&(r.og_type=encodeURIComponent(i.ogType)),i.ogSharingMethod&&i.ogSharingMethod.length>0&&(r.og_sharing_method=encodeURIComponent(i.ogSharingMethod)),i.url=s.appendGetParams(i.url,r);var a=function(){window.location=s.appendGetParams("share://facebook",{link:f(i.url),caption:encodeURIComponent(i.title),elementId:i.axId})},l=function(){var e;if(null!==n){switch(e={method:i.method,display:"popup"},i.method){case"feed":e.link=i.url,e.description=i.title,i.image&&(e.picture=i.image);break;case"share_open_graph":e.action_type="og.shares",e.action_properties=JSON.stringify({object:i.url,ref:i.axId})}n.ui(e)}else{var t="https://www.facebook.com/v2.8/dialog/"+i.method;e={app_id:i.appId,display:"popup",redirect_uri:f(url)};var r=f(i.url);switch(i.method){case"feed":e.link=r,e.description=i.title,i.image&&(e.picture=encodeURIComponent(i.image));break;case"share_open_graph":e.action_type="og.shares",e.action_properties=JSON.stringify({object:r,ref:i.axId})}var o=s.appendGetParams(t,e);u(o,null,200)}};if(o.is_android&&o.app_version.isGreaterThanOrEqualTo("1.10.0"))a();else if(o.is_android)try{Android.shareFacebook(i.url)}catch(t){l()}else o.is_ios&&o.app_version.isGreaterThanOrEqualTo("0.9.2")?a():l()})},c.twitter=function(e){e.on("click",function(t){t.preventDefault();var n=e.data(),i={text:encodeURIComponent(n.title)};n.url&&(i.url=f(n.url)),n.via&&(i.via="brilliantorg"),u(s.appendGetParams("https://twitter.com/intent/tweet",i))})},c.remind=function(e){e.on("click",function(t){t.preventDefault();var n=e.data(),i=f(n.url),r="https://www.remind.com/v1/share?url="+i+"&referrer="+i+"&text="+encodeURIComponent(n.title);u(r,880,600)})},c.pinterest=function(e){e.on("click",function(t){t.preventDefault();var n=e.data(),i="https://pinterest.com/pin/create/button/?url="+f(n.url)+"&media="+encodeURIComponent(n.media)+"&description="+encodeURIComponent(n.title)+" | via Brilliant.org";u(i,750,320)})},c.whatsapp=function(e){navigator.userAgent.match(/iPhone/i)&&!navigator.userAgent.match(/iPod/i)?e.removeClass("disabled"):(e.parent().addClass("whatsapp-removed"),e.remove())},c.nativeEmail=function(e){e.on("click",function(t){t.preventDefault(),window.location=s.appendGetParams(e.attr("href").replace("mailto:","share://email"),{elementId:e.data("ax-id")})})},c.likeUsModal=function(){var e=this,t="dont_show_like_us_modal",n=1e4;return e.show=function(t,n){n=n||0,t.find(".close").on("click",function(){e.hide(t),l.track("ui",{element_id:"like_slide_in_dismissed"})}),window.fb_auth_status(function(n,r){n&&FB.Event.subscribe("edge.create",function(n,r){i.contains(t[0],r)&&(e.hide(t),l.track("ui",{element_id:"like_slide_in_liked"}))})}),setTimeout(function(){i.id("solv-public-form").hasClass("open")||(t.show(),setTimeout(function(){t.addClass("visible")},1),l.track("ui",{element_id:"like_slide_in_shown"}))},n)},e.hide=function(e){r.set(t,!0),o.user_is_authenticated&&a.update(t,!0),e.removeClass("visible"),setTimeout(function(){e.hide()},600)},e.loggedIn=function(i){l.track("ui",{element_id:"like_slide_in_hidden"}),!0!==r.get(t)?window.fb_auth_status(function(t,r){t&&FB.api("/me/likes/542971019063265",function(t){0===t.data.length&&e.show(i,n)})}):a.update(t,!0)},e.loggedOut=function(o){!0!==r.get(t)&&0===i.id("loggedout-wiki-footer")&&e.show(o,n)},e}(),-1!==window.location.href.indexOf("fb_close_window")&&window.self.close(),t.exports=c},{jquery:"jquery","lib/wafer":"lib/wafer","util/analytics":"util/analytics","util/flags":"util/flags","util/global":"util/global","util/urls":"util/urls"}]},{},[181]);
//# sourceMappingURL=brilliant_core.js.map
